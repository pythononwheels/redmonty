{"APPEND": {"category": "string", "help_link": "/commands/append", "args": ["key", "value"], "summary": "Append a value to a key", "name": "APPEND", "help_text": "<div class=\"article-main\">\n<div class=\"metadata\">\n<p><strong>Available since 2.0.0.</strong></p>\n<p><strong>Time complexity:</strong> O(1). The amortized time complexity is O(1) assuming the appended value is small and the already present value is of any size, since the dynamic string library used by Redis will double the free space available on every reallocation.</p>\n</div>\n<p>If <code>key</code> already exists and is a string, this command appends the <code>value</code> at the\n              end of the string.\n              If <code>key</code> does not exist it is created and set as an empty string, so <a href=\"/commands/append\">APPEND</a>\n              will be similar to <a href=\"/commands/set\">SET</a> in this special case.</p>\n<span class=\"anchor\" id=\"return-value\"></span><h2><a class=\"anchor-link\" href=\"#return-value\">*</a>Return value</h2>\n<p><a href=\"/topics/protocol#integer-reply\">Integer reply</a>: the length of the string after the append operation.</p>\n<span class=\"anchor\" id=\"examples\"></span><h2><a class=\"anchor-link\" href=\"#examples\">*</a>Examples</h2>\n<div class=\"example\" data-session=\"b9750379b795be3b3d019e606ffc5876\">\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">EXISTS mykey</span>\n<pre>(integer) 0</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">APPEND mykey \"Hello\"</span>\n<pre>(integer) 5</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">APPEND mykey \" World\"</span>\n<pre>(integer) 11</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">GET mykey</span>\n<pre>\"Hello World\"</pre><form>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<input autocomplete=\"off\" name=\"command\" spellcheck=\"false\" type=\"text\"/>\n</form></div>\n<span class=\"anchor\" id=\"pattern-time-series\"></span><h2><a class=\"anchor-link\" href=\"#pattern-time-series\">*</a>Pattern: Time series</h2>\n<p>The <a href=\"/commands/append\">APPEND</a> command can be used to create a very compact representation of a\n              list of fixed-size samples, usually referred as <em>time series</em>.\n              Every time a new sample arrives we can store it using the command</p>\n<pre><code>APPEND timeseries \"fixed-size sample\"\n</code></pre>\n<p>Accessing individual elements in the time series is not hard:</p>\n<ul>\n<li><a href=\"/commands/strlen\">STRLEN</a> can be used in order to obtain the number of samples.</li>\n<li><a href=\"/commands/getrange\">GETRANGE</a> allows for random access of elements.\n              If our time series have associated time information we can easily implement\n              a binary search to get range combining <a href=\"/commands/getrange\">GETRANGE</a> with the Lua scripting\n              engine available in Redis 2.6.</li>\n<li><a href=\"/commands/setrange\">SETRANGE</a> can be used to overwrite an existing time series.</li>\n</ul>\n<p>The limitation of this pattern is that we are forced into an append-only mode\n              of operation, there is no way to cut the time series to a given size easily\n              because Redis currently lacks a command able to trim string objects.\n              However the space efficiency of time series stored in this way is remarkable.</p>\n<p>Hint: it is possible to switch to a different key based on the current Unix\n              time, in this way it is possible to have just a relatively small amount of\n              samples per key, to avoid dealing with very big keys, and to make this pattern\n              more friendly to be distributed across many Redis instances.</p>\n<p>An example sampling the temperature of a sensor using fixed-size strings (using\n              a binary format is better in real implementations).</p>\n<div class=\"example\" data-session=\"b9750379b795be3b3d019e606ffc5876\">\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">APPEND ts \"0043\"</span>\n<pre>(integer) 4</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">APPEND ts \"0035\"</span>\n<pre>(integer) 8</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">GETRANGE ts 0 3</span>\n<pre>\"0043\"</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">GETRANGE ts 4 7</span>\n<pre>\"0035\"</pre><form>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<input autocomplete=\"off\" name=\"command\" spellcheck=\"false\" type=\"text\"/>\n</form></div>\n</div>"}, "AUTH": {"category": "connection", "help_link": "/commands/auth", "args": ["password"], "summary": "Authenticate to the server", "name": "AUTH", "help_text": "<div class=\"article-main\">\n<div class=\"metadata\">\n<p><strong>Available since 1.0.0.</strong></p>\n</div>\n<p>Request for authentication in a password-protected Redis server.\n              Redis can be instructed to require a password before allowing clients to execute\n              commands.\n              This is done using the <code>requirepass</code> directive in the configuration file.</p>\n<p>If <code>password</code> matches the password in the configuration file, the server replies\n              with the <code>OK</code> status code and starts accepting commands.\n              Otherwise, an error is returned and the clients needs to try a new password.</p>\n<p><strong>Note</strong>: because of the high performance nature of Redis, it is possible to try\n              a lot of passwords in parallel in very short time, so make sure to generate a\n              strong and very long password so that this attack is infeasible.</p>\n<span class=\"anchor\" id=\"return-value\"></span><h2><a class=\"anchor-link\" href=\"#return-value\">*</a>Return value</h2>\n<p><a href=\"/topics/protocol#simple-string-reply\">Simple string reply</a></p>\n</div>"}, "BGREWRITEAOF": {"category": "server", "help_link": "/commands/bgrewriteaof", "args": [], "summary": "Asynchronously rewrite the append-only file", "name": "BGREWRITEAOF", "help_text": "<div class=\"article-main\">\n<div class=\"metadata\">\n<p><strong>Available since 1.0.0.</strong></p>\n</div>\n<p>Instruct Redis to start an <a href=\"/topics/persistence#append-only-file\">Append Only File</a> rewrite process.\n              The rewrite will create a small optimized version of the current Append Only\n              File.</p>\n<p>If <a href=\"/commands/bgrewriteaof\">BGREWRITEAOF</a> fails, no data gets lost as the old AOF will be untouched.</p>\n<p>The rewrite will be only triggered by Redis if there is not already a background\n              process doing persistence.</p>\n<p>Specifically:</p>\n<ul>\n<li>If a Redis child is creating a snapshot on disk, the AOF rewrite is <em>scheduled</em> but not started until the saving child producing the RDB file terminates. In this case the <a href=\"/commands/bgrewriteaof\">BGREWRITEAOF</a> will still return an positive status reply, but with an appropriate message.  You can check if an AOF rewrite is scheduled looking at the <a href=\"/commands/info\">INFO</a> command as of Redis 2.6 or successive versions.</li>\n<li>If an AOF rewrite is already in progress the command returns an error and no\n              AOF rewrite will be scheduled for a later time.</li>\n<li>If the AOF rewrite could start, but the attempt at starting it fails (for instance because of an error in creating the child process), an error is returned to the caller.</li>\n</ul>\n<p>Since Redis 2.4 the AOF rewrite is automatically triggered by Redis, however the\n              <a href=\"/commands/bgrewriteaof\">BGREWRITEAOF</a> command can be used to trigger a rewrite at any time.</p>\n<p>Please refer to the <a href=\"/topics/persistence\">persistence documentation</a> for detailed information.</p>\n<span class=\"anchor\" id=\"return-value\"></span><h2><a class=\"anchor-link\" href=\"#return-value\">*</a>Return value</h2>\n<p><a href=\"/topics/protocol#simple-string-reply\">Simple string reply</a>: A simple string reply indicating that the rewriting started or is about to start ASAP, when the call is executed with success.</p>\n<p>The command may reply with an error in certain cases, as documented above.</p>\n</div>"}, "BGSAVE": {"category": "server", "help_link": "/commands/bgsave", "args": [], "summary": "Asynchronously save the dataset to disk", "name": "BGSAVE", "help_text": "<div class=\"article-main\">\n<div class=\"metadata\">\n<p><strong>Available since 1.0.0.</strong></p>\n</div>\n<p>Save the DB in background.\n              The OK code is immediately returned.\n              Redis forks, the parent continues to serve the clients, the child saves the DB\n              on disk then exits.\n              A client may be able to check if the operation succeeded using the <a href=\"/commands/lastsave\">LASTSAVE</a>\n              command.</p>\n<p>Please refer to the <a href=\"/topics/persistence\">persistence documentation</a> for detailed information.</p>\n<span class=\"anchor\" id=\"return-value\"></span><h2><a class=\"anchor-link\" href=\"#return-value\">*</a>Return value</h2>\n<p><a href=\"/topics/protocol#simple-string-reply\">Simple string reply</a></p>\n</div>"}, "BITCOUNT": {"category": "string", "help_link": "/commands/bitcount", "args": ["key", "[start end]"], "summary": "Count set bits in a string", "name": "BITCOUNT", "help_text": "<div class=\"article-main\">\n<div class=\"metadata\">\n<p><strong>Available since 2.6.0.</strong></p>\n<p><strong>Time complexity:</strong> O(N)</p>\n</div>\n<p>Count the number of set bits (population counting) in a string.</p>\n<p>By default all the bytes contained in the string are examined.\n              It is possible to specify the counting operation only in an interval passing the\n              additional arguments <em>start</em> and <em>end</em>.</p>\n<p>Like for the <a href=\"/commands/getrange\">GETRANGE</a> command start and end can contain negative values in\n              order to index bytes starting from the end of the string, where -1 is the last\n              byte, -2 is the penultimate, and so forth.</p>\n<p>Non-existent keys are treated as empty strings, so the command will return zero.</p>\n<span class=\"anchor\" id=\"return-value\"></span><h2><a class=\"anchor-link\" href=\"#return-value\">*</a>Return value</h2>\n<p><a href=\"/topics/protocol#integer-reply\">Integer reply</a></p>\n<p>The number of bits set to 1.</p>\n<span class=\"anchor\" id=\"examples\"></span><h2><a class=\"anchor-link\" href=\"#examples\">*</a>Examples</h2>\n<div class=\"example\" data-session=\"1487328b9009c050371d464a8b6261c8\">\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">SET mykey \"foobar\"</span>\n<pre>\"OK\"</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">BITCOUNT mykey</span>\n<pre>(integer) 26</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">BITCOUNT mykey 0 0</span>\n<pre>(integer) 4</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">BITCOUNT mykey 1 1</span>\n<pre>(integer) 6</pre><form>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<input autocomplete=\"off\" name=\"command\" spellcheck=\"false\" type=\"text\"/>\n</form></div>\n<span class=\"anchor\" id=\"pattern-real-time-metrics-using-bitmaps\"></span><h2><a class=\"anchor-link\" href=\"#pattern-real-time-metrics-using-bitmaps\">*</a>Pattern: real-time metrics using bitmaps</h2>\n<p>Bitmaps are a very space-efficient representation of certain kinds of\n              information.\n              One example is a Web application that needs the history of user visits, so that\n              for instance it is possible to determine what users are good targets of beta\n              features.</p>\n<p>Using the <a href=\"/commands/setbit\">SETBIT</a> command this is trivial to accomplish, identifying every day\n              with a small progressive integer.\n              For instance day 0 is the first day the application was put online, day 1 the\n              next day, and so forth.</p>\n<p>Every time a user performs a page view, the application can register that in\n              the current day the user visited the web site using the <a href=\"/commands/setbit\">SETBIT</a> command setting\n              the bit corresponding to the current day.</p>\n<p>Later it will be trivial to know the number of single days the user visited the\n              web site simply calling the <a href=\"/commands/bitcount\">BITCOUNT</a> command against the bitmap.</p>\n<p>A similar pattern where user IDs are used instead of days is described\n              in the article called \"<a href=\"http://blog.getspool.com/2011/11/29/fast-easy-realtime-metrics-using-redis-bitmaps\">Fast easy realtime metrics using Redis\n              bitmaps</a>\".</p>\n<span class=\"anchor\" id=\"performance-considerations\"></span><h2><a class=\"anchor-link\" href=\"#performance-considerations\">*</a>Performance considerations</h2>\n<p>In the above example of counting days, even after 10 years the application is\n              online we still have just <code>365*10</code> bits of data per user, that is just 456 bytes\n              per user.\n              With this amount of data <a href=\"/commands/bitcount\">BITCOUNT</a> is still as fast as any other <span class=\"math\">O(1) </span>Redis\n              command like <a href=\"/commands/get\">GET</a> or <a href=\"/commands/incr\">INCR</a>.</p>\n<p>When the bitmap is big, there are two alternatives:</p>\n<ul>\n<li>Taking a separated key that is incremented every time the bitmap is modified.\n              This can be very efficient and atomic using a small Redis Lua script.</li>\n<li>Running the bitmap incrementally using the <a href=\"/commands/bitcount\">BITCOUNT</a> <em>start</em> and <em>end</em>\n              optional parameters, accumulating the results client-side, and optionally\n              caching the result into a key.</li>\n</ul>\n</div>"}, "BITFIELD": {"category": "string", "help_link": "/commands/bitfield", "args": ["key", "[GET type offset]", "[SET type offset value]", "[INCRBY type offset increment]", "[OVERFLOW WRAP|SAT|FAIL]"], "summary": "Perform arbitrary bitfield integer operations on strings", "name": "BITFIELD", "help_text": "<div class=\"article-main\">\n<div class=\"metadata\">\n<p><strong>Available since 3.2.0.</strong></p>\n<p><strong>Time complexity:</strong> O(1) for each subcommand specified</p>\n</div>\n<p>The command treats a Redis string as a array of bits, and is capable of addressing specific integer fields of varying bit widths and arbitrary non (necessary) aligned offset. In practical terms using this command you can set, for example, a signed 5 bits integer at bit offset 1234 to a specific value, retrieve a 31 bit unsigned integer from offset 4567. Similarly the command handles increments and decrements of the specified integers, providing guaranteed and well specified overflow and underflow behavior that the user can configure.</p>\n<p><a href=\"/commands/bitfield\">BITFIELD</a> is able to operate with multiple bit fields in the same command call. It takes a list of operations to perform, and returns an array of replies, where each array matches the corresponding operation in the list of arguments.</p>\n<p>For example the following command increments an 5 bit signed integer at bit offset 100, and gets the value of the 4 bit unsigned integer at bit offset 0:</p>\n<pre><code>&gt; BITFIELD mykey INCRBY i5 100 1 GET u4 0\n1) (integer) 1\n2) (integer) 0\n</code></pre>\n<p>Note that:</p>\n<ol>\n<li>Addressing with <a href=\"/commands/get\">GET</a> bits outside the current string length (including the case the key does not exist at all), results in the operation to be performed like the missing part all consists of bits set to 0.</li>\n<li>Addressing with <a href=\"/commands/set\">SET</a> or <a href=\"/commands/incrby\">INCRBY</a> bits outside the current string length will enlarge the string, zero-padding it, as needed, for the minimal length needed, according to the most far bit touched.</li>\n</ol>\n<span class=\"anchor\" id=\"supported-subcommands-and-integer-types\"></span><h2><a class=\"anchor-link\" href=\"#supported-subcommands-and-integer-types\">*</a>Supported subcommands and integer types</h2>\n<p>The following is the list of supported commands.</p>\n<ul>\n<li><strong>GET</strong> <code>&lt;type&gt;</code> <code>&lt;offset&gt;</code> -- Returns the specified bit field.</li>\n<li><strong>SET</strong> <code>&lt;type&gt;</code> <code>&lt;offset&gt;</code> <code>&lt;value&gt;</code> -- Set the specified bit field and returns its old value.</li>\n<li><strong>INCRBY</strong> <code>&lt;type&gt;</code> <code>&lt;offset&gt;</code> <code>&lt;increment&gt;</code> -- Increments or decrements (if a negative increment is given) the specified bit field and returns the new value.</li>\n</ul>\n<p>There is another subcommand that only changes the behavior of successive\n              <a href=\"/commands/incrby\">INCRBY</a> subcommand calls by setting the overflow behavior:</p>\n<ul>\n<li><strong>OVERFLOW</strong> <code>[WRAP|SAT|FAIL]</code></li>\n</ul>\n<p>Where an integer type is expected, it can be composed by prefixing with <code>i</code> for signed integers and <code>u</code> for unsigned integers with the number of bits of our integer type. So for example <code>u8</code> is an unsigned integer of 8 bits and <code>i16</code> is a\n              signed integer of 16 bits.</p>\n<p>The supported types are up to 64 bits for signed integers, and up to 63 bits for\n              unsigned integers. This limitation with unsigned integers is due to the fact\n              that currently the Redis protocol is unable to return 64 bit unsigned integers\n              as replies.</p>\n<span class=\"anchor\" id=\"bits-and-positional-offsets\"></span><h2><a class=\"anchor-link\" href=\"#bits-and-positional-offsets\">*</a>Bits and positional offsets</h2>\n<p>There are two ways in order to specify offsets in the bitfield command.\n              If a number without any prefix is specified, it is used just as a zero based\n              bit offset inside the string.</p>\n<p>However if the offset is prefixed with a <code>#</code> character, the specified offset\n              is multiplied by the integer type width, so for example:</p>\n<pre><code>BITFIELD mystring SET i8 #0 100 i8 #1 200\n</code></pre>\n<p>Will set the first i8 integer at offset 0 and the second at offset 8.\n              This way you don't have to do the math yourself inside your client if what\n              you want is a plain array of integers of a given size.</p>\n<span class=\"anchor\" id=\"overflow-control\"></span><h2><a class=\"anchor-link\" href=\"#overflow-control\">*</a>Overflow control</h2>\n<p>Using the <code>OVERFLOW</code> command the user is able to fine-tune the behavior of\n              the increment or decrement overflow (or underflow) by specifying one of\n              the following behaviors:</p>\n<ul>\n<li><strong>WRAP</strong>: wrap around, both with signed and unsigned integers. In the case of unsigned integers, wrapping is like performing the operation modulo the maximum value the integer can contain (the C standard behavior). With signed integers instead wrapping means that overflows restart towards the most negative value and underflows towards the most positive ones, so for example if an <code>i8</code> integer is set to the value 127, incrementing it by 1 will yield <code>-128</code>.</li>\n<li><strong>SAT</strong>: uses saturation arithmetic, that is, on underflows the value is set to the minimum integer value, and on overflows to the maximum integer value. For example incrementing an <code>i8</code> integer starting from value 120 with an increment of 10, will result into the value 127, and further increments will always keep the value at 127. The same happens on underflows, but towards the value is blocked at the most negative value.</li>\n<li><strong>FAIL</strong>: in this mode no operation is performed on overflows or underflows detected. The corresponding return value is set to NULL to signal the condition to the caller.</li>\n</ul>\n<p>Note that each <code>OVERFLOW</code> statement only affects the <a href=\"/commands/incrby\">INCRBY</a> commands\n              that follow it in the list of subcommands, up to the next <code>OVERFLOW</code>\n              statement.</p>\n<p>By default, <strong>WRAP</strong> is used if not otherwise specified.</p>\n<pre><code>&gt; BITFIELD mykey incrby u2 100 1 OVERFLOW SAT incrby u2 102 1\n1) (integer) 1\n2) (integer) 1\n&gt; BITFIELD mykey incrby u2 100 1 OVERFLOW SAT incrby u2 102 1\n1) (integer) 2\n2) (integer) 2\n&gt; BITFIELD mykey incrby u2 100 1 OVERFLOW SAT incrby u2 102 1\n1) (integer) 3\n2) (integer) 3\n&gt; BITFIELD mykey incrby u2 100 1 OVERFLOW SAT incrby u2 102 1\n1) (integer) 0\n2) (integer) 3\n</code></pre>\n<span class=\"anchor\" id=\"return-value\"></span><h2><a class=\"anchor-link\" href=\"#return-value\">*</a>Return value</h2>\n<p>The command returns an array with each entry being the corresponding result of\n              the sub command given at the same position. <code>OVERFLOW</code> subcommands don't count\n              as generating a reply.</p>\n<p>The following is an example of <code>OVERFLOW FAIL</code> returning NULL.</p>\n<pre><code>&gt; BITFIELD mykey OVERFLOW FAIL incrby u2 102 1\n1) (nil)\n</code></pre>\n<span class=\"anchor\" id=\"motivations\"></span><h2><a class=\"anchor-link\" href=\"#motivations\">*</a>Motivations</h2>\n<p>The motivation for this command is that the ability to store many small integers\n              as a single large bitmap (or segmented over a few keys to avoid having huge keys) is extremely memory efficient, and opens new use cases for Redis to be applied, especially in the field of real time analytics. This use cases are supported by the ability to specify the overflow in a controlled way.</p>\n<p>Fun fact: Reddit's 2017 April fools' project <a href=\"https://reddit.com/r/place\">r/place</a> was <a href=\"https://redditblog.com/2017/04/13/how-we-built-rplace/\">built using the Redis BITFIELD command</a> in order to take an in-memory representation of the collaborative canvas.</p>\n<span class=\"anchor\" id=\"performance-considerations\"></span><h2><a class=\"anchor-link\" href=\"#performance-considerations\">*</a>Performance considerations</h2>\n<p>Usually <a href=\"/commands/bitfield\">BITFIELD</a> is a fast command, however note that addressing far bits of currently short strings will trigger an allocation that may be more costly than executing the command on bits already existing.</p>\n<span class=\"anchor\" id=\"orders-of-bits\"></span><h2><a class=\"anchor-link\" href=\"#orders-of-bits\">*</a>Orders of bits</h2>\n<p>The representation used by <a href=\"/commands/bitfield\">BITFIELD</a> considers the bitmap as having the\n              bit number 0 to be the most significant bit of the first byte, and so forth, so\n              for example setting a 5 bits unsigned integer to value 23 at offset 7 into a\n              bitmap previously set to all zeroes, will produce the following representation:</p>\n<pre><code>+--------+--------+\n|00000001|01110000|\n+--------+--------+\n</code></pre>\n<p>When offsets and integer sizes are aligned to bytes boundaries, this is the\n              same as big endian, however when such alignment does not exist, its important\n              to also understand how the bits inside a byte are ordered.</p>\n</div>"}, "BITOP": {"category": "string", "help_link": "/commands/bitop", "args": ["operation", "destkey", "key [key ...]"], "summary": "Perform bitwise operations between strings", "name": "BITOP", "help_text": "<div class=\"article-main\">\n<div class=\"metadata\">\n<p><strong>Available since 2.6.0.</strong></p>\n<p><strong>Time complexity:</strong> O(N)</p>\n</div>\n<p>Perform a bitwise operation between multiple keys (containing string values) and\n              store the result in the destination key.</p>\n<p>The <a href=\"/commands/bitop\">BITOP</a> command supports four bitwise operations: <strong>AND</strong>, <strong>OR</strong>, <strong>XOR</strong>\n              and <strong>NOT</strong>, thus the valid forms to call the command are:</p>\n<ul>\n<li><code>BITOP AND destkey srckey1 srckey2 srckey3 ... srckeyN</code></li>\n<li><code>BITOP OR  destkey srckey1 srckey2 srckey3 ... srckeyN</code></li>\n<li><code>BITOP XOR destkey srckey1 srckey2 srckey3 ... srckeyN</code></li>\n<li><code>BITOP NOT destkey srckey</code></li>\n</ul>\n<p>As you can see <strong>NOT</strong> is special as it only takes an input key, because it\n              performs inversion of bits so it only makes sense as an unary operator.</p>\n<p>The result of the operation is always stored at <code>destkey</code>.</p>\n<span class=\"anchor\" id=\"handling-of-strings-with-different-lengths\"></span><h2><a class=\"anchor-link\" href=\"#handling-of-strings-with-different-lengths\">*</a>Handling of strings with different lengths</h2>\n<p>When an operation is performed between strings having different lengths, all the\n              strings shorter than the longest string in the set are treated as if they were\n              zero-padded up to the length of the longest string.</p>\n<p>The same holds true for non-existent keys, that are considered as a stream of\n              zero bytes up to the length of the longest string.</p>\n<span class=\"anchor\" id=\"return-value\"></span><h2><a class=\"anchor-link\" href=\"#return-value\">*</a>Return value</h2>\n<p><a href=\"/topics/protocol#integer-reply\">Integer reply</a></p>\n<p>The size of the string stored in the destination key, that is equal to the\n              size of the longest input string.</p>\n<span class=\"anchor\" id=\"examples\"></span><h2><a class=\"anchor-link\" href=\"#examples\">*</a>Examples</h2>\n<div class=\"example\" data-session=\"03dbc8164dd9396ab13a56500ab04cfe\">\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">SET key1 \"foobar\"</span>\n<pre>\"OK\"</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">SET key2 \"abcdef\"</span>\n<pre>\"OK\"</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">BITOP AND dest key1 key2</span>\n<pre>(integer) 6</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">GET dest</span>\n<pre>\"`bc`ab\"</pre><form>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<input autocomplete=\"off\" name=\"command\" spellcheck=\"false\" type=\"text\"/>\n</form></div>\n<span class=\"anchor\" id=\"pattern-real-time-metrics-using-bitmaps\"></span><h2><a class=\"anchor-link\" href=\"#pattern-real-time-metrics-using-bitmaps\">*</a>Pattern: real time metrics using bitmaps</h2>\n<p><a href=\"/commands/bitop\">BITOP</a> is a good complement to the pattern documented in the <a href=\"/commands/bitcount\">BITCOUNT</a> command\n              documentation.\n              Different bitmaps can be combined in order to obtain a target bitmap where\n              the population counting operation is performed.</p>\n<p>See the article called \"<a href=\"http://blog.getspool.com/2011/11/29/fast-easy-realtime-metrics-using-redis-bitmaps\">Fast easy realtime metrics using Redis\n              bitmaps</a>\" for a interesting use cases.</p>\n<span class=\"anchor\" id=\"performance-considerations\"></span><h2><a class=\"anchor-link\" href=\"#performance-considerations\">*</a>Performance considerations</h2>\n<p><a href=\"/commands/bitop\">BITOP</a> is a potentially slow command as it runs in <span class=\"math\">O(N) </span>time.\n              Care should be taken when running it against long input strings.</p>\n<p>For real-time metrics and statistics involving large inputs a good approach is\n              to use a replica (with read-only option disabled) where the bit-wise\n              operations are performed to avoid blocking the master instance.</p>\n</div>"}, "BITPOS": {"category": "string", "help_link": "/commands/bitpos", "args": ["key", "bit", "[start]", "[end]"], "summary": "Find first bit set or clear in a string", "name": "BITPOS", "help_text": "<div class=\"article-main\">\n<div class=\"metadata\">\n<p><strong>Available since 2.8.7.</strong></p>\n<p><strong>Time complexity:</strong> O(N)</p>\n</div>\n<p>Return the position of the first bit set to 1 or 0 in a string.</p>\n<p>The position is returned, thinking of the string as an array of bits from left to\n              right, where the first byte's most significant bit is at position 0, the second\n              byte's most significant bit is at position 8, and so forth.</p>\n<p>The same bit position convention is followed by <a href=\"/commands/getbit\">GETBIT</a> and <a href=\"/commands/setbit\">SETBIT</a>.</p>\n<p>By default, all the bytes contained in the string are examined.\n              It is possible to look for bits only in a specified interval passing the additional arguments <em>start</em> and <em>end</em> (it is possible to just pass <em>start</em>, the operation will assume that the end is the last byte of the string. However there are semantic differences as explained later). The range is interpreted as a range of bytes and not a range of bits, so <code>start=0</code> and <code>end=2</code> means to look at the first three bytes.</p>\n<p>Note that bit positions are returned always as absolute values starting from bit zero even when <em>start</em> and <em>end</em> are used to specify a range.</p>\n<p>Like for the <a href=\"/commands/getrange\">GETRANGE</a> command start and end can contain negative values in\n              order to index bytes starting from the end of the string, where -1 is the last\n              byte, -2 is the penultimate, and so forth.</p>\n<p>Non-existent keys are treated as empty strings.</p>\n<span class=\"anchor\" id=\"return-value\"></span><h2><a class=\"anchor-link\" href=\"#return-value\">*</a>Return value</h2>\n<p><a href=\"/topics/protocol#integer-reply\">Integer reply</a></p>\n<p>The command returns the position of the first bit set to 1 or 0 according to the request.</p>\n<p>If we look for set bits (the bit argument is 1) and the string is empty or composed of just zero bytes, -1 is returned.</p>\n<p>If we look for clear bits (the bit argument is 0) and the string only contains bit set to 1, the function returns the first bit not part of the string on the right. So if the string is three bytes set to the value <code>0xff</code> the command <code>BITPOS key 0</code> will return 24, since up to bit 23 all the bits are 1.</p>\n<p>Basically, the function considers the right of the string as padded with zeros if you look for clear bits and specify no range or the <em>start</em> argument <strong>only</strong>.</p>\n<p>However, this behavior changes if you are looking for clear bits and specify a range with both <strong>start</strong> and <strong>end</strong>. If no clear bit is found in the specified range, the function returns -1 as the user specified a clear range and there are no 0 bits in that range.</p>\n<span class=\"anchor\" id=\"examples\"></span><h2><a class=\"anchor-link\" href=\"#examples\">*</a>Examples</h2>\n<div class=\"example\" data-session=\"18b678c5352fc0186a7f30039378ace9\">\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">SET mykey \"\\xff\\xf0\\x00\"</span>\n<pre>\"OK\"</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">BITPOS mykey 0</span>\n<pre>(integer) 12</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">SET mykey \"\\x00\\xff\\xf0\"</span>\n<pre>\"OK\"</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">BITPOS mykey 1 0</span>\n<pre>(integer) 8</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">BITPOS mykey 1 2</span>\n<pre>(integer) 16</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">set mykey \"\\x00\\x00\\x00\"</span>\n<pre>\"OK\"</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">BITPOS mykey 1</span>\n<pre>(integer) -1</pre><form>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<input autocomplete=\"off\" name=\"command\" spellcheck=\"false\" type=\"text\"/>\n</form></div>\n</div>"}, "BLPOP": {"category": "list", "help_link": "/commands/blpop", "args": ["key [key ...]", "timeout"], "summary": "Remove and get the first element in a list, or block until one is available", "name": "BLPOP", "help_text": "<div class=\"article-main\">\n<div class=\"metadata\">\n<p><strong>Available since 2.0.0.</strong></p>\n<p><strong>Time complexity:</strong> O(1)</p>\n</div>\n<p><a href=\"/commands/blpop\">BLPOP</a> is a blocking list pop primitive.\n              It is the blocking version of <a href=\"/commands/lpop\">LPOP</a> because it blocks the connection when there\n              are no elements to pop from any of the given lists.\n              An element is popped from the head of the first list that is non-empty, with the\n              given keys being checked in the order that they are given.</p>\n<span class=\"anchor\" id=\"non-blocking-behavior\"></span><h2><a class=\"anchor-link\" href=\"#non-blocking-behavior\">*</a>Non-blocking behavior</h2>\n<p>When <a href=\"/commands/blpop\">BLPOP</a> is called, if at least one of the specified keys contains a\n              non-empty list, an element is popped from the head of the list and returned to\n              the caller together with the <code>key</code> it was popped from.</p>\n<p>Keys are checked in the order that they are given.\n              Let's say that the key <code>list1</code> doesn't exist and <code>list2</code> and <code>list3</code> hold\n              non-empty lists.\n              Consider the following command:</p>\n<pre><code>BLPOP list1 list2 list3 0\n</code></pre>\n<p><a href=\"/commands/blpop\">BLPOP</a> guarantees to return an element from the list stored at <code>list2</code> (since\n              it is the first non empty list when checking <code>list1</code>, <code>list2</code> and <code>list3</code> in\n              that order).</p>\n<span class=\"anchor\" id=\"blocking-behavior\"></span><h2><a class=\"anchor-link\" href=\"#blocking-behavior\">*</a>Blocking behavior</h2>\n<p>If none of the specified keys exist, <a href=\"/commands/blpop\">BLPOP</a> blocks the connection until another\n              client performs an <a href=\"/commands/lpush\">LPUSH</a> or <a href=\"/commands/rpush\">RPUSH</a> operation against one of the keys.</p>\n<p>Once new data is present on one of the lists, the client returns with the name\n              of the key unblocking it and the popped value.</p>\n<p>When <a href=\"/commands/blpop\">BLPOP</a> causes a client to block and a non-zero timeout is specified,\n              the client will unblock returning a <code>nil</code> multi-bulk value when the specified\n              timeout has expired without a push operation against at least one of the\n              specified keys.</p>\n<p><strong>The timeout argument is interpreted as an integer value specifying the maximum number of seconds to block</strong>. A timeout of zero can be used to block indefinitely.</p>\n<span class=\"anchor\" id=\"what-key-is-served-first-what-client-what-element-priority-ordering-details\"></span><h2><a class=\"anchor-link\" href=\"#what-key-is-served-first-what-client-what-element-priority-ordering-details\">*</a>What key is served first? What client? What element? Priority ordering details.</h2>\n<ul>\n<li>If the client tries to blocks for multiple keys, but at least one key contains elements, the returned key / element pair is the first key from left to right that has one or more elements. In this case the client is not blocked. So for instance <code>BLPOP key1 key2 key3 key4 0</code>, assuming that both <code>key2</code> and <code>key4</code> are non-empty, will always return an element from <code>key2</code>.</li>\n<li>If multiple clients are blocked for the same key, the first client to be served is the one that was waiting for more time (the first that blocked for the key). Once a client is unblocked it does not retain any priority, when it blocks again with the next call to <a href=\"/commands/blpop\">BLPOP</a> it will be served accordingly to the number of clients already blocked for the same key, that will all be served before it (from the first to the last that blocked).</li>\n<li>When a client is blocking for multiple keys at the same time, and elements are available at the same time in multiple keys (because of a transaction or a Lua script added elements to multiple lists), the client will be unblocked using the first key that received a push operation (assuming it has enough elements to serve our client, as there may be other clients as well waiting for this key). Basically after the execution of every command Redis will run a list of all the keys that received data AND that have at least a client blocked. The list is ordered by new element arrival time, from the first key that received data to the last. For every key processed, Redis will serve all the clients waiting for that key in a FIFO fashion, as long as there are elements in this key. When the key is empty or there are no longer clients waiting for this key, the next key that received new data in the previous command / transaction / script is processed, and so forth.</li>\n</ul>\n<span class=\"anchor\" id=\"behavior-of-codeblpopcode-when-multiple-elements-are-pushed-inside-a-list\"></span><h2><a class=\"anchor-link\" href=\"#behavior-of-codeblpopcode-when-multiple-elements-are-pushed-inside-a-list\">*</a>Behavior of <code>BLPOP</code> when multiple elements are pushed inside a list.</h2>\n<p>There are times when a list can receive multiple elements in the context of the same conceptual command:</p>\n<ul>\n<li>Variadic push operations such as <code>LPUSH mylist a b c</code>.</li>\n<li>After an <a href=\"/commands/exec\">EXEC</a> of a <a href=\"/commands/multi\">MULTI</a> block with multiple push operations against the same list.</li>\n<li>Executing a Lua Script with Redis 2.6 or newer.</li>\n</ul>\n<p>When multiple elements are pushed inside a list where there are clients blocking, the behavior is different for Redis 2.4 and Redis 2.6 or newer.</p>\n<p>For Redis 2.6 what happens is that the command performing multiple pushes is executed, and <em>only after</em> the execution of the command the blocked clients are served. Consider this sequence of commands.</p>\n<pre><code>Client A:   BLPOP foo 0\nClient B:   LPUSH foo a b c\n</code></pre>\n<p>If the above condition happens using a Redis 2.6 server or greater, Client <strong>A</strong> will be served with the <code>c</code> element, because after the <a href=\"/commands/lpush\">LPUSH</a> command the list contains <code>c,b,a</code>, so taking an element from the left means to return <code>c</code>.</p>\n<p>Instead Redis 2.4 works in a different way: clients are served <em>in the context</em> of the push operation, so as long as <code>LPUSH foo a b c</code> starts pushing the first element to the list, it will be delivered to the Client <strong>A</strong>, that will receive <code>a</code> (the first element pushed).</p>\n<p>The behavior of Redis 2.4 creates a lot of problems when replicating or persisting data into the AOF file, so the much more generic and semantically simpler behavior was introduced into Redis 2.6 to prevent problems.</p>\n<p>Note that for the same reason a Lua script or a <code>MULTI/EXEC</code> block may push elements into a list and afterward <strong>delete the list</strong>. In this case the blocked clients will not be served at all and will continue to be blocked as long as no data is present on the list after the execution of a single command, transaction, or script.</p>\n<span class=\"anchor\" id=\"codeblpopcode-inside-a-codemulticode--codeexeccode-transaction\"></span><h2><a class=\"anchor-link\" href=\"#codeblpopcode-inside-a-codemulticode--codeexeccode-transaction\">*</a><code>BLPOP</code> inside a <code>MULTI</code> / <code>EXEC</code> transaction</h2>\n<p><a href=\"/commands/blpop\">BLPOP</a> can be used with pipelining (sending multiple commands and\n              reading the replies in batch), however this setup makes sense almost solely\n              when it is the last command of the pipeline.</p>\n<p>Using <a href=\"/commands/blpop\">BLPOP</a> inside a <a href=\"/commands/multi\">MULTI</a> / <a href=\"/commands/exec\">EXEC</a> block does not make a lot of sense\n              as it would require blocking the entire server in order to execute the block\n              atomically, which in turn does not allow other clients to perform a push\n              operation. For this reason the behavior of <a href=\"/commands/blpop\">BLPOP</a> inside <a href=\"/commands/multi\">MULTI</a> / <a href=\"/commands/exec\">EXEC</a> when the list is empty is to return a <code>nil</code> multi-bulk reply, which is the same\n              thing that happens when the timeout is reached.</p>\n<p>If you like science fiction, think of time flowing at infinite speed inside a\n              <a href=\"/commands/multi\">MULTI</a> / <a href=\"/commands/exec\">EXEC</a> block...</p>\n<span class=\"anchor\" id=\"return-value\"></span><h2><a class=\"anchor-link\" href=\"#return-value\">*</a>Return value</h2>\n<p><a href=\"/topics/protocol#array-reply\">Array reply</a>: specifically:</p>\n<ul>\n<li>A <code>nil</code> multi-bulk when no element could be popped and the timeout expired.</li>\n<li>A two-element multi-bulk with the first element being the name of the key\n              where an element was popped and the second element being the value of the\n              popped element.</li>\n</ul>\n<span class=\"anchor\" id=\"examples\"></span><h2><a class=\"anchor-link\" href=\"#examples\">*</a>Examples</h2>\n<pre><code>redis&gt; DEL list1 list2\n(integer) 0\nredis&gt; RPUSH list1 a b c\n(integer) 3\nredis&gt; BLPOP list1 list2 0\n1) \"list1\"\n2) \"a\"\n</code></pre>\n<span class=\"anchor\" id=\"reliable-queues\"></span><h2><a class=\"anchor-link\" href=\"#reliable-queues\">*</a>Reliable queues</h2>\n<p>When <a href=\"/commands/blpop\">BLPOP</a> returns an element to the client, it also removes the element from the list. This means that the element only exists in the context of the client: if the client crashes while processing the returned element, it is lost forever.</p>\n<p>This can be a problem with some application where we want a more reliable messaging system. When this is the case, please check the <a href=\"/commands/brpoplpush\">BRPOPLPUSH</a> command, that is a variant of <a href=\"/commands/blpop\">BLPOP</a> that adds the returned element to a target list before returning it to the client.</p>\n<span class=\"anchor\" id=\"pattern-event-notification\"></span><h2><a class=\"anchor-link\" href=\"#pattern-event-notification\">*</a>Pattern: Event notification</h2>\n<p>Using blocking list operations it is possible to mount different blocking\n              primitives.\n              For instance for some application you may need to block waiting for elements\n              into a Redis Set, so that as far as a new element is added to the Set, it is\n              possible to retrieve it without resort to polling.\n              This would require a blocking version of <a href=\"/commands/spop\">SPOP</a> that is not available, but using\n              blocking list operations we can easily accomplish this task.</p>\n<p>The consumer will do:</p>\n<pre><code>LOOP forever\n    WHILE SPOP(key) returns elements\n        ... process elements ...\n    END\n    BRPOP helper_key\nEND\n</code></pre>\n<p>While in the producer side we'll use simply:</p>\n<pre><code>MULTI\nSADD key element\nLPUSH helper_key x\nEXEC\n</code></pre>\n</div>"}, "BRPOP": {"category": "list", "help_link": "/commands/brpop", "args": ["key [key ...]", "timeout"], "summary": "Remove and get the last element in a list, or block until one is available", "name": "BRPOP", "help_text": "<div class=\"article-main\">\n<div class=\"metadata\">\n<p><strong>Available since 2.0.0.</strong></p>\n<p><strong>Time complexity:</strong> O(1)</p>\n</div>\n<p><a href=\"/commands/brpop\">BRPOP</a> is a blocking list pop primitive.\n              It is the blocking version of <a href=\"/commands/rpop\">RPOP</a> because it blocks the connection when there\n              are no elements to pop from any of the given lists.\n              An element is popped from the tail of the first list that is non-empty, with the\n              given keys being checked in the order that they are given.</p>\n<p>See the <a href=\"/commands/blpop\">BLPOP documentation</a> for the exact semantics, since <a href=\"/commands/brpop\">BRPOP</a> is\n              identical to <a href=\"/commands/blpop\">BLPOP</a> with the only difference being that it pops elements from\n              the tail of a list instead of popping from the head.</p>\n<span class=\"anchor\" id=\"return-value\"></span><h2><a class=\"anchor-link\" href=\"#return-value\">*</a>Return value</h2>\n<p><a href=\"/topics/protocol#array-reply\">Array reply</a>: specifically:</p>\n<ul>\n<li>A <code>nil</code> multi-bulk when no element could be popped and the timeout expired.</li>\n<li>A two-element multi-bulk with the first element being the name of the key\n              where an element was popped and the second element being the value of the\n              popped element.</li>\n</ul>\n<span class=\"anchor\" id=\"examples\"></span><h2><a class=\"anchor-link\" href=\"#examples\">*</a>Examples</h2>\n<pre><code>redis&gt; DEL list1 list2\n(integer) 0\nredis&gt; RPUSH list1 a b c\n(integer) 3\nredis&gt; BRPOP list1 list2 0\n1) \"list1\"\n2) \"c\"\n</code></pre>\n</div>"}, "BRPOPLPUSH": {"category": "list", "help_link": "/commands/brpoplpush", "args": ["source", "destination", "timeout"], "summary": "Pop an element from a list, push it to another list and return it; or block until one is available", "name": "BRPOPLPUSH", "help_text": "<div class=\"article-main\">\n<div class=\"metadata\">\n<p><strong>Available since 2.2.0.</strong></p>\n<p><strong>Time complexity:</strong> O(1)</p>\n</div>\n<p><a href=\"/commands/brpoplpush\">BRPOPLPUSH</a> is the blocking variant of <a href=\"/commands/rpoplpush\">RPOPLPUSH</a>.\n              When <code>source</code> contains elements, this command behaves exactly like <a href=\"/commands/rpoplpush\">RPOPLPUSH</a>.\n              When used inside a <a href=\"/commands/multi\">MULTI</a>/<a href=\"/commands/exec\">EXEC</a> block, this command behaves exactly like <a href=\"/commands/rpoplpush\">RPOPLPUSH</a>.\n              When <code>source</code> is empty, Redis will block the connection until another client\n              pushes to it or until <code>timeout</code> is reached.\n              A <code>timeout</code> of zero can be used to block indefinitely.</p>\n<p>See <a href=\"/commands/rpoplpush\">RPOPLPUSH</a> for more information.</p>\n<span class=\"anchor\" id=\"return-value\"></span><h2><a class=\"anchor-link\" href=\"#return-value\">*</a>Return value</h2>\n<p><a href=\"/topics/protocol#bulk-string-reply\">Bulk string reply</a>: the element being popped from <code>source</code> and pushed to <code>destination</code>.\n              If <code>timeout</code> is reached, a <a href=\"/topics/protocol#nil-reply\">Null reply</a> is returned.</p>\n<span class=\"anchor\" id=\"pattern-reliable-queue\"></span><h2><a class=\"anchor-link\" href=\"#pattern-reliable-queue\">*</a>Pattern: Reliable queue</h2>\n<p>Please see the pattern description in the <a href=\"/commands/rpoplpush\">RPOPLPUSH</a> documentation.</p>\n<span class=\"anchor\" id=\"pattern-circular-list\"></span><h2><a class=\"anchor-link\" href=\"#pattern-circular-list\">*</a>Pattern: Circular list</h2>\n<p>Please see the pattern description in the <a href=\"/commands/rpoplpush\">RPOPLPUSH</a> documentation.</p>\n</div>"}, "BZPOPMIN": {"category": "sorted_set", "help_link": "/commands/bzpopmin", "args": ["key [key ...]", "timeout"], "summary": "Remove and return the member with the lowest score from one or more sorted sets, or block until one is available", "name": "BZPOPMIN", "help_text": "<div class=\"article-main\">\n<div class=\"metadata\">\n<p><strong>Available since 5.0.0.</strong></p>\n<p><strong>Time complexity:</strong> O(log(N)) with N being the number of elements in the sorted set.</p>\n</div>\n<p><a href=\"/commands/bzpopmin\">BZPOPMIN</a> is the blocking variant of the sorted set <a href=\"/commands/zpopmin\">ZPOPMIN</a> primitive.</p>\n<p>It is the blocking version because it blocks the connection when there are no\n              members to pop from any of the given sorted sets.\n              A member with the lowest score is popped from first sorted set that is\n              non-empty, with the given keys being checked in the order that they are given.</p>\n<p>The <code>timeout</code> argument is interpreted as an integer value specifying the maximum\n              number of seconds to block. A timeout of zero can be used to block indefinitely.</p>\n<p>See the <a href=\"/commands/blpop\">BLPOP documentation</a> for the exact semantics, since <a href=\"/commands/bzpopmin\">BZPOPMIN</a> is\n              identical to <a href=\"/commands/blpop\">BLPOP</a> with the only difference being the data structure being\n              popped from.</p>\n<span class=\"anchor\" id=\"return-value\"></span><h2><a class=\"anchor-link\" href=\"#return-value\">*</a>Return value</h2>\n<p><a href=\"/topics/protocol#array-reply\">Array reply</a>: specifically:</p>\n<ul>\n<li>A <code>nil</code> multi-bulk when no element could be popped and the timeout expired.</li>\n<li>A three-element multi-bulk with the first element being the name of the key\n              where a member was popped, the second element is the popped member itself,\n              and the third element is the score of the popped element.</li>\n</ul>\n<span class=\"anchor\" id=\"examples\"></span><h2><a class=\"anchor-link\" href=\"#examples\">*</a>Examples</h2>\n<pre><code>redis&gt; DEL zset1 zset2\n(integer) 0\nredis&gt; ZADD zset1 0 a 1 b 2 c\n(integer) 3\nredis&gt; BZPOPMIN zset1 zset2 0\n1) \"zset1\"\n2) \"a\"\n3) \"0\"\n</code></pre>\n</div>"}, "BZPOPMAX": {"category": "sorted_set", "help_link": "/commands/bzpopmax", "args": ["key [key ...]", "timeout"], "summary": "Remove and return the member with the highest score from one or more sorted sets, or block until one is available", "name": "BZPOPMAX", "help_text": "<div class=\"article-main\">\n<div class=\"metadata\">\n<p><strong>Available since 5.0.0.</strong></p>\n<p><strong>Time complexity:</strong> O(log(N)) with N being the number of elements in the sorted set.</p>\n</div>\n<p><a href=\"/commands/bzpopmax\">BZPOPMAX</a> is the blocking variant of the sorted set <a href=\"/commands/zpopmax\">ZPOPMAX</a> primitive.</p>\n<p>It is the blocking version because it blocks the connection when there are no\n              members to pop from any of the given sorted sets.\n              A member with the highest score is popped from first sorted set that is\n              non-empty, with the given keys being checked in the order that they are given.</p>\n<p>The <code>timeout</code> argument is interpreted as an integer value specifying the maximum\n              number of seconds to block. A timeout of zero can be used to block indefinitely.</p>\n<p>See the <a href=\"/commands/bzpopmin\">BZPOPMIN documentation</a> for the exact semantics, since <a href=\"/commands/bzpopmax\">BZPOPMAX</a>\n              is identical to <a href=\"/commands/bzpopmin\">BZPOPMIN</a> with the only difference being that it pops members\n              with the highest scores instead of popping the ones with the lowest scores.</p>\n<span class=\"anchor\" id=\"return-value\"></span><h2><a class=\"anchor-link\" href=\"#return-value\">*</a>Return value</h2>\n<p><a href=\"/topics/protocol#array-reply\">Array reply</a>: specifically:</p>\n<ul>\n<li>A <code>nil</code> multi-bulk when no element could be popped and the timeout expired.</li>\n<li>A three-element multi-bulk with the first element being the name of the key\n              where a member was popped, the second element is the popped member itself,\n              and the third element is the score of the popped element.</li>\n</ul>\n<span class=\"anchor\" id=\"examples\"></span><h2><a class=\"anchor-link\" href=\"#examples\">*</a>Examples</h2>\n<pre><code>redis&gt; DEL zset1 zset2\n(integer) 0\nredis&gt; ZADD zset1 0 a 1 b 2 c\n(integer) 3\nredis&gt; BZPOPMAX zset1 zset2 0\n1) \"zset1\"\n2) \"c\"\n3) \"2\"\n</code></pre>\n</div>"}, "CLIENT ID": {"category": "server", "help_link": "/commands/client-id", "args": [], "summary": "Returns the client ID for the current connection", "name": "CLIENT ID", "help_text": "<div class=\"article-main\">\n<div class=\"metadata\">\n<p><strong>Available since 5.0.0.</strong></p>\n<p><strong>Time complexity:</strong> O(1)</p>\n</div>\n<p>The command just returns the ID of the current connection. Every connection\n              ID has certain guarantees:</p>\n<ol>\n<li>It is never repeated, so if <a href=\"/commands/client-id\">CLIENT ID</a> returns the same number, the caller can be sure that the underlying client did not disconnect and reconnect the connection, but it is still the same connection.</li>\n<li>The ID is monotonically incremental. If the ID of a connection is greater than the ID of another connection, it is guaranteed that the second connection was established with the server at a later time.</li>\n</ol>\n<p>This command is especially useful together with <a href=\"/commands/client-unblock\">CLIENT UNBLOCK</a> which was\n              introduced also in Redis 5 together with <a href=\"/commands/client-id\">CLIENT ID</a>. Check the <a href=\"/commands/client-unblock\">CLIENT UNBLOCK</a> command page for a pattern involving the two commands.</p>\n<span class=\"anchor\" id=\"examples\"></span><h2><a class=\"anchor-link\" href=\"#examples\">*</a>Examples</h2>\n<div class=\"example\" data-session=\"43609d144763ab77f81188297d94e7fd\">\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">CLIENT ID</span>\n<pre>ERR Unknown or disabled command 'CLIENT'</pre><form>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<input autocomplete=\"off\" name=\"command\" spellcheck=\"false\" type=\"text\"/>\n</form></div>\n<span class=\"anchor\" id=\"return-value\"></span><h2><a class=\"anchor-link\" href=\"#return-value\">*</a>Return value</h2>\n<p><a href=\"/topics/protocol#integer-reply\">Integer reply</a></p>\n<p>The id of the client.</p>\n</div>"}, "CLIENT KILL": {"category": "server", "help_link": "/commands/client-kill", "args": ["[ip:port]", "[ID client-id]", "[TYPE normal|master|slave|pubsub]", "[ADDR ip:port]", "[SKIPME yes/no]"], "summary": "Kill the connection of a client", "name": "CLIENT KILL", "help_text": "<div class=\"article-main\">\n<div class=\"metadata\">\n<p><strong>Available since 2.4.0.</strong></p>\n<p><strong>Time complexity:</strong> O(N) where N is the number of client connections</p>\n</div>\n<p>The <a href=\"/commands/client-kill\">CLIENT KILL</a> command closes a given client connection. Up to Redis 2.8.11 it was possible to close a connection only by client address, using the following form:</p>\n<pre><code>CLIENT KILL addr:port\n</code></pre>\n<p>The <code>ip:port</code> should match a line returned by the <a href=\"/commands/client-list\">CLIENT LIST</a> command (<code>addr</code> field).</p>\n<p>However starting with Redis 2.8.12 or greater, the command accepts the following\n              form:</p>\n<pre><code>CLIENT KILL &lt;filter&gt; &lt;value&gt; ... ... &lt;filter&gt; &lt;value&gt;\n</code></pre>\n<p>With the new form it is possible to kill clients by different attributes\n              instead of killing just by address. The following filters are available:</p>\n<ul>\n<li><code>CLIENT KILL ADDR ip:port</code>. This is exactly the same as the old three-arguments behavior.</li>\n<li><code>CLIENT KILL ID client-id</code>. Allows to kill a client by its unique <code>ID</code> field, which was introduced in the <a href=\"/commands/client-list\">CLIENT LIST</a> command starting from Redis 2.8.12.</li>\n<li><code>CLIENT KILL TYPE type</code>, where <em>type</em> is one of <code>normal</code>, <code>master</code>, <code>slave</code> and <code>pubsub</code> (the <code>master</code> type is available from v3.2). This closes the connections of <strong>all the clients</strong> in the specified class. Note that clients blocked into the <a href=\"/commands/monitor\">MONITOR</a> command are considered to belong to the <code>normal</code> class.</li>\n<li><code>CLIENT KILL SKIPME yes/no</code>. By default this option is set to <code>yes</code>, that is, the client calling the command will not get killed, however setting this option to <code>no</code> will have the effect of also killing the client calling the command.</li>\n</ul>\n<p><strong>Note: starting with Redis 5 the project is no longer using the slave word. You can use <code>TYPE replica</code> instead, however the old form is still supported for backward compatibility.</strong></p>\n<p>It is possible to provide multiple filters at the same time. The command will handle multiple filters via logical AND. For example:</p>\n<pre><code>CLIENT KILL addr 127.0.0.1:12345 type pubsub\n</code></pre>\n<p>is valid and will kill only a pubsub client with the specified address. This format containing multiple filters is rarely useful currently.</p>\n<p>When the new form is used the command no longer returns <code>OK</code> or an error, but instead the number of killed clients, that may be zero.</p>\n<span class=\"anchor\" id=\"client-kill-and-redis-sentinel\"></span><h2><a class=\"anchor-link\" href=\"#client-kill-and-redis-sentinel\">*</a>CLIENT KILL and Redis Sentinel</h2>\n<p>Recent versions of Redis Sentinel (Redis 2.8.12 or greater) use CLIENT KILL\n              in order to kill clients when an instance is reconfigured, in order to\n              force clients to perform the handshake with one Sentinel again and update\n              its configuration.</p>\n<span class=\"anchor\" id=\"notes\"></span><h2><a class=\"anchor-link\" href=\"#notes\">*</a>Notes</h2>\n<p>Due to the single-threaded nature of Redis, it is not possible to\n              kill a client connection while it is executing a command. From\n              the client point of view, the connection can never be closed\n              in the middle of the execution of a command. However, the client\n              will notice the connection has been closed only when the\n              next command is sent (and results in network error).</p>\n<span class=\"anchor\" id=\"return-value\"></span><h2><a class=\"anchor-link\" href=\"#return-value\">*</a>Return value</h2>\n<p>When called with the three arguments format:</p>\n<p><a href=\"/topics/protocol#simple-string-reply\">Simple string reply</a>: <code>OK</code> if the connection exists and has been closed</p>\n<p>When called with the filter / value format:</p>\n<p><a href=\"/topics/protocol#integer-reply\">Integer reply</a>: the number of clients killed.</p>\n</div>"}, "CLIENT LIST": {"category": "server", "help_link": "/commands/client-list", "args": ["[TYPE normal|master|replica|pubsub]"], "summary": "Get the list of client connections", "name": "CLIENT LIST", "help_text": "<div class=\"article-main\">\n<div class=\"metadata\">\n<p><strong>Available since 2.4.0.</strong></p>\n<p><strong>Time complexity:</strong> O(N) where N is the number of client connections</p>\n</div>\n<p>The <a href=\"/commands/client-list\">CLIENT LIST</a> command returns information and statistics about the client\n              connections server in a mostly human readable format.</p>\n<p>As of v5.0, the optional <code>TYPE type</code> subcommand can be used to filter the list by clients' type, where <em>type</em> is one of <code>normal</code>, <code>master</code>, <code>replica</code> and <code>pubsub</code>. Note that clients blocked into the <a href=\"/commands/monitor\">MONITOR</a> command are considered to belong to the <code>normal</code> class.</p>\n<span class=\"anchor\" id=\"return-value\"></span><h2><a class=\"anchor-link\" href=\"#return-value\">*</a>Return value</h2>\n<p><a href=\"/topics/protocol#bulk-string-reply\">Bulk string reply</a>: a unique string, formatted as follows:</p>\n<ul>\n<li>One client connection per line (separated by LF)</li>\n<li>Each line is composed of a succession of <code>property=value</code> fields separated\n              by a space character.</li>\n</ul>\n<p>Here is the meaning of the fields:</p>\n<ul>\n<li><code>id</code>: an unique 64-bit client ID (introduced in Redis 2.8.12).</li>\n<li><code>name</code>: the name set by the client with <a href=\"/commands/client-setname\">CLIENT SETNAME</a></li>\n<li><code>addr</code>: address/port of the client</li>\n<li><code>fd</code>: file descriptor corresponding to the socket</li>\n<li><code>age</code>: total duration of the connection in seconds</li>\n<li><code>idle</code>: idle time of the connection in seconds</li>\n<li><code>flags</code>: client flags (see below)</li>\n<li><code>db</code>: current database ID</li>\n<li><code>sub</code>: number of channel subscriptions</li>\n<li><code>psub</code>: number of pattern matching subscriptions</li>\n<li><code>multi</code>: number of commands in a MULTI/EXEC context</li>\n<li><code>qbuf</code>: query buffer length (0 means no query pending)</li>\n<li><code>qbuf-free</code>: free space of the query buffer (0 means the buffer is full)</li>\n<li><code>obl</code>: output buffer length</li>\n<li><code>oll</code>: output list length (replies are queued in this list when the buffer is full)</li>\n<li><code>omem</code>: output buffer memory usage</li>\n<li><code>events</code>: file descriptor events (see below)</li>\n<li><code>cmd</code>: last command played</li>\n</ul>\n<p>The client flags can be a combination of:</p>\n<pre><code>A: connection to be closed ASAP\nb: the client is waiting in a blocking operation\nc: connection to be closed after writing entire reply\nd: a watched keys has been modified - EXEC will fail\ni: the client is waiting for a VM I/O (deprecated)\nM: the client is a master\nN: no specific flag set\nO: the client is a client in MONITOR mode\nP: the client is a Pub/Sub subscriber\nr: the client is in readonly mode against a cluster node\nS: the client is a replica node connection to this instance\nu: the client is unblocked\nU: the client is connected via a Unix domain socket\nx: the client is in a MULTI/EXEC context\n</code></pre>\n<p>The file descriptor events can be:</p>\n<pre><code>r: the client socket is readable (event loop)\nw: the client socket is writable (event loop)\n</code></pre>\n<span class=\"anchor\" id=\"notes\"></span><h2><a class=\"anchor-link\" href=\"#notes\">*</a>Notes</h2>\n<p>New fields are regularly added for debugging purpose. Some could be removed\n              in the future. A version safe Redis client using this command should parse\n              the output accordingly (i.e. handling gracefully missing fields, skipping\n              unknown fields).</p>\n</div>"}, "CLIENT GETNAME": {"category": "server", "help_link": "/commands/client-getname", "args": [], "summary": "Get the current connection name", "name": "CLIENT GETNAME", "help_text": "<div class=\"article-main\">\n<div class=\"metadata\">\n<p><strong>Available since 2.6.9.</strong></p>\n<p><strong>Time complexity:</strong> O(1)</p>\n</div>\n<p>The <a href=\"/commands/client-getname\">CLIENT GETNAME</a> returns the name of the current connection as set by <a href=\"/commands/client-setname\">CLIENT SETNAME</a>. Since every new connection starts without an associated name, if no name was assigned a null bulk reply is returned.</p>\n<span class=\"anchor\" id=\"return-value\"></span><h2><a class=\"anchor-link\" href=\"#return-value\">*</a>Return value</h2>\n<p><a href=\"/topics/protocol#bulk-string-reply\">Bulk string reply</a>: The connection name, or a null bulk reply if no name is set.</p>\n</div>"}, "CLIENT PAUSE": {"category": "server", "help_link": "/commands/client-pause", "args": ["timeout"], "summary": "Stop processing commands from clients for some time", "name": "CLIENT PAUSE", "help_text": "<div class=\"article-main\">\n<div class=\"metadata\">\n<p><strong>Available since 2.9.50.</strong></p>\n<p><strong>Time complexity:</strong> O(1)</p>\n</div>\n<p><a href=\"/commands/client-pause\">CLIENT PAUSE</a> is a connections control command able to suspend all the Redis clients for the specified amount of time (in milliseconds).</p>\n<p>The command performs the following actions:</p>\n<ul>\n<li>It stops processing all the pending commands from normal and pub/sub clients. However interactions with replicas will continue normally.</li>\n<li>However it returns OK to the caller ASAP, so the <a href=\"/commands/client-pause\">CLIENT PAUSE</a> command execution is not paused by itself.</li>\n<li>When the specified amount of time has elapsed, all the clients are unblocked: this will trigger the processing of all the commands accumulated in the query buffer of every client during the pause.</li>\n</ul>\n<p>This command is useful as it makes able to switch clients from a Redis instance to another one in a controlled way. For example during an instance upgrade the system administrator could do the following:</p>\n<ul>\n<li>Pause the clients using <a href=\"/commands/client-pause\">CLIENT PAUSE</a></li>\n<li>Wait a few seconds to make sure the replicas processed the latest replication stream from the master.</li>\n<li>Turn one of the replicas into a master.</li>\n<li>Reconfigure clients to connect with the new master.</li>\n</ul>\n<p>It is possible to send <a href=\"/commands/client-pause\">CLIENT PAUSE</a> in a MULTI/EXEC block together with the <code>INFO replication</code> command in order to get the current master offset at the time the clients are blocked. This way it is possible to wait for a specific offset in the replica side in order to make sure all the replication stream was processed.</p>\n<p>Since Redis 3.2.10 / 4.0.0, this command also prevents keys to be evicted or\n              expired during the time clients are paused. This way the dataset is guaranteed\n              to be static not just from the point of view of clients not being able to write, but also from the point of view of internal operations.</p>\n<span class=\"anchor\" id=\"return-value\"></span><h2><a class=\"anchor-link\" href=\"#return-value\">*</a>Return value</h2>\n<p><a href=\"/topics/protocol#simple-string-reply\">Simple string reply</a>: The command returns OK or an error if the timeout is invalid.</p>\n</div>"}, "CLIENT REPLY": {"category": "server", "help_link": "/commands/client-reply", "args": ["ON|OFF|SKIP"], "summary": "Instruct the server whether to reply to commands", "name": "CLIENT REPLY", "help_text": "<div class=\"article-main\">\n<div class=\"metadata\">\n<p><strong>Available since 3.2.</strong></p>\n<p><strong>Time complexity:</strong> O(1)</p>\n</div>\n<p>Sometimes it can be useful for clients to completely disable replies from the Redis server. For example when the client sends fire and forget commands or performs a mass loading of data, or in caching contexts where new data is streamed constantly. In such contexts to use server time and bandwidth in order to send back replies to clients, which are going to be ignored, is considered wasteful.</p>\n<p>The <a href=\"/commands/client-reply\">CLIENT REPLY</a> command controls whether the server will reply the client's commands. The following modes are available:</p>\n<ul>\n<li><code>ON</code>. This is the default mode in which the server returns a reply to every command.</li>\n<li><code>OFF</code>. In this mode the server will not reply to client commands.</li>\n<li><code>SKIP</code>. This mode skips the reply of command immediately after it.</li>\n</ul>\n<span class=\"anchor\" id=\"return-value\"></span><h2><a class=\"anchor-link\" href=\"#return-value\">*</a>Return value</h2>\n<p>When called with either <code>OFF</code> or <code>SKIP</code> subcommands, no reply is made. When called with <code>ON</code>:</p>\n<p><a href=\"/topics/protocol#simple-string-reply\">Simple string reply</a>: <code>OK</code>.</p>\n</div>"}, "CLIENT SETNAME": {"category": "server", "help_link": "/commands/client-setname", "args": ["connection-name"], "summary": "Set the current connection name", "name": "CLIENT SETNAME", "help_text": "<div class=\"article-main\">\n<div class=\"metadata\">\n<p><strong>Available since 2.6.9.</strong></p>\n<p><strong>Time complexity:</strong> O(1)</p>\n</div>\n<p>The <a href=\"/commands/client-setname\">CLIENT SETNAME</a> command assigns a name to the current connection.</p>\n<p>The assigned name is displayed in the output of <a href=\"/commands/client-list\">CLIENT LIST</a> so that it is possible to identify the client that performed a given connection.</p>\n<p>For instance when Redis is used in order to implement a queue, producers and consumers of messages may want to set the name of the connection according to their role.</p>\n<p>There is no limit to the length of the name that can be assigned if not the usual limits of the Redis string type (512 MB). However it is not possible to use spaces in the connection name as this would violate the format of the <a href=\"/commands/client-list\">CLIENT LIST</a> reply.</p>\n<p>It is possible to entirely remove the connection name setting it to the empty string, that is not a valid connection name since it serves to this specific purpose.</p>\n<p>The connection name can be inspected using <a href=\"/commands/client-getname\">CLIENT GETNAME</a>.</p>\n<p>Every new connection starts without an assigned name.</p>\n<p>Tip: setting names to connections is a good way to debug connection leaks due to bugs in the application using Redis.</p>\n<span class=\"anchor\" id=\"return-value\"></span><h2><a class=\"anchor-link\" href=\"#return-value\">*</a>Return value</h2>\n<p><a href=\"/topics/protocol#simple-string-reply\">Simple string reply</a>: <code>OK</code> if the connection name was successfully set.</p>\n</div>"}, "CLIENT UNBLOCK": {"category": "server", "help_link": "/commands/client-unblock", "args": ["client-id", "[TIMEOUT|ERROR]"], "summary": "Unblock a client blocked in a blocking command from a different connection", "name": "CLIENT UNBLOCK", "help_text": "<div class=\"article-main\">\n<div class=\"metadata\">\n<p><strong>Available since 5.0.0.</strong></p>\n<p><strong>Time complexity:</strong> O(log N) where N is the number of client connections</p>\n</div>\n<p>This command can unblock, from a different connection, a client blocked in a blocking operation, such as for instance <a href=\"/commands/brpop\">BRPOP</a> or <a href=\"/commands/xread\">XREAD</a> or <a href=\"/commands/wait\">WAIT</a>.</p>\n<p>By default the client is unblocked as if the timeout of the command was\n              reached, however if an additional (and optional) argument is passed, it is possible to specify the unblocking behavior, that can be <strong>TIMEOUT</strong> (the default) or <strong>ERROR</strong>. If <strong>ERROR</strong> is specified, the behavior is to unblock the client returning as error the fact that the client was force-unblocked. Specifically the client will receive the following error:</p>\n<pre><code>-UNBLOCKED client unblocked via CLIENT UNBLOCK\n</code></pre>\n<p>Note: of course as usually it is not guaranteed that the error text remains\n              the same, however the error code will remain <code>-UNBLOCKED</code>.</p>\n<p>This command is useful especially when we are monitoring many keys with\n              a limited number of connections. For instance we may want to monitor multiple\n              streams with <a href=\"/commands/xread\">XREAD</a> without using more than N connections. However at some\n              point the consumer process is informed that there is one more stream key\n              to monitor. In order to avoid using more connections, the best behavior would\n              be to stop the blocking command from one of the connections in the pool, add\n              the new key, and issue the blocking command again.</p>\n<p>To obtain this behavior the following pattern is used. The process uses\n              an additional <em>control connection</em> in order to send the <a href=\"/commands/client-unblock\">CLIENT UNBLOCK</a> command\n              if needed. In the meantime, before running the blocking operation on the other\n              connections, the process runs <a href=\"/commands/client-id\">CLIENT ID</a> in order to get the ID associated\n              with that connection. When a new key should be added, or when a key should\n              no longer be monitored, the relevant connection blocking command is aborted\n              by sending <a href=\"/commands/client-unblock\">CLIENT UNBLOCK</a> in the control connection. The blocking command\n              will return and can be finally reissued.</p>\n<p>This example shows the application in the context of Redis streams, however\n              the pattern is a general one and can be applied to other cases.</p>\n<pre><code>Connection A (blocking connection):\n&gt; CLIENT ID\n2934\n&gt; BRPOP key1 key2 key3 0\n(client is blocked)\n\n... Now we want to add a new key ...\n\nConnection B (control connection):\n&gt; CLIENT UNBLOCK 2934\n1\n\nConnection A (blocking connection):\n... BRPOP reply with timeout ...\nNULL\n&gt; BRPOP key1 key2 key3 key4 0\n(client is blocked again)\n</code></pre>\n<span class=\"anchor\" id=\"return-value\"></span><h2><a class=\"anchor-link\" href=\"#return-value\">*</a>Return value</h2>\n<p><a href=\"/topics/protocol#integer-reply\">Integer reply</a>, specifically:</p>\n<ul>\n<li><code>1</code> if the client was unblocked successfully.</li>\n<li><code>0</code> if the client wasn't unblocked.</li>\n</ul>\n</div>"}, "CLUSTER ADDSLOTS": {"category": "cluster", "help_link": "/commands/cluster-addslots", "args": ["slot [slot ...]"], "summary": "Assign new hash slots to receiving node", "name": "CLUSTER ADDSLOTS", "help_text": "<div class=\"article-main\">\n<div class=\"metadata\">\n<p><strong>Available since 3.0.0.</strong></p>\n<p><strong>Time complexity:</strong> O(N) where N is the total number of hash slot arguments</p>\n</div>\n<p>This command is useful in order to modify a node's view of the cluster\n              configuration. Specifically it assigns a set of hash slots to the node\n              receiving the command. If the command is successful, the node will map\n              the specified hash slots to itself, and will start broadcasting the new\n              configuration.</p>\n<p>However note that:</p>\n<ol>\n<li>The command only works if all the specified slots are, from the point of view of the node receiving the command, currently not assigned. A node will refuse to take ownership for slots that already belong to some other node (including itself).</li>\n<li>The command fails if the same slot is specified multiple times.</li>\n<li>As a side effect of the command execution, if a slot among the ones specified as argument is set as <code>importing</code>, this state gets cleared once the node assigns the (previously unbound) slot to itself.</li>\n</ol>\n<span class=\"anchor\" id=\"example\"></span><h2><a class=\"anchor-link\" href=\"#example\">*</a>Example</h2>\n<p>For example the following command assigns slots 1 2 3 to the node receiving\n              the command:</p>\n<pre><code>&gt; CLUSTER ADDSLOTS 1 2 3\nOK\n</code></pre>\n<p>However trying to execute it again results into an error since the slots\n              are already assigned:</p>\n<pre><code>&gt; CLUSTER ADDSLOTS 1 2 3\nERR Slot 1 is already busy\n</code></pre>\n<span class=\"anchor\" id=\"usage-in-redis-cluster\"></span><h2><a class=\"anchor-link\" href=\"#usage-in-redis-cluster\">*</a>Usage in Redis Cluster</h2>\n<p>This command only works in cluster mode and is useful in the following\n              Redis Cluster operations:</p>\n<ol>\n<li>To create a new cluster ADDSLOTS is used in order to initially setup master nodes splitting the available hash slots among them.</li>\n<li>In order to fix a broken cluster where certain slots are unassigned.</li>\n</ol>\n<span class=\"anchor\" id=\"information-about-slots-propagation-and-warnings\"></span><h2><a class=\"anchor-link\" href=\"#information-about-slots-propagation-and-warnings\">*</a>Information about slots propagation and warnings</h2>\n<p>Note that once a node assigns a set of slots to itself, it will start\n              propagating this information in heartbeat packet headers. However the\n              other nodes will accept the information only if they have the slot as\n              not already bound with another node, or if the configuration epoch of the\n              node advertising the new hash slot, is greater than the node currently listed\n              in the table.</p>\n<p>This means that this command should be used with care only by applications\n              orchestrating Redis Cluster, like <code>redis-trib</code>, and the command if used\n              out of the right context can leave the cluster in a wrong state or cause\n              data loss.</p>\n<span class=\"anchor\" id=\"return-value\"></span><h2><a class=\"anchor-link\" href=\"#return-value\">*</a>Return value</h2>\n<p><a href=\"/topics/protocol#simple-string-reply\">Simple string reply</a>: <code>OK</code> if the command was successful. Otherwise an error is returned.</p>\n</div>"}, "CLUSTER COUNT-FAILURE-REPORTS": {"category": "cluster", "help_link": "/commands/cluster-count-failure-reports", "args": ["node-id"], "summary": "Return the number of failure reports active for a given node", "name": "CLUSTER COUNT-FAILURE-REPORTS", "help_text": "<div class=\"article-main\">\n<div class=\"metadata\">\n<p><strong>Available since 3.0.0.</strong></p>\n<p><strong>Time complexity:</strong> O(N) where N is the number of failure reports</p>\n</div>\n<p>The command returns the number of <em>failure reports</em> for the specified node.\n              Failure reports are the way Redis Cluster uses in order to promote a\n              <code>PFAIL</code> state, that means a node is not reachable, to a <code>FAIL</code> state,\n              that means that the majority of masters in the cluster agreed within\n              a window of time that the node is not reachable.</p>\n<p>A few more details:</p>\n<ul>\n<li>A node flags another node with <code>PFAIL</code> when the node is not reachable for a time greater than the configured <em>node timeout</em>, which is a fundamental configuration parameter of a Redis Cluster.</li>\n<li>Nodes in <code>PFAIL</code> state are provided in gossip sections of heartbeat packets.</li>\n<li>Every time a node processes gossip packets from other nodes, it creates (and refreshes the TTL if needed) <strong>failure reports</strong>, remembering that a given node said another given node is in <code>PFAIL</code> condition.</li>\n<li>Each failure report has a time to live of two times the <em>node timeout</em> time.</li>\n<li>If at a given time a node has another node flagged with <code>PFAIL</code>, and at the same time collected the majority of other master nodes <em>failure reports</em> about this node (including itself if it is a master), then it elevates the failure state of the node from <code>PFAIL</code> to <code>FAIL</code>, and broadcasts a message forcing all the nodes that can be reached to flag the node as <code>FAIL</code>.</li>\n</ul>\n<p>This command returns the number of failure reports for the current node which are currently not expired (so received within two times the <em>node timeout</em> time). The count does not include what the node we are asking this count believes about the node ID we pass as argument, the count <em>only</em> includes the failure reports the node received from other nodes.</p>\n<p>This command is mainly useful for debugging, when the failure detector of\n              Redis Cluster is not operating as we believe it should.</p>\n<span class=\"anchor\" id=\"return-value\"></span><h2><a class=\"anchor-link\" href=\"#return-value\">*</a>Return value</h2>\n<p><a href=\"/topics/protocol#integer-reply\">Integer reply</a>: the number of active failure reports for the node.</p>\n</div>"}, "CLUSTER COUNTKEYSINSLOT": {"category": "cluster", "help_link": "/commands/cluster-countkeysinslot", "args": ["slot"], "summary": "Return the number of local keys in the specified hash slot", "name": "CLUSTER COUNTKEYSINSLOT", "help_text": "<div class=\"article-main\">\n<div class=\"metadata\">\n<p><strong>Available since 3.0.0.</strong></p>\n<p><strong>Time complexity:</strong> O(1)</p>\n</div>\n<p>Returns the number of keys in the specified Redis Cluster hash slot. The\n              command only queries the local data set, so contacting a node\n              that is not serving the specified hash slot will always result in a count of\n              zero being returned.</p>\n<pre><code>&gt; CLUSTER COUNTKEYSINSLOT 7000\n(integer) 50341\n</code></pre>\n<span class=\"anchor\" id=\"return-value\"></span><h2><a class=\"anchor-link\" href=\"#return-value\">*</a>Return value</h2>\n<p><a href=\"/topics/protocol#integer-reply\">Integer reply</a>: The number of keys in the specified hash slot, or an error if the hash slot is invalid.</p>\n</div>"}, "CLUSTER DELSLOTS": {"category": "cluster", "help_link": "/commands/cluster-delslots", "args": ["slot [slot ...]"], "summary": "Set hash slots as unbound in receiving node", "name": "CLUSTER DELSLOTS", "help_text": "<div class=\"article-main\">\n<div class=\"metadata\">\n<p><strong>Available since 3.0.0.</strong></p>\n<p><strong>Time complexity:</strong> O(N) where N is the total number of hash slot arguments</p>\n</div>\n<p>In Redis Cluster, each node keeps track of which master is serving\n              a particular hash slot.</p>\n<p>The <code>DELSLOTS</code> command asks a particular Redis Cluster node to\n              forget which master is serving the hash slots specified as arguments.</p>\n<p>In the context of a node that has received a <code>DELSLOTS</code> command and\n              has consequently removed the associations for the passed hash slots,\n              we say those hash slots are <em>unbound</em>. Note that the existence of\n              unbound hash slots occurs naturally when a node has not been\n              configured to handle them (something that can be done with the\n              <code>ADDSLOTS</code> command) and if it has not received any information about\n              who owns those hash slots (something that it can learn from heartbeat\n              or update messages).</p>\n<p>If a node with unbound hash slots receives a heartbeat packet from\n              another node that claims to be the owner of some of those hash\n              slots, the association is established instantly. Moreover, if a\n              heartbeat or update message is received with a configuration epoch\n              greater than the node's own, the association is re-established.</p>\n<p>However, note that:</p>\n<ol>\n<li>The command only works if all the specified slots are already\n              associated with some node.</li>\n<li>The command fails if the same slot is specified multiple times.</li>\n<li>As a side effect of the command execution, the node may go into\n              <em>down</em> state because not all hash slots are covered.</li>\n</ol>\n<span class=\"anchor\" id=\"example\"></span><h2><a class=\"anchor-link\" href=\"#example\">*</a>Example</h2>\n<p>The following command removes the association for slots 5000 and\n              5001 from the node receiving the command:</p>\n<pre><code>&gt; CLUSTER DELSLOTS 5000 5001\nOK\n</code></pre>\n<span class=\"anchor\" id=\"usage-in-redis-cluster\"></span><h2><a class=\"anchor-link\" href=\"#usage-in-redis-cluster\">*</a>Usage in Redis Cluster</h2>\n<p>This command only works in cluster mode and may be useful for\n              debugging and in order to manually orchestrate a cluster configuration\n              when a new cluster is created. It is currently not used by <code>redis-trib</code>,\n              and mainly exists for API completeness.</p>\n<span class=\"anchor\" id=\"return-value\"></span><h2><a class=\"anchor-link\" href=\"#return-value\">*</a>Return value</h2>\n<p><a href=\"/topics/protocol#simple-string-reply\">Simple string reply</a>: <code>OK</code> if the command was successful. Otherwise\n              an error is returned.</p>\n</div>"}, "CLUSTER FAILOVER": {"category": "cluster", "help_link": "/commands/cluster-failover", "args": ["[FORCE|TAKEOVER]"], "summary": "Forces a replica to perform a manual failover of its master.", "name": "CLUSTER FAILOVER", "help_text": "<div class=\"article-main\">\n<div class=\"metadata\">\n<p><strong>Available since 3.0.0.</strong></p>\n<p><strong>Time complexity:</strong> O(1)</p>\n</div>\n<p>This command, that can only be sent to a Redis Cluster replica node, forces\n              the replica to start a manual failover of its master instance.</p>\n<p>A manual failover is a special kind of failover that is usually executed when\n              there are no actual failures, but we wish to swap the current master with one\n              of its replicas (which is the node we send the command to), in a safe way,\n              without any window for data loss. It works in the following way:</p>\n<ol>\n<li>The replica tells the master to stop processing queries from clients.</li>\n<li>The master replies to the replica with the current <em>replication offset</em>.</li>\n<li>The replica waits for the replication offset to match on its side, to make sure it processed all the data from the master before it continues.</li>\n<li>The replica starts a failover, obtains a new configuration epoch from the majority of the masters, and broadcasts the new configuration.</li>\n<li>The old master receives the configuration update: unblocks its clients and starts replying with redirection messages so that they'll continue the chat with the new master.</li>\n</ol>\n<p>This way clients are moved away from the old master to the new master\n              atomically and only when the replica that is turning into the new master\n              has processed all of the replication stream from the old master.</p>\n<span class=\"anchor\" id=\"force-option-manual-failover-when-the-master-is-down\"></span><h2><a class=\"anchor-link\" href=\"#force-option-manual-failover-when-the-master-is-down\">*</a>FORCE option: manual failover when the master is down</h2>\n<p>The command behavior can be modified by two options: <strong>FORCE</strong> and <strong>TAKEOVER</strong>.</p>\n<p>If the <strong>FORCE</strong> option is given, the replica does not perform any handshake\n              with the master, that may be not reachable, but instead just starts a\n              failover ASAP starting from point 4. This is useful when we want to start\n              a manual failover while the master is no longer reachable.</p>\n<p>However using <strong>FORCE</strong> we still need the majority of masters to be available\n              in order to authorize the failover and generate a new configuration epoch\n              for the replica that is going to become master.</p>\n<span class=\"anchor\" id=\"takeover-option-manual-failover-without-cluster-consensus\"></span><h2><a class=\"anchor-link\" href=\"#takeover-option-manual-failover-without-cluster-consensus\">*</a>TAKEOVER option: manual failover without cluster consensus</h2>\n<p>There are situations where this is not enough, and we want a replica to failover\n              without any agreement with the rest of the cluster. A real world use case\n              for this is to mass promote replicas in a different data center to masters\n              in order to perform a data center switch, while all the masters are down\n              or partitioned away.</p>\n<p>The <strong>TAKEOVER</strong> option implies everything <strong>FORCE</strong> implies, but also does\n              not uses any cluster authorization in order to failover. A replica receiving\n              <code>CLUSTER FAILOVER TAKEOVER</code> will instead:</p>\n<ol>\n<li>Generate a new <code>configEpoch</code> unilaterally, just taking the current greatest epoch available and incrementing it if its local configuration epoch is not already the greatest.</li>\n<li>Assign itself all the hash slots of its master, and propagate the new configuration to every node which is reachable ASAP, and eventually to every other node.</li>\n</ol>\n<p>Note that <strong>TAKEOVER violates the last-failover-wins principle</strong> of Redis Cluster, since the configuration epoch generated by the replica violates the normal generation of configuration epochs in several ways:</p>\n<ol>\n<li>There is no guarantee that it is actually the higher configuration epoch, since, for example, we can use the <strong>TAKEOVER</strong> option within a minority, nor any message exchange is performed to generate the new configuration epoch.</li>\n<li>If we generate a configuration epoch which happens to collide with another instance, eventually our configuration epoch, or the one of another instance with our same epoch, will be moved away using the <em>configuration epoch collision resolution algorithm</em>.</li>\n</ol>\n<p>Because of this the <strong>TAKEOVER</strong> option should be used with care.</p>\n<span class=\"anchor\" id=\"implementation-details-and-notes\"></span><h2><a class=\"anchor-link\" href=\"#implementation-details-and-notes\">*</a>Implementation details and notes</h2>\n<p><a href=\"/commands/cluster-failover\">CLUSTER FAILOVER</a>, unless the <strong>TAKEOVER</strong> option is specified,  does not\n              execute a failover synchronously, it only <em>schedules</em> a manual failover,\n              bypassing the failure detection stage, so to check if the failover actually\n              happened, <a href=\"/commands/cluster-nodes\">CLUSTER NODES</a> or other means should be used in order to verify\n              that the state of the cluster changes after some time the command was sent.</p>\n<span class=\"anchor\" id=\"return-value\"></span><h2><a class=\"anchor-link\" href=\"#return-value\">*</a>Return value</h2>\n<p><a href=\"/topics/protocol#simple-string-reply\">Simple string reply</a>: <code>OK</code> if the command was accepted and a manual failover is going to be attempted. An error if the operation cannot be executed, for example if we are talking with a node which is already a master.</p>\n</div>"}, "CLUSTER FORGET": {"category": "cluster", "help_link": "/commands/cluster-forget", "args": ["node-id"], "summary": "Remove a node from the nodes table", "name": "CLUSTER FORGET", "help_text": "<div class=\"article-main\">\n<div class=\"metadata\">\n<p><strong>Available since 3.0.0.</strong></p>\n<p><strong>Time complexity:</strong> O(1)</p>\n</div>\n<p>The command is used in order to remove a node, specified via its node ID,\n              from the set of <em>known nodes</em> of the Redis Cluster node receiving the command.\n              In other words the specified node is removed from the <em>nodes table</em> of the\n              node receiving the command.</p>\n<p>Because when a given node is part of the cluster, all the other nodes\n              participating in the cluster knows about it, in order for a node to be\n              completely removed from a cluster, the <a href=\"/commands/cluster-forget\">CLUSTER FORGET</a> command must be\n              sent to all the remaining nodes, regardless of the fact they are masters\n              or replicas.</p>\n<p>However the command cannot simply drop the node from the internal node\n              table of the node receiving the command, it also implements a ban-list, not\n              allowing the same node to be added again as a side effect of processing the\n              <em>gossip section</em> of the heartbeat packets received from other nodes.</p>\n<span class=\"anchor\" id=\"details-on-why-the-ban-list-is-needed\"></span><h2><a class=\"anchor-link\" href=\"#details-on-why-the-ban-list-is-needed\">*</a>Details on why the ban-list is needed</h2>\n<p>In the following example we'll show why the command must not just remove\n              a given node from the nodes table, but also prevent it for being re-inserted\n              again for some time.</p>\n<p>Let's assume we have four nodes, A, B, C and D. In order to\n              end with just a three nodes cluster A, B, C we may follow these steps:</p>\n<ol>\n<li>Reshard all the hash slots from D to nodes A, B, C.</li>\n<li>D is now empty, but still listed in the nodes table of A, B and C.</li>\n<li>We contact A, and send <code>CLUSTER FORGET D</code>.</li>\n<li>B sends node A a heartbeat packet, where node D is listed.</li>\n<li>A does no longer known node D (see step 3), so it starts an handshake with D.</li>\n<li>D ends re-added in the nodes table of A.</li>\n</ol>\n<p>As you can see in this way removing a node is fragile, we need to send\n              <a href=\"/commands/cluster-forget\">CLUSTER FORGET</a> commands to all the nodes ASAP hoping there are no\n              gossip sections processing in the meantime. Because of this problem the\n              command implements a ban-list with an expire time for each entry.</p>\n<p>So what the command really does is:</p>\n<ol>\n<li>The specified node gets removed from the nodes table.</li>\n<li>The node ID of the removed node gets added to the ban-list, for 1 minute.</li>\n<li>The node will skip all the node IDs listed in the ban-list when processing gossip sections received in heartbeat packets from other nodes.</li>\n</ol>\n<p>This way we have a 60 second window to inform all the nodes in the cluster that\n              we want to remove a node.</p>\n<span class=\"anchor\" id=\"special-conditions-not-allowing-the-command-execution\"></span><h2><a class=\"anchor-link\" href=\"#special-conditions-not-allowing-the-command-execution\">*</a>Special conditions not allowing the command execution</h2>\n<p>The command does not succeed and returns an error in the following cases:</p>\n<ol>\n<li>The specified node ID is not found in the nodes table.</li>\n<li>The node receiving the command is a replica, and the specified node ID identifies its current master.</li>\n<li>The node ID identifies the same node we are sending the command to.</li>\n</ol>\n<span class=\"anchor\" id=\"return-value\"></span><h2><a class=\"anchor-link\" href=\"#return-value\">*</a>Return value</h2>\n<p><a href=\"/topics/protocol#simple-string-reply\">Simple string reply</a>: <code>OK</code> if the command was executed successfully, otherwise an error is returned.</p>\n</div>"}, "CLUSTER GETKEYSINSLOT": {"category": "cluster", "help_link": "/commands/cluster-getkeysinslot", "args": ["slot", "count"], "summary": "Return local key names in the specified hash slot", "name": "CLUSTER GETKEYSINSLOT", "help_text": "<div class=\"article-main\">\n<div class=\"metadata\">\n<p><strong>Available since 3.0.0.</strong></p>\n<p><strong>Time complexity:</strong> O(log(N)) where N is the number of requested keys</p>\n</div>\n<p>The command returns an array of keys names stored in the contacted node and\n              hashing to the specified hash slot. The maximum number of keys to return\n              is specified via the <code>count</code> argument, so that it is possible for the user\n              of this API to batch-processing keys.</p>\n<p>The main usage of this command is during rehashing of cluster slots from one\n              node to another. The way the rehashing is performed is exposed in the Redis\n              Cluster specification, or in a more simple to digest form, as an appendix\n              of the <a href=\"/commands/cluster-setslot\">CLUSTER SETSLOT</a> command documentation.</p>\n<pre><code>&gt; CLUSTER GETKEYSINSLOT 7000 3\n\"47344|273766|70329104160040|key_39015\"\n\"47344|273766|70329104160040|key_89793\"\n\"47344|273766|70329104160040|key_92937\"\n</code></pre>\n<span class=\"anchor\" id=\"return-value\"></span><h2><a class=\"anchor-link\" href=\"#return-value\">*</a>Return value</h2>\n<p><a href=\"/topics/protocol#array-reply\">Array reply</a>: From 0 to <em>count</em> key names in a Redis array reply.</p>\n</div>"}, "CLUSTER INFO": {"category": "cluster", "help_link": "/commands/cluster-info", "args": [], "summary": "Provides info about Redis Cluster node state", "name": "CLUSTER INFO", "help_text": "<div class=\"article-main\">\n<div class=\"metadata\">\n<p><strong>Available since 3.0.0.</strong></p>\n<p><strong>Time complexity:</strong> O(1)</p>\n</div>\n<p><a href=\"/commands/cluster-info\">CLUSTER INFO</a> provides <a href=\"/commands/info\">INFO</a> style information about Redis Cluster\n              vital parameters. The following is a sample output, followed by the\n              description of each field reported.</p>\n<pre><code>cluster_state:ok\ncluster_slots_assigned:16384\ncluster_slots_ok:16384\ncluster_slots_pfail:0\ncluster_slots_fail:0\ncluster_known_nodes:6\ncluster_size:3\ncluster_current_epoch:6\ncluster_my_epoch:2\ncluster_stats_messages_sent:1483972\ncluster_stats_messages_received:1483968\n</code></pre>\n<ul>\n<li><code>cluster_state</code>: State is <code>ok</code> if the node is able to receive queries. <code>fail</code> if there is at least one hash slot which is unbound (no node associated), in error state (node serving it is flagged with FAIL flag), or if the majority of masters can't be reached by this node.</li>\n<li><code>cluster_slots_assigned</code>: Number of slots which are associated to some node (not unbound). This number should be 16384 for the node to work properly, which means that each hash slot should be mapped to a node.</li>\n<li><code>cluster_slots_ok</code>: Number of hash slots mapping to a node not in <code>FAIL</code> or <code>PFAIL</code> state.</li>\n<li><code>cluster_slots_pfail</code>: Number of hash slots mapping to a node in <code>PFAIL</code> state. Note that those hash slots still work correctly, as long as the <code>PFAIL</code> state is not promoted to <code>FAIL</code> by the failure detection algorithm. <code>PFAIL</code> only means that we are currently not able to talk with the node, but may be just a transient error.</li>\n<li><code>cluster_slots_fail</code>: Number of hash slots mapping to a node in <code>FAIL</code> state. If this number is not zero the node is not able to serve queries unless <code>cluster-require-full-coverage</code> is set to <code>no</code> in the configuration.</li>\n<li><code>cluster_known_nodes</code>: The total number of known nodes in the cluster, including nodes in <code>HANDSHAKE</code> state that may not currently be proper members of the cluster.</li>\n<li><code>cluster_size</code>: The number of master nodes serving at least one hash slot in the cluster.</li>\n<li><code>cluster_current_epoch</code>: The local <code>Current Epoch</code> variable. This is used in order to create unique increasing version numbers during fail overs.</li>\n<li><code>cluster_my_epoch</code>: The <code>Config Epoch</code> of the node we are talking with. This is the current configuration version assigned to this node.</li>\n<li><code>cluster_stats_messages_sent</code>: Number of messages sent via the cluster node-to-node binary bus.</li>\n<li><code>cluster_stats_messages_received</code>: Number of messages received via the cluster node-to-node binary bus.</li>\n</ul>\n<p>More information about the Current Epoch and Config Epoch variables are available in the Redis Cluster specification document.</p>\n<span class=\"anchor\" id=\"return-value\"></span><h2><a class=\"anchor-link\" href=\"#return-value\">*</a>Return value</h2>\n<p><a href=\"/topics/protocol#bulk-string-reply\">Bulk string reply</a>: A map between named fields and values in the form of <code>&lt;field&gt;:&lt;value&gt;</code> lines separated by newlines composed by the two bytes <code>CRLF</code>.</p>\n</div>"}, "CLUSTER KEYSLOT": {"category": "cluster", "help_link": "/commands/cluster-keyslot", "args": ["key"], "summary": "Returns the hash slot of the specified key", "name": "CLUSTER KEYSLOT", "help_text": "<div class=\"article-main\">\n<div class=\"metadata\">\n<p><strong>Available since 3.0.0.</strong></p>\n<p><strong>Time complexity:</strong> O(N) where N is the number of bytes in the key</p>\n</div>\n<p>Returns an integer identifying the hash slot the specified key hashes to.\n              This command is mainly useful for debugging and testing, since it exposes\n              via an API the underlying Redis implementation of the hashing algorithm.\n              Example use cases for this command:</p>\n<ol>\n<li>Client libraries may use Redis in order to test their own hashing algorithm, generating random keys and hashing them with both their local implementation and using Redis <a href=\"/commands/cluster-keyslot\">CLUSTER KEYSLOT</a> command, then checking if the result is the same.</li>\n<li>Humans may use this command in order to check what is the hash slot, and then the associated Redis Cluster node, responsible for a given key.</li>\n</ol>\n<span class=\"anchor\" id=\"example\"></span><h2><a class=\"anchor-link\" href=\"#example\">*</a>Example</h2>\n<pre><code>&gt; CLUSTER KEYSLOT somekey\n11058\n&gt; CLUSTER KEYSLOT foo{hash_tag}\n(integer) 2515\n&gt; CLUSTER KEYSLOT bar{hash_tag}\n(integer) 2515\n</code></pre>\n<p>Note that the command implements the full hashing algorithm, including support for <strong>hash tags</strong>, that is the special property of Redis Cluster key hashing algorithm, of hashing just what is between <code>{</code> and <code>}</code> if such a pattern is found inside the key name, in order to force multiple keys to be handled by the same node.</p>\n<span class=\"anchor\" id=\"return-value\"></span><h2><a class=\"anchor-link\" href=\"#return-value\">*</a>Return value</h2>\n<p><a href=\"/topics/protocol#integer-reply\">Integer reply</a>: The hash slot number.</p>\n</div>"}, "CLUSTER MEET": {"category": "cluster", "help_link": "/commands/cluster-meet", "args": ["ip", "port"], "summary": "Force a node cluster to handshake with another node", "name": "CLUSTER MEET", "help_text": "<div class=\"article-main\">\n<div class=\"metadata\">\n<p><strong>Available since 3.0.0.</strong></p>\n<p><strong>Time complexity:</strong> O(1)</p>\n</div>\n<p><a href=\"/commands/cluster-meet\">CLUSTER MEET</a> is used in order to connect different Redis nodes with cluster\n              support enabled, into a working cluster.</p>\n<p>The basic idea is that nodes by default don't trust each other, and are\n              considered unknown, so that it is unlikely that different cluster nodes will\n              mix into a single one because of system administration errors or network\n              addresses modifications.</p>\n<p>So in order for a given node to accept another one into the list of nodes\n              composing a Redis Cluster, there are only two ways:</p>\n<ol>\n<li>The system administrator sends a <a href=\"/commands/cluster-meet\">CLUSTER MEET</a> command to force a node to meet another one.</li>\n<li>An already known node sends a list of nodes in the gossip section that we are not aware of. If the receiving node trusts the sending node as a known node, it will process the gossip section and send an handshake to the nodes that are still not known.</li>\n</ol>\n<p>Note that Redis Cluster needs to form a full mesh (each node is connected with each other node), but in order to create a cluster, there is no need to send all the <a href=\"/commands/cluster-meet\">CLUSTER MEET</a> commands needed to form the full mesh. What matter is to send enough <a href=\"/commands/cluster-meet\">CLUSTER MEET</a> messages so that each node can reach each other node through a <em>chain of known nodes</em>. Thanks to the exchange of gossip information in heartbeat packets, the missing links will be created.</p>\n<p>So, if we link node A with node B via <a href=\"/commands/cluster-meet\">CLUSTER MEET</a>, and B with C, A and C will find their ways to handshake and create a link.</p>\n<p>Another example: if we imagine a cluster formed of the following four nodes called A, B, C and D, we may send just the following set of commands to A:</p>\n<ol>\n<li><code>CLUSTER MEET B-ip B-port</code></li>\n<li><code>CLUSTER MEET C-ip C-port</code></li>\n<li><code>CLUSTER MEET D-ip D-port</code></li>\n</ol>\n<p>As a side effect of <code>A</code> knowing and being known by all the other nodes, it will send gossip sections in the heartbeat packets that will allow each other node to create a link with each other one, forming a full mesh in a matter of seconds, even if the cluster is large.</p>\n<p>Moreover <a href=\"/commands/cluster-meet\">CLUSTER MEET</a> does not need to be reciprocal. If I send the command to A in order to join B, I don't need to also send it to B in order to join A.</p>\n<span class=\"anchor\" id=\"implementation-details-meet-and-ping-packets\"></span><h2><a class=\"anchor-link\" href=\"#implementation-details-meet-and-ping-packets\">*</a>Implementation details: MEET and PING packets</h2>\n<p>When a given node receives a <a href=\"/commands/cluster-meet\">CLUSTER MEET</a> message, the node specified in the\n              command still does not know the node we sent the command to. So in order for\n              the node to force the receiver to accept it as a trusted node, it sends a\n              <code>MEET</code> packet instead of a <a href=\"/commands/ping\">PING</a> packet. The two packets have exactly the\n              same format, but the former forces the receiver to acknowledge the node as\n              trusted.</p>\n<span class=\"anchor\" id=\"return-value\"></span><h2><a class=\"anchor-link\" href=\"#return-value\">*</a>Return value</h2>\n<p><a href=\"/topics/protocol#simple-string-reply\">Simple string reply</a>: <code>OK</code> if the command was successful. If the address or port specified are invalid an error is returned.</p>\n</div>"}, "CLUSTER NODES": {"category": "cluster", "help_link": "/commands/cluster-nodes", "args": [], "summary": "Get Cluster config for the node", "name": "CLUSTER NODES", "help_text": "<div class=\"article-main\">\n<div class=\"metadata\">\n<p><strong>Available since 3.0.0.</strong></p>\n<p><strong>Time complexity:</strong> O(N) where N is the total number of Cluster nodes</p>\n</div>\n<p>Each node in a Redis Cluster has its view of the current cluster configuration,\n              given by the set of known nodes, the state of the connection we have with such\n              nodes, their flags, properties and assigned slots, and so forth.</p>\n<p><a href=\"/commands/cluster-nodes\">CLUSTER NODES</a> provides all this information, that is, the current cluster\n              configuration of the node we are contacting, in a serialization format which\n              happens to be exactly the same as the one used by Redis Cluster itself in\n              order to store on disk the cluster state (however the on disk cluster state\n              has a few additional info appended at the end).</p>\n<p>Note that normally clients willing to fetch the map between Cluster\n              hash slots and node addresses should use <a href=\"/commands/cluster-slots\">CLUSTER SLOTS</a> instead.\n              <a href=\"/commands/cluster-nodes\">CLUSTER NODES</a>, that provides more information, should be used for\n              administrative tasks, debugging, and configuration inspections.\n              It is also used by <code>redis-trib</code> in order to manage a cluster.</p>\n<span class=\"anchor\" id=\"serialization-format\"></span><h2><a class=\"anchor-link\" href=\"#serialization-format\">*</a>Serialization format</h2>\n<p>The output of the command is just a space-separated CSV string, where\n              each line represents a node in the cluster. The following is an example\n              of output:</p>\n<pre><code>07c37dfeb235213a872192d90877d0cd55635b91 127.0.0.1:30004@31004 slave e7d1eecce10fd6bb5eb35b9f99a514335d9ba9ca 0 1426238317239 4 connected\n67ed2db8d677e59ec4a4cefb06858cf2a1a89fa1 127.0.0.1:30002@31002 master - 0 1426238316232 2 connected 5461-10922\n292f8b365bb7edb5e285caf0b7e6ddc7265d2f4f 127.0.0.1:30003@31003 master - 0 1426238318243 3 connected 10923-16383\n6ec23923021cf3ffec47632106199cb7f496ce01 127.0.0.1:30005@31005 slave 67ed2db8d677e59ec4a4cefb06858cf2a1a89fa1 0 1426238316232 5 connected\n824fe116063bc5fcf9f4ffd895bc17aee7731ac3 127.0.0.1:30006@31006 slave 292f8b365bb7edb5e285caf0b7e6ddc7265d2f4f 0 1426238317741 6 connected\ne7d1eecce10fd6bb5eb35b9f99a514335d9ba9ca 127.0.0.1:30001@31001 myself,master - 0 0 1 connected 0-5460\n</code></pre>\n<p>Each line is composed of the following fields:</p>\n<pre><code>&lt;id&gt; &lt;ip:port@cport&gt; &lt;flags&gt; &lt;master&gt; &lt;ping-sent&gt; &lt;pong-recv&gt; &lt;config-epoch&gt; &lt;link-state&gt; &lt;slot&gt; &lt;slot&gt; ... &lt;slot&gt;\n</code></pre>\n<p>The meaning of each filed is the following:</p>\n<ol>\n<li><code>id</code>: The node ID, a 40 characters random string generated when a node is created and never changed again (unless <code>CLUSTER RESET HARD</code> is used).</li>\n<li><code>ip:port@cport</code>: The node address where clients should contact the node to run queries.</li>\n<li><code>flags</code>: A list of comma separated flags: <code>myself</code>, <code>master</code>, <code>slave</code>, <code>fail?</code>, <code>fail</code>, <code>handshake</code>, <code>noaddr</code>, <code>noflags</code>. Flags are explained in detail in the next section.</li>\n<li><code>master</code>: If the node is a replica, and the master is known, the master node ID, otherwise the \"-\" character.</li>\n<li><code>ping-sent</code>: Milliseconds unix time at which the currently active ping was sent, or zero if there are no pending pings.</li>\n<li><code>pong-recv</code>: Milliseconds unix time the last pong was received.</li>\n<li><code>config-epoch</code>: The configuration epoch (or version) of the current node (or of the current master if the node is a replica). Each time there is a failover, a new, unique, monotonically increasing configuration epoch is created. If multiple nodes claim to serve the same hash slots, the one with higher configuration epoch wins.</li>\n<li><code>link-state</code>: The state of the link used for the node-to-node cluster bus. We use this link to communicate with the node. Can be <code>connected</code> or <code>disconnected</code>.</li>\n<li><code>slot</code>: A hash slot number or range. Starting from argument number 9, but there may be up to 16384 entries in total (limit never reached). This is the list of hash slots served by this node. If the entry is just a number, is parsed as such. If it is a range, it is in the form <code>start-end</code>, and means that the node is responsible for all the hash slots from <code>start</code> to <code>end</code> including the start and end values.</li>\n</ol>\n<p>Meaning of the flags (field number 3):</p>\n<ul>\n<li><code>myself</code>: The node you are contacting.</li>\n<li><code>master</code>: Node is a master.</li>\n<li><code>slave</code>: Node is a replica.</li>\n<li><code>fail?</code>: Node is in <code>PFAIL</code> state. Not reachable for the node you are contacting, but still logically reachable (not in <code>FAIL</code> state).</li>\n<li><code>fail</code>: Node is in <code>FAIL</code> state. It was not reachable for multiple nodes that promoted the <code>PFAIL</code> state to <code>FAIL</code>.</li>\n<li><code>handshake</code>: Untrusted node, we are handshaking.</li>\n<li><code>noaddr</code>: No address known for this node.</li>\n<li><code>noflags</code>: No flags at all.</li>\n</ul>\n<span class=\"anchor\" id=\"notes-on-published-config-epochs\"></span><h2><a class=\"anchor-link\" href=\"#notes-on-published-config-epochs\">*</a>Notes on published config epochs</h2>\n<p>Replicas broadcast their master's config epochs (in order to get an <code>UPDATE</code>\n              message if they are found to be stale), so the real config epoch of the\n              replica (which is meaningless more or less, since they don't serve hash slots)\n              can be only obtained checking the node flagged as <code>myself</code>, which is the entry\n              of the node we are asking to generate <a href=\"/commands/cluster-nodes\">CLUSTER NODES</a> output. The other\n              replicas epochs reflect what they publish in heartbeat packets, which is, the\n              configuration epoch of the masters they are currently replicating.</p>\n<span class=\"anchor\" id=\"special-slot-entries\"></span><h2><a class=\"anchor-link\" href=\"#special-slot-entries\">*</a>Special slot entries</h2>\n<p>Normally hash slots associated to a given node are in one of the following formats,\n              as already explained above:</p>\n<ol>\n<li>Single number: 3894</li>\n<li>Range: 3900-4000</li>\n</ol>\n<p>However node hash slots can be in a special state, used in order to communicate errors after a node restart (mismatch between the keys in the AOF/RDB file, and the node hash slots configuration), or when there is a resharding operation in progress. This two states are <strong>importing</strong> and <strong>migrating</strong>.</p>\n<p>The meaning of the two states is explained in the Redis Specification, however the gist of the two states is the following:</p>\n<ul>\n<li><strong>Importing</strong> slots are yet not part of the nodes hash slot, there is a migration in progress. The node will accept queries about these slots only if the <code>ASK</code> command is used.</li>\n<li><strong>Migrating</strong> slots are assigned to the node, but are being migrated to some other node. The node will accept queries if all the keys in the command exist already, otherwise it will emit what is called an <strong>ASK redirection</strong>, to force new keys creation directly in the importing node.</li>\n</ul>\n<p>Importing and migrating slots are emitted in the <a href=\"/commands/cluster-nodes\">CLUSTER NODES</a> output as follows:</p>\n<ul>\n<li><strong>Importing slot:</strong> <code>[slot_number-&lt;-importing_from_node_id]</code></li>\n<li><strong>Migrating slot:</strong> <code>[slot_number-&gt;-migrating_to_node_id]</code></li>\n</ul>\n<p>The following are a few examples of importing and migrating slots:</p>\n<ul>\n<li><code>[93-&lt;-292f8b365bb7edb5e285caf0b7e6ddc7265d2f4f]</code></li>\n<li><code>[1002-&lt;-67ed2db8d677e59ec4a4cefb06858cf2a1a89fa1]</code></li>\n<li><code>[77-&gt;-e7d1eecce10fd6bb5eb35b9f99a514335d9ba9ca]</code></li>\n<li><code>[16311-&gt;-292f8b365bb7edb5e285caf0b7e6ddc7265d2f4f]</code></li>\n</ul>\n<p>Note that the format does not have any space, so <a href=\"/commands/cluster-nodes\">CLUSTER NODES</a> output format is plain CSV with space as separator even when this special slots are emitted. However a complete parser for the format should be able to handle them.</p>\n<p>Note that:</p>\n<ol>\n<li>Migration and importing slots are only added to the node flagged as <code>myself</code>. This information is local to a node, for its own slots.</li>\n<li>Importing and migrating slots are provided as <strong>additional info</strong>. If the node has a given hash slot assigned, it will be also a plain number in the list of hash slots, so clients that don't have a clue about hash slots migrations can just skip this special fields.</li>\n</ol>\n<span class=\"anchor\" id=\"return-value\"></span><h2><a class=\"anchor-link\" href=\"#return-value\">*</a>Return value</h2>\n<p><a href=\"/topics/protocol#bulk-string-reply\">Bulk string reply</a>: The serialized cluster configuration.</p>\n<p><strong>A note about the word slave used in this man page and command name</strong>: Starting with Redis 5, if not for backward compatibility, the Redis project no longer uses the word slave. Unfortunately in this command the word slave is part of the protocol, so we'll be able to remove such occurrences only when this API will be naturally deprecated.</p>\n</div>"}, "CLUSTER REPLICATE": {"category": "cluster", "help_link": "/commands/cluster-replicate", "args": ["node-id"], "summary": "Reconfigure a node as a replica of the specified master node", "name": "CLUSTER REPLICATE", "help_text": "<div class=\"article-main\">\n<div class=\"metadata\">\n<p><strong>Available since 3.0.0.</strong></p>\n<p><strong>Time complexity:</strong> O(1)</p>\n</div>\n<p>The command reconfigures a node as a replica of the specified master.\n              If the node receiving the command is an <em>empty master</em>, as a side effect\n              of the command, the node role is changed from master to replica.</p>\n<p>Once a node is turned into the replica of another master node, there is no need\n              to inform the other cluster nodes about the change: heartbeat packets exchanged\n              between nodes will propagate the new configuration automatically.</p>\n<p>A replica will always accept the command, assuming that:</p>\n<ol>\n<li>The specified node ID exists in its nodes table.</li>\n<li>The specified node ID does not identify the instance we are sending the command to.</li>\n<li>The specified node ID is a master.</li>\n</ol>\n<p>If the node receiving the command is not already a replica, but is a master,\n              the command will only succeed, and the node will be converted into a replica,\n              only if the following additional conditions are met:</p>\n<ol>\n<li>The node is not serving any hash slots.</li>\n<li>The node is empty, no keys are stored at all in the key space.</li>\n</ol>\n<p>If the command succeeds the new replica will immediately try to contact its master in order to replicate from it.</p>\n<span class=\"anchor\" id=\"return-value\"></span><h2><a class=\"anchor-link\" href=\"#return-value\">*</a>Return value</h2>\n<p><a href=\"/topics/protocol#simple-string-reply\">Simple string reply</a>: <code>OK</code> if the command was executed successfully, otherwise an error is returned.</p>\n</div>"}, "CLUSTER RESET": {"category": "cluster", "help_link": "/commands/cluster-reset", "args": ["[HARD|SOFT]"], "summary": "Reset a Redis Cluster node", "name": "CLUSTER RESET", "help_text": "<div class=\"article-main\">\n<div class=\"metadata\">\n<p><strong>Available since 3.0.0.</strong></p>\n<p><strong>Time complexity:</strong> O(N) where N is the number of known nodes. The command may execute a FLUSHALL as a side effect.</p>\n</div>\n<p>Reset a Redis Cluster node, in a more or less drastic way depending on the\n              reset type, that can be <strong>hard</strong> or <strong>soft</strong>. Note that this command\n              <strong>does not work for masters if they hold one or more keys</strong>, in that case\n              to completely reset a master node keys must be removed first, e.g. by using <a href=\"/commands/flushall\">FLUSHALL</a> first,\n              and then <a href=\"/commands/cluster-reset\">CLUSTER RESET</a>.</p>\n<p>Effects on the node:</p>\n<ol>\n<li>All the other nodes in the cluster are forgotten.</li>\n<li>All the assigned / open slots are reset, so the slots-to-nodes mapping is totally cleared.</li>\n<li>If the node is a replica it is turned into an (empty) master. Its dataset is flushed, so at the end the node will be an empty master.</li>\n<li><strong>Hard reset only</strong>: a new Node ID is generated.</li>\n<li><strong>Hard reset only</strong>: <code>currentEpoch</code> and <code>configEpoch</code> vars are set to 0.</li>\n<li>The new configuration is persisted on disk in the node cluster configuration file.</li>\n</ol>\n<p>This command is mainly useful to re-provision a Redis Cluster node\n              in order to be used in the context of a new, different cluster. The command\n              is also extensively used by the Redis Cluster testing framework in order to\n              reset the state of the cluster every time a new test unit is executed.</p>\n<p>If no reset type is specified, the default is <strong>soft</strong>.</p>\n<span class=\"anchor\" id=\"return-value\"></span><h2><a class=\"anchor-link\" href=\"#return-value\">*</a>Return value</h2>\n<p><a href=\"/topics/protocol#simple-string-reply\">Simple string reply</a>: <code>OK</code> if the command was successful. Otherwise an error is returned.</p>\n</div>"}, "CLUSTER SAVECONFIG": {"category": "cluster", "help_link": "/commands/cluster-saveconfig", "args": [], "summary": "Forces the node to save cluster state on disk", "name": "CLUSTER SAVECONFIG", "help_text": "<div class=\"article-main\">\n<div class=\"metadata\">\n<p><strong>Available since 3.0.0.</strong></p>\n<p><strong>Time complexity:</strong> O(1)</p>\n</div>\n<p>Forces a node to save the <code>nodes.conf</code> configuration on disk. Before to return\n              the command calls <code>fsync(2)</code> in order to make sure the configuration is\n              flushed on the computer disk.</p>\n<p>This command is mainly used in the event a <code>nodes.conf</code> node state file\n              gets lost / deleted for some reason, and we want to generate it again from\n              scratch. It can also be useful in case of mundane alterations of a node cluster\n              configuration via the <code>CLUSTER</code> command in order to ensure the new configuration\n              is persisted on disk, however all the commands should normally be able to\n              auto schedule to persist the configuration on disk when it is important\n              to do so for the correctness of the system in the event of a restart.</p>\n<span class=\"anchor\" id=\"return-value\"></span><h2><a class=\"anchor-link\" href=\"#return-value\">*</a>Return value</h2>\n<p><a href=\"/topics/protocol#simple-string-reply\">Simple string reply</a>: <code>OK</code> or an error if the operation fails.</p>\n</div>"}, "CLUSTER SET-CONFIG-EPOCH": {"category": "cluster", "help_link": "/commands/cluster-set-config-epoch", "args": ["config-epoch"], "summary": "Set the configuration epoch in a new node", "name": "CLUSTER SET-CONFIG-EPOCH", "help_text": "<div class=\"article-main\">\n<div class=\"metadata\">\n<p><strong>Available since 3.0.0.</strong></p>\n<p><strong>Time complexity:</strong> O(1)</p>\n</div>\n<p>This command sets a specific <em>config epoch</em> in a fresh node. It only works when:</p>\n<ol>\n<li>The nodes table of the node is empty.</li>\n<li>The node current <em>config epoch</em> is zero.</li>\n</ol>\n<p>These prerequisites are needed since usually, manually altering the\n              configuration epoch of a node is unsafe, we want to be sure that the node with\n              the higher configuration epoch value (that is the last that failed over) wins\n              over other nodes in claiming the hash slots ownership.</p>\n<p>However there is an exception to this rule, and it is when a new\n              cluster is created from scratch. Redis Cluster <em>config epoch collision\n              resolution</em> algorithm can deal with new nodes all configured with the\n              same configuration at startup, but this process is slow and should be\n              the exception, only to make sure that whatever happens, two more\n              nodes eventually always move away from the state of having the same\n              configuration epoch.</p>\n<p>So, using <code>CONFIG SET-CONFIG-EPOCH</code>, when a new cluster is created, we can\n              assign a different progressive configuration epoch to each node before\n              joining the cluster together.</p>\n<span class=\"anchor\" id=\"return-value\"></span><h2><a class=\"anchor-link\" href=\"#return-value\">*</a>Return value</h2>\n<p><a href=\"/topics/protocol#simple-string-reply\">Simple string reply</a>: <code>OK</code> if the command was executed successfully, otherwise an error is returned.</p>\n</div>"}, "CLUSTER SETSLOT": {"category": "cluster", "help_link": "/commands/cluster-setslot", "args": ["slot", "IMPORTING|MIGRATING|STABLE|NODE", "[node-id]"], "summary": "Bind a hash slot to a specific node", "name": "CLUSTER SETSLOT", "help_text": "<div class=\"article-main\">\n<div class=\"metadata\">\n<p><strong>Available since 3.0.0.</strong></p>\n<p><strong>Time complexity:</strong> O(1)</p>\n</div>\n<p><a href=\"/commands/cluster-setslot\">CLUSTER SETSLOT</a> is responsible of changing the state of a hash slot in the receiving node in different ways. It can, depending on the subcommand used:</p>\n<ol>\n<li><code>MIGRATING</code> subcommand: Set a hash slot in <em>migrating</em> state.</li>\n<li><code>IMPORTING</code> subcommand: Set a hash slot in <em>importing</em> state.</li>\n<li><code>STABLE</code> subcommand: Clear any importing / migrating state from hash slot.</li>\n<li><code>NODE</code> subcommand: Bind the hash slot to a different node.</li>\n</ol>\n<p>The command with its set of subcommands is useful in order to start and end cluster live resharding operations, which are accomplished by setting a hash slot in migrating state in the source node, and importing state in the destination node.</p>\n<p>Each subcommand is documented below. At the end you'll find a description of\n              how live resharding is performed using this command and other related commands.</p>\n<span class=\"anchor\" id=\"cluster-setslot-codeltslotgtcode-migrating-codeltdestination-node-idgtcode\"></span><h2><a class=\"anchor-link\" href=\"#cluster-setslot-codeltslotgtcode-migrating-codeltdestination-node-idgtcode\">*</a>CLUSTER SETSLOT <code>&lt;slot&gt;</code> MIGRATING <code>&lt;destination-node-id&gt;</code></h2>\n<p>This subcommand sets a slot to <em>migrating</em> state. In order to set a slot\n              in this state, the node receiving the command must be the hash slot owner,\n              otherwise an error is returned.</p>\n<p>When a slot is set in migrating state, the node changes behavior in the\n              following way:</p>\n<ol>\n<li>If a command is received about an existing key, the command is processed as usually.</li>\n<li>If a command is received about a key that does not exists, an <code>ASK</code> redirection is emitted by the node, asking the client to retry only that specific query into <code>destination-node</code>. In this case the client should not update its hash slot to node mapping.</li>\n<li>If the command contains multiple keys, in case none exist, the behavior is the same as point 2, if all exist, it is the same as point 1, however if only a partial number of keys exist, the command emits a <code>TRYAGAIN</code> error in order for the keys interested to finish being migrated to the target node, so that the multi keys command can be executed.</li>\n</ol>\n<span class=\"anchor\" id=\"cluster-setslot-codeltslotgtcode-importing-codeltsource-node-idgtcode\"></span><h2><a class=\"anchor-link\" href=\"#cluster-setslot-codeltslotgtcode-importing-codeltsource-node-idgtcode\">*</a>CLUSTER SETSLOT <code>&lt;slot&gt;</code> IMPORTING <code>&lt;source-node-id&gt;</code></h2>\n<p>This subcommand is the reverse of <code>MIGRATING</code>, and prepares the destination\n              node to import keys from the specified source node. The command only works if\n              the node is not already owner of the specified hash slot.</p>\n<p>When a slot is set in importing state, the node changes behavior in the following way:</p>\n<ol>\n<li>Commands about this hash slot are refused and a <code>MOVED</code> redirection is generated as usually, but in the case the command follows an <code>ASKING</code> command, in this case the command is executed.</li>\n</ol>\n<p>In this way when a node in migrating state generates an <code>ASK</code> redirection, the client contacts the target node, sends <code>ASKING</code>, and immediately after sends the command. This way commands about non-existing keys in the old node or keys already migrated to the target node are executed in the target node, so that:</p>\n<ol>\n<li>New keys are always created in the target node. During a hash slot migration we'll have to move only old keys, not new ones.</li>\n<li>Commands about keys already migrated are correctly processed in the context of the node which is the target of the migration, the new hash slot owner, in order to guarantee consistency.</li>\n<li>Without <code>ASKING</code> the behavior is the same as usually. This guarantees that clients with a broken hash slots mapping will not write for error in the target node, creating a new version of a key that has yet to be migrated.</li>\n</ol>\n<span class=\"anchor\" id=\"cluster-setslot-codeltslotgtcode-stable\"></span><h2><a class=\"anchor-link\" href=\"#cluster-setslot-codeltslotgtcode-stable\">*</a>CLUSTER SETSLOT <code>&lt;slot&gt;</code> STABLE</h2>\n<p>This subcommand just clears migrating / importing state from the slot. It is\n              mainly used to fix a cluster stuck in a wrong state by <code>redis-trib fix</code>.\n              Normally the two states are cleared automatically at the end of the migration\n              using the <code>SETSLOT ... NODE ...</code> subcommand as explained in the next section.</p>\n<span class=\"anchor\" id=\"cluster-setslot-codeltslotgtcode-node-codeltnode-idgtcode\"></span><h2><a class=\"anchor-link\" href=\"#cluster-setslot-codeltslotgtcode-node-codeltnode-idgtcode\">*</a>CLUSTER SETSLOT <code>&lt;slot&gt;</code> NODE <code>&lt;node-id&gt;</code></h2>\n<p>The <code>NODE</code> subcommand is the one with the most complex semantics. It\n              associates the hash slot with the specified node, however the command works\n              only in specific situations and has different side effects depending on the\n              slot state. The following is the set of pre-conditions and side effects of the\n              command:</p>\n<ol>\n<li>If the current hash slot owner is the node receiving the command, but for effect of the command the slot would be assigned to a different node, the command will return an error if there are still keys for that hash slot in the node receiving the command.</li>\n<li>If the slot is in <em>migrating</em> state, the state gets cleared when the slot is assigned to another node.</li>\n<li>If the slot was in <em>importing</em> state in the node receiving the command, and the command assigns the slot to this node (which happens in the target node at the end of the resharding of a hash slot from one node to another), the command has the following side effects: A) the <em>importing</em> state is cleared. B) If the node config epoch is not already the greatest of the cluster, it generates a new one and assigns the new config epoch to itself. This way its new hash slot ownership will win over any past configuration created by previous failovers or slot migrations.</li>\n</ol>\n<p>It is important to note that step 3 is the only time when a Redis Cluster node will create a new config epoch without agreement from other nodes. This only happens when a manual configuration is operated. However it is impossible that this creates a non-transient setup where two nodes have the same config epoch, since Redis Cluster uses a config epoch collision resolution algorithm.</p>\n<span class=\"anchor\" id=\"return-value\"></span><h2><a class=\"anchor-link\" href=\"#return-value\">*</a>Return value</h2>\n<p><a href=\"/topics/protocol#simple-string-reply\">Simple string reply</a>: All the subcommands return <code>OK</code> if the command was successful. Otherwise an error is returned.</p>\n<span class=\"anchor\" id=\"redis-cluster-live-resharding-explained\"></span><h2><a class=\"anchor-link\" href=\"#redis-cluster-live-resharding-explained\">*</a>Redis Cluster live resharding explained</h2>\n<p>The <a href=\"/commands/cluster-setslot\">CLUSTER SETSLOT</a> command is an important piece used by Redis Cluster in order to migrate all the keys contained in one hash slot from one node to another. This is how the migration is orchestrated, with the help of other commands as well. We'll call the node that has the current ownership of the hash slot the <code>source</code> node, and the node where we want to migrate the <code>destination</code> node.</p>\n<ol>\n<li>Set the destination node slot to <em>importing</em> state using <code>CLUSTER SETSLOT &lt;slot&gt; IMPORTING &lt;source-node-id&gt;</code>.</li>\n<li>Set the source node slot to <em>migrating</em> state using <code>CLUSTER SETSLOT &lt;slot&gt; MIGRATING &lt;destination-node-id&gt;</code>.</li>\n<li>Get keys from the source node with <a href=\"/commands/cluster-getkeysinslot\">CLUSTER GETKEYSINSLOT</a> command and move them into the destination node using the <a href=\"/commands/migrate\">MIGRATE</a> command.</li>\n<li>Use <code>CLUSTER SETSLOT &lt;slot&gt; NODE &lt;destination-node-id&gt;</code> in the source or destination.</li>\n</ol>\n<p>Notes:</p>\n<ul>\n<li>The order of step 1 and 2 is important. We want the destination node to be ready to accept <code>ASK</code> redirections when the source node is configured to redirect.</li>\n<li>Step 4 does not technically need to use <code>SETSLOT</code> in the nodes not involved in the resharding, since the configuration will eventually propagate itself, however it is a good idea to do so in order to stop nodes from pointing to the wrong node for the hash slot moved as soon as possible, resulting in less redirections to find the right node.</li>\n</ul>\n</div>"}, "CLUSTER SLAVES": {"category": "cluster", "help_link": "/commands/cluster-slaves", "args": ["node-id"], "summary": "List replica nodes of the specified master node", "name": "CLUSTER SLAVES", "help_text": "<div class=\"article-main\">\n<div class=\"metadata\">\n<p><strong>Available since 3.0.0.</strong></p>\n<p><strong>Time complexity:</strong> O(1)</p>\n</div>\n<p><strong>A note about the word slave used in this man page and command name</strong>: Starting with Redis 5 this command: starting with Redis version 5, if not for backward compatibility, the Redis project no longer uses the word slave. Please use the new command <a href=\"/commands/cluster-replicas\">CLUSTER REPLICAS</a>. The command <a href=\"/commands/slaveof\">SLAVEOF</a> will continue to work for backward compatibility.</p>\n<p>The command provides a list of replica nodes replicating from the specified\n              master node. The list is provided in the same format used by <a href=\"/commands/cluster-nodes\">CLUSTER NODES</a> (please refer to its documentation for the specification of the format).</p>\n<p>The command will fail if the specified node is not known or if it is not\n              a master according to the node table of the node receiving the command.</p>\n<p>Note that if a replica is added, moved, or removed from a given master node,\n              and we ask <a href=\"/commands/cluster-slaves\">CLUSTER SLAVES</a> to a node that has not yet received the\n              configuration update, it may show stale information. However eventually\n              (in a matter of seconds if there are no network partitions) all the nodes\n              will agree about the set of nodes associated with a given master.</p>\n<span class=\"anchor\" id=\"return-value\"></span><h2><a class=\"anchor-link\" href=\"#return-value\">*</a>Return value</h2>\n<p>The command returns data in the same format as <a href=\"/commands/cluster-nodes\">CLUSTER NODES</a>.</p>\n</div>"}, "CLUSTER REPLICAS": {"category": "cluster", "help_link": "/commands/cluster-replicas", "args": ["node-id"], "summary": "List replica nodes of the specified master node", "name": "CLUSTER REPLICAS", "help_text": "<div class=\"article-main\">\n<div class=\"metadata\">\n<p><strong>Available since 5.0.0.</strong></p>\n<p><strong>Time complexity:</strong> O(1)</p>\n</div>\n<p>The command provides a list of replica nodes replicating from the specified\n              master node. The list is provided in the same format used by <a href=\"/commands/cluster-nodes\">CLUSTER NODES</a> (please refer to its documentation for the specification of the format).</p>\n<p>The command will fail if the specified node is not known or if it is not\n              a master according to the node table of the node receiving the command.</p>\n<p>Note that if a replica is added, moved, or removed from a given master node,\n              and we ask <a href=\"/commands/cluster-replicas\">CLUSTER REPLICAS</a> to a node that has not yet received the\n              configuration update, it may show stale information. However eventually\n              (in a matter of seconds if there are no network partitions) all the nodes\n              will agree about the set of nodes associated with a given master.</p>\n<span class=\"anchor\" id=\"return-value\"></span><h2><a class=\"anchor-link\" href=\"#return-value\">*</a>Return value</h2>\n<p>The command returns data in the same format as <a href=\"/commands/cluster-nodes\">CLUSTER NODES</a>.</p>\n</div>"}, "CLUSTER SLOTS": {"category": "cluster", "help_link": "/commands/cluster-slots", "args": [], "summary": "Get array of Cluster slot to node mappings", "name": "CLUSTER SLOTS", "help_text": "<div class=\"article-main\">\n<div class=\"metadata\">\n<p><strong>Available since 3.0.0.</strong></p>\n<p><strong>Time complexity:</strong> O(N) where N is the total number of Cluster nodes</p>\n</div>\n<p><a href=\"/commands/cluster-slots\">CLUSTER SLOTS</a> returns details about which cluster slots map to which\n              Redis instances. The command is suitable to be used by Redis Cluster client\n              libraries implementations in order to retrieve (or update when a redirection\n              is received) the map associating cluster <em>hash slots</em> with actual nodes\n              network coordinates (composed of an IP address and a TCP port), so that when\n              a command is received, it can be sent to what is likely the right instance\n              for the keys specified in the command.</p>\n<span class=\"anchor\" id=\"nested-result-array\"></span><h2><a class=\"anchor-link\" href=\"#nested-result-array\">*</a>Nested Result Array</h2>\n<p>Each nested result is:</p>\n<ul>\n<li>Start slot range</li>\n<li>End slot range</li>\n<li>Master for slot range represented as nested IP/Port array </li>\n<li>First replica of master for slot range</li>\n<li>Second replica</li>\n<li>...continues until all replicas for this master are returned.</li>\n</ul>\n<p>Each result includes all active replicas of the master instance\n              for the listed slot range.  Failed replicas are not returned.</p>\n<p>The third nested reply is guaranteed to be the IP/Port pair of\n              the master instance for the slot range.\n              All IP/Port pairs after the third nested reply are replicas\n              of the master.</p>\n<p>If a cluster instance has non-contiguous slots (e.g. 1-400,900,1800-6000) then\n              master and replica IP/Port results will be duplicated for each top-level\n              slot range reply.</p>\n<p><strong>Warning:</strong> Newer versions of Redis Cluster will output, for each Redis instance, not just the IP and port, but also the node ID as third element of the array. In future versions there could be more elements describing the node better. In general a client implementation should just rely on the fact that certain parameters are at fixed positions as specified, but more parameters may follow and should be ignored. Similarly a client library should try if possible to cope with the fact that older versions may just have the IP and port parameter.</p>\n<span class=\"anchor\" id=\"return-value\"></span><h2><a class=\"anchor-link\" href=\"#return-value\">*</a>Return value</h2>\n<p><a href=\"/topics/protocol#array-reply\">Array reply</a>: nested list of slot ranges with IP/Port mappings.</p>\n<span class=\"anchor\" id=\"sample-output-old-version\"></span><h3><a class=\"anchor-link\" href=\"#sample-output-old-version\">*</a>Sample Output (old version)</h3>\n<pre><code>127.0.0.1:7001&gt; cluster slots\n1) 1) (integer) 0\n   2) (integer) 4095\n   3) 1) \"127.0.0.1\"\n      2) (integer) 7000\n   4) 1) \"127.0.0.1\"\n      2) (integer) 7004\n2) 1) (integer) 12288\n   2) (integer) 16383\n   3) 1) \"127.0.0.1\"\n      2) (integer) 7003\n   4) 1) \"127.0.0.1\"\n      2) (integer) 7007\n3) 1) (integer) 4096\n   2) (integer) 8191\n   3) 1) \"127.0.0.1\"\n      2) (integer) 7001\n   4) 1) \"127.0.0.1\"\n      2) (integer) 7005\n4) 1) (integer) 8192\n   2) (integer) 12287\n   3) 1) \"127.0.0.1\"\n      2) (integer) 7002\n   4) 1) \"127.0.0.1\"\n      2) (integer) 7006\n</code></pre>\n<span class=\"anchor\" id=\"sample-output-new-version-includes-ids\"></span><h3><a class=\"anchor-link\" href=\"#sample-output-new-version-includes-ids\">*</a>Sample Output (new version, includes IDs)</h3>\n<pre><code>127.0.0.1:30001&gt; cluster slots\n1) 1) (integer) 0\n   2) (integer) 5460\n   3) 1) \"127.0.0.1\"\n      2) (integer) 30001\n      3) \"09dbe9720cda62f7865eabc5fd8857c5d2678366\"\n   4) 1) \"127.0.0.1\"\n      2) (integer) 30004\n      3) \"821d8ca00d7ccf931ed3ffc7e3db0599d2271abf\"\n2) 1) (integer) 5461\n   2) (integer) 10922\n   3) 1) \"127.0.0.1\"\n      2) (integer) 30002\n      3) \"c9d93d9f2c0c524ff34cc11838c2003d8c29e013\"\n   4) 1) \"127.0.0.1\"\n      2) (integer) 30005\n      3) \"faadb3eb99009de4ab72ad6b6ed87634c7ee410f\"\n3) 1) (integer) 10923\n   2) (integer) 16383\n   3) 1) \"127.0.0.1\"\n      2) (integer) 30003\n      3) \"044ec91f325b7595e76dbcb18cc688b6a5b434a1\"\n   4) 1) \"127.0.0.1\"\n      2) (integer) 30006\n      3) \"58e6e48d41228013e5d9c1c37c5060693925e97e\"\n</code></pre>\n</div>"}, "COMMAND": {"category": "server", "help_link": "/commands/command", "args": [], "summary": "Get array of Redis command details", "name": "COMMAND", "help_text": "<div class=\"article-main\">\n<div class=\"metadata\">\n<p><strong>Available since 2.8.13.</strong></p>\n<p><strong>Time complexity:</strong> O(N) where N is the total number of Redis commands</p>\n</div>\n<p>Returns <a href=\"/topics/protocol#array-reply\">Array reply</a> of details about all Redis commands.</p>\n<p>Cluster clients must be aware of key positions in commands so commands can go to matching instances,\n              but Redis commands vary between accepting one key,\n              multiple keys, or even multiple keys separated by other data.</p>\n<p>You can use <a href=\"/commands/command\">COMMAND</a> to cache a mapping between commands and key positions for\n              each command to enable exact routing of commands to cluster instances.</p>\n<span class=\"anchor\" id=\"nested-result-array\"></span><h2><a class=\"anchor-link\" href=\"#nested-result-array\">*</a>Nested Result Array</h2>\n<p>Each top-level result contains six nested results.  Each nested result is:</p>\n<ul>\n<li>command name</li>\n<li>command arity specification</li>\n<li>nested <a href=\"/topics/protocol#array-reply\">Array reply</a> of command flags</li>\n<li>position of first key in argument list</li>\n<li>position of last key in argument list</li>\n<li>step count for locating repeating keys</li>\n</ul>\n<span class=\"anchor\" id=\"command-name\"></span><h3><a class=\"anchor-link\" href=\"#command-name\">*</a>Command Name</h3>\n<p>Command name is the command returned as a lowercase string.</p>\n<span class=\"anchor\" id=\"command-arity\"></span><h3><a class=\"anchor-link\" href=\"#command-arity\">*</a>Command Arity</h3>\n<table style=\"width:50%\">\n<tr><td>\n<pre>\n<code>1) 1) \"get\"\n   2) (integer) 2\n   3) 1) readonly\n   4) (integer) 1\n   5) (integer) 1\n   6) (integer) 1\n</code></pre>\n</td>\n<td>\n<pre>\n<code>1) 1) \"mget\"\n   2) (integer) -2\n   3) 1) readonly\n   4) (integer) 1\n   5) (integer) -1\n   6) (integer) 1\n</code></pre>\n</td></tr>\n</table>\n<p>Command arity follows a simple pattern:</p>\n<ul>\n<li>positive if command has fixed number of required arguments.</li>\n<li>negative if command has minimum number of required arguments, but may have more.</li>\n</ul>\n<p>Command arity <em>includes</em> counting the command name itself.</p>\n<p>Examples:</p>\n<ul>\n<li><a href=\"/commands/get\">GET</a> arity is 2 since the command only accepts one\n              argument and always has the format <code>GET _key_</code>.</li>\n<li><a href=\"/commands/mget\">MGET</a> arity is -2 since the command accepts at a minimum\n              one argument, but up to an unlimited number: <code>MGET _key1_ [key2] [key3] ...</code>.</li>\n</ul>\n<p>Also note with <a href=\"/commands/mget\">MGET</a>, the -1 value for \"last key position\" means the list\n              of keys may have unlimited length.</p>\n<span class=\"anchor\" id=\"flags\"></span><h3><a class=\"anchor-link\" href=\"#flags\">*</a>Flags</h3>\n<p>Command flags is <a href=\"/topics/protocol#array-reply\">Array reply</a> containing one or more status replies:</p>\n<ul>\n<li><em>write</em> - command may result in modifications</li>\n<li><em>readonly</em> - command will never modify keys</li>\n<li><em>denyoom</em> - reject command if currently OOM</li>\n<li><em>admin</em> - server admin command</li>\n<li><em>pubsub</em> - pubsub-related command</li>\n<li><em>noscript</em> - deny this command from scripts</li>\n<li><em>random</em> - command has random results, dangerous for scripts</li>\n<li><em>sort_for_script</em> - if called from script, sort output</li>\n<li><em>loading</em> - allow command while database is loading</li>\n<li><em>stale</em> - allow command while replica has stale data</li>\n<li><em>skip_monitor</em> - do not show this command in MONITOR</li>\n<li><em>asking</em> - cluster related - accept even if importing</li>\n<li><em>fast</em> - command operates in constant or log(N) time.  Used for latency monitoring.</li>\n<li><em>movablekeys</em> - keys have no pre-determined position.  You must discover keys yourself.</li>\n</ul>\n<span class=\"anchor\" id=\"movable-keys\"></span><h3><a class=\"anchor-link\" href=\"#movable-keys\">*</a>Movable Keys</h3>\n<pre><code>1) 1) \"sort\"\n   2) (integer) -2\n   3) 1) write\n      2) denyoom\n      3) movablekeys\n   4) (integer) 1\n   5) (integer) 1\n   6) (integer) 1\n</code></pre>\n<p>Some Redis commands have no predetermined key locations.  For those commands,\n              flag <code>movablekeys</code> is added to the command flags <a href=\"/topics/protocol#array-reply\">Array reply</a>.  Your Redis\n              Cluster client needs to parse commands marked <code>movablekeys</code> to locate all relevant key positions.</p>\n<p>Complete list of commands currently requiring key location parsing:</p>\n<ul>\n<li><a href=\"/commands/sort\">SORT</a> - optional <code>STORE</code> key, optional <code>BY</code> weights, optional <a href=\"/commands/get\">GET</a> keys</li>\n<li><a href=\"/commands/zunionstore\">ZUNIONSTORE</a> - keys stop when <code>WEIGHT</code> or <code>AGGREGATE</code> starts</li>\n<li><a href=\"/commands/zinterstore\">ZINTERSTORE</a> - keys stop when <code>WEIGHT</code> or <code>AGGREGATE</code> starts</li>\n<li><a href=\"/commands/eval\">EVAL</a> - keys stop after <code>numkeys</code> count arguments</li>\n<li><a href=\"/commands/evalsha\">EVALSHA</a> - keys stop after <code>numkeys</code> count arguments</li>\n</ul>\n<p>Also see <a href=\"/commands/command-getkeys\">COMMAND GETKEYS</a> for getting your Redis server tell you where keys\n              are in any given command.</p>\n<span class=\"anchor\" id=\"first-key-in-argument-list\"></span><h3><a class=\"anchor-link\" href=\"#first-key-in-argument-list\">*</a>First Key in Argument List</h3>\n<p>For most commands the first key is position 1.  Position 0 is\n              always the command name itself.</p>\n<span class=\"anchor\" id=\"last-key-in-argument-list\"></span><h3><a class=\"anchor-link\" href=\"#last-key-in-argument-list\">*</a>Last Key in Argument List</h3>\n<p>Redis commands usually accept one key, two keys, or an unlimited number of keys.</p>\n<p>If a command accepts one key, the first key and last key positions is 1.</p>\n<p>If a command accepts two keys (e.g. <a href=\"/commands/brpoplpush\">BRPOPLPUSH</a>, <a href=\"/commands/smove\">SMOVE</a>, <a href=\"/commands/rename\">RENAME</a>, ...) then the\n              last key position is the location of the last key in the argument list.</p>\n<p>If a command accepts an unlimited number of keys, the last key position is -1.</p>\n<span class=\"anchor\" id=\"step-count\"></span><h3><a class=\"anchor-link\" href=\"#step-count\">*</a>Step Count</h3>\n<table style=\"width:50%\">\n<tr><td>\n<pre>\n<code>1) 1) \"mset\"\n   2) (integer) -3\n   3) 1) write\n      2) denyoom\n   4) (integer) 1\n   5) (integer) -1\n   6) (integer) 2\n</code></pre>\n</td>\n<td>\n<pre>\n<code>1) 1) \"mget\"\n   2) (integer) -2\n   3) 1) readonly\n   4) (integer) 1\n   5) (integer) -1\n   6) (integer) 1\n</code></pre>\n</td></tr>\n</table>\n<p>Key step count allows us to find key positions in commands\n              like <a href=\"/commands/mset\">MSET</a> where the format is <code>MSET _key1_ _val1_ [key2] [val2] [key3] [val3]...</code>.</p>\n<p>In the case of <a href=\"/commands/mset\">MSET</a>, keys are every other position so the step value is 2.  Compare\n              with <a href=\"/commands/mget\">MGET</a> above where the step value is just 1.</p>\n<span class=\"anchor\" id=\"return-value\"></span><h2><a class=\"anchor-link\" href=\"#return-value\">*</a>Return value</h2>\n<p><a href=\"/topics/protocol#array-reply\">Array reply</a>: nested list of command details.  Commands are returned\n              in random order.</p>\n<span class=\"anchor\" id=\"examples\"></span><h2><a class=\"anchor-link\" href=\"#examples\">*</a>Examples</h2>\n<div class=\"example\" data-session=\"aebf0537c5c2356189ab544f3b55f2b8\">\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">COMMAND</span>\n<pre>1) 1) \"hset\"\n     2) (integer) -4\n     3) 1) \"write\"\n        2) \"denyoom\"\n        3) \"fast\"\n     4) (integer) 1\n     5) (integer) 1\n     6) (integer) 1\n  2) 1) \"pexpire\"\n     2) (integer) 3\n     3) 1) \"write\"\n        2) \"fast\"\n     4) (integer) 1\n     5) (integer) 1\n     6) (integer) 1\n  3) 1) \"pttl\"\n     2) (integer) 2\n     3) 1) \"readonly\"\n        2) \"fast\"\n     4) (integer) 1\n     5) (integer) 1\n     6) (integer) 1\n  4) 1) \"hlen\"\n     2) (integer) 2\n     3) 1) \"readonly\"\n        2) \"fast\"\n     4) (integer) 1\n     5) (integer) 1\n     6) (integer) 1\n  5) 1) \"zrangebylex\"\n     2) (integer) -4\n     3) 1) \"readonly\"\n     4) (integer) 1\n     5) (integer) 1\n     6) (integer) 1\n  6) 1) \"zcount\"\n     2) (integer) 4\n     3) 1) \"readonly\"\n        2) \"fast\"\n     4) (integer) 1\n     5) (integer) 1\n     6) (integer) 1\n  7) 1) \"setrange\"\n     2) (integer) 4\n     3) 1) \"write\"\n        2) \"denyoom\"\n     4) (integer) 1\n     5) (integer) 1\n     6) (integer) 1\n  8) 1) \"brpoplpush\"\n     2) (integer) 4\n     3) 1) \"write\"\n        2) \"denyoom\"\n        3) \"noscript\"\n     4) (integer) 1\n     5) (integer) 2\n     6) (integer) 1\n  9) 1) \"strlen\"\n     2) (integer) 2\n     3) 1) \"readonly\"\n        2) \"fast\"\n     4) (integer) 1\n     5) (integer) 1\n     6) (integer) 1\n 10) 1) \"lset\"\n     2) (integer) 4\n     3) 1) \"write\"\n        2) \"denyoom\"\n     4) (integer) 1\n     5) (integer) 1\n     6) (integer) 1\n 11) 1) \"migrate\"\n     2) (integer) -6\n     3) 1) \"write\"\n        2) \"movablekeys\"\n     4) (integer) 0\n     5) (integer) 0\n     6) (integer) 0\n 12) 1) \"getrange\"\n     2) (integer) 4\n     3) 1) \"readonly\"\n     4) (integer) 1\n     5) (integer) 1\n     6) (integer) 1\n 13) 1) \"set\"\n     2) (integer) -3\n     3) 1) \"write\"\n        2) \"denyoom\"\n     4) (integer) 1\n     5) (integer) 1\n     6) (integer) 1\n 14) 1) \"move\"\n     2) (integer) 3\n     3) 1) \"write\"\n        2) \"fast\"\n     4) (integer) 1\n     5) (integer) 1\n     6) (integer) 1\n 15) 1) \"bgsave\"\n     2) (integer) -1\n     3) 1) \"admin\"\n     4) (integer) 0\n     5) (integer) 0\n     6) (integer) 0\n 16) 1) \"zrevrank\"\n     2) (integer) 3\n     3) 1) \"readonly\"\n        2) \"fast\"\n     4) (integer) 1\n     5) (integer) 1\n     6) (integer) 1\n 17) 1) \"lpop\"\n     2) (integer) 2\n     3) 1) \"write\"\n        2) \"fast\"\n     4) (integer) 1\n     5) (integer) 1\n     6) (integer) 1\n 18) 1) \"sinterstore\"\n     2) (integer) -3\n     3) 1) \"write\"\n        2) \"denyoom\"\n     4) (integer) 1\n     5) (integer) -1\n     6) (integer) 1\n 19) 1) \"replconf\"\n     2) (integer) -1\n     3) 1) \"admin\"\n        2) \"noscript\"\n        3) \"loading\"\n        4) \"stale\"\n     4) (integer) 0\n     5) (integer) 0\n     6) (integer) 0\n 20) 1) \"geohash\"\n     2) (integer) -2\n     3) 1) \"readonly\"\n     4) (integer) 1\n     5) (integer) 1\n     6) (integer) 1\n 21) 1) \"keys\"\n     2) (integer) 2\n     3) 1) \"readonly\"\n        2) \"sort_for_script\"\n     4) (integer) 0\n     5) (integer) 0\n     6) (integer) 0\n 22) 1) \"xack\"\n     2) (integer) -3\n     3) 1) \"write\"\n        2) \"fast\"\n     4) (integer) 1\n     5) (integer) 1\n     6) (integer) 1\n 23) 1) \"pfselftest\"\n     2) (integer) 1\n     3) 1) \"admin\"\n     4) (integer) 0\n     5) (integer) 0\n     6) (integer) 0\n 24) 1) \"sismember\"\n     2) (integer) 3\n     3) 1) \"readonly\"\n        2) \"fast\"\n     4) (integer) 1\n     5) (integer) 1\n     6) (integer) 1\n 25) 1) \"zrangebyscore\"\n     2) (integer) -4\n     3) 1) \"readonly\"\n     4) (integer) 1\n     5) (integer) 1\n     6) (integer) 1\n 26) 1) \"setex\"\n     2) (integer) 4\n     3) 1) \"write\"\n        2) \"denyoom\"\n     4) (integer) 1\n     5) (integer) 1\n     6) (integer) 1\n 27) 1) \"hmset\"\n     2) (integer) -4\n     3) 1) \"write\"\n        2) \"denyoom\"\n        3) \"fast\"\n     4) (integer) 1\n     5) (integer) 1\n     6) (integer) 1\n 28) 1) \"rpop\"\n     2) (integer) 2\n     3) 1) \"write\"\n        2) \"fast\"\n     4) (integer) 1\n     5) (integer) 1\n     6) (integer) 1\n 29) 1) \"pfadd\"\n     2) (integer) -2\n     3) 1) \"write\"\n        2) \"denyoom\"\n        3) \"fast\"\n     4) (integer) 1\n     5) (integer) 1\n     6) (integer) 1\n 30) 1) \"renamenx\"\n     2) (integer) 3\n     3) 1) \"write\"\n        2) \"fast\"\n     4) (integer) 1\n     5) (integer) 2\n     6) (integer) 1\n 31) 1) \"exec\"\n     2) (integer) 1\n     3) 1) \"noscript\"\n        2) \"skip_monitor\"\n     4) (integer) 0\n     5) (integer) 0\n     6) (integer) 0\n 32) 1) \"readwrite\"\n     2) (integer) 1\n     3) 1) \"fast\"\n     4) (integer) 0\n     5) (integer) 0\n     6) (integer) 0\n 33) 1) \"xreadgroup\"\n     2) (integer) -3\n     3) 1) \"write\"\n        2) \"noscript\"\n        3) \"movablekeys\"\n     4) (integer) 1\n     5) (integer) 1\n     6) (integer) 1\n 34) 1) \"setbit\"\n     2) (integer) 4\n     3) 1) \"write\"\n        2) \"denyoom\"\n     4) (integer) 1\n     5) (integer) 1\n     6) (integer) 1\n 35) 1) \"del\"\n     2) (integer) -2\n     3) 1) \"write\"\n     4) (integer) 1\n     5) (integer) -1\n     6) (integer) 1\n 36) 1) \"zrem\"\n     2) (integer) -3\n     3) 1) \"write\"\n        2) \"fast\"\n     4) (integer) 1\n     5) (integer) 1\n     6) (integer) 1\n 37) 1) \"llen\"\n     2) (integer) 2\n     3) 1) \"readonly\"\n        2) \"fast\"\n     4) (integer) 1\n     5) (integer) 1\n     6) (integer) 1\n 38) 1) \"debug\"\n     2) (integer) -2\n     3) 1) \"admin\"\n        2) \"noscript\"\n     4) (integer) 0\n     5) (integer) 0\n     6) (integer) 0\n 39) 1) \"geoadd\"\n     2) (integer) -5\n     3) 1) \"write\"\n        2) \"denyoom\"\n     4) (integer) 1\n     5) (integer) 1\n     6) (integer) 1\n 40) 1) \"zremrangebyrank\"\n     2) (integer) 4\n     3) 1) \"write\"\n     4) (integer) 1\n     5) (integer) 1\n     6) (integer) 1\n 41) 1) \"sync\"\n     2) (integer) 1\n     3) 1) \"readonly\"\n        2) \"admin\"\n        3) \"noscript\"\n     4) (integer) 0\n     5) (integer) 0\n     6) (integer) 0\n 42) 1) \"flushdb\"\n     2) (integer) -1\n     3) 1) \"write\"\n     4) (integer) 0\n     5) (integer) 0\n     6) (integer) 0\n 43) 1) \"georadiusbymember\"\n     2) (integer) -5\n     3) 1) \"write\"\n        2) \"movablekeys\"\n     4) (integer) 1\n     5) (integer) 1\n     6) (integer) 1\n 44) 1) \"hvals\"\n     2) (integer) 2\n     3) 1) \"readonly\"\n        2) \"sort_for_script\"\n     4) (integer) 1\n     5) (integer) 1\n     6) (integer) 1\n 45) 1) \"mget\"\n     2) (integer) -2\n     3) 1) \"readonly\"\n        2) \"fast\"\n     4) (integer) 1\n     5) (integer) -1\n     6) (integer) 1\n 46) 1) \"randomkey\"\n     2) (integer) 1\n     3) 1) \"readonly\"\n        2) \"random\"\n     4) (integer) 0\n     5) (integer) 0\n     6) (integer) 0\n 47) 1) \"pubsub\"\n     2) (integer) -2\n     3) 1) \"pubsub\"\n        2) \"random\"\n        3) \"loading\"\n        4) \"stale\"\n     4) (integer) 0\n     5) (integer) 0\n     6) (integer) 0\n 48) 1) \"zlexcount\"\n     2) (integer) 4\n     3) 1) \"readonly\"\n        2) \"fast\"\n     4) (integer) 1\n     5) (integer) 1\n     6) (integer) 1\n 49) 1) \"cluster\"\n     2) (integer) -2\n     3) 1) \"admin\"\n     4) (integer) 0\n     5) (integer) 0\n     6) (integer) 0\n 50) 1) \"sort\"\n     2) (integer) -2\n     3) 1) \"write\"\n        2) \"denyoom\"\n        3) \"movablekeys\"\n     4) (integer) 1\n     5) (integer) 1\n     6) (integer) 1\n 51) 1) \"sadd\"\n     2) (integer) -3\n     3) 1) \"write\"\n        2) \"denyoom\"\n        3) \"fast\"\n     4) (integer) 1\n     5) (integer) 1\n     6) (integer) 1\n 52) 1) \"xread\"\n     2) (integer) -3\n     3) 1) \"readonly\"\n        2) \"noscript\"\n        3) \"movablekeys\"\n     4) (integer) 1\n     5) (integer) 1\n     6) (integer) 1\n 53) 1) \"blpop\"\n     2) (integer) -3\n     3) 1) \"write\"\n        2) \"noscript\"\n     4) (integer) 1\n     5) (integer) -2\n     6) (integer) 1\n 54) 1) \"select\"\n     2) (integer) 2\n     3) 1) \"loading\"\n        2) \"fast\"\n     4) (integer) 0\n     5) (integer) 0\n     6) (integer) 0\n 55) 1) \"zrank\"\n     2) (integer) 3\n     3) 1) \"readonly\"\n        2) \"fast\"\n     4) (integer) 1\n     5) (integer) 1\n     6) (integer) 1\n 56) 1) \"discard\"\n     2) (integer) 1\n     3) 1) \"noscript\"\n        2) \"fast\"\n     4) (integer) 0\n     5) (integer) 0\n     6) (integer) 0\n 57) 1) \"georadius_ro\"\n     2) (integer) -6\n     3) 1) \"readonly\"\n        2) \"movablekeys\"\n     4) (integer) 1\n     5) (integer) 1\n     6) (integer) 1\n 58) 1) \"geodist\"\n     2) (integer) -4\n     3) 1) \"readonly\"\n     4) (integer) 1\n     5) (integer) 1\n     6) (integer) 1\n 59) 1) \"readonly\"\n     2) (integer) 1\n     3) 1) \"fast\"\n     4) (integer) 0\n     5) (integer) 0\n     6) (integer) 0\n 60) 1) \"watch\"\n     2) (integer) -2\n     3) 1) \"noscript\"\n        2) \"fast\"\n     4) (integer) 1\n     5) (integer) -1\n     6) (integer) 1\n 61) 1) \"pfdebug\"\n     2) (integer) -3\n     3) 1) \"write\"\n     4) (integer) 0\n     5) (integer) 0\n     6) (integer) 0\n 62) 1) \"zrevrangebyscore\"\n     2) (integer) -4\n     3) 1) \"readonly\"\n     4) (integer) 1\n     5) (integer) 1\n     6) (integer) 1\n 63) 1) \"spop\"\n     2) (integer) -2\n     3) 1) \"write\"\n        2) \"random\"\n        3) \"fast\"\n     4) (integer) 1\n     5) (integer) 1\n     6) (integer) 1\n 64) 1) \"script\"\n     2) (integer) -2\n     3) 1) \"noscript\"\n     4) (integer) 0\n     5) (integer) 0\n     6) (integer) 0\n 65) 1) \"scard\"\n     2) (integer) 2\n     3) 1) \"readonly\"\n        2) \"fast\"\n     4) (integer) 1\n     5) (integer) 1\n     6) (integer) 1\n 66) 1) \"config\"\n     2) (integer) -2\n     3) 1) \"admin\"\n        2) \"loading\"\n        3) \"stale\"\n     4) (integer) 0\n     5) (integer) 0\n     6) (integer) 0\n 67) 1) \"pfmerge\"\n     2) (integer) -2\n     3) 1) \"write\"\n        2) \"denyoom\"\n     4) (integer) 1\n     5) (integer) -1\n     6) (integer) 1\n 68) 1) \"geopos\"\n     2) (integer) -2\n     3) 1) \"readonly\"\n     4) (integer) 1\n     5) (integer) 1\n     6) (integer) 1\n 69) 1) \"zscan\"\n     2) (integer) -3\n     3) 1) \"readonly\"\n        2) \"random\"\n     4) (integer) 1\n     5) (integer) 1\n     6) (integer) 1\n 70) 1) \"pfcount\"\n     2) (integer) -2\n     3) 1) \"readonly\"\n     4) (integer) 1\n     5) (integer) -1\n     6) (integer) 1\n 71) 1) \"zremrangebyscore\"\n     2) (integer) 4\n     3) 1) \"write\"\n     4) (integer) 1\n     5) (integer) 1\n     6) (integer) 1\n 72) 1) \"sdiff\"\n     2) (integer) -2\n     3) 1) \"readonly\"\n        2) \"sort_for_script\"\n     4) (integer) 1\n     5) (integer) -1\n     6) (integer) 1\n 73) 1) \"auth\"\n     2) (integer) 2\n     3) 1) \"noscript\"\n        2) \"loading\"\n        3) \"stale\"\n        4) \"fast\"\n     4) (integer) 0\n     5) (integer) 0\n     6) (integer) 0\n 74) 1) \"shutdown\"\n     2) (integer) -1\n     3) 1) \"admin\"\n        2) \"loading\"\n        3) \"stale\"\n     4) (integer) 0\n     5) (integer) 0\n     6) (integer) 0\n 75) 1) \"module\"\n     2) (integer) -2\n     3) 1) \"admin\"\n        2) \"noscript\"\n     4) (integer) 0\n     5) (integer) 0\n     6) (integer) 0\n 76) 1) \"getset\"\n     2) (integer) 3\n     3) 1) \"write\"\n        2) \"denyoom\"\n     4) (integer) 1\n     5) (integer) 1\n     6) (integer) 1\n 77) 1) \"xpending\"\n     2) (integer) -3\n     3) 1) \"readonly\"\n     4) (integer) 1\n     5) (integer) 1\n     6) (integer) 1\n 78) 1) \"hdel\"\n     2) (integer) -3\n     3) 1) \"write\"\n        2) \"fast\"\n     4) (integer) 1\n     5) (integer) 1\n     6) (integer) 1\n 79) 1) \"hincrby\"\n     2) (integer) 4\n     3) 1) \"write\"\n        2) \"denyoom\"\n        3) \"fast\"\n     4) (integer) 1\n     5) (integer) 1\n     6) (integer) 1\n 80) 1) \"sscan\"\n     2) (integer) -3\n     3) 1) \"readonly\"\n        2) \"random\"\n     4) (integer) 1\n     5) (integer) 1\n     6) (integer) 1\n 81) 1) \"lrem\"\n     2) (integer) 4\n     3) 1) \"write\"\n     4) (integer) 1\n     5) (integer) 1\n     6) (integer) 1\n 82) 1) \"hscan\"\n     2) (integer) -3\n     3) 1) \"readonly\"\n        2) \"random\"\n     4) (integer) 1\n     5) (integer) 1\n     6) (integer) 1\n 83) 1) \"hincrbyfloat\"\n     2) (integer) 4\n     3) 1) \"write\"\n        2) \"denyoom\"\n        3) \"fast\"\n     4) (integer) 1\n     5) (integer) 1\n     6) (integer) 1\n 84) 1) \"georadius\"\n     2) (integer) -6\n     3) 1) \"write\"\n        2) \"movablekeys\"\n     4) (integer) 1\n     5) (integer) 1\n     6) (integer) 1\n 85) 1) \"getbit\"\n     2) (integer) 3\n     3) 1) \"readonly\"\n        2) \"fast\"\n     4) (integer) 1\n     5) (integer) 1\n     6) (integer) 1\n 86) 1) \"msetnx\"\n     2) (integer) -3\n     3) 1) \"write\"\n        2) \"denyoom\"\n     4) (integer) 1\n     5) (integer) -1\n     6) (integer) 2\n 87) 1) \"hgetall\"\n     2) (integer) 2\n     3) 1) \"readonly\"\n     4) (integer) 1\n     5) (integer) 1\n     6) (integer) 1\n 88) 1) \"save\"\n     2) (integer) 1\n     3) 1) \"admin\"\n        2) \"noscript\"\n     4) (integer) 0\n     5) (integer) 0\n     6) (integer) 0\n 89) 1) \"time\"\n     2) (integer) 1\n     3) 1) \"random\"\n        2) \"fast\"\n     4) (integer) 0\n     5) (integer) 0\n     6) (integer) 0\n 90) 1) \"unlink\"\n     2) (integer) -2\n     3) 1) \"write\"\n        2) \"fast\"\n     4) (integer) 1\n     5) (integer) -1\n     6) (integer) 1\n 91) 1) \"smove\"\n     2) (integer) 4\n     3) 1) \"write\"\n        2) \"fast\"\n     4) (integer) 1\n     5) (integer) 2\n     6) (integer) 1\n 92) 1) \"zrange\"\n     2) (integer) -4\n     3) 1) \"readonly\"\n     4) (integer) 1\n     5) (integer) 1\n     6) (integer) 1\n 93) 1) \"lpushx\"\n     2) (integer) -3\n     3) 1) \"write\"\n        2) \"denyoom\"\n        3) \"fast\"\n     4) (integer) 1\n     5) (integer) 1\n     6) (integer) 1\n 94) 1) \"lpush\"\n     2) (integer) -3\n     3) 1) \"write\"\n        2) \"denyoom\"\n        3) \"fast\"\n     4) (integer) 1\n     5) (integer) 1\n     6) (integer) 1\n 95) 1) \"role\"\n     2) (integer) 1\n     3) 1) \"noscript\"\n        2) \"loading\"\n        3) \"stale\"\n     4) (integer) 0\n     5) (integer) 0\n     6) (integer) 0\n 96) 1) \"type\"\n     2) (integer) 2\n     3) 1) \"readonly\"\n        2) \"fast\"\n     4) (integer) 1\n     5) (integer) 1\n     6) (integer) 1\n 97) 1) \"dbsize\"\n     2) (integer) 1\n     3) 1) \"readonly\"\n        2) \"fast\"\n     4) (integer) 0\n     5) (integer) 0\n     6) (integer) 0\n 98) 1) \"lastsave\"\n     2) (integer) 1\n     3) 1) \"random\"\n        2) \"fast\"\n     4) (integer) 0\n     5) (integer) 0\n     6) (integer) 0\n 99) 1) \"ltrim\"\n     2) (integer) 4\n     3) 1) \"write\"\n     4) (integer) 1\n     5) (integer) 1\n     6) (integer) 1\n100) 1) \"restore\"\n     2) (integer) -4\n     3) 1) \"write\"\n        2) \"denyoom\"\n     4) (integer) 1\n     5) (integer) 1\n     6) (integer) 1\n101) 1) \"slowlog\"\n     2) (integer) -2\n     3) 1) \"admin\"\n     4) (integer) 0\n     5) (integer) 0\n     6) (integer) 0\n102) 1) \"zadd\"\n     2) (integer) -4\n     3) 1) \"write\"\n        2) \"denyoom\"\n        3) \"fast\"\n     4) (integer) 1\n     5) (integer) 1\n     6) (integer) 1\n103) 1) \"hget\"\n     2) (integer) 3\n     3) 1) \"readonly\"\n        2) \"fast\"\n     4) (integer) 1\n     5) (integer) 1\n     6) (integer) 1\n104) 1) \"persist\"\n     2) (integer) 2\n     3) 1) \"write\"\n        2) \"fast\"\n     4) (integer) 1\n     5) (integer) 1\n     6) (integer) 1\n105) 1) \"punsubscribe\"\n     2) (integer) -1\n     3) 1) \"pubsub\"\n        2) \"noscript\"\n        3) \"loading\"\n        4) \"stale\"\n     4) (integer) 0\n     5) (integer) 0\n     6) (integer) 0\n106) 1) \"rpush\"\n     2) (integer) -3\n     3) 1) \"write\"\n        2) \"denyoom\"\n        3) \"fast\"\n     4) (integer) 1\n     5) (integer) 1\n     6) (integer) 1\n107) 1) \"touch\"\n     2) (integer) -2\n     3) 1) \"readonly\"\n        2) \"fast\"\n     4) (integer) 1\n     5) (integer) 1\n     6) (integer) 1\n108) 1) \"incrby\"\n     2) (integer) 3\n     3) 1) \"write\"\n        2) \"denyoom\"\n        3) \"fast\"\n     4) (integer) 1\n     5) (integer) 1\n     6) (integer) 1\n109) 1) \"zunionstore\"\n     2) (integer) -4\n     3) 1) \"write\"\n        2) \"denyoom\"\n        3) \"movablekeys\"\n     4) (integer) 0\n     5) (integer) 0\n     6) (integer) 0\n110) 1) \"publish\"\n     2) (integer) 3\n     3) 1) \"pubsub\"\n        2) \"loading\"\n        3) \"stale\"\n        4) \"fast\"\n     4) (integer) 0\n     5) (integer) 0\n     6) (integer) 0\n111) 1) \"monitor\"\n     2) (integer) 1\n     3) 1) \"admin\"\n        2) \"noscript\"\n     4) (integer) 0\n     5) (integer) 0\n     6) (integer) 0\n112) 1) \"bzpopmin\"\n     2) (integer) -2\n     3) 1) \"write\"\n        2) \"noscript\"\n        3) \"fast\"\n     4) (integer) 1\n     5) (integer) -2\n     6) (integer) 1\n113) 1) \"decrby\"\n     2) (integer) 3\n     3) 1) \"write\"\n        2) \"denyoom\"\n        3) \"fast\"\n     4) (integer) 1\n     5) (integer) 1\n     6) (integer) 1\n114) 1) \"zincrby\"\n     2) (integer) 4\n     3) 1) \"write\"\n        2) \"denyoom\"\n        3) \"fast\"\n     4) (integer) 1\n     5) (integer) 1\n     6) (integer) 1\n115) 1) \"hmget\"\n     2) (integer) -3\n     3) 1) \"readonly\"\n        2) \"fast\"\n     4) (integer) 1\n     5) (integer) 1\n     6) (integer) 1\n116) 1) \"zrevrange\"\n     2) (integer) -4\n     3) 1) \"readonly\"\n     4) (integer) 1\n     5) (integer) 1\n     6) (integer) 1\n117) 1) \"xadd\"\n     2) (integer) -5\n     3) 1) \"write\"\n        2) \"denyoom\"\n        3) \"fast\"\n     4) (integer) 1\n     5) (integer) 1\n     6) (integer) 1\n118) 1) \"psubscribe\"\n     2) (integer) -2\n     3) 1) \"pubsub\"\n        2) \"noscript\"\n        3) \"loading\"\n        4) \"stale\"\n     4) (integer) 0\n     5) (integer) 0\n     6) (integer) 0\n119) 1) \"info\"\n     2) (integer) -1\n     3) 1) \"loading\"\n        2) \"stale\"\n     4) (integer) 0\n     5) (integer) 0\n     6) (integer) 0\n120) 1) \"zpopmin\"\n     2) (integer) -2\n     3) 1) \"write\"\n        2) \"fast\"\n     4) (integer) 1\n     5) (integer) -1\n     6) (integer) 1\n121) 1) \"swapdb\"\n     2) (integer) 3\n     3) 1) \"write\"\n        2) \"fast\"\n     4) (integer) 0\n     5) (integer) 0\n     6) (integer) 0\n122) 1) \"zscore\"\n     2) (integer) 3\n     3) 1) \"readonly\"\n        2) \"fast\"\n     4) (integer) 1\n     5) (integer) 1\n     6) (integer) 1\n123) 1) \"zremrangebylex\"\n     2) (integer) 4\n     3) 1) \"write\"\n     4) (integer) 1\n     5) (integer) 1\n     6) (integer) 1\n124) 1) \"client\"\n     2) (integer) -2\n     3) 1) \"admin\"\n        2) \"noscript\"\n     4) (integer) 0\n     5) (integer) 0\n     6) (integer) 0\n125) 1) \"sunion\"\n     2) (integer) -2\n     3) 1) \"readonly\"\n        2) \"sort_for_script\"\n     4) (integer) 1\n     5) (integer) -1\n     6) (integer) 1\n126) 1) \"xrange\"\n     2) (integer) -4\n     3) 1) \"readonly\"\n     4) (integer) 1\n     5) (integer) 1\n     6) (integer) 1\n127) 1) \"smembers\"\n     2) (integer) 2\n     3) 1) \"readonly\"\n        2) \"sort_for_script\"\n     4) (integer) 1\n     5) (integer) 1\n     6) (integer) 1\n128) 1) \"rename\"\n     2) (integer) 3\n     3) 1) \"write\"\n     4) (integer) 1\n     5) (integer) 2\n     6) (integer) 1\n129) 1) \"unsubscribe\"\n     2) (integer) -1\n     3) 1) \"pubsub\"\n        2) \"noscript\"\n        3) \"loading\"\n        4) \"stale\"\n     4) (integer) 0\n     5) (integer) 0\n     6) (integer) 0\n130) 1) \"xdel\"\n     2) (integer) -2\n     3) 1) \"write\"\n        2) \"fast\"\n     4) (integer) 1\n     5) (integer) 1\n     6) (integer) 1\n131) 1) \"zpopmax\"\n     2) (integer) -2\n     3) 1) \"write\"\n        2) \"fast\"\n     4) (integer) 1\n     5) (integer) -1\n     6) (integer) 1\n132) 1) \"psync\"\n     2) (integer) 3\n     3) 1) \"readonly\"\n        2) \"admin\"\n        3) \"noscript\"\n     4) (integer) 0\n     5) (integer) 0\n     6) (integer) 0\n133) 1) \"asking\"\n     2) (integer) 1\n     3) 1) \"fast\"\n     4) (integer) 0\n     5) (integer) 0\n     6) (integer) 0\n134) 1) \"brpop\"\n     2) (integer) -3\n     3) 1) \"write\"\n        2) \"noscript\"\n     4) (integer) 1\n     5) (integer) -2\n     6) (integer) 1\n135) 1) \"dump\"\n     2) (integer) 2\n     3) 1) \"readonly\"\n     4) (integer) 1\n     5) (integer) 1\n     6) (integer) 1\n136) 1) \"restore-asking\"\n     2) (integer) -4\n     3) 1) \"write\"\n        2) \"denyoom\"\n        3) \"asking\"\n     4) (integer) 1\n     5) (integer) 1\n     6) (integer) 1\n137) 1) \"xlen\"\n     2) (integer) 2\n     3) 1) \"readonly\"\n        2) \"fast\"\n     4) (integer) 1\n     5) (integer) 1\n     6) (integer) 1\n138) 1) \"expire\"\n     2) (integer) 3\n     3) 1) \"write\"\n        2) \"fast\"\n     4) (integer) 1\n     5) (integer) 1\n     6) (integer) 1\n139) 1) \"xgroup\"\n     2) (integer) -2\n     3) 1) \"write\"\n        2) \"denyoom\"\n     4) (integer) 2\n     5) (integer) 2\n     6) (integer) 1\n140) 1) \"object\"\n     2) (integer) -2\n     3) 1) \"readonly\"\n     4) (integer) 2\n     5) (integer) 2\n     6) (integer) 1\n141) 1) \"xclaim\"\n     2) (integer) -5\n     3) 1) \"write\"\n        2) \"fast\"\n     4) (integer) 1\n     5) (integer) 1\n     6) (integer) 1\n142) 1) \"sinter\"\n     2) (integer) -2\n     3) 1) \"readonly\"\n        2) \"sort_for_script\"\n     4) (integer) 1\n     5) (integer) -1\n     6) (integer) 1\n143) 1) \"evalsha\"\n     2) (integer) -3\n     3) 1) \"noscript\"\n        2) \"movablekeys\"\n     4) (integer) 0\n     5) (integer) 0\n     6) (integer) 0\n144) 1) \"bzpopmax\"\n     2) (integer) -2\n     3) 1) \"write\"\n        2) \"noscript\"\n        3) \"fast\"\n     4) (integer) 1\n     5) (integer) -2\n     6) (integer) 1\n145) 1) \"bitfield\"\n     2) (integer) -2\n     3) 1) \"write\"\n        2) \"denyoom\"\n     4) (integer) 1\n     5) (integer) 1\n     6) (integer) 1\n146) 1) \"bgrewriteaof\"\n     2) (integer) 1\n     3) 1) \"admin\"\n     4) (integer) 0\n     5) (integer) 0\n     6) (integer) 0\n147) 1) \"slaveof\"\n     2) (integer) 3\n     3) 1) \"admin\"\n        2) \"noscript\"\n        3) \"stale\"\n     4) (integer) 0\n     5) (integer) 0\n     6) (integer) 0\n148) 1) \"sunionstore\"\n     2) (integer) -3\n     3) 1) \"write\"\n        2) \"denyoom\"\n     4) (integer) 1\n     5) (integer) -1\n     6) (integer) 1\n149) 1) \"unwatch\"\n     2) (integer) 1\n     3) 1) \"noscript\"\n        2) \"fast\"\n     4) (integer) 0\n     5) (integer) 0\n     6) (integer) 0\n150) 1) \"bitpos\"\n     2) (integer) -3\n     3) 1) \"readonly\"\n     4) (integer) 1\n     5) (integer) 1\n     6) (integer) 1\n151) 1) \"host:\"\n     2) (integer) -1\n     3) 1) \"loading\"\n        2) \"stale\"\n     4) (integer) 0\n     5) (integer) 0\n     6) (integer) 0\n152) 1) \"zinterstore\"\n     2) (integer) -4\n     3) 1) \"write\"\n        2) \"denyoom\"\n        3) \"movablekeys\"\n     4) (integer) 0\n     5) (integer) 0\n     6) (integer) 0\n153) 1) \"multi\"\n     2) (integer) 1\n     3) 1) \"noscript\"\n        2) \"fast\"\n     4) (integer) 0\n     5) (integer) 0\n     6) (integer) 0\n154) 1) \"hkeys\"\n     2) (integer) 2\n     3) 1) \"readonly\"\n        2) \"sort_for_script\"\n     4) (integer) 1\n     5) (integer) 1\n     6) (integer) 1\n155) 1) \"incrbyfloat\"\n     2) (integer) 3\n     3) 1) \"write\"\n        2) \"denyoom\"\n        3) \"fast\"\n     4) (integer) 1\n     5) (integer) 1\n     6) (integer) 1\n156) 1) \"srandmember\"\n     2) (integer) -2\n     3) 1) \"readonly\"\n        2) \"random\"\n     4) (integer) 1\n     5) (integer) 1\n     6) (integer) 1\n157) 1) \"srem\"\n     2) (integer) -3\n     3) 1) \"write\"\n        2) \"fast\"\n     4) (integer) 1\n     5) (integer) 1\n     6) (integer) 1\n158) 1) \"post\"\n     2) (integer) -1\n     3) 1) \"loading\"\n        2) \"stale\"\n     4) (integer) 0\n     5) (integer) 0\n     6) (integer) 0\n159) 1) \"setnx\"\n     2) (integer) 3\n     3) 1) \"write\"\n        2) \"denyoom\"\n        3) \"fast\"\n     4) (integer) 1\n     5) (integer) 1\n     6) (integer) 1\n160) 1) \"zcard\"\n     2) (integer) 2\n     3) 1) \"readonly\"\n        2) \"fast\"\n     4) (integer) 1\n     5) (integer) 1\n     6) (integer) 1\n161) 1) \"rpushx\"\n     2) (integer) -3\n     3) 1) \"write\"\n        2) \"denyoom\"\n        3) \"fast\"\n     4) (integer) 1\n     5) (integer) 1\n     6) (integer) 1\n162) 1) \"scan\"\n     2) (integer) -2\n     3) 1) \"readonly\"\n        2) \"random\"\n     4) (integer) 0\n     5) (integer) 0\n     6) (integer) 0\n163) 1) \"sdiffstore\"\n     2) (integer) -3\n     3) 1) \"write\"\n        2) \"denyoom\"\n     4) (integer) 1\n     5) (integer) -1\n     6) (integer) 1\n164) 1) \"incr\"\n     2) (integer) 2\n     3) 1) \"write\"\n        2) \"denyoom\"\n        3) \"fast\"\n     4) (integer) 1\n     5) (integer) 1\n     6) (integer) 1\n165) 1) \"wait\"\n     2) (integer) 3\n     3) 1) \"noscript\"\n     4) (integer) 0\n     5) (integer) 0\n     6) (integer) 0\n166) 1) \"hexists\"\n     2) (integer) 3\n     3) 1) \"readonly\"\n        2) \"fast\"\n     4) (integer) 1\n     5) (integer) 1\n     6) (integer) 1\n167) 1) \"substr\"\n     2) (integer) 4\n     3) 1) \"readonly\"\n     4) (integer) 1\n     5) (integer) 1\n     6) (integer) 1\n168) 1) \"hsetnx\"\n     2) (integer) 4\n     3) 1) \"write\"\n        2) \"denyoom\"\n        3) \"fast\"\n     4) (integer) 1\n     5) (integer) 1\n     6) (integer) 1\n169) 1) \"echo\"\n     2) (integer) 2\n     3) 1) \"fast\"\n     4) (integer) 0\n     5) (integer) 0\n     6) (integer) 0\n170) 1) \"bitcount\"\n     2) (integer) -2\n     3) 1) \"readonly\"\n     4) (integer) 1\n     5) (integer) 1\n     6) (integer) 1\n171) 1) \"command\"\n     2) (integer) 0\n     3) 1) \"loading\"\n        2) \"stale\"\n     4) (integer) 0\n     5) (integer) 0\n     6) (integer) 0\n172) 1) \"zrevrangebylex\"\n     2) (integer) -4\n     3) 1) \"readonly\"\n     4) (integer) 1\n     5) (integer) 1\n     6) (integer) 1\n173) 1) \"decr\"\n     2) (integer) 2\n     3) 1) \"write\"\n        2) \"denyoom\"\n        3) \"fast\"\n     4) (integer) 1\n     5) (integer) 1\n     6) (integer) 1\n174) 1) \"psetex\"\n     2) (integer) 4\n     3) 1) \"write\"\n        2) \"denyoom\"\n     4) (integer) 1\n     5) (integer) 1\n     6) (integer) 1\n175) 1) \"ttl\"\n     2) (integer) 2\n     3) 1) \"readonly\"\n        2) \"fast\"\n     4) (integer) 1\n     5) (integer) 1\n     6) (integer) 1\n176) 1) \"georadiusbymember_ro\"\n     2) (integer) -5\n     3) 1) \"readonly\"\n        2) \"movablekeys\"\n     4) (integer) 1\n     5) (integer) 1\n     6) (integer) 1\n177) 1) \"subscribe\"\n     2) (integer) -2\n     3) 1) \"pubsub\"\n        2) \"noscript\"\n        3) \"loading\"\n        4) \"stale\"\n     4) (integer) 0\n     5) (integer) 0\n     6) (integer) 0\n178) 1) \"lindex\"\n     2) (integer) 3\n     3) 1) \"readonly\"\n     4) (integer) 1\n     5) (integer) 1\n     6) (integer) 1\n179) 1) \"exists\"\n     2) (integer) -2\n     3) 1) \"readonly\"\n        2) \"fast\"\n     4) (integer) 1\n     5) (integer) -1\n     6) (integer) 1\n180) 1) \"ping\"\n     2) (integer) -1\n     3) 1) \"stale\"\n        2) \"fast\"\n     4) (integer) 0\n     5) (integer) 0\n     6) (integer) 0\n181) 1) \"get\"\n     2) (integer) 2\n     3) 1) \"readonly\"\n        2) \"fast\"\n     4) (integer) 1\n     5) (integer) 1\n     6) (integer) 1\n182) 1) \"xtrim\"\n     2) (integer) -2\n     3) 1) \"write\"\n        2) \"fast\"\n     4) (integer) 1\n     5) (integer) 1\n     6) (integer) 1\n183) 1) \"linsert\"\n     2) (integer) 5\n     3) 1) \"write\"\n        2) \"denyoom\"\n     4) (integer) 1\n     5) (integer) 1\n     6) (integer) 1\n184) 1) \"append\"\n     2) (integer) 3\n     3) 1) \"write\"\n        2) \"denyoom\"\n     4) (integer) 1\n     5) (integer) 1\n     6) (integer) 1\n185) 1) \"xrevrange\"\n     2) (integer) -4\n     3) 1) \"readonly\"\n     4) (integer) 1\n     5) (integer) 1\n     6) (integer) 1\n186) 1) \"eval\"\n     2) (integer) -3\n     3) 1) \"noscript\"\n        2) \"movablekeys\"\n     4) (integer) 0\n     5) (integer) 0\n     6) (integer) 0\n187) 1) \"hstrlen\"\n     2) (integer) 3\n     3) 1) \"readonly\"\n        2) \"fast\"\n     4) (integer) 1\n     5) (integer) 1\n     6) (integer) 1\n188) 1) \"mset\"\n     2) (integer) -3\n     3) 1) \"write\"\n        2) \"denyoom\"\n     4) (integer) 1\n     5) (integer) -1\n     6) (integer) 2\n189) 1) \"memory\"\n     2) (integer) -2\n     3) 1) \"readonly\"\n     4) (integer) 0\n     5) (integer) 0\n     6) (integer) 0\n190) 1) \"lrange\"\n     2) (integer) 4\n     3) 1) \"readonly\"\n     4) (integer) 1\n     5) (integer) 1\n     6) (integer) 1\n191) 1) \"flushall\"\n     2) (integer) -1\n     3) 1) \"write\"\n     4) (integer) 0\n     5) (integer) 0\n     6) (integer) 0\n192) 1) \"latency\"\n     2) (integer) -2\n     3) 1) \"admin\"\n        2) \"noscript\"\n        3) \"loading\"\n        4) \"stale\"\n     4) (integer) 0\n     5) (integer) 0\n     6) (integer) 0\n193) 1) \"expireat\"\n     2) (integer) 3\n     3) 1) \"write\"\n        2) \"fast\"\n     4) (integer) 1\n     5) (integer) 1\n     6) (integer) 1\n194) 1) \"bitop\"\n     2) (integer) -4\n     3) 1) \"write\"\n        2) \"denyoom\"\n     4) (integer) 2\n     5) (integer) -1\n     6) (integer) 1\n195) 1) \"rpoplpush\"\n     2) (integer) 3\n     3) 1) \"write\"\n        2) \"denyoom\"\n     4) (integer) 1\n     5) (integer) 2\n     6) (integer) 1\n196) 1) \"xinfo\"\n     2) (integer) -2\n     3) 1) \"readonly\"\n     4) (integer) 2\n     5) (integer) 2\n     6) (integer) 1\n197) 1) \"pexpireat\"\n     2) (integer) 3\n     3) 1) \"write\"\n        2) \"fast\"\n     4) (integer) 1\n     5) (integer) 1\n     6) (integer) 1</pre><form>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<input autocomplete=\"off\" name=\"command\" spellcheck=\"false\" type=\"text\"/>\n</form></div>\n</div>"}, "COMMAND COUNT": {"category": "server", "help_link": "/commands/command-count", "args": [], "summary": "Get total number of Redis commands", "name": "COMMAND COUNT", "help_text": "<div class=\"article-main\">\n<div class=\"metadata\">\n<p><strong>Available since 2.8.13.</strong></p>\n<p><strong>Time complexity:</strong> O(1)</p>\n</div>\n<p>Returns <a href=\"/topics/protocol#integer-reply\">Integer reply</a> of number of total commands in this Redis server.</p>\n<span class=\"anchor\" id=\"return-value\"></span><h2><a class=\"anchor-link\" href=\"#return-value\">*</a>Return value</h2>\n<p><a href=\"/topics/protocol#integer-reply\">Integer reply</a>: number of commands returned by <a href=\"/commands/command\">COMMAND</a></p>\n<span class=\"anchor\" id=\"examples\"></span><h2><a class=\"anchor-link\" href=\"#examples\">*</a>Examples</h2>\n<div class=\"example\" data-session=\"080e8866052d4a192d382e0bffb55a48\">\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">COMMAND COUNT</span>\n<pre>(integer) 197</pre><form>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<input autocomplete=\"off\" name=\"command\" spellcheck=\"false\" type=\"text\"/>\n</form></div>\n</div>"}, "COMMAND GETKEYS": {"category": "server", "help_link": "/commands/command-getkeys", "args": [], "summary": "Extract keys given a full Redis command", "name": "COMMAND GETKEYS", "help_text": "<div class=\"article-main\">\n<div class=\"metadata\">\n<p><strong>Available since 2.8.13.</strong></p>\n<p><strong>Time complexity:</strong> O(N) where N is the number of arguments to the command</p>\n</div>\n<p>Returns <a href=\"/topics/protocol#array-reply\">Array reply</a> of keys from a full Redis command.</p>\n<p><a href=\"/commands/command-getkeys\">COMMAND GETKEYS</a> is a helper command to let you find the keys\n              from a full Redis command.</p>\n<p><a href=\"/commands/command\">COMMAND</a> shows some commands as having movablekeys meaning\n              the entire command must be parsed to discover storage or retrieval\n              keys.  You can use <a href=\"/commands/command-getkeys\">COMMAND GETKEYS</a> to discover key positions\n              directly from how Redis parses the commands.</p>\n<span class=\"anchor\" id=\"return-value\"></span><h2><a class=\"anchor-link\" href=\"#return-value\">*</a>Return value</h2>\n<p><a href=\"/topics/protocol#array-reply\">Array reply</a>: list of keys from your command.</p>\n<span class=\"anchor\" id=\"examples\"></span><h2><a class=\"anchor-link\" href=\"#examples\">*</a>Examples</h2>\n<div class=\"example\" data-session=\"05babd69500ce1c25e9c8a0a365d026f\">\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">COMMAND GETKEYS MSET a b c d e f</span>\n<pre>1) \"a\"\n2) \"c\"\n3) \"e\"</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">COMMAND GETKEYS EVAL \"not consulted\" 3 key1 key2 key3 arg1 arg2 arg3 argN</span>\n<pre>1) \"key1\"\n2) \"key2\"\n3) \"key3\"</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">COMMAND GETKEYS SORT mylist ALPHA STORE outlist</span>\n<pre>1) \"mylist\"\n2) \"outlist\"</pre><form>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<input autocomplete=\"off\" name=\"command\" spellcheck=\"false\" type=\"text\"/>\n</form></div>\n</div>"}, "COMMAND INFO": {"category": "server", "help_link": "/commands/command-info", "args": ["command-name [command-name ...]"], "summary": "Get array of specific Redis command details", "name": "COMMAND INFO", "help_text": "<div class=\"article-main\">\n<div class=\"metadata\">\n<p><strong>Available since 2.8.13.</strong></p>\n<p><strong>Time complexity:</strong> O(N) when N is number of commands to look up</p>\n</div>\n<p>Returns <a href=\"/topics/protocol#array-reply\">Array reply</a> of details about multiple Redis commands.</p>\n<p>Same result format as <a href=\"/commands/command\">COMMAND</a> except you can specify which commands\n              get returned.</p>\n<p>If you request details about non-existing commands, their return\n              position will be nil.</p>\n<span class=\"anchor\" id=\"return-value\"></span><h2><a class=\"anchor-link\" href=\"#return-value\">*</a>Return value</h2>\n<p><a href=\"/topics/protocol#array-reply\">Array reply</a>: nested list of command details.</p>\n<span class=\"anchor\" id=\"examples\"></span><h2><a class=\"anchor-link\" href=\"#examples\">*</a>Examples</h2>\n<div class=\"example\" data-session=\"1960303cd6ab74c8fd6b3c80f8764ed9\">\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">COMMAND INFO get set eval</span>\n<pre>1) 1) \"get\"\n   2) (integer) 2\n   3) 1) \"readonly\"\n      2) \"fast\"\n   4) (integer) 1\n   5) (integer) 1\n   6) (integer) 1\n2) 1) \"set\"\n   2) (integer) -3\n   3) 1) \"write\"\n      2) \"denyoom\"\n   4) (integer) 1\n   5) (integer) 1\n   6) (integer) 1\n3) 1) \"eval\"\n   2) (integer) -3\n   3) 1) \"noscript\"\n      2) \"movablekeys\"\n   4) (integer) 0\n   5) (integer) 0\n   6) (integer) 0</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">COMMAND INFO foo evalsha config bar</span>\n<pre>1) (nil)\n2) 1) \"evalsha\"\n   2) (integer) -3\n   3) 1) \"noscript\"\n      2) \"movablekeys\"\n   4) (integer) 0\n   5) (integer) 0\n   6) (integer) 0\n3) 1) \"config\"\n   2) (integer) -2\n   3) 1) \"admin\"\n      2) \"loading\"\n      3) \"stale\"\n   4) (integer) 0\n   5) (integer) 0\n   6) (integer) 0\n4) (nil)</pre><form>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<input autocomplete=\"off\" name=\"command\" spellcheck=\"false\" type=\"text\"/>\n</form></div>\n</div>"}, "CONFIG GET": {"category": "server", "help_link": "/commands/config-get", "args": ["parameter"], "summary": "Get the value of a configuration parameter", "name": "CONFIG GET", "help_text": "<div class=\"article-main\">\n<div class=\"metadata\">\n<p><strong>Available since 2.0.0.</strong></p>\n</div>\n<p>The <a href=\"/commands/config-get\">CONFIG GET</a> command is used to read the configuration parameters of a\n              running Redis server.\n              Not all the configuration parameters are supported in Redis 2.4, while Redis 2.6\n              can read the whole configuration of a server using this command.</p>\n<p>The symmetric command used to alter the configuration at run time is <code>CONFIG\nSET</code>.</p>\n<p><a href=\"/commands/config-get\">CONFIG GET</a> takes a single argument, which is a glob-style pattern.\n              All the configuration parameters matching this parameter are reported as a list\n              of key-value pairs.\n              Example:</p>\n<pre><code>redis&gt; config get *max-*-entries*\n1) \"hash-max-zipmap-entries\"\n2) \"512\"\n3) \"list-max-ziplist-entries\"\n4) \"512\"\n5) \"set-max-intset-entries\"\n6) \"512\"\n</code></pre>\n<p>You can obtain a list of all the supported configuration parameters by typing\n              <code>CONFIG GET *</code> in an open <code>redis-cli</code> prompt.</p>\n<p>All the supported parameters have the same meaning of the equivalent\n              configuration parameter used in the <a href=\"http://github.com/antirez/redis/raw/2.8/redis.conf\">redis.conf</a> file, with the\n              following important differences:</p>\n<ul>\n<li>Where bytes or other quantities are specified, it is not possible to use\n              the <code>redis.conf</code> abbreviated form (<code>10k</code>, <code>2gb</code> ... and so forth), everything\n              should be specified as a well-formed 64-bit integer, in the base unit of the\n              configuration directive.</li>\n<li>The save parameter is a single string of space-separated integers.\n              Every pair of integers represent a seconds/modifications threshold.</li>\n</ul>\n<p>For instance what in <code>redis.conf</code> looks like:</p>\n<pre><code>save 900 1\nsave 300 10\n</code></pre>\n<p>that means, save after 900 seconds if there is at least 1 change to the dataset,\n              and after 300 seconds if there are at least 10 changes to the dataset, will be\n              reported by <a href=\"/commands/config-get\">CONFIG GET</a> as \"900 1 300 10\".</p>\n<span class=\"anchor\" id=\"return-value\"></span><h2><a class=\"anchor-link\" href=\"#return-value\">*</a>Return value</h2>\n<p>The return type of the command is a <a href=\"/topics/protocol#array-reply\">Array reply</a>.</p>\n</div>"}, "CONFIG REWRITE": {"category": "server", "help_link": "/commands/config-rewrite", "args": [], "summary": "Rewrite the configuration file with the in memory configuration", "name": "CONFIG REWRITE", "help_text": "<div class=\"article-main\">\n<div class=\"metadata\">\n<p><strong>Available since 2.8.0.</strong></p>\n</div>\n<p>The <a href=\"/commands/config-rewrite\">CONFIG REWRITE</a> command rewrites the <code>redis.conf</code> file the server was started with, applying the minimal changes needed to make it reflect the configuration currently used by the server, which may be different compared to the original one because of the use of the <a href=\"/commands/config-set\">CONFIG SET</a> command.</p>\n<p>The rewrite is performed in a very conservative way:</p>\n<ul>\n<li>Comments and the overall structure of the original redis.conf are preserved as much as possible.</li>\n<li>If an option already exists in the old redis.conf file, it will be rewritten at the same position (line number).</li>\n<li>If an option was not already present, but it is set to its default value, it is not added by the rewrite process.</li>\n<li>If an option was not already present, but it is set to a non-default value, it is appended at the end of the file.</li>\n<li>Non used lines are blanked. For instance if you used to have multiple <code>save</code> directives, but the current configuration has fewer or none as you disabled RDB persistence, all the lines will be blanked.</li>\n</ul>\n<p>CONFIG REWRITE is also able to rewrite the configuration file from scratch if the original one no longer exists for some reason. However if the server was started without a configuration file at all, the CONFIG REWRITE will just return an error.</p>\n<span class=\"anchor\" id=\"atomic-rewrite-process\"></span><h2><a class=\"anchor-link\" href=\"#atomic-rewrite-process\">*</a>Atomic rewrite process</h2>\n<p>In order to make sure the redis.conf file is always consistent, that is, on errors or crashes you always end with the old file, or the new one, the rewrite is performed with a single <code>write(2)</code> call that has enough content to be at least as big as the old file. Sometimes additional padding in the form of comments is added in order to make sure the resulting file is big enough, and later the file gets truncated to remove the padding at the end.</p>\n<span class=\"anchor\" id=\"return-value\"></span><h2><a class=\"anchor-link\" href=\"#return-value\">*</a>Return value</h2>\n<p><a href=\"/topics/protocol#simple-string-reply\">Simple string reply</a>: <code>OK</code> when the configuration was rewritten properly.\n              Otherwise an error is returned.</p>\n</div>"}, "CONFIG SET": {"category": "server", "help_link": "/commands/config-set", "args": ["parameter", "value"], "summary": "Set a configuration parameter to the given value", "name": "CONFIG SET", "help_text": "<div class=\"article-main\">\n<div class=\"metadata\">\n<p><strong>Available since 2.0.0.</strong></p>\n</div>\n<p>The <a href=\"/commands/config-set\">CONFIG SET</a> command is used in order to reconfigure the server at run time\n              without the need to restart Redis.\n              You can change both trivial parameters or switch from one to another persistence\n              option using this command.</p>\n<p>The list of configuration parameters supported by <a href=\"/commands/config-set\">CONFIG SET</a> can be obtained\n              issuing a <code>CONFIG GET *</code> command, that is the symmetrical command used to obtain\n              information about the configuration of a running Redis instance.</p>\n<p>All the configuration parameters set using <a href=\"/commands/config-set\">CONFIG SET</a> are immediately loaded\n              by Redis and will take effect starting with the next command executed.</p>\n<p>All the supported parameters have the same meaning of the equivalent\n              configuration parameter used in the <a href=\"http://github.com/antirez/redis/raw/2.8/redis.conf\">redis.conf</a> file, with the\n              following important differences:</p>\n<ul>\n<li>In options where bytes or other quantities are specified, it is not\n              possible to use the <code>redis.conf</code> abbreviated form (<code>10k</code>, <code>2gb</code> ... and so forth),\n              everything should be specified as a well-formed 64-bit integer, in the base\n              unit of the configuration directive. However since Redis version 3.0 or\n              greater, it is possible to use <a href=\"/commands/config-set\">CONFIG SET</a> with memory units for\n              <code>maxmemory</code>, client output buffers, and replication backlog size.</li>\n<li>The save parameter is a single string of space-separated integers.\n              Every pair of integers represent a seconds/modifications threshold.</li>\n</ul>\n<p>For instance what in <code>redis.conf</code> looks like:</p>\n<pre><code>save 900 1\nsave 300 10\n</code></pre>\n<p>that means, save after 900 seconds if there is at least 1 change to the dataset,\n              and after 300 seconds if there are at least 10 changes to the dataset, should\n              be set using <code>CONFIG SET SAVE \"900 1 300 10\"</code>.</p>\n<p>It is possible to switch persistence from RDB snapshotting to append-only file\n              (and the other way around) using the <a href=\"/commands/config-set\">CONFIG SET</a> command.\n              For more information about how to do that please check the <a href=\"/topics/persistence\">persistence\n              page</a>.</p>\n<p>In general what you should know is that setting the <code>appendonly</code> parameter to\n              <code>yes</code> will start a background process to save the initial append-only file\n              (obtained from the in memory data set), and will append all the subsequent\n              commands on the append-only file, thus obtaining exactly the same effect of a\n              Redis server that started with AOF turned on since the start.</p>\n<p>You can have both the AOF enabled with RDB snapshotting if you want, the two\n              options are not mutually exclusive.</p>\n<span class=\"anchor\" id=\"return-value\"></span><h2><a class=\"anchor-link\" href=\"#return-value\">*</a>Return value</h2>\n<p><a href=\"/topics/protocol#simple-string-reply\">Simple string reply</a>: <code>OK</code> when the configuration was set properly.\n              Otherwise an error is returned.</p>\n</div>"}, "CONFIG RESETSTAT": {"category": "server", "help_link": "/commands/config-resetstat", "args": [], "summary": "Reset the stats returned by INFO", "name": "CONFIG RESETSTAT", "help_text": "<div class=\"article-main\">\n<div class=\"metadata\">\n<p><strong>Available since 2.0.0.</strong></p>\n<p><strong>Time complexity:</strong> O(1)</p>\n</div>\n<p>Resets the statistics reported by Redis using the <a href=\"/commands/info\">INFO</a> command.</p>\n<p>These are the counters that are reset:</p>\n<ul>\n<li>Keyspace hits</li>\n<li>Keyspace misses</li>\n<li>Number of commands processed</li>\n<li>Number of connections received</li>\n<li>Number of expired keys</li>\n<li>Number of rejected connections</li>\n<li>Latest fork(2) time</li>\n<li>The <code>aof_delayed_fsync</code> counter</li>\n</ul>\n<span class=\"anchor\" id=\"return-value\"></span><h2><a class=\"anchor-link\" href=\"#return-value\">*</a>Return value</h2>\n<p><a href=\"/topics/protocol#simple-string-reply\">Simple string reply</a>: always <code>OK</code>.</p>\n</div>"}, "DBSIZE": {"category": "server", "help_link": "/commands/dbsize", "args": [], "summary": "Return the number of keys in the selected database", "name": "DBSIZE", "help_text": "<div class=\"article-main\">\n<div class=\"metadata\">\n<p><strong>Available since 1.0.0.</strong></p>\n</div>\n<p>Return the number of keys in the currently-selected database.</p>\n<span class=\"anchor\" id=\"return-value\"></span><h2><a class=\"anchor-link\" href=\"#return-value\">*</a>Return value</h2>\n<p><a href=\"/topics/protocol#integer-reply\">Integer reply</a></p>\n</div>"}, "DEBUG OBJECT": {"category": "server", "help_link": "/commands/debug-object", "args": ["key"], "summary": "Get debugging information about a key", "name": "DEBUG OBJECT", "help_text": "<div class=\"article-main\">\n<div class=\"metadata\">\n<p><strong>Available since 1.0.0.</strong></p>\n</div>\n<p><a href=\"/commands/debug-object\">DEBUG OBJECT</a> is a debugging command that should not be used by clients.\n              Check the <a href=\"/commands/object\">OBJECT</a> command instead.</p>\n<span class=\"anchor\" id=\"return-value\"></span><h2><a class=\"anchor-link\" href=\"#return-value\">*</a>Return value</h2>\n<p><a href=\"/topics/protocol#simple-string-reply\">Simple string reply</a></p>\n</div>"}, "DEBUG SEGFAULT": {"category": "server", "help_link": "/commands/debug-segfault", "args": [], "summary": "Make the server crash", "name": "DEBUG SEGFAULT", "help_text": "<div class=\"article-main\">\n<div class=\"metadata\">\n<p><strong>Available since 1.0.0.</strong></p>\n</div>\n<p><a href=\"/commands/debug-segfault\">DEBUG SEGFAULT</a> performs an invalid memory access that crashes Redis.\n              It is used to simulate bugs during the development.</p>\n<span class=\"anchor\" id=\"return-value\"></span><h2><a class=\"anchor-link\" href=\"#return-value\">*</a>Return value</h2>\n<p><a href=\"/topics/protocol#simple-string-reply\">Simple string reply</a></p>\n</div>"}, "DECR": {"category": "string", "help_link": "/commands/decr", "args": ["key"], "summary": "Decrement the integer value of a key by one", "name": "DECR", "help_text": "<div class=\"article-main\">\n<div class=\"metadata\">\n<p><strong>Available since 1.0.0.</strong></p>\n<p><strong>Time complexity:</strong> O(1)</p>\n</div>\n<p>Decrements the number stored at <code>key</code> by one.\n              If the key does not exist, it is set to <code>0</code> before performing the operation.\n              An error is returned if the key contains a value of the wrong type or contains a\n              string that can not be represented as integer.\n              This operation is limited to <strong>64 bit signed integers</strong>.</p>\n<p>See <a href=\"/commands/incr\">INCR</a> for extra information on increment/decrement operations.</p>\n<span class=\"anchor\" id=\"return-value\"></span><h2><a class=\"anchor-link\" href=\"#return-value\">*</a>Return value</h2>\n<p><a href=\"/topics/protocol#integer-reply\">Integer reply</a>: the value of <code>key</code> after the decrement</p>\n<span class=\"anchor\" id=\"examples\"></span><h2><a class=\"anchor-link\" href=\"#examples\">*</a>Examples</h2>\n<div class=\"example\" data-session=\"22f5bc1d8aadd64716691a06420f9508\">\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">SET mykey \"10\"</span>\n<pre>\"OK\"</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">DECR mykey</span>\n<pre>(integer) 9</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">SET mykey \"234293482390480948029348230948\"</span>\n<pre>\"OK\"</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">DECR mykey</span>\n<pre>ERR ERR value is not an integer or out of range</pre><form>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<input autocomplete=\"off\" name=\"command\" spellcheck=\"false\" type=\"text\"/>\n</form></div>\n</div>"}, "DECRBY": {"category": "string", "help_link": "/commands/decrby", "args": ["key", "decrement"], "summary": "Decrement the integer value of a key by the given number", "name": "DECRBY", "help_text": "<div class=\"article-main\">\n<div class=\"metadata\">\n<p><strong>Available since 1.0.0.</strong></p>\n<p><strong>Time complexity:</strong> O(1)</p>\n</div>\n<p>Decrements the number stored at <code>key</code> by <code>decrement</code>.\n              If the key does not exist, it is set to <code>0</code> before performing the operation.\n              An error is returned if the key contains a value of the wrong type or contains a\n              string that can not be represented as integer.\n              This operation is limited to 64 bit signed integers.</p>\n<p>See <a href=\"/commands/incr\">INCR</a> for extra information on increment/decrement operations.</p>\n<span class=\"anchor\" id=\"return-value\"></span><h2><a class=\"anchor-link\" href=\"#return-value\">*</a>Return value</h2>\n<p><a href=\"/topics/protocol#integer-reply\">Integer reply</a>: the value of <code>key</code> after the decrement</p>\n<span class=\"anchor\" id=\"examples\"></span><h2><a class=\"anchor-link\" href=\"#examples\">*</a>Examples</h2>\n<div class=\"example\" data-session=\"76b573cd98dcc6eb2333018d21687cf8\">\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">SET mykey \"10\"</span>\n<pre>\"OK\"</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">DECRBY mykey 3</span>\n<pre>(integer) 7</pre><form>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<input autocomplete=\"off\" name=\"command\" spellcheck=\"false\" type=\"text\"/>\n</form></div>\n</div>"}, "DEL": {"category": "generic", "help_link": "/commands/del", "args": ["key [key ...]"], "summary": "Delete a key", "name": "DEL", "help_text": "<div class=\"article-main\">\n<div class=\"metadata\">\n<p><strong>Available since 1.0.0.</strong></p>\n<p><strong>Time complexity:</strong> O(N) where N is the number of keys that will be removed. When a key to remove holds a value other than a string, the individual complexity for this key is O(M) where M is the number of elements in the list, set, sorted set or hash. Removing a single key that holds a string value is O(1).</p>\n</div>\n<p>Removes the specified keys.\n              A key is ignored if it does not exist.</p>\n<span class=\"anchor\" id=\"return-value\"></span><h2><a class=\"anchor-link\" href=\"#return-value\">*</a>Return value</h2>\n<p><a href=\"/topics/protocol#integer-reply\">Integer reply</a>: The number of keys that were removed.</p>\n<span class=\"anchor\" id=\"examples\"></span><h2><a class=\"anchor-link\" href=\"#examples\">*</a>Examples</h2>\n<div class=\"example\" data-session=\"872128235b83413bea17af4c8d930418\">\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">SET key1 \"Hello\"</span>\n<pre>\"OK\"</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">SET key2 \"World\"</span>\n<pre>\"OK\"</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">DEL key1 key2 key3</span>\n<pre>(integer) 2</pre><form>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<input autocomplete=\"off\" name=\"command\" spellcheck=\"false\" type=\"text\"/>\n</form></div>\n</div>"}, "DISCARD": {"category": "transactions", "help_link": "/commands/discard", "args": [], "summary": "Discard all commands issued after MULTI", "name": "DISCARD", "help_text": "<div class=\"article-main\">\n<div class=\"metadata\">\n<p><strong>Available since 2.0.0.</strong></p>\n</div>\n<p>Flushes all previously queued commands in a <a href=\"/topics/transactions\">transaction</a> and restores the\n              connection state to normal.</p>\n<p>If <a href=\"/commands/watch\">WATCH</a> was used, <a href=\"/commands/discard\">DISCARD</a> unwatches all keys watched by the connection.</p>\n<span class=\"anchor\" id=\"return-value\"></span><h2><a class=\"anchor-link\" href=\"#return-value\">*</a>Return value</h2>\n<p><a href=\"/topics/protocol#simple-string-reply\">Simple string reply</a>: always <code>OK</code>.</p>\n</div>"}, "DUMP": {"category": "generic", "help_link": "/commands/dump", "args": ["key"], "summary": "Return a serialized version of the value stored at the specified key.", "name": "DUMP", "help_text": "<div class=\"article-main\">\n<div class=\"metadata\">\n<p><strong>Available since 2.6.0.</strong></p>\n<p><strong>Time complexity:</strong> O(1) to access the key and additional O(N*M) to serialized it, where N is the number of Redis objects composing the value and M their average size. For small string values the time complexity is thus O(1)+O(1*M) where M is small, so simply O(1).</p>\n</div>\n<p>Serialize the value stored at key in a Redis-specific format and return it to\n              the user.\n              The returned value can be synthesized back into a Redis key using the <a href=\"/commands/restore\">RESTORE</a>\n              command.</p>\n<p>The serialization format is opaque and non-standard, however it has a few\n              semantic characteristics:</p>\n<ul>\n<li>It contains a 64-bit checksum that is used to make sure errors will be\n              detected.\n              The <a href=\"/commands/restore\">RESTORE</a> command makes sure to check the checksum before synthesizing a\n              key using the serialized value.</li>\n<li>Values are encoded in the same format used by RDB.</li>\n<li>An RDB version is encoded inside the serialized value, so that different Redis\n              versions with incompatible RDB formats will refuse to process the serialized\n              value.</li>\n</ul>\n<p>The serialized value does NOT contain expire information.\n              In order to capture the time to live of the current value the <a href=\"/commands/pttl\">PTTL</a> command\n              should be used.</p>\n<p>If <code>key</code> does not exist a nil bulk reply is returned.</p>\n<span class=\"anchor\" id=\"return-value\"></span><h2><a class=\"anchor-link\" href=\"#return-value\">*</a>Return value</h2>\n<p><a href=\"/topics/protocol#bulk-string-reply\">Bulk string reply</a>: the serialized value.</p>\n<span class=\"anchor\" id=\"examples\"></span><h2><a class=\"anchor-link\" href=\"#examples\">*</a>Examples</h2>\n<div class=\"example\" data-session=\"14abefbc8184c679512fa5691567684b\">\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">SET mykey 10</span>\n<pre>\"OK\"</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">DUMP mykey</span>\n<pre>\"\\u0000\\xC0\\n\\t\\u0000\\xBEm\\u0006\\x89Z(\\u0000\\n\"</pre><form>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<input autocomplete=\"off\" name=\"command\" spellcheck=\"false\" type=\"text\"/>\n</form></div>\n</div>"}, "ECHO": {"category": "connection", "help_link": "/commands/echo", "args": ["message"], "summary": "Echo the given string", "name": "ECHO", "help_text": "<div class=\"article-main\">\n<div class=\"metadata\">\n<p><strong>Available since 1.0.0.</strong></p>\n</div>\n<p>Returns <code>message</code>.</p>\n<span class=\"anchor\" id=\"return-value\"></span><h2><a class=\"anchor-link\" href=\"#return-value\">*</a>Return value</h2>\n<p><a href=\"/topics/protocol#bulk-string-reply\">Bulk string reply</a></p>\n<span class=\"anchor\" id=\"examples\"></span><h2><a class=\"anchor-link\" href=\"#examples\">*</a>Examples</h2>\n<div class=\"example\" data-session=\"79b4d7d0c5998cb5dcf45452d87c9865\">\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">ECHO \"Hello World!\"</span>\n<pre>\"Hello World!\"</pre><form>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<input autocomplete=\"off\" name=\"command\" spellcheck=\"false\" type=\"text\"/>\n</form></div>\n</div>"}, "EVAL": {"category": "scripting", "help_link": "/commands/eval", "args": ["script", "numkeys", "key [key ...]", "arg [arg ...]"], "summary": "Execute a Lua script server side", "name": "EVAL", "help_text": "<div class=\"article-main\">\n<div class=\"metadata\">\n<p><strong>Available since 2.6.0.</strong></p>\n<p><strong>Time complexity:</strong> Depends on the script that is executed.</p>\n</div>\n<span class=\"anchor\" id=\"introduction-to-eval\"></span><h2><a class=\"anchor-link\" href=\"#introduction-to-eval\">*</a>Introduction to EVAL</h2>\n<p><a href=\"/commands/eval\">EVAL</a> and <a href=\"/commands/evalsha\">EVALSHA</a> are used to evaluate scripts using the Lua interpreter\n              built into Redis starting from version 2.6.0.</p>\n<p>The first argument of <a href=\"/commands/eval\">EVAL</a> is a Lua 5.1 script.\n              The script does not need to define a Lua function (and should not).\n              It is just a Lua program that will run in the context of the Redis server.</p>\n<p>The second argument of <a href=\"/commands/eval\">EVAL</a> is the number of arguments that follows the script\n              (starting from the third argument) that represent Redis key names.\n              The arguments can be accessed by Lua using the <code>KEYS</code> global variable in the\n              form of a one-based array (so <code>KEYS[1]</code>, <code>KEYS[2]</code>, ...).</p>\n<p>All the additional arguments should not represent key names and can be accessed\n              by Lua using the <code>ARGV</code> global variable, very similarly to what happens with\n              keys (so <code>ARGV[1]</code>, <code>ARGV[2]</code>, ...).</p>\n<p>The following example should clarify what stated above:</p>\n<pre><code>&gt; eval \"return {KEYS[1],KEYS[2],ARGV[1],ARGV[2]}\" 2 key1 key2 first second\n1) \"key1\"\n2) \"key2\"\n3) \"first\"\n4) \"second\"\n</code></pre>\n<p>Note: as you can see Lua arrays are returned as Redis multi bulk replies, that\n              is a Redis return type that your client library will likely convert into an\n              Array type in your programming language.</p>\n<p>It is possible to call Redis commands from a Lua script using two different Lua\n              functions:</p>\n<ul>\n<li><code>redis.call()</code></li>\n<li><code>redis.pcall()</code></li>\n</ul>\n<p><code>redis.call()</code> is similar to <code>redis.pcall()</code>, the only difference is that if a\n              Redis command call will result in an error, <code>redis.call()</code> will raise a Lua\n              error that in turn will force <a href=\"/commands/eval\">EVAL</a> to return an error to the command caller,\n              while <code>redis.pcall</code> will trap the error and return a Lua table representing the\n              error.</p>\n<p>The arguments of the <code>redis.call()</code> and <code>redis.pcall()</code> functions are all\n              the arguments of a well formed Redis command:</p>\n<pre><code>&gt; eval \"return redis.call('set','foo','bar')\" 0\nOK\n</code></pre>\n<p>The above script sets the key <code>foo</code> to the string <code>bar</code>.\n              However it violates the <a href=\"/commands/eval\">EVAL</a> command semantics as all the keys that the script\n              uses should be passed using the <code>KEYS</code> array:</p>\n<pre><code>&gt; eval \"return redis.call('set',KEYS[1],'bar')\" 1 foo\nOK\n</code></pre>\n<p>All Redis commands must be analyzed before execution to determine which\n              keys the command will operate on.  In order for this to be true for <a href=\"/commands/eval\">EVAL</a>, keys must be passed explicitly.\n              This is useful in many ways, but especially to make sure Redis Cluster\n              can forward your request to the appropriate cluster node.</p>\n<p>Note this rule is not enforced in order to provide the user with\n              opportunities to abuse the Redis single instance configuration, at the cost of\n              writing scripts not compatible with Redis Cluster.</p>\n<p>Lua scripts can return a value that is converted from the Lua type to the Redis\n              protocol using a set of conversion rules.</p>\n<span class=\"anchor\" id=\"conversion-between-lua-and-redis-data-types\"></span><h2><a class=\"anchor-link\" href=\"#conversion-between-lua-and-redis-data-types\">*</a>Conversion between Lua and Redis data types</h2>\n<p>Redis return values are converted into Lua data types when Lua calls a Redis\n              command using <code>call()</code> or <code>pcall()</code>.\n              Similarly, Lua data types are converted into the Redis protocol when calling\n              a Redis command and when a Lua script returns a value, so that scripts can\n              control what <a href=\"/commands/eval\">EVAL</a> will return to the client.</p>\n<p>This conversion between data types is designed in a way that if a Redis type is\n              converted into a Lua type, and then the result is converted back into a Redis\n              type, the result is the same as the initial value.</p>\n<p>In other words there is a one-to-one conversion between Lua and Redis types.\n              The following table shows you all the conversions rules:</p>\n<p><strong>Redis to Lua</strong> conversion table.</p>\n<ul>\n<li>Redis integer reply -&gt; Lua number</li>\n<li>Redis bulk reply -&gt; Lua string</li>\n<li>Redis multi bulk reply -&gt; Lua table (may have other Redis data types nested)</li>\n<li>Redis status reply -&gt; Lua table with a single <code>ok</code> field containing the status</li>\n<li>Redis error reply -&gt; Lua table with a single <code>err</code> field containing the error</li>\n<li>Redis Nil bulk reply and Nil multi bulk reply -&gt; Lua false boolean type</li>\n</ul>\n<p><strong>Lua to Redis</strong> conversion table.</p>\n<ul>\n<li>Lua number -&gt; Redis integer reply (the number is converted into an integer)</li>\n<li>Lua string -&gt; Redis bulk reply</li>\n<li>Lua table (array) -&gt; Redis multi bulk reply (truncated to the first nil inside the Lua array if any)</li>\n<li>Lua table with a single <code>ok</code> field -&gt; Redis status reply</li>\n<li>Lua table with a single <code>err</code> field -&gt; Redis error reply</li>\n<li>Lua boolean false -&gt; Redis Nil bulk reply.</li>\n</ul>\n<p>There is an additional Lua-to-Redis conversion rule that has no corresponding\n              Redis to Lua conversion rule:</p>\n<ul>\n<li>Lua boolean true -&gt; Redis integer reply with value of 1.</li>\n</ul>\n<p><strong>RESP3 mode conversion rules</strong>: note that the Lua engine can work in RESP3 mode using the new Redis 6 protocol. In this case there are additional conversion rules, and certain conversions are also modified compared to the RESP2 mode. Please refer to the RESP3 section of this document for more information.</p>\n<p>Also there are two important rules to note:</p>\n<ul>\n<li>Lua has a single numerical type, Lua numbers. There is no distinction between integers and floats. So we always convert Lua numbers into integer replies, removing the decimal part of the number if any. <strong>If you want to return a float from Lua you should return it as a string</strong>, exactly like Redis itself does (see for instance the <a href=\"/commands/zscore\">ZSCORE</a> command).</li>\n<li>There is <a href=\"http://www.lua.org/pil/19.1.html\">no simple way to have nils inside Lua arrays</a>, this is a result of Lua table semantics, so when Redis converts a Lua array into Redis protocol the conversion is stopped if a nil is encountered.</li>\n</ul>\n<p>Here are a few conversion examples:</p>\n<pre><code>&gt; eval \"return 10\" 0\n(integer) 10\n\n&gt; eval \"return {1,2,{3,'Hello World!'}}\" 0\n1) (integer) 1\n2) (integer) 2\n3) 1) (integer) 3\n   2) \"Hello World!\"\n\n&gt; eval \"return redis.call('get','foo')\" 0\n\"bar\"\n</code></pre>\n<p>The last example shows how it is possible to receive the exact return value of\n              <code>redis.call()</code> or <code>redis.pcall()</code> from Lua that would be returned if the command\n              was called directly.</p>\n<p>In the following example we can see how floats and arrays with nils are handled:</p>\n<pre><code>&gt; eval \"return {1,2,3.3333,'foo',nil,'bar'}\" 0\n1) (integer) 1\n2) (integer) 2\n3) (integer) 3\n4) \"foo\"\n</code></pre>\n<p>As you can see 3.333 is converted into 3, and the <em>bar</em> string is never returned as there is a nil before.</p>\n<span class=\"anchor\" id=\"helper-functions-to-return-redis-types\"></span><h2><a class=\"anchor-link\" href=\"#helper-functions-to-return-redis-types\">*</a>Helper functions to return Redis types</h2>\n<p>There are two helper functions to return Redis types from Lua.</p>\n<ul>\n<li><code>redis.error_reply(error_string)</code> returns an error reply. This function simply returns a single field table with the <code>err</code> field set to the specified string for you.</li>\n<li><code>redis.status_reply(status_string)</code> returns a status reply. This function simply returns a single field table with the <code>ok</code> field set to the specified string for you.</li>\n</ul>\n<p>There is no difference between using the helper functions or directly returning the table with the specified format, so the following two forms are equivalent:</p>\n<pre><code>return {err=\"My Error\"}\nreturn redis.error_reply(\"My Error\")\n</code></pre>\n<span class=\"anchor\" id=\"atomicity-of-scripts\"></span><h2><a class=\"anchor-link\" href=\"#atomicity-of-scripts\">*</a>Atomicity of scripts</h2>\n<p>Redis uses the same Lua interpreter to run all the commands.\n              Also Redis guarantees that a script is executed in an atomic way: no other\n              script or Redis command will be executed while a script is being executed.\n              This semantic is similar to the one of <a href=\"/commands/multi\">MULTI</a> / <a href=\"/commands/exec\">EXEC</a>.\n              From the point of view of all the other clients the effects of a script are\n              either still not visible or already completed.</p>\n<p>However this also means that executing slow scripts is not a good idea.\n              It is not hard to create fast scripts, as the script overhead is very low, but\n              if you are going to use slow scripts you should be aware that while the script\n              is running no other client can execute commands.</p>\n<span class=\"anchor\" id=\"error-handling\"></span><h2><a class=\"anchor-link\" href=\"#error-handling\">*</a>Error handling</h2>\n<p>As already stated, calls to <code>redis.call()</code> resulting in a Redis command error\n              will stop the execution of the script and return an error, in a way that\n              makes it obvious that the error was generated by a script:</p>\n<pre><code>&gt; del foo\n(integer) 1\n&gt; lpush foo a\n(integer) 1\n&gt; eval \"return redis.call('get','foo')\" 0\n(error) ERR Error running script (call to f_6b1bf486c81ceb7edf3c093f4c48582e38c0e791): ERR Operation against a key holding the wrong kind of value\n</code></pre>\n<p>Using <code>redis.pcall()</code> no error is raised, but an error object is\n              returned in the format specified above (as a Lua table with an <code>err</code> field).\n              The script can pass the exact error to the user by returning the error object\n              returned by <code>redis.pcall()</code>.</p>\n<span class=\"anchor\" id=\"bandwidth-and-evalsha\"></span><h2><a class=\"anchor-link\" href=\"#bandwidth-and-evalsha\">*</a>Bandwidth and EVALSHA</h2>\n<p>The <a href=\"/commands/eval\">EVAL</a> command forces you to send the script body again and again.\n              Redis does not need to recompile the script every time as it uses an internal\n              caching mechanism, however paying the cost of the additional bandwidth may not\n              be optimal in many contexts.</p>\n<p>On the other hand, defining commands using a special command or via <code>redis.conf</code>\n              would be a problem for a few reasons:</p>\n<ul>\n<li><p>Different instances may have different implementations of a command.</p></li>\n<li><p>Deployment is hard if we have to make sure all instances contain a\n              given command, especially in a distributed environment.</p></li>\n<li><p>Reading application code, the complete semantics might not be clear since the\n              application calls commands defined server side.</p></li>\n</ul>\n<p>In order to avoid these problems while avoiding the bandwidth penalty, Redis\n              implements the <a href=\"/commands/evalsha\">EVALSHA</a> command.</p>\n<p><a href=\"/commands/evalsha\">EVALSHA</a> works exactly like <a href=\"/commands/eval\">EVAL</a>, but instead of having a script as the first\n              argument it has the SHA1 digest of a script.\n              The behavior is the following:</p>\n<ul>\n<li><p>If the server still remembers a script with a matching SHA1 digest, the\n              script is executed.</p></li>\n<li><p>If the server does not remember a script with this SHA1 digest, a special\n              error is returned telling the client to use <a href=\"/commands/eval\">EVAL</a> instead.</p></li>\n</ul>\n<p>Example:</p>\n<pre><code>&gt; set foo bar\nOK\n&gt; eval \"return redis.call('get','foo')\" 0\n\"bar\"\n&gt; evalsha 6b1bf486c81ceb7edf3c093f4c48582e38c0e791 0\n\"bar\"\n&gt; evalsha ffffffffffffffffffffffffffffffffffffffff 0\n(error) `NOSCRIPT` No matching script. Please use [EVAL](/commands/eval).\n</code></pre>\n<p>The client library implementation can always optimistically send <a href=\"/commands/evalsha\">EVALSHA</a> under\n              the hood even when the client actually calls <a href=\"/commands/eval\">EVAL</a>, in the hope the script was\n              already seen by the server.\n              If the <code>NOSCRIPT</code> error is returned <a href=\"/commands/eval\">EVAL</a> will be used instead.</p>\n<p>Passing keys and arguments as additional <a href=\"/commands/eval\">EVAL</a> arguments is also very useful in\n              this context as the script string remains constant and can be efficiently cached\n              by Redis.</p>\n<span class=\"anchor\" id=\"script-cache-semantics\"></span><h2><a class=\"anchor-link\" href=\"#script-cache-semantics\">*</a>Script cache semantics</h2>\n<p>Executed scripts are guaranteed to be in the script cache of a given execution\n              of a Redis instance forever. This means that if an <a href=\"/commands/eval\">EVAL</a> is performed against a Redis instance all the subsequent <a href=\"/commands/evalsha\">EVALSHA</a> calls will succeed.</p>\n<p>The reason why scripts can be cached for long time is that it is unlikely for\n              a well written application to have enough different scripts to cause memory\n              problems. Every script is conceptually like the implementation of a new command, and even a large application will likely have just a few hundred of them.\n              Even if the application is modified many times and scripts will change, the\n              memory used is negligible.</p>\n<p>The only way to flush the script cache is by explicitly calling the <a href=\"/commands/script-flush\">SCRIPT FLUSH</a> command, which will <em>completely flush</em> the scripts cache removing all the\n              scripts executed so far.</p>\n<p>This is usually needed only when the instance is going to be instantiated for\n              another customer or application in a cloud environment.</p>\n<p>Also, as already mentioned, restarting a Redis instance flushes the\n              script cache, which is not persistent. However from the point of view of the\n              client there are only two ways to make sure a Redis instance was not restarted\n              between two different commands.</p>\n<ul>\n<li>The connection we have with the server is persistent and was never closed so far.</li>\n<li>The client explicitly checks the <code>runid</code> field in the <a href=\"/commands/info\">INFO</a> command in order to make sure the server was not restarted and is still the same process.</li>\n</ul>\n<p>Practically speaking, for the client it is much better to simply assume that in the context of a given connection, cached scripts are guaranteed to be there\n              unless an administrator explicitly called the <a href=\"/commands/script-flush\">SCRIPT FLUSH</a> command.</p>\n<p>The fact that the user can count on Redis not removing scripts is semantically\n              useful in the context of pipelining.</p>\n<p>For instance an application with a persistent connection to Redis can be sure\n              that if a script was sent once it is still in memory, so EVALSHA can be used\n              against those scripts in a pipeline without the chance of an error being\n              generated due to an unknown script (we'll see this problem in detail later).</p>\n<p>A common pattern is to call <a href=\"/commands/script-load\">SCRIPT LOAD</a> to load all the scripts that will\n              appear in a pipeline, then use <a href=\"/commands/evalsha\">EVALSHA</a> directly inside the pipeline without\n              any need to check for errors resulting from the script hash not being\n              recognized.</p>\n<span class=\"anchor\" id=\"the-script-command\"></span><h2><a class=\"anchor-link\" href=\"#the-script-command\">*</a>The SCRIPT command</h2>\n<p>Redis offers a SCRIPT command that can be used in order to control the scripting\n              subsystem.\n              SCRIPT currently accepts three different commands:</p>\n<ul>\n<li><p><a href=\"/commands/script-flush\">SCRIPT FLUSH</a></p>\n<p>This command is the only way to force Redis to flush the scripts cache.\n              It is most useful in a cloud environment where the same instance can be\n              reassigned to a different user.\n              It is also useful for testing client libraries' implementations of the\n              scripting feature.</p></li>\n<li><p><code>SCRIPT EXISTS sha1 sha2 ... shaN</code></p>\n<p>Given a list of SHA1 digests as arguments this command returns an array of\n              1 or 0, where 1 means the specific SHA1 is recognized as a script already\n              present in the scripting cache, while 0 means that a script with this SHA1\n              was never seen before (or at least never seen after the latest SCRIPT FLUSH\n              command).</p></li>\n<li><p><code>SCRIPT LOAD script</code></p>\n<p>This command registers the specified script in the Redis script cache.\n              The command is useful in all the contexts where we want to make sure that\n              <a href=\"/commands/evalsha\">EVALSHA</a> will not fail (for instance during a pipeline or MULTI/EXEC\n              operation), without the need to actually execute the script.</p></li>\n<li><p><a href=\"/commands/script-kill\">SCRIPT KILL</a></p>\n<p>This command is the only way to interrupt a long-running script that reaches\n              the configured maximum execution time for scripts.\n              The SCRIPT KILL command can only be used with scripts that did not modify\n              the dataset during their execution (since stopping a read-only script does\n              not violate the scripting engine's guaranteed atomicity).\n              See the next sections for more information about long running scripts.</p></li>\n</ul>\n<span class=\"anchor\" id=\"scripts-as-pure-functions\"></span><h2><a class=\"anchor-link\" href=\"#scripts-as-pure-functions\">*</a>Scripts as pure functions</h2>\n<p><em>Note: starting with Redis 5, scripts are always replicated as effects and not sending the script verbatim. So the following section is mostly applicable to Redis version 4 or older.</em></p>\n<p>A very important part of scripting is writing scripts that are pure functions.\n              Scripts executed in a Redis instance are, by default, propagated to replicas\n              and to the AOF file by sending the script itself -- not the resulting\n              commands.</p>\n<p>The reason is that sending a script to another Redis instance is often much\n              faster than sending the multiple commands the script generates, so if the\n              client is sending many scripts to the master, converting the scripts into\n              individual commands for the replica / AOF would result in too much bandwidth\n              for the replication link or the Append Only File (and also too much CPU since\n              dispatching a command received via network is a lot more work for Redis compared\n              to dispatching a command invoked by Lua scripts).</p>\n<p>Normally replicating scripts instead of the effects of the scripts makes sense,\n              however not in all the cases. So starting with Redis 3.2,\n              the scripting engine is able to, alternatively, replicate the sequence of write\n              commands resulting from the script execution, instead of replication the\n              script itself. See the next section for more information.\n              In this section we'll assume that scripts are replicated by sending the whole\n              script. Let's call this replication mode <strong>whole scripts replication</strong>.</p>\n<p>The main drawback with the <em>whole scripts replication</em> approach is that scripts are required to have the following property:</p>\n<ul>\n<li>The script must always evaluates the same Redis <em>write</em> commands with the\n              same arguments given the same input data set.\n              Operations performed by the script cannot depend on any hidden (non-explicit)\n              information or state that may change as script execution proceeds or between\n              different executions of the script, nor can it depend on any external input\n              from I/O devices.</li>\n</ul>\n<p>Things like using the system time, calling Redis random commands like\n              <a href=\"/commands/randomkey\">RANDOMKEY</a>, or using Lua random number generator, could result into scripts\n              that will not always evaluate in the same way.</p>\n<p>In order to enforce this behavior in scripts Redis does the following:</p>\n<ul>\n<li>Lua does not export commands to access the system time or other external\n              state.</li>\n<li>Redis will block the script with an error if a script calls a Redis\n              command able to alter the data set <strong>after</strong> a Redis <em>random</em> command like\n              <a href=\"/commands/randomkey\">RANDOMKEY</a>, <a href=\"/commands/srandmember\">SRANDMEMBER</a>, <a href=\"/commands/time\">TIME</a>.\n              This means that if a script is read-only and does not modify the data set it\n              is free to call those commands.\n              Note that a <em>random command</em> does not necessarily mean a command that uses\n              random numbers: any non-deterministic command is considered a random command\n              (the best example in this regard is the <a href=\"/commands/time\">TIME</a> command).</li>\n<li>In Redis version 4, commands that may return elements in random order, like\n              <a href=\"/commands/smembers\">SMEMBERS</a> (because Redis Sets are <em>unordered</em>) have a different behavior\n              when called from Lua, and undergo a silent lexicographical sorting filter\n              before returning data to Lua scripts. So <code>redis.call(\"smembers\",KEYS[1])</code>\n              will always return the Set elements in the same order, while the same\n              command invoked from normal clients may return different results even if\n              the key contains exactly the same elements. However starting with Redis 5\n              there is no longer such ordering step, because Redis 5 replicates scripts\n              in a way that no longer needs non-deterministic commands to be converted\n              into deterministic ones. In general, even when developing for Redis 4, never\n              assume that certain commands in Lua will be ordered, but instead rely on\n              the documentation of the original command you call to see the properties\n              it provides.</li>\n<li>Lua pseudo random number generation functions <code>math.random</code> and\n              <code>math.randomseed</code> are modified in order to always have the same seed every\n              time a new script is executed.\n              This means that calling <code>math.random</code> will always generate the same sequence\n              of numbers every time a script is executed if <code>math.randomseed</code> is not used.</li>\n</ul>\n<p>However the user is still able to write commands with random behavior using the\n              following simple trick.\n              Imagine I want to write a Redis script that will populate a list with N random\n              integers.</p>\n<p>I can start with this small Ruby program:</p>\n<pre><code>require 'rubygems'\nrequire 'redis'\n\nr = Redis.new\n\nRandomPushScript = &lt;&lt;EOF\n    local i = tonumber(ARGV[1])\n    local res\n    while (i &gt; 0) do\n        res = redis.call('lpush',KEYS[1],math.random())\n        i = i-1\n    end\n    return res\nEOF\n\nr.del(:mylist)\nputs r.eval(RandomPushScript,[:mylist],[10,rand(2**32)])\n</code></pre>\n<p>Every time this script executed the resulting list will have exactly the\n              following elements:</p>\n<pre><code>&gt; lrange mylist 0 -1\n 1) \"0.74509509873814\"\n 2) \"0.87390407681181\"\n 3) \"0.36876626981831\"\n 4) \"0.6921941534114\"\n 5) \"0.7857992587545\"\n 6) \"0.57730350670279\"\n 7) \"0.87046522734243\"\n 8) \"0.09637165539729\"\n 9) \"0.74990198051087\"\n10) \"0.17082803611217\"\n</code></pre>\n<p>In order to make it a pure function, but still be sure that every invocation\n              of the script will result in different random elements, we can simply add an\n              additional argument to the script that will be used in order to seed the Lua\n              pseudo-random number generator.\n              The new script is as follows:</p>\n<pre><code>RandomPushScript = &lt;&lt;EOF\n    local i = tonumber(ARGV[1])\n    local res\n    math.randomseed(tonumber(ARGV[2]))\n    while (i &gt; 0) do\n        res = redis.call('lpush',KEYS[1],math.random())\n        i = i-1\n    end\n    return res\nEOF\n\nr.del(:mylist)\nputs r.eval(RandomPushScript,1,:mylist,10,rand(2**32))\n</code></pre>\n<p>What we are doing here is sending the seed of the PRNG as one of the arguments.\n              This way the script output will be the same given the same arguments, but we are\n              changing one of the arguments in every invocation, generating the random seed\n              client-side.\n              The seed will be propagated as one of the arguments both in the replication\n              link and in the Append Only File, guaranteeing that the same changes will be\n              generated when the AOF is reloaded or when the replica processes the script.</p>\n<p>Note: an important part of this behavior is that the PRNG that Redis implements\n              as <code>math.random</code> and <code>math.randomseed</code> is guaranteed to have the same output\n              regardless of the architecture of the system running Redis.\n              32-bit, 64-bit, big-endian and little-endian systems will all produce the same\n              output.</p>\n<span class=\"anchor\" id=\"replicating-commands-instead-of-scripts\"></span><h2><a class=\"anchor-link\" href=\"#replicating-commands-instead-of-scripts\">*</a>Replicating commands instead of scripts</h2>\n<p><em>Note: starting with Redis 5, the replication method described in this section (scripts effects replication) is the default and does not need to be explicitly enabled.</em></p>\n<p>Starting with Redis 3.2, it is possible to select an\n              alternative replication method. Instead of replication whole scripts, we\n              can just replicate single write commands generated by the script.\n              We call this <strong>script effects replication</strong>.</p>\n<p>In this replication mode, while Lua scripts are executed, Redis collects\n              all the commands executed by the Lua scripting engine that actually modify\n              the dataset. When the script execution finishes, the sequence of commands\n              that the script generated are wrapped into a MULTI / EXEC transaction and\n              are sent to replicas and AOF.</p>\n<p>This is useful in several ways depending on the use case:</p>\n<ul>\n<li>When the script is slow to compute, but the effects can be summarized by\n              a few write commands, it is a shame to re-compute the script on the replicas \n              or when reloading the AOF. In this case to replicate just the effect of the\n              script is much better.</li>\n<li>When script effects replication is enabled, the controls about non\n              deterministic functions are disabled. You can, for example, use the <a href=\"/commands/time\">TIME</a>\n              or <a href=\"/commands/srandmember\">SRANDMEMBER</a> commands inside your scripts freely at any place.</li>\n<li>The Lua PRNG in this mode is seeded randomly at every call.</li>\n</ul>\n<p>In order to enable script effects replication, you need to issue the\n              following Lua command before any write operated by the script:</p>\n<pre><code>redis.replicate_commands()\n</code></pre>\n<p>The function returns true if the script effects replication was enabled,\n              otherwise if the function was called after the script already called\n              some write command, it returns false, and normal whole script replication\n              is used.</p>\n<span class=\"anchor\" id=\"selective-replication-of-commands\"></span><h2><a class=\"anchor-link\" href=\"#selective-replication-of-commands\">*</a>Selective replication of commands</h2>\n<p>When script effects replication is selected (see the previous section), it\n              is possible to have more control in the way commands are replicated to replicas\n              and AOF. This is a very advanced feature since <strong>a misuse can do damage</strong> by\n              breaking the contract that the master, replicas, and AOF, all must contain the\n              same logical content.</p>\n<p>However this is a useful feature since, sometimes, we need to execute certain\n              commands only in the master in order to create, for example, intermediate\n              values.</p>\n<p>Think at a Lua script where we perform an intersection between two sets.\n              Pick five random elements, and create a new set with this five random\n              elements. Finally we delete the temporary key representing the intersection\n              between the two original sets. What we want to replicate is only the creation\n              of the new set with the five elements. It's not useful to also replicate the\n              commands creating the temporary key.</p>\n<p>For this reason, Redis 3.2 introduces a new command that only works when\n              script effects replication is enabled, and is able to control the scripting\n              replication engine. The command is called <code>redis.set_repl()</code> and fails raising\n              an error if called when script effects replication is disabled.</p>\n<p>The command can be called with four different arguments:</p>\n<pre><code>redis.set_repl(redis.REPL_ALL) -- Replicate to AOF and replicas.\nredis.set_repl(redis.REPL_AOF) -- Replicate only to AOF.\nredis.set_repl(redis.REPL_REPLICA) -- Replicate only to replicas (Redis &gt;= 5)\nredis.set_repl(redis.REPL_SLAVE) -- Used for backward compatibility, the same as REPL_REPLICA.\nredis.set_repl(redis.REPL_NONE) -- Don't replicate at all.\n</code></pre>\n<p>By default the scripting engine is always set to <code>REPL_ALL</code>. By calling\n              this function the user can switch on/off AOF and or replicas propagation, and\n              turn them back later at her/his wish.</p>\n<p>A simple example follows:</p>\n<pre><code>redis.replicate_commands() -- Enable effects replication.\nredis.call('set','A','1')\nredis.set_repl(redis.REPL_NONE)\nredis.call('set','B','2')\nredis.set_repl(redis.REPL_ALL)\nredis.call('set','C','3')\n</code></pre>\n<p>After running the above script, the result is that only keys A and C\n              will be created on replicas and AOF.</p>\n<span class=\"anchor\" id=\"global-variables-protection\"></span><h2><a class=\"anchor-link\" href=\"#global-variables-protection\">*</a>Global variables protection</h2>\n<p>Redis scripts are not allowed to create global variables, in order to avoid\n              leaking data into the Lua state.\n              If a script needs to maintain state between calls (a pretty uncommon need) it\n              should use Redis keys instead.</p>\n<p>When global variable access is attempted the script is terminated and EVAL\n              returns with an error:</p>\n<pre><code>redis 127.0.0.1:6379&gt; eval 'a=10' 0\n(error) ERR Error running script (call to f_933044db579a2f8fd45d8065f04a8d0249383e57): user_script:1: Script attempted to create global variable 'a'\n</code></pre>\n<p>Accessing a <em>non existing</em> global variable generates a similar error.</p>\n<p>Using Lua debugging functionality or other approaches like altering the meta\n              table used to implement global protections in order to circumvent globals\n              protection is not hard.\n              However it is difficult to do it accidentally.\n              If the user messes with the Lua global state, the consistency of AOF and\n              replication is not guaranteed: don't do it.</p>\n<p>Note for Lua newbies: in order to avoid using global variables in your scripts\n              simply declare every variable you are going to use using the <em>local</em> keyword.</p>\n<span class=\"anchor\" id=\"using-select-inside-scripts\"></span><h2><a class=\"anchor-link\" href=\"#using-select-inside-scripts\">*</a>Using SELECT inside scripts</h2>\n<p>It is possible to call <a href=\"/commands/select\">SELECT</a> inside Lua scripts like with normal clients,\n              However one subtle aspect of the behavior changes between Redis 2.8.11 and\n              Redis 2.8.12. Before the 2.8.12 release the database selected by the Lua\n              script was <em>transferred</em> to the calling script as current database.\n              Starting from Redis 2.8.12 the database selected by the Lua script only\n              affects the execution of the script itself, but does not modify the database\n              selected by the client calling the script.</p>\n<p>The semantic change between patch level releases was needed since the old\n              behavior was inherently incompatible with the Redis replication layer and\n              was the cause of bugs.</p>\n<span class=\"anchor\" id=\"using-lua-scripting-in-resp3-mode\"></span><h2><a class=\"anchor-link\" href=\"#using-lua-scripting-in-resp3-mode\">*</a>Using Lua scripting in RESP3 mode</h2>\n<p>Starting with Redis version 6, the server supports two differnent protocols.\n              One is called RESP2, and is the old protocol: all the new connections to\n              the server start in this mode. However clients are able to negotiate the\n              new protocol using the <code>HELLO</code> command: this way the connection is put\n              in RESP3 mode. In this mode certain commands, like for instance <a href=\"/commands/hgetall\">HGETALL</a>,\n              reply with a new data type (the Map data type in this specific case). The\n              RESP3 protocol is semantically more powerful, however most scripts are ok\n              with using just RESP3.</p>\n<p>The Lua engine always assumes to run in RESP2 mode when talking with Redis,\n              so whatever the connection that is invoking the <a href=\"/commands/eval\">EVAL</a> or <a href=\"/commands/evalsha\">EVALSHA</a> command\n              is in RESP2 or RESP3 mode, Lua scripts will, by default, still see the\n              same kind of replies they used to see in the past from Redis, when calling\n              commands using the <code>redis.call()</code> built-in function.</p>\n<p>However Lua scripts running in Redis 6 or greater, are able to switch to\n              RESP3 mode, and get the replies using the new available types. Similarly\n              Lua scripts are able to reply to clients using the new types. Please make\n              sure to understand\n              <a href=\"https://github.com/antirez/resp3\">the capabilities for RESP3</a>\n              before continuing reading this section.</p>\n<p>In order to switch to RESP3 a script should call this function:</p>\n<pre><code>redis.setresp(3)\n</code></pre>\n<p>Note that a script can switch back and forth from RESP3 and RESP2 by\n              calling the function with the argument '3' or '2'.</p>\n<p>At this point the new conversions are available, specifically:</p>\n<p><strong>Redis to Lua</strong> conversion table specific to RESP3:</p>\n<ul>\n<li>Redis map reply -&gt; Lua table with a single <code>map</code> field containing a Lua table representing the fields and values of the map.</li>\n<li>Redis set reply -&gt; Lua table with a single <code>set</code> field containing a Lua table representing the elements of the set as fields, having as value just <code>true</code>.</li>\n<li>Redis new RESP3 single null value -&gt; Lua nil.</li>\n<li>Redis true reply -&gt; Lua true boolean value.</li>\n<li>Redis false reply -&gt; Lua false boolean value.</li>\n<li>Redis double reply -&gt; Lua table with a single <code>score</code> field containing a Lua number representing the double value.</li>\n<li>All the RESP2 old conversions still apply.</li>\n</ul>\n<p><strong>Lua to Redis</strong> conversion table specific for RESP3.</p>\n<ul>\n<li>Lua boolean -&gt; Redis boolean true or false. <strong>Note that this is a change compared to the RESP2 mode</strong>, where returning true from Lua returned the number 1 to the Redis client, and returning false used to return NULL.</li>\n<li>Lua table with a single <code>map</code> field set to a field-value Lua table -&gt; Redis map reply.</li>\n<li>Lua table with a single <code>set</code> field set to a field-value Lua table -&gt; Redis set reply, the values are discared and can be anything.</li>\n<li>Lua table with a single <code>double</code> field set to a field-value Lua table -&gt; Redis double reply.</li>\n<li>Lua null -&gt; Redis RESP3 new null reply (protocol <code>\"_\\r\\n\"</code>).</li>\n<li>All the RESP2 old conversions still apply unless specified above.</li>\n</ul>\n<p>There is one key thing to understand: in case Lua replies with RESP3 types, but the connection calling Lua is in RESP2 mode, Redis will automatically convert the RESP3 protocol to RESP2 compatible protocol, as it happens for normal commands. For instance returning a map type to a connection in RESP2 mode will have the effect of returning a flat array of fields and values.</p>\n<span class=\"anchor\" id=\"available-libraries\"></span><h2><a class=\"anchor-link\" href=\"#available-libraries\">*</a>Available libraries</h2>\n<p>The Redis Lua interpreter loads the following Lua libraries:</p>\n<ul>\n<li><code>base</code> lib.</li>\n<li><code>table</code> lib.</li>\n<li><code>string</code> lib.</li>\n<li><code>math</code> lib.</li>\n<li><code>struct</code> lib.</li>\n<li><code>cjson</code> lib.</li>\n<li><code>cmsgpack</code> lib.</li>\n<li><code>bitop</code> lib.</li>\n<li><code>redis.sha1hex</code> function.</li>\n<li><code>redis.breakpoint and redis.debug</code> function in the context of the <a href=\"/topics/ldb\">Redis Lua debugger</a>.</li>\n</ul>\n<p>Every Redis instance is <em>guaranteed</em> to have all the above libraries so you can\n              be sure that the environment for your Redis scripts is always the same.</p>\n<p>struct, CJSON and cmsgpack are external libraries, all the other libraries are standard\n              Lua libraries.</p>\n<span class=\"anchor\" id=\"struct\"></span><h3><a class=\"anchor-link\" href=\"#struct\">*</a>struct</h3>\n<p>struct is a library for packing/unpacking structures within Lua.</p>\n<pre><code>Valid formats:\n&gt; - big endian\n&lt; - little endian\n![num] - alignment\nx - pading\nb/B - signed/unsigned byte\nh/H - signed/unsigned short\nl/L - signed/unsigned long\nT   - size_t\ni/In - signed/unsigned integer with size `n' (default is size of int)\ncn - sequence of `n' chars (from/to a string); when packing, n==0 means\n     the whole string; when unpacking, n==0 means use the previous\n     read number as the string length\ns - zero-terminated string\nf - float\nd - double\n' ' - ignored\n</code></pre>\n<p>Example:</p>\n<pre><code>127.0.0.1:6379&gt; eval 'return struct.pack(\"HH\", 1, 2)' 0\n\"\\x01\\x00\\x02\\x00\"\n127.0.0.1:6379&gt; eval 'return {struct.unpack(\"HH\", ARGV[1])}' 0 \"\\x01\\x00\\x02\\x00\"\n1) (integer) 1\n2) (integer) 2\n3) (integer) 5\n127.0.0.1:6379&gt; eval 'return struct.size(\"HH\")' 0\n(integer) 4\n</code></pre>\n<span class=\"anchor\" id=\"cjson\"></span><h3><a class=\"anchor-link\" href=\"#cjson\">*</a>CJSON</h3>\n<p>The CJSON library provides extremely fast JSON manipulation within Lua.</p>\n<p>Example:</p>\n<pre><code>redis 127.0.0.1:6379&gt; eval 'return cjson.encode({[\"foo\"]= \"bar\"})' 0\n\"{\\\"foo\\\":\\\"bar\\\"}\"\nredis 127.0.0.1:6379&gt; eval 'return cjson.decode(ARGV[1])[\"foo\"]' 0 \"{\\\"foo\\\":\\\"bar\\\"}\"\n\"bar\"\n</code></pre>\n<span class=\"anchor\" id=\"cmsgpack\"></span><h3><a class=\"anchor-link\" href=\"#cmsgpack\">*</a>cmsgpack</h3>\n<p>The cmsgpack library provides simple and fast MessagePack manipulation within Lua.</p>\n<p>Example:</p>\n<pre><code>127.0.0.1:6379&gt; eval 'return cmsgpack.pack({\"foo\", \"bar\", \"baz\"})' 0\n\"\\x93\\xa3foo\\xa3bar\\xa3baz\"\n127.0.0.1:6379&gt; eval 'return cmsgpack.unpack(ARGV[1])' 0 \"\\x93\\xa3foo\\xa3bar\\xa3baz\"\n1) \"foo\"\n2) \"bar\"\n3) \"baz\"\n</code></pre>\n<span class=\"anchor\" id=\"bitop\"></span><h3><a class=\"anchor-link\" href=\"#bitop\">*</a>bitop</h3>\n<p>The Lua Bit Operations Module adds bitwise operations on numbers.\n              It is available for scripting in Redis since version 2.8.18.</p>\n<p>Example:</p>\n<pre><code>127.0.0.1:6379&gt; eval 'return bit.tobit(1)' 0\n(integer) 1\n127.0.0.1:6379&gt; eval 'return bit.bor(1,2,4,8,16,32,64,128)' 0\n(integer) 255\n127.0.0.1:6379&gt; eval 'return bit.tohex(422342)' 0\n\"000671c6\"\n</code></pre>\n<p>It supports several other functions:\n              <code>bit.tobit</code>, <code>bit.tohex</code>, <code>bit.bnot</code>, <code>bit.band</code>, <code>bit.bor</code>, <code>bit.bxor</code>,\n              <code>bit.lshift</code>, <code>bit.rshift</code>, <code>bit.arshift</code>, <code>bit.rol</code>, <code>bit.ror</code>, <code>bit.bswap</code>.\n              All available functions are documented in the <a href=\"http://bitop.luajit.org/api.html\">Lua BitOp documentation</a></p>\n<span class=\"anchor\" id=\"coderedissha1hexcode\"></span><h3><a class=\"anchor-link\" href=\"#coderedissha1hexcode\">*</a><code>redis.sha1hex</code></h3>\n<p>Perform the SHA1 of the input string.</p>\n<p>Example:</p>\n<pre><code>127.0.0.1:6379&gt; eval 'return redis.sha1hex(ARGV[1])' 0 \"foo\"\n\"0beec7b5ea3f0fdbc95d0dd47f3c5bc275da8a33\"\n</code></pre>\n<span class=\"anchor\" id=\"emitting-redis-logs-from-scripts\"></span><h2><a class=\"anchor-link\" href=\"#emitting-redis-logs-from-scripts\">*</a>Emitting Redis logs from scripts</h2>\n<p>It is possible to write to the Redis log file from Lua scripts using the\n              <code>redis.log</code> function.</p>\n<pre><code>redis.log(loglevel,message)\n</code></pre>\n<p><code>loglevel</code> is one of:</p>\n<ul>\n<li><code>redis.LOG_DEBUG</code></li>\n<li><code>redis.LOG_VERBOSE</code></li>\n<li><code>redis.LOG_NOTICE</code></li>\n<li><code>redis.LOG_WARNING</code></li>\n</ul>\n<p>They correspond directly to the normal Redis log levels.\n              Only logs emitted by scripting using a log level that is equal or greater than\n              the currently configured Redis instance log level will be emitted.</p>\n<p>The <code>message</code> argument is simply a string.\n              Example:</p>\n<pre><code>redis.log(redis.LOG_WARNING,\"Something is wrong with this script.\")\n</code></pre>\n<p>Will generate the following:</p>\n<pre><code>[32343] 22 Mar 15:21:39 # Something is wrong with this script.\n</code></pre>\n<span class=\"anchor\" id=\"sandbox-and-maximum-execution-time\"></span><h2><a class=\"anchor-link\" href=\"#sandbox-and-maximum-execution-time\">*</a>Sandbox and maximum execution time</h2>\n<p>Scripts should never try to access the external system, like the file system or\n              any other system call.\n              A script should only operate on Redis data and passed arguments.</p>\n<p>Scripts are also subject to a maximum execution time (five seconds by default).\n              This default timeout is huge since a script should usually run in under a\n              millisecond.\n              The limit is mostly to handle accidental infinite loops created during\n              development.</p>\n<p>It is possible to modify the maximum time a script can be executed with\n              millisecond precision, either via <code>redis.conf</code> or using the CONFIG GET / CONFIG\n              SET command.\n              The configuration parameter affecting max execution time is called\n              <code>lua-time-limit</code>.</p>\n<p>When a script reaches the timeout it is not automatically terminated by Redis\n              since this violates the contract Redis has with the scripting engine to ensure\n              that scripts are atomic.\n              Interrupting a script means potentially leaving the dataset with half-written\n              data.\n              For this reasons when a script executes for more than the specified time the\n              following happens:</p>\n<ul>\n<li>Redis logs that a script is running too long.</li>\n<li>It starts accepting commands again from other clients, but will reply with a\n              BUSY error to all the clients sending normal commands.\n              The only allowed commands in this status are <a href=\"/commands/script-kill\">SCRIPT KILL</a> and <code>SHUTDOWN\nNOSAVE</code>.</li>\n<li>It is possible to terminate a script that executes only read-only commands\n              using the <a href=\"/commands/script-kill\">SCRIPT KILL</a> command.\n              This does not violate the scripting semantic as no data was yet written to the\n              dataset by the script.</li>\n<li>If the script already called write commands the only allowed command becomes\n              <code>SHUTDOWN NOSAVE</code> that stops the server without saving the current data set on\n              disk (basically the server is aborted).</li>\n</ul>\n<span class=\"anchor\" id=\"evalsha-in-the-context-of-pipelining\"></span><h2><a class=\"anchor-link\" href=\"#evalsha-in-the-context-of-pipelining\">*</a>EVALSHA in the context of pipelining</h2>\n<p>Care should be taken when executing <a href=\"/commands/evalsha\">EVALSHA</a> in the context of a pipelined\n              request, since even in a pipeline the order of execution of commands must be\n              guaranteed.\n              If <a href=\"/commands/evalsha\">EVALSHA</a> will return a <code>NOSCRIPT</code> error the command can not be reissued\n              later otherwise the order of execution is violated.</p>\n<p>The client library implementation should take one of the following approaches:</p>\n<ul>\n<li><p>Always use plain <a href=\"/commands/eval\">EVAL</a> when in the context of a pipeline.</p></li>\n<li><p>Accumulate all the commands to send into the pipeline, then check for <a href=\"/commands/eval\">EVAL</a>\n              commands and use the <a href=\"/commands/script-exists\">SCRIPT EXISTS</a> command to check if all the scripts are\n              already defined.\n              If not, add <a href=\"/commands/script-load\">SCRIPT LOAD</a> commands on top of the pipeline as required, and\n              use <a href=\"/commands/evalsha\">EVALSHA</a> for all the <a href=\"/commands/eval\">EVAL</a> calls.</p></li>\n</ul>\n<span class=\"anchor\" id=\"debugging-lua-scripts\"></span><h2><a class=\"anchor-link\" href=\"#debugging-lua-scripts\">*</a>Debugging Lua scripts</h2>\n<p>Starting with Redis 3.2, Redis has support for native\n              Lua debugging. The Redis Lua debugger is a remote debugger consisting of\n              a server, which is Redis itself, and a client, which is by default <code>redis-cli</code>.</p>\n<p>The Lua debugger is described in the <a href=\"/topics/ldb\">Lua scripts debugging</a> section of the Redis documentation.</p>\n</div>"}, "EVALSHA": {"category": "scripting", "help_link": "/commands/evalsha", "args": ["sha1", "numkeys", "key [key ...]", "arg [arg ...]"], "summary": "Execute a Lua script server side", "name": "EVALSHA", "help_text": "<div class=\"article-main\">\n<div class=\"metadata\">\n<p><strong>Available since 2.6.0.</strong></p>\n<p><strong>Time complexity:</strong> Depends on the script that is executed.</p>\n</div>\n<p>Evaluates a script cached on the server side by its SHA1 digest.\n              Scripts are cached on the server side using the <a href=\"/commands/script-load\">SCRIPT LOAD</a> command.\n              The command is otherwise identical to <a href=\"/commands/eval\">EVAL</a>.</p>\n</div>"}, "EXEC": {"category": "transactions", "help_link": "/commands/exec", "args": [], "summary": "Execute all commands issued after MULTI", "name": "EXEC", "help_text": "<div class=\"article-main\">\n<div class=\"metadata\">\n<p><strong>Available since 1.2.0.</strong></p>\n</div>\n<p>Executes all previously queued commands in a <a href=\"/topics/transactions\">transaction</a> and restores the\n              connection state to normal.</p>\n<p>When using <a href=\"/commands/watch\">WATCH</a>, <a href=\"/commands/exec\">EXEC</a> will execute commands only if the watched keys were\n              not modified, allowing for a <a href=\"/topics/transactions#cas\">check-and-set mechanism</a>.</p>\n<span class=\"anchor\" id=\"return-value\"></span><h2><a class=\"anchor-link\" href=\"#return-value\">*</a>Return value</h2>\n<p><a href=\"/topics/protocol#array-reply\">Array reply</a>: each element being the reply to each of the commands in the\n              atomic transaction.</p>\n<p>When using <a href=\"/commands/watch\">WATCH</a>, <a href=\"/commands/exec\">EXEC</a> can return a <a href=\"/topics/protocol#nil-reply\">Null reply</a> if the execution was aborted.</p>\n</div>"}, "EXISTS": {"category": "generic", "help_link": "/commands/exists", "args": ["key [key ...]"], "summary": "Determine if a key exists", "name": "EXISTS", "help_text": "<div class=\"article-main\">\n<div class=\"metadata\">\n<p><strong>Available since 1.0.0.</strong></p>\n<p><strong>Time complexity:</strong> O(1)</p>\n</div>\n<p>Returns if <code>key</code> exists.</p>\n<p>Since Redis 3.0.3 it is possible to specify multiple keys instead of a single one. In such a case, it returns the total number of keys existing. Note that returning 1 or 0 for a single key is just a special case of the variadic usage, so the command is completely backward compatible.</p>\n<p>The user should be aware that if the same existing key is mentioned in the arguments multiple times, it will be counted multiple times. So if <code>somekey</code> exists, <code>EXISTS somekey somekey</code> will return 2.</p>\n<span class=\"anchor\" id=\"return-value\"></span><h2><a class=\"anchor-link\" href=\"#return-value\">*</a>Return value</h2>\n<p><a href=\"/topics/protocol#integer-reply\">Integer reply</a>, specifically:</p>\n<ul>\n<li><code>1</code> if the key exists.</li>\n<li><code>0</code> if the key does not exist.</li>\n</ul>\n<p>Since Redis 3.0.3 the command accepts a variable number of keys and the return value is generalized:</p>\n<ul>\n<li>The number of keys existing among the ones specified as arguments. Keys mentioned multiple times and existing are counted multiple times.</li>\n</ul>\n<span class=\"anchor\" id=\"examples\"></span><h2><a class=\"anchor-link\" href=\"#examples\">*</a>Examples</h2>\n<div class=\"example\" data-session=\"92c01fcf56a340117fc666c8df1cb6c6\">\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">SET key1 \"Hello\"</span>\n<pre>\"OK\"</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">EXISTS key1</span>\n<pre>(integer) 1</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">EXISTS nosuchkey</span>\n<pre>(integer) 0</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">SET key2 \"World\"</span>\n<pre>\"OK\"</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">EXISTS key1 key2 nosuchkey</span>\n<pre>(integer) 2</pre><form>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<input autocomplete=\"off\" name=\"command\" spellcheck=\"false\" type=\"text\"/>\n</form></div>\n</div>"}, "EXPIRE": {"category": "generic", "help_link": "/commands/expire", "args": ["key", "seconds"], "summary": "Set a key's time to live in seconds", "name": "EXPIRE", "help_text": "<div class=\"article-main\">\n<div class=\"metadata\">\n<p><strong>Available since 1.0.0.</strong></p>\n<p><strong>Time complexity:</strong> O(1)</p>\n</div>\n<p>Set a timeout on <code>key</code>.\n              After the timeout has expired, the key will automatically be deleted.\n              A key with an associated timeout is often said to be <em>volatile</em> in Redis\n              terminology.</p>\n<p>The timeout will only be cleared by commands that delete or overwrite the\n              contents of the key, including <a href=\"/commands/del\">DEL</a>, <a href=\"/commands/set\">SET</a>, <a href=\"/commands/getset\">GETSET</a> and all the <code>*STORE</code>\n              commands.\n              This means that all the operations that conceptually <em>alter</em> the value stored at\n              the key without replacing it with a new one will leave the timeout untouched.\n              For instance, incrementing the value of a key with <a href=\"/commands/incr\">INCR</a>, pushing a new value\n              into a list with <a href=\"/commands/lpush\">LPUSH</a>, or altering the field value of a hash with <a href=\"/commands/hset\">HSET</a> are\n              all operations that will leave the timeout untouched.</p>\n<p>The timeout can also be cleared, turning the key back into a persistent key,\n              using the <a href=\"/commands/persist\">PERSIST</a> command.</p>\n<p>If a key is renamed with <a href=\"/commands/rename\">RENAME</a>, the associated time to live is transferred to\n              the new key name.</p>\n<p>If a key is overwritten by <a href=\"/commands/rename\">RENAME</a>, like in the case of an existing key <code>Key_A</code>\n              that is overwritten by a call like <code>RENAME Key_B Key_A</code>, it does not matter if\n              the original <code>Key_A</code> had a timeout associated or not, the new key <code>Key_A</code> will\n              inherit all the characteristics of <code>Key_B</code>.</p>\n<p>Note that calling <a href=\"/commands/expire\">EXPIRE</a>/<a href=\"/commands/pexpire\">PEXPIRE</a> with a non-positive timeout or\n              <a href=\"/commands/expireat\">EXPIREAT</a>/<a href=\"/commands/pexpireat\">PEXPIREAT</a> with a time in the past will result in the key being\n              <a href=\"/commands/del\">deleted</a> rather than expired (accordingly, the emitted <a href=\"/topics/notifications\">key event</a>\n              will be <code>del</code>, not <code>expired</code>).</p>\n<span class=\"anchor\" id=\"refreshing-expires\"></span><h2><a class=\"anchor-link\" href=\"#refreshing-expires\">*</a>Refreshing expires</h2>\n<p>It is possible to call <a href=\"/commands/expire\">EXPIRE</a> using as argument a key that already has an\n              existing expire set.\n              In this case the time to live of a key is <em>updated</em> to the new value.\n              There are many useful applications for this, an example is documented in the\n              <em>Navigation session</em> pattern section below.</p>\n<span class=\"anchor\" id=\"differences-in-redis-prior-213\"></span><h2><a class=\"anchor-link\" href=\"#differences-in-redis-prior-213\">*</a>Differences in Redis prior 2.1.3</h2>\n<p>In Redis versions prior <strong>2.1.3</strong> altering a key with an expire set using a\n              command altering its value had the effect of removing the key entirely.\n              This semantics was needed because of limitations in the replication layer that\n              are now fixed.</p>\n<p><a href=\"/commands/expire\">EXPIRE</a> would return 0 and not alter the timeout for a key with a timeout set.</p>\n<span class=\"anchor\" id=\"return-value\"></span><h2><a class=\"anchor-link\" href=\"#return-value\">*</a>Return value</h2>\n<p><a href=\"/topics/protocol#integer-reply\">Integer reply</a>, specifically:</p>\n<ul>\n<li><code>1</code> if the timeout was set.</li>\n<li><code>0</code> if <code>key</code> does not exist.</li>\n</ul>\n<span class=\"anchor\" id=\"examples\"></span><h2><a class=\"anchor-link\" href=\"#examples\">*</a>Examples</h2>\n<div class=\"example\" data-session=\"a86f8dab888f162abe92eef4a222ad3c\">\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">SET mykey \"Hello\"</span>\n<pre>\"OK\"</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">EXPIRE mykey 10</span>\n<pre>(integer) 1</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">TTL mykey</span>\n<pre>(integer) 10</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">SET mykey \"Hello World\"</span>\n<pre>\"OK\"</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">TTL mykey</span>\n<pre>(integer) -1</pre><form>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<input autocomplete=\"off\" name=\"command\" spellcheck=\"false\" type=\"text\"/>\n</form></div>\n<span class=\"anchor\" id=\"pattern-navigation-session\"></span><h2><a class=\"anchor-link\" href=\"#pattern-navigation-session\">*</a>Pattern: Navigation session</h2>\n<p>Imagine you have a web service and you are interested in the latest N pages\n              <em>recently</em> visited by your users, such that each adjacent page view was not\n              performed more than 60 seconds after the previous.\n              Conceptually you may consider this set of page views as a <em>Navigation session</em>\n              of your user, that may contain interesting information about what kind of\n              products he or she is looking for currently, so that you can recommend related\n              products.</p>\n<p>You can easily model this pattern in Redis using the following strategy: every\n              time the user does a page view you call the following commands:</p>\n<pre><code>MULTI\nRPUSH pagewviews.user:&lt;userid&gt; http://.....\nEXPIRE pagewviews.user:&lt;userid&gt; 60\nEXEC\n</code></pre>\n<p>If the user will be idle more than 60 seconds, the key will be deleted and only\n              subsequent page views that have less than 60 seconds of difference will be\n              recorded.</p>\n<p>This pattern is easily modified to use counters using <a href=\"/commands/incr\">INCR</a> instead of lists\n              using <a href=\"/commands/rpush\">RPUSH</a>.</p>\n<span class=\"anchor\" id=\"appendix-redis-expires\"></span><h1><a class=\"anchor-link\" href=\"#appendix-redis-expires\">*</a>Appendix: Redis expires</h1>\n<span class=\"anchor\" id=\"keys-with-an-expire\"></span><h2><a class=\"anchor-link\" href=\"#keys-with-an-expire\">*</a>Keys with an expire</h2>\n<p>Normally Redis keys are created without an associated time to live.\n              The key will simply live forever, unless it is removed by the user in an\n              explicit way, for instance using the <a href=\"/commands/del\">DEL</a> command.</p>\n<p>The <a href=\"/commands/expire\">EXPIRE</a> family of commands is able to associate an expire to a given key,\n              at the cost of some additional memory used by the key.\n              When a key has an expire set, Redis will make sure to remove the key when the\n              specified amount of time elapsed.</p>\n<p>The key time to live can be updated or entirely removed using the <a href=\"/commands/expire\">EXPIRE</a> and\n              <a href=\"/commands/persist\">PERSIST</a> command (or other strictly related commands).</p>\n<span class=\"anchor\" id=\"expire-accuracy\"></span><h2><a class=\"anchor-link\" href=\"#expire-accuracy\">*</a>Expire accuracy</h2>\n<p>In Redis 2.4 the expire might not be pin-point accurate, and it could be between\n              zero to one seconds out.</p>\n<p>Since Redis 2.6 the expire error is from 0 to 1 milliseconds.</p>\n<span class=\"anchor\" id=\"expires-and-persistence\"></span><h2><a class=\"anchor-link\" href=\"#expires-and-persistence\">*</a>Expires and persistence</h2>\n<p>Keys expiring information is stored as absolute Unix timestamps (in milliseconds\n              in case of Redis version 2.6 or greater).\n              This means that the time is flowing even when the Redis instance is not active.</p>\n<p>For expires to work well, the computer time must be taken stable.\n              If you move an RDB file from two computers with a big desync in their clocks,\n              funny things may happen (like all the keys loaded to be expired at loading\n              time).</p>\n<p>Even running instances will always check the computer clock, so for instance if\n              you set a key with a time to live of 1000 seconds, and then set your computer\n              time 2000 seconds in the future, the key will be expired immediately, instead of\n              lasting for 1000 seconds.</p>\n<span class=\"anchor\" id=\"how-redis-expires-keys\"></span><h2><a class=\"anchor-link\" href=\"#how-redis-expires-keys\">*</a>How Redis expires keys</h2>\n<p>Redis keys are expired in two ways: a passive way, and an active way.</p>\n<p>A key is passively expired simply when some client tries to access it, and the\n              key is found to be timed out.</p>\n<p>Of course this is not enough as there are expired keys that will never be\n              accessed again.\n              These keys should be expired anyway, so periodically Redis tests a few keys at\n              random among keys with an expire set.\n              All the keys that are already expired are deleted from the keyspace.</p>\n<p>Specifically this is what Redis does 10 times per second:</p>\n<ol>\n<li>Test 20 random keys from the set of keys with an associated expire.</li>\n<li>Delete all the keys found expired.</li>\n<li>If more than 25% of keys were expired, start again from step 1.</li>\n</ol>\n<p>This is a trivial probabilistic algorithm, basically the assumption is that our\n              sample is representative of the whole key space, and we continue to expire until\n              the percentage of keys that are likely to be expired is under 25%</p>\n<p>This means that at any given moment the maximum amount of keys already expired\n              that are using memory is at max equal to max amount of write operations per\n              second divided by 4.</p>\n<span class=\"anchor\" id=\"how-expires-are-handled-in-the-replication-link-and-aof-file\"></span><h2><a class=\"anchor-link\" href=\"#how-expires-are-handled-in-the-replication-link-and-aof-file\">*</a>How expires are handled in the replication link and AOF file</h2>\n<p>In order to obtain a correct behavior without sacrificing consistency, when a\n              key expires, a <a href=\"/commands/del\">DEL</a> operation is synthesized in both the AOF file and gains all\n              the attached replicas nodes.\n              This way the expiration process is centralized in the master instance, and there\n              is no chance of consistency errors.</p>\n<p>However while the replicas connected to a master will not expire keys\n              independently (but will wait for the <a href=\"/commands/del\">DEL</a> coming from the master), they'll\n              still take the full state of the expires existing in the dataset, so when a\n              replica is elected to master it will be able to expire the keys independently,\n              fully acting as a master.</p>\n</div>"}, "EXPIREAT": {"category": "generic", "help_link": "/commands/expireat", "args": ["key", "timestamp"], "summary": "Set the expiration for a key as a UNIX timestamp", "name": "EXPIREAT", "help_text": "<div class=\"article-main\">\n<div class=\"metadata\">\n<p><strong>Available since 1.2.0.</strong></p>\n<p><strong>Time complexity:</strong> O(1)</p>\n</div>\n<p><a href=\"/commands/expireat\">EXPIREAT</a> has the same effect and semantic as <a href=\"/commands/expire\">EXPIRE</a>, but instead of\n              specifying the number of seconds representing the TTL (time to live), it takes\n              an absolute <a href=\"http://en.wikipedia.org/wiki/Unix_time\">Unix timestamp</a> (seconds since January 1, 1970). A\n              timestamp in the past will delete the key immediately.</p>\n<p>Please for the specific semantics of the command refer to the documentation of\n              <a href=\"/commands/expire\">EXPIRE</a>.</p>\n<span class=\"anchor\" id=\"background\"></span><h2><a class=\"anchor-link\" href=\"#background\">*</a>Background</h2>\n<p><a href=\"/commands/expireat\">EXPIREAT</a> was introduced in order to convert relative timeouts to absolute\n              timeouts for the AOF persistence mode.\n              Of course, it can be used directly to specify that a given key should expire at\n              a given time in the future.</p>\n<span class=\"anchor\" id=\"return-value\"></span><h2><a class=\"anchor-link\" href=\"#return-value\">*</a>Return value</h2>\n<p><a href=\"/topics/protocol#integer-reply\">Integer reply</a>, specifically:</p>\n<ul>\n<li><code>1</code> if the timeout was set.</li>\n<li><code>0</code> if <code>key</code> does not exist.</li>\n</ul>\n<span class=\"anchor\" id=\"examples\"></span><h2><a class=\"anchor-link\" href=\"#examples\">*</a>Examples</h2>\n<div class=\"example\" data-session=\"e8f29bbc37ff2419dac577afe5039a0f\">\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">SET mykey \"Hello\"</span>\n<pre>\"OK\"</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">EXISTS mykey</span>\n<pre>(integer) 1</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">EXPIREAT mykey 1293840000</span>\n<pre>(integer) 1</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">EXISTS mykey</span>\n<pre>(integer) 0</pre><form>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<input autocomplete=\"off\" name=\"command\" spellcheck=\"false\" type=\"text\"/>\n</form></div>\n</div>"}, "FLUSHALL": {"category": "server", "help_link": "/commands/flushall", "args": ["[ASYNC]"], "summary": "Remove all keys from all databases", "name": "FLUSHALL", "help_text": "<div class=\"article-main\">\n<div class=\"metadata\">\n<p><strong>Available since 1.0.0.</strong></p>\n</div>\n<p>Delete all the keys of all the existing databases, not just the currently\n              selected one.\n              This command never fails.</p>\n<p>The time-complexity for this operation is <span class=\"math\">O(N),</span> N being the number of\n              keys in all existing databases.</p>\n<span class=\"anchor\" id=\"codeflushall-asynccode-redis-400-or-greater\"></span><h2><a class=\"anchor-link\" href=\"#codeflushall-asynccode-redis-400-or-greater\">*</a><code>FLUSHALL ASYNC</code> (Redis 4.0.0 or greater)</h2>\n<p>Redis is now able to delete keys in the background in a different thread without blocking the server.\n              An <code>ASYNC</code> option was added to <a href=\"/commands/flushall\">FLUSHALL</a> and <a href=\"/commands/flushdb\">FLUSHDB</a> in order to let the entire dataset or a single database to be freed asynchronously.</p>\n<p>Asynchronous <a href=\"/commands/flushall\">FLUSHALL</a> and <a href=\"/commands/flushdb\">FLUSHDB</a> commands only delete keys that were present at the time the command was invoked. Keys created during an asynchronous flush will be unaffected.</p>\n<span class=\"anchor\" id=\"return-value\"></span><h2><a class=\"anchor-link\" href=\"#return-value\">*</a>Return value</h2>\n<p><a href=\"/topics/protocol#simple-string-reply\">Simple string reply</a></p>\n</div>"}, "FLUSHDB": {"category": "server", "help_link": "/commands/flushdb", "args": ["[ASYNC]"], "summary": "Remove all keys from the current database", "name": "FLUSHDB", "help_text": "<div class=\"article-main\">\n<div class=\"metadata\">\n<p><strong>Available since 1.0.0.</strong></p>\n</div>\n<p>Delete all the keys of the currently selected DB.\n              This command never fails.</p>\n<p>The time-complexity for this operation is <span class=\"math\">O(N),</span> N being the number of\n              keys in the database.</p>\n<span class=\"anchor\" id=\"codeflushdb-asynccode-redis-400-or-greater\"></span><h2><a class=\"anchor-link\" href=\"#codeflushdb-asynccode-redis-400-or-greater\">*</a><code>FLUSHDB ASYNC</code> (Redis 4.0.0 or greater)</h2>\n<p>See <a href=\"/commands/flushall\">FLUSHALL</a> for documentation.</p>\n<span class=\"anchor\" id=\"return-value\"></span><h2><a class=\"anchor-link\" href=\"#return-value\">*</a>Return value</h2>\n<p><a href=\"/topics/protocol#simple-string-reply\">Simple string reply</a></p>\n</div>"}, "GEOADD": {"category": "geo", "help_link": "/commands/geoadd", "args": ["key", "longitude latitude member [longitude latitude member ...]"], "summary": "Add one or more geospatial items in the geospatial index represented using a sorted set", "name": "GEOADD", "help_text": "<div class=\"article-main\">\n<div class=\"metadata\">\n<p><strong>Available since 3.2.0.</strong></p>\n<p><strong>Time complexity:</strong> O(log(N)) for each item added, where N is the number of elements in the sorted set.</p>\n</div>\n<p>Adds the specified geospatial items (latitude, longitude, name) to the specified\n              key. Data is stored into the key as a sorted set, in a way that makes it possible to later retrieve items using a query by radius with the <a href=\"/commands/georadius\">GEORADIUS</a> or <a href=\"/commands/georadiusbymember\">GEORADIUSBYMEMBER</a> commands.</p>\n<p>The command takes arguments in the standard format x,y so the longitude must\n              be specified before the latitude. There are limits to the coordinates that\n              can be indexed: areas very near to the poles are not indexable. The exact\n              limits, as specified by EPSG:900913 / EPSG:3785 / OSGEO:41001 are the following:</p>\n<ul>\n<li>Valid longitudes are from -180 to 180 degrees.</li>\n<li>Valid latitudes are from -85.05112878 to 85.05112878 degrees.</li>\n</ul>\n<p>The command will report an error when the user attempts to index coordinates outside the specified ranges.</p>\n<p><strong>Note:</strong> there is no <strong>GEODEL</strong> command because you can use <a href=\"/commands/zrem\">ZREM</a> in order to remove elements. The Geo index structure is just a sorted set.</p>\n<span class=\"anchor\" id=\"how-does-it-work\"></span><h2><a class=\"anchor-link\" href=\"#how-does-it-work\">*</a>How does it work?</h2>\n<p>The way the sorted set is populated is using a technique called\n              <a href=\"https://en.wikipedia.org/wiki/Geohash\">Geohash</a>. Latitude and Longitude\n              bits are interleaved in order to form an unique 52 bit integer. We know\n              that a sorted set double score can represent a 52 bit integer without losing\n              precision.</p>\n<p>This format allows for radius querying by checking the 1+8 areas needed\n              to cover the whole radius, and discarding elements outside the radius.\n              The areas are checked by calculating the range of the box covered removing\n              enough bits from the less significant part of the sorted set score, and\n              computing the score range to query in the sorted set for each area.</p>\n<span class=\"anchor\" id=\"what-earth-model-does-it-use\"></span><h2><a class=\"anchor-link\" href=\"#what-earth-model-does-it-use\">*</a>What Earth model does it use?</h2>\n<p>It just assumes that the Earth is a sphere, since the used distance formula\n              is the Haversine formula. This formula is only an approximation when applied to the Earth, which is not a perfect sphere. The introduced errors are not an issue when used in the context of social network sites that need to query by radius\n              and most other applications. However in the worst case the error may be up to\n              0.5%, so you may want to consider other systems for error-critical applications.</p>\n<span class=\"anchor\" id=\"return-value\"></span><h2><a class=\"anchor-link\" href=\"#return-value\">*</a>Return value</h2>\n<p><a href=\"/topics/protocol#integer-reply\">Integer reply</a>, specifically:</p>\n<ul>\n<li>The number of elements added to the sorted set, not including elements\n              already existing for which the score was updated.</li>\n</ul>\n<span class=\"anchor\" id=\"examples\"></span><h2><a class=\"anchor-link\" href=\"#examples\">*</a>Examples</h2>\n<div class=\"example\" data-session=\"4aac3a45c225251701d6d1674753a27a\">\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">GEOADD Sicily 13.361389 38.115556 \"Palermo\" 15.087269 37.502669 \"Catania\"</span>\n<pre>(integer) 2</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">GEODIST Sicily Palermo Catania</span>\n<pre>\"166274.1516\"</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">GEORADIUS Sicily 15 37 100 km</span>\n<pre>1) \"Catania\"</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">GEORADIUS Sicily 15 37 200 km</span>\n<pre>1) \"Palermo\"\n2) \"Catania\"</pre><form>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<input autocomplete=\"off\" name=\"command\" spellcheck=\"false\" type=\"text\"/>\n</form></div>\n</div>"}, "GEOHASH": {"category": "geo", "help_link": "/commands/geohash", "args": ["key", "member [member ...]"], "summary": "Returns members of a geospatial index as standard geohash strings", "name": "GEOHASH", "help_text": "<div class=\"article-main\">\n<div class=\"metadata\">\n<p><strong>Available since 3.2.0.</strong></p>\n<p><strong>Time complexity:</strong> O(log(N)) for each member requested, where N is the number of elements in the sorted set.</p>\n</div>\n<p>Return valid <a href=\"https://en.wikipedia.org/wiki/Geohash\">Geohash</a> strings representing the position of one or more elements in a sorted set value representing a geospatial index (where elements were added using <a href=\"/commands/geoadd\">GEOADD</a>).</p>\n<p>Normally Redis represents positions of elements using a variation of the Geohash\n              technique where positions are encoded using 52 bit integers. The encoding is\n              also different compared to the standard because the initial min and max\n              coordinates used during the encoding and decoding process are different. This\n              command however <strong>returns a standard Geohash</strong> in the form of a string as\n              described in the <a href=\"https://en.wikipedia.org/wiki/Geohash\">Wikipedia article</a> and compatible with the <a href=\"http://geohash.org\">geohash.org</a> web site.</p>\n<span class=\"anchor\" id=\"geohash-string-properties\"></span><h2><a class=\"anchor-link\" href=\"#geohash-string-properties\">*</a>Geohash string properties</h2>\n<p>The command returns 10 characters Geohash strings, so only two bits of\n              precision are lost compared to the Redis internal 52 bit representation, but\n              this loss doesn't affect the precision in a sensible way: normally geohashes\n              are cut to up to 8 characters, giving anyway a precision of +/- 0.019 km.</p>\n<ol>\n<li>Geo hashes can be shortened removing characters from the right. It will lose precision but will still point to the same area.</li>\n<li>It is possible to use them in <code>geohash.org</code> URLs such as <code>http://geohash.org/&lt;geohash-string&gt;</code>. This is an <a href=\"http://geohash.org/sqdtr74hyu0\">example of such URL</a>.</li>\n<li>Strings with a similar prefix are nearby, but the contrary is not true, it is possible that strings with different prefixes are nearby too.</li>\n</ol>\n<p>Note: older versions of Redis used to return 11 characters instead of 10, however because of a bug the last character was not correct and was not helping in having a better precision.</p>\n<span class=\"anchor\" id=\"return-value\"></span><h2><a class=\"anchor-link\" href=\"#return-value\">*</a>Return value</h2>\n<p><a href=\"/topics/protocol#array-reply\">Array reply</a>, specifically:</p>\n<p>The command returns an array where each element is the Geohash corresponding to\n              each member name passed as argument to the command.</p>\n<span class=\"anchor\" id=\"examples\"></span><h2><a class=\"anchor-link\" href=\"#examples\">*</a>Examples</h2>\n<div class=\"example\" data-session=\"a171ed32311af20158d8f8a69f155ac0\">\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">GEOADD Sicily 13.361389 38.115556 \"Palermo\" 15.087269 37.502669 \"Catania\"</span>\n<pre>(integer) 2</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">GEOHASH Sicily Palermo Catania</span>\n<pre>1) \"sqc8b49rny0\"\n2) \"sqdtr74hyu0\"</pre><form>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<input autocomplete=\"off\" name=\"command\" spellcheck=\"false\" type=\"text\"/>\n</form></div>\n</div>"}, "GEOPOS": {"category": "geo", "help_link": "/commands/geopos", "args": ["key", "member [member ...]"], "summary": "Returns longitude and latitude of members of a geospatial index", "name": "GEOPOS", "help_text": "<div class=\"article-main\">\n<div class=\"metadata\">\n<p><strong>Available since 3.2.0.</strong></p>\n<p><strong>Time complexity:</strong> O(log(N)) for each member requested, where N is the number of elements in the sorted set.</p>\n</div>\n<p>Return the positions (longitude,latitude) of all the specified members of the geospatial index represented by the sorted set at <em>key</em>.</p>\n<p>Given a sorted set representing a geospatial index, populated using the <a href=\"/commands/geoadd\">GEOADD</a> command, it is often useful to obtain back the coordinates of specified members. When the geospatial index is populated via <a href=\"/commands/geoadd\">GEOADD</a> the coordinates are converted into a 52 bit geohash, so the coordinates returned may not be exactly the ones used in order to add the elements, but small errors may be introduced.</p>\n<p>The command can accept a variable number of arguments so it always returns an array of positions even when a single element is specified.</p>\n<span class=\"anchor\" id=\"return-value\"></span><h2><a class=\"anchor-link\" href=\"#return-value\">*</a>Return value</h2>\n<p><a href=\"/topics/protocol#array-reply\">Array reply</a>, specifically:</p>\n<p>The command returns an array where each element is a two elements array\n              representing longitude and latitude (x,y) of each member name passed as\n              argument to the command.</p>\n<p>Non existing elements are reported as NULL elements of the array.</p>\n<span class=\"anchor\" id=\"examples\"></span><h2><a class=\"anchor-link\" href=\"#examples\">*</a>Examples</h2>\n<div class=\"example\" data-session=\"6d50c41e6061cf87037c29ec666ce924\">\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">GEOADD Sicily 13.361389 38.115556 \"Palermo\" 15.087269 37.502669 \"Catania\"</span>\n<pre>(integer) 2</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">GEOPOS Sicily Palermo Catania NonExisting</span>\n<pre>1) 1) \"13.36138933897018433\"\n   2) \"38.11555639549629859\"\n2) 1) \"15.08726745843887329\"\n   2) \"37.50266842333162032\"\n3) (nil)</pre><form>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<input autocomplete=\"off\" name=\"command\" spellcheck=\"false\" type=\"text\"/>\n</form></div>\n</div>"}, "GEODIST": {"category": "geo", "help_link": "/commands/geodist", "args": ["key", "member1", "member2", "[unit]"], "summary": "Returns the distance between two members of a geospatial index", "name": "GEODIST", "help_text": "<div class=\"article-main\">\n<div class=\"metadata\">\n<p><strong>Available since 3.2.0.</strong></p>\n<p><strong>Time complexity:</strong> O(log(N))</p>\n</div>\n<p>Return the distance between two members in the geospatial index represented by the sorted set.</p>\n<p>Given a sorted set representing a geospatial index, populated using the <a href=\"/commands/geoadd\">GEOADD</a> command, the command returns the distance between the two specified members in the specified unit.</p>\n<p>If one or both the members are missing, the command returns NULL.</p>\n<p>The unit must be one of the following, and defaults to meters:</p>\n<ul>\n<li><strong>m</strong> for meters.</li>\n<li><strong>km</strong> for kilometers.</li>\n<li><strong>mi</strong> for miles.</li>\n<li><strong>ft</strong> for feet.</li>\n</ul>\n<p>The distance is computed assuming that the Earth is a perfect sphere, so errors up to 0.5% are possible in edge cases.</p>\n<span class=\"anchor\" id=\"return-value\"></span><h2><a class=\"anchor-link\" href=\"#return-value\">*</a>Return value</h2>\n<p><a href=\"/topics/protocol#bulk-string-reply\">Bulk string reply</a>, specifically:</p>\n<p>The command returns the distance as a double (represented as a string)\n              in the specified unit, or NULL if one or both the elements are missing.</p>\n<span class=\"anchor\" id=\"examples\"></span><h2><a class=\"anchor-link\" href=\"#examples\">*</a>Examples</h2>\n<div class=\"example\" data-session=\"e3ee165b65b0f17ea5c36c31a7b69f5e\">\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">GEOADD Sicily 13.361389 38.115556 \"Palermo\" 15.087269 37.502669 \"Catania\"</span>\n<pre>(integer) 2</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">GEODIST Sicily Palermo Catania</span>\n<pre>\"166274.1516\"</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">GEODIST Sicily Palermo Catania km</span>\n<pre>\"166.2742\"</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">GEODIST Sicily Palermo Catania mi</span>\n<pre>\"103.3182\"</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">GEODIST Sicily Foo Bar</span>\n<pre>(nil)</pre><form>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<input autocomplete=\"off\" name=\"command\" spellcheck=\"false\" type=\"text\"/>\n</form></div>\n</div>"}, "GEORADIUS": {"category": "geo", "help_link": "/commands/georadius", "args": ["key", "longitude", "latitude", "radius", "m|km|ft|mi", "[WITHCOORD]", "[WITHDIST]", "[WITHHASH]", "[COUNT count]", "[ASC|DESC]", "[STORE key]", "[STOREDIST key]"], "summary": "Query a sorted set representing a geospatial index to fetch members matching a given maximum distance from a point", "name": "GEORADIUS", "help_text": "<div class=\"article-main\">\n<div class=\"metadata\">\n<p><strong>Available since 3.2.0.</strong></p>\n<p><strong>Time complexity:</strong> O(N+log(M)) where N is the number of elements inside the bounding box of the circular area delimited by center and radius and M is the number of items inside the index.</p>\n</div>\n<p>Return the members of a sorted set populated with geospatial information using <a href=\"/commands/geoadd\">GEOADD</a>, which are within the borders of the area specified with the center location and the maximum distance from the center (the radius).</p>\n<p>This manual page also covers the <code>GEORADIUS_RO</code> and <code>GEORADIUSBYMEMBER_RO</code> variants (see the section below for more information).</p>\n<p>The common use case for this command is to retrieve geospatial items near a specified point not farther than a given amount of meters (or other units). This allows, for example, to suggest mobile users of an application nearby places.</p>\n<p>The radius is specified in one of the following units:</p>\n<ul>\n<li><strong>m</strong> for meters.</li>\n<li><strong>km</strong> for kilometers.</li>\n<li><strong>mi</strong> for miles.</li>\n<li><strong>ft</strong> for feet.</li>\n</ul>\n<p>The command optionally returns additional information using the following options:</p>\n<ul>\n<li><code>WITHDIST</code>: Also return the distance of the returned items from the specified center. The distance is returned in the same unit as the unit specified as the radius argument of the command.</li>\n<li><code>WITHCOORD</code>: Also return the longitude,latitude coordinates of the matching items.</li>\n<li><code>WITHHASH</code>: Also return the raw geohash-encoded sorted set score of the item, in the form of a 52 bit unsigned integer. This is only useful for low level hacks or debugging and is otherwise of little interest for the general user.</li>\n</ul>\n<p>The command default is to return unsorted items. Two different sorting methods can be invoked using the following two options:</p>\n<ul>\n<li><code>ASC</code>: Sort returned items from the nearest to the farthest, relative to the center.</li>\n<li><code>DESC</code>: Sort returned items from the farthest to the nearest, relative to the center.</li>\n</ul>\n<p>By default all the matching items are returned. It is possible to limit the results to the first N matching items by using the <strong>COUNT <code>&lt;count&gt;</code></strong> option. However note that internally the command needs to perform an effort proportional to the number of items matching the specified area, so to query very large areas with a very small <code>COUNT</code> option may be slow even if just a few results are returned. On the other hand <code>COUNT</code> can be a very effective way to reduce bandwidth usage if normally just the first results are used.</p>\n<span class=\"anchor\" id=\"return-value\"></span><h2><a class=\"anchor-link\" href=\"#return-value\">*</a>Return value</h2>\n<p><a href=\"/topics/protocol#array-reply\">Array reply</a>, specifically:</p>\n<ul>\n<li>Without any <code>WITH</code> option specified, the command just returns a linear array like [\"New York\",\"Milan\",\"Paris\"].</li>\n<li>If <code>WITHCOORD</code>, <code>WITHDIST</code> or <code>WITHHASH</code> options are specified, the command returns an array of arrays, where each sub-array represents a single item.</li>\n</ul>\n<p>When additional information is returned as an array of arrays for each item, the first item in the sub-array is always the name of the returned item. The other information is returned in the following order as successive elements of the sub-array.</p>\n<ol>\n<li>The distance from the center as a floating point number, in the same unit specified in the radius.</li>\n<li>The geohash integer.</li>\n<li>The coordinates as a two items x,y array (longitude,latitude).</li>\n</ol>\n<p>So for example the command <code>GEORADIUS Sicily 15 37 200 km WITHCOORD WITHDIST</code> will return each item in the following way:</p>\n<pre><code>[\"Palermo\",\"190.4424\",[\"13.361389338970184\",\"38.115556395496299\"]]\n</code></pre>\n<span class=\"anchor\" id=\"read-only-variants\"></span><h2><a class=\"anchor-link\" href=\"#read-only-variants\">*</a>Read only variants</h2>\n<p>Since <a href=\"/commands/georadius\">GEORADIUS</a> and <a href=\"/commands/georadiusbymember\">GEORADIUSBYMEMBER</a> have a <code>STORE</code> and <code>STOREDIST</code> option they are technically flagged as writing commands in the Redis command table. For this reason read-only replicas will flag them, and Redis Cluster replicas will redirect them to the master instance even if the connection is in read only mode (See the <a href=\"/commands/readonly\">READONLY</a> command of Redis Cluster).</p>\n<p>Breaking the compatibility with the past was considered but rejected, at least for Redis 4.0, so instead two read only variants of the commands were added. They are exactly like the original commands but refuse the <code>STORE</code> and <code>STOREDIST</code> options. The two variants are called <code>GEORADIUS_RO</code> and <code>GEORADIUSBYMEMBER_RO</code>, and can safely be used in replicas.</p>\n<p>Both commands were introduced in Redis 3.2.10 and Redis 4.0.0 respectively.</p>\n<span class=\"anchor\" id=\"examples\"></span><h2><a class=\"anchor-link\" href=\"#examples\">*</a>Examples</h2>\n<div class=\"example\" data-session=\"519b010204d7b4dadf25b955b72f9e5b\">\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">GEOADD Sicily 13.361389 38.115556 \"Palermo\" 15.087269 37.502669 \"Catania\"</span>\n<pre>(integer) 2</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">GEORADIUS Sicily 15 37 200 km WITHDIST</span>\n<pre>1) 1) \"Palermo\"\n   2) \"190.4424\"\n2) 1) \"Catania\"\n   2) \"56.4413\"</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">GEORADIUS Sicily 15 37 200 km WITHCOORD</span>\n<pre>1) 1) \"Palermo\"\n   2) 1) \"13.36138933897018433\"\n      2) \"38.11555639549629859\"\n2) 1) \"Catania\"\n   2) 1) \"15.08726745843887329\"\n      2) \"37.50266842333162032\"</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">GEORADIUS Sicily 15 37 200 km WITHDIST WITHCOORD</span>\n<pre>1) 1) \"Palermo\"\n   2) \"190.4424\"\n   3) 1) \"13.36138933897018433\"\n      2) \"38.11555639549629859\"\n2) 1) \"Catania\"\n   2) \"56.4413\"\n   3) 1) \"15.08726745843887329\"\n      2) \"37.50266842333162032\"</pre><form>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<input autocomplete=\"off\" name=\"command\" spellcheck=\"false\" type=\"text\"/>\n</form></div>\n</div>"}, "GEORADIUSBYMEMBER": {"category": "geo", "help_link": "/commands/georadiusbymember", "args": ["key", "member", "radius", "m|km|ft|mi", "[WITHCOORD]", "[WITHDIST]", "[WITHHASH]", "[COUNT count]", "[ASC|DESC]", "[STORE key]", "[STOREDIST key]"], "summary": "Query a sorted set representing a geospatial index to fetch members matching a given maximum distance from a member", "name": "GEORADIUSBYMEMBER", "help_text": "<div class=\"article-main\">\n<div class=\"metadata\">\n<p><strong>Available since 3.2.0.</strong></p>\n<p><strong>Time complexity:</strong> O(N+log(M)) where N is the number of elements inside the bounding box of the circular area delimited by center and radius and M is the number of items inside the index.</p>\n</div>\n<p>This command is exactly like <a href=\"/commands/georadius\">GEORADIUS</a> with the sole difference that instead\n              of taking, as the center of the area to query, a longitude and latitude value, it takes the name of a member already existing inside the geospatial index represented by the sorted set.</p>\n<p>The position of the specified member is used as the center of the query.</p>\n<p>Please check the example below and the <a href=\"/commands/georadius\">GEORADIUS</a> documentation for more information about the command and its options.</p>\n<p>Note that <code>GEORADIUSBYMEMBER_RO</code> is also available since Redis 3.2.10 and Redis 4.0.0 in order to provide a read-only command that can be used in replicas. See the <a href=\"/commands/georadius\">GEORADIUS</a> page for more information.</p>\n<span class=\"anchor\" id=\"examples\"></span><h2><a class=\"anchor-link\" href=\"#examples\">*</a>Examples</h2>\n<div class=\"example\" data-session=\"98195ab0161f62d494fd4d00a9b719bc\">\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">GEOADD Sicily 13.583333 37.316667 \"Agrigento\"</span>\n<pre>(integer) 1</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">GEOADD Sicily 13.361389 38.115556 \"Palermo\" 15.087269 37.502669 \"Catania\"</span>\n<pre>(integer) 2</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">GEORADIUSBYMEMBER Sicily Agrigento 100 km</span>\n<pre>1) \"Agrigento\"\n2) \"Palermo\"</pre><form>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<input autocomplete=\"off\" name=\"command\" spellcheck=\"false\" type=\"text\"/>\n</form></div>\n</div>"}, "GET": {"category": "string", "help_link": "/commands/get", "args": ["key"], "summary": "Get the value of a key", "name": "GET", "help_text": "<div class=\"article-main\">\n<div class=\"metadata\">\n<p><strong>Available since 1.0.0.</strong></p>\n<p><strong>Time complexity:</strong> O(1)</p>\n</div>\n<p>Get the value of <code>key</code>.\n              If the key does not exist the special value <code>nil</code> is returned.\n              An error is returned if the value stored at <code>key</code> is not a string, because <a href=\"/commands/get\">GET</a>\n              only handles string values.</p>\n<span class=\"anchor\" id=\"return-value\"></span><h2><a class=\"anchor-link\" href=\"#return-value\">*</a>Return value</h2>\n<p><a href=\"/topics/protocol#bulk-string-reply\">Bulk string reply</a>: the value of <code>key</code>, or <code>nil</code> when <code>key</code> does not exist.</p>\n<span class=\"anchor\" id=\"examples\"></span><h2><a class=\"anchor-link\" href=\"#examples\">*</a>Examples</h2>\n<div class=\"example\" data-session=\"fe5bf6cb1bc6949e5293d4245ba3b0ec\">\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">GET nonexisting</span>\n<pre>(nil)</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">SET mykey \"Hello\"</span>\n<pre>\"OK\"</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">GET mykey</span>\n<pre>\"Hello\"</pre><form>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<input autocomplete=\"off\" name=\"command\" spellcheck=\"false\" type=\"text\"/>\n</form></div>\n</div>"}, "GETBIT": {"category": "string", "help_link": "/commands/getbit", "args": ["key", "offset"], "summary": "Returns the bit value at offset in the string value stored at key", "name": "GETBIT", "help_text": "<div class=\"article-main\">\n<div class=\"metadata\">\n<p><strong>Available since 2.2.0.</strong></p>\n<p><strong>Time complexity:</strong> O(1)</p>\n</div>\n<p>Returns the bit value at <em>offset</em> in the string value stored at <em>key</em>.</p>\n<p>When <em>offset</em> is beyond the string length, the string is assumed to be a\n              contiguous space with 0 bits.\n              When <em>key</em> does not exist it is assumed to be an empty string, so <em>offset</em> is\n              always out of range and the value is also assumed to be a contiguous space with\n              0 bits.</p>\n<span class=\"anchor\" id=\"return-value\"></span><h2><a class=\"anchor-link\" href=\"#return-value\">*</a>Return value</h2>\n<p><a href=\"/topics/protocol#integer-reply\">Integer reply</a>: the bit value stored at <em>offset</em>.</p>\n<span class=\"anchor\" id=\"examples\"></span><h2><a class=\"anchor-link\" href=\"#examples\">*</a>Examples</h2>\n<div class=\"example\" data-session=\"7a57c9de699903c5f73af5f92a7fa1f8\">\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">SETBIT mykey 7 1</span>\n<pre>(integer) 0</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">GETBIT mykey 0</span>\n<pre>(integer) 0</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">GETBIT mykey 7</span>\n<pre>(integer) 1</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">GETBIT mykey 100</span>\n<pre>(integer) 0</pre><form>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<input autocomplete=\"off\" name=\"command\" spellcheck=\"false\" type=\"text\"/>\n</form></div>\n</div>"}, "GETRANGE": {"category": "string", "help_link": "/commands/getrange", "args": ["key", "start", "end"], "summary": "Get a substring of the string stored at a key", "name": "GETRANGE", "help_text": "<div class=\"article-main\">\n<div class=\"metadata\">\n<p><strong>Available since 2.4.0.</strong></p>\n<p><strong>Time complexity:</strong> O(N) where N is the length of the returned string. The complexity is ultimately determined by the returned length, but because creating a substring from an existing string is very cheap, it can be considered O(1) for small strings.</p>\n</div>\n<p><strong>Warning</strong>: this command was renamed to <a href=\"/commands/getrange\">GETRANGE</a>, it is called <code>SUBSTR</code> in\n              Redis versions <code>&lt;= 2.0</code>.</p>\n<p>Returns the substring of the string value stored at <code>key</code>, determined by the\n              offsets <code>start</code> and <code>end</code> (both are inclusive).\n              Negative offsets can be used in order to provide an offset starting from the end\n              of the string.\n              So -1 means the last character, -2 the penultimate and so forth.</p>\n<p>The function handles out of range requests by limiting the resulting range to\n              the actual length of the string.</p>\n<span class=\"anchor\" id=\"return-value\"></span><h2><a class=\"anchor-link\" href=\"#return-value\">*</a>Return value</h2>\n<p><a href=\"/topics/protocol#bulk-string-reply\">Bulk string reply</a></p>\n<span class=\"anchor\" id=\"examples\"></span><h2><a class=\"anchor-link\" href=\"#examples\">*</a>Examples</h2>\n<div class=\"example\" data-session=\"9b3e0a353005d342eb5970012bbd56a1\">\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">SET mykey \"This is a string\"</span>\n<pre>\"OK\"</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">GETRANGE mykey 0 3</span>\n<pre>\"This\"</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">GETRANGE mykey -3 -1</span>\n<pre>\"ing\"</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">GETRANGE mykey 0 -1</span>\n<pre>\"This is a string\"</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">GETRANGE mykey 10 100</span>\n<pre>\"string\"</pre><form>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<input autocomplete=\"off\" name=\"command\" spellcheck=\"false\" type=\"text\"/>\n</form></div>\n</div>"}, "GETSET": {"category": "string", "help_link": "/commands/getset", "args": ["key", "value"], "summary": "Set the string value of a key and return its old value", "name": "GETSET", "help_text": "<div class=\"article-main\">\n<div class=\"metadata\">\n<p><strong>Available since 1.0.0.</strong></p>\n<p><strong>Time complexity:</strong> O(1)</p>\n</div>\n<p>Atomically sets <code>key</code> to <code>value</code> and returns the old value stored at <code>key</code>.\n              Returns an error when <code>key</code> exists but does not hold a string value.</p>\n<span class=\"anchor\" id=\"design-pattern\"></span><h2><a class=\"anchor-link\" href=\"#design-pattern\">*</a>Design pattern</h2>\n<p><a href=\"/commands/getset\">GETSET</a> can be used together with <a href=\"/commands/incr\">INCR</a> for counting with atomic reset.\n              For example: a process may call <a href=\"/commands/incr\">INCR</a> against the key <code>mycounter</code> every time\n              some event occurs, but from time to time we need to get the value of the counter\n              and reset it to zero atomically.\n              This can be done using <code>GETSET mycounter \"0\"</code>:</p>\n<div class=\"example\" data-session=\"582caf938e01c98ad9ba5f964b7226a6\">\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">INCR mycounter</span>\n<pre>(integer) 1</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">GETSET mycounter \"0\"</span>\n<pre>\"1\"</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">GET mycounter</span>\n<pre>\"0\"</pre><form>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<input autocomplete=\"off\" name=\"command\" spellcheck=\"false\" type=\"text\"/>\n</form></div>\n<span class=\"anchor\" id=\"return-value\"></span><h2><a class=\"anchor-link\" href=\"#return-value\">*</a>Return value</h2>\n<p><a href=\"/topics/protocol#bulk-string-reply\">Bulk string reply</a>: the old value stored at <code>key</code>, or <code>nil</code> when <code>key</code> did not exist.</p>\n<span class=\"anchor\" id=\"examples\"></span><h2><a class=\"anchor-link\" href=\"#examples\">*</a>Examples</h2>\n<div class=\"example\" data-session=\"582caf938e01c98ad9ba5f964b7226a6\">\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">SET mykey \"Hello\"</span>\n<pre>\"OK\"</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">GETSET mykey \"World\"</span>\n<pre>\"Hello\"</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">GET mykey</span>\n<pre>\"World\"</pre><form>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<input autocomplete=\"off\" name=\"command\" spellcheck=\"false\" type=\"text\"/>\n</form></div>\n</div>"}, "HDEL": {"category": "hash", "help_link": "/commands/hdel", "args": ["key", "field [field ...]"], "summary": "Delete one or more hash fields", "name": "HDEL", "help_text": "<div class=\"article-main\">\n<div class=\"metadata\">\n<p><strong>Available since 2.0.0.</strong></p>\n<p><strong>Time complexity:</strong> O(N) where N is the number of fields to be removed.</p>\n</div>\n<p>Removes the specified fields from the hash stored at <code>key</code>.\n              Specified fields that do not exist within this hash are ignored.\n              If <code>key</code> does not exist, it is treated as an empty hash and this command returns\n              <code>0</code>.</p>\n<span class=\"anchor\" id=\"return-value\"></span><h2><a class=\"anchor-link\" href=\"#return-value\">*</a>Return value</h2>\n<p><a href=\"/topics/protocol#integer-reply\">Integer reply</a>: the number of fields that were removed from the hash, not\n              including specified but non existing fields.</p>\n<span class=\"anchor\" id=\"history\"></span><h2><a class=\"anchor-link\" href=\"#history\">*</a>History</h2>\n<ul>\n<li><p><code>&gt;= 2.4</code>: Accepts multiple <code>field</code> arguments.\n              Redis versions older than 2.4 can only remove a field per call.</p>\n<p>To remove multiple fields from a hash in an atomic fashion in earlier\n              versions, use a <a href=\"/commands/multi\">MULTI</a> / <a href=\"/commands/exec\">EXEC</a> block.</p></li>\n</ul>\n<span class=\"anchor\" id=\"examples\"></span><h2><a class=\"anchor-link\" href=\"#examples\">*</a>Examples</h2>\n<div class=\"example\" data-session=\"9a0b3ceb025cd3459bfce66687d02dfe\">\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">HSET myhash field1 \"foo\"</span>\n<pre>(integer) 1</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">HDEL myhash field1</span>\n<pre>(integer) 1</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">HDEL myhash field2</span>\n<pre>(integer) 0</pre><form>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<input autocomplete=\"off\" name=\"command\" spellcheck=\"false\" type=\"text\"/>\n</form></div>\n</div>"}, "HEXISTS": {"category": "hash", "help_link": "/commands/hexists", "args": ["key", "field"], "summary": "Determine if a hash field exists", "name": "HEXISTS", "help_text": "<div class=\"article-main\">\n<div class=\"metadata\">\n<p><strong>Available since 2.0.0.</strong></p>\n<p><strong>Time complexity:</strong> O(1)</p>\n</div>\n<p>Returns if <code>field</code> is an existing field in the hash stored at <code>key</code>.</p>\n<span class=\"anchor\" id=\"return-value\"></span><h2><a class=\"anchor-link\" href=\"#return-value\">*</a>Return value</h2>\n<p><a href=\"/topics/protocol#integer-reply\">Integer reply</a>, specifically:</p>\n<ul>\n<li><code>1</code> if the hash contains <code>field</code>.</li>\n<li><code>0</code> if the hash does not contain <code>field</code>, or <code>key</code> does not exist.</li>\n</ul>\n<span class=\"anchor\" id=\"examples\"></span><h2><a class=\"anchor-link\" href=\"#examples\">*</a>Examples</h2>\n<div class=\"example\" data-session=\"954ee0b62b5297e49863c9bb01fd3d6b\">\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">HSET myhash field1 \"foo\"</span>\n<pre>(integer) 1</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">HEXISTS myhash field1</span>\n<pre>(integer) 1</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">HEXISTS myhash field2</span>\n<pre>(integer) 0</pre><form>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<input autocomplete=\"off\" name=\"command\" spellcheck=\"false\" type=\"text\"/>\n</form></div>\n</div>"}, "HGET": {"category": "hash", "help_link": "/commands/hget", "args": ["key", "field"], "summary": "Get the value of a hash field", "name": "HGET", "help_text": "<div class=\"article-main\">\n<div class=\"metadata\">\n<p><strong>Available since 2.0.0.</strong></p>\n<p><strong>Time complexity:</strong> O(1)</p>\n</div>\n<p>Returns the value associated with <code>field</code> in the hash stored at <code>key</code>.</p>\n<span class=\"anchor\" id=\"return-value\"></span><h2><a class=\"anchor-link\" href=\"#return-value\">*</a>Return value</h2>\n<p><a href=\"/topics/protocol#bulk-string-reply\">Bulk string reply</a>: the value associated with <code>field</code>, or <code>nil</code> when <code>field</code> is not\n              present in the hash or <code>key</code> does not exist.</p>\n<span class=\"anchor\" id=\"examples\"></span><h2><a class=\"anchor-link\" href=\"#examples\">*</a>Examples</h2>\n<div class=\"example\" data-session=\"34b48061b9973995f158d51d893e4e71\">\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">HSET myhash field1 \"foo\"</span>\n<pre>(integer) 1</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">HGET myhash field1</span>\n<pre>\"foo\"</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">HGET myhash field2</span>\n<pre>(nil)</pre><form>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<input autocomplete=\"off\" name=\"command\" spellcheck=\"false\" type=\"text\"/>\n</form></div>\n</div>"}, "HGETALL": {"category": "hash", "help_link": "/commands/hgetall", "args": ["key"], "summary": "Get all the fields and values in a hash", "name": "HGETALL", "help_text": "<div class=\"article-main\">\n<div class=\"metadata\">\n<p><strong>Available since 2.0.0.</strong></p>\n<p><strong>Time complexity:</strong> O(N) where N is the size of the hash.</p>\n</div>\n<p>Returns all fields and values of the hash stored at <code>key</code>.\n              In the returned value, every field name is followed by its value, so the length\n              of the reply is twice the size of the hash.</p>\n<span class=\"anchor\" id=\"return-value\"></span><h2><a class=\"anchor-link\" href=\"#return-value\">*</a>Return value</h2>\n<p><a href=\"/topics/protocol#array-reply\">Array reply</a>: list of fields and their values stored in the hash, or an\n              empty list when <code>key</code> does not exist.</p>\n<span class=\"anchor\" id=\"examples\"></span><h2><a class=\"anchor-link\" href=\"#examples\">*</a>Examples</h2>\n<div class=\"example\" data-session=\"135ae180f3e15e0396f0c09413c537c9\">\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">HSET myhash field1 \"Hello\"</span>\n<pre>(integer) 1</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">HSET myhash field2 \"World\"</span>\n<pre>(integer) 1</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">HGETALL myhash</span>\n<pre>1) \"field1\"\n2) \"Hello\"\n3) \"field2\"\n4) \"World\"</pre><form>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<input autocomplete=\"off\" name=\"command\" spellcheck=\"false\" type=\"text\"/>\n</form></div>\n</div>"}, "HINCRBY": {"category": "hash", "help_link": "/commands/hincrby", "args": ["key", "field", "increment"], "summary": "Increment the integer value of a hash field by the given number", "name": "HINCRBY", "help_text": "<div class=\"article-main\">\n<div class=\"metadata\">\n<p><strong>Available since 2.0.0.</strong></p>\n<p><strong>Time complexity:</strong> O(1)</p>\n</div>\n<p>Increments the number stored at <code>field</code> in the hash stored at <code>key</code> by\n              <code>increment</code>.\n              If <code>key</code> does not exist, a new key holding a hash is created.\n              If <code>field</code> does not exist the value is set to <code>0</code> before the operation is\n              performed.</p>\n<p>The range of values supported by <a href=\"/commands/hincrby\">HINCRBY</a> is limited to 64 bit signed integers.</p>\n<span class=\"anchor\" id=\"return-value\"></span><h2><a class=\"anchor-link\" href=\"#return-value\">*</a>Return value</h2>\n<p><a href=\"/topics/protocol#integer-reply\">Integer reply</a>: the value at <code>field</code> after the increment operation.</p>\n<span class=\"anchor\" id=\"examples\"></span><h2><a class=\"anchor-link\" href=\"#examples\">*</a>Examples</h2>\n<p>Since the <code>increment</code> argument is signed, both increment and decrement\n              operations can be performed:</p>\n<div class=\"example\" data-session=\"a7c87f073a047e9227fe4e8d0cf8f722\">\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">HSET myhash field 5</span>\n<pre>(integer) 1</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">HINCRBY myhash field 1</span>\n<pre>(integer) 6</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">HINCRBY myhash field -1</span>\n<pre>(integer) 5</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">HINCRBY myhash field -10</span>\n<pre>(integer) -5</pre><form>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<input autocomplete=\"off\" name=\"command\" spellcheck=\"false\" type=\"text\"/>\n</form></div>\n</div>"}, "HINCRBYFLOAT": {"category": "hash", "help_link": "/commands/hincrbyfloat", "args": ["key", "field", "increment"], "summary": "Increment the float value of a hash field by the given amount", "name": "HINCRBYFLOAT", "help_text": "<div class=\"article-main\">\n<div class=\"metadata\">\n<p><strong>Available since 2.6.0.</strong></p>\n<p><strong>Time complexity:</strong> O(1)</p>\n</div>\n<p>Increment the specified <code>field</code> of a hash stored at <code>key</code>, and representing a\n              floating point number, by the specified <code>increment</code>. If the increment value\n              is negative, the result is to have the hash field value <strong>decremented</strong> instead of incremented.\n              If the field does not exist, it is set to <code>0</code> before performing the operation.\n              An error is returned if one of the following conditions occur:</p>\n<ul>\n<li>The field contains a value of the wrong type (not a string).</li>\n<li>The current field content or the specified increment are not parsable as a\n              double precision floating point number.</li>\n</ul>\n<p>The exact behavior of this command is identical to the one of the <a href=\"/commands/incrbyfloat\">INCRBYFLOAT</a>\n              command, please refer to the documentation of <a href=\"/commands/incrbyfloat\">INCRBYFLOAT</a> for further\n              information.</p>\n<span class=\"anchor\" id=\"return-value\"></span><h2><a class=\"anchor-link\" href=\"#return-value\">*</a>Return value</h2>\n<p><a href=\"/topics/protocol#bulk-string-reply\">Bulk string reply</a>: the value of <code>field</code> after the increment.</p>\n<span class=\"anchor\" id=\"examples\"></span><h2><a class=\"anchor-link\" href=\"#examples\">*</a>Examples</h2>\n<div class=\"example\" data-session=\"e705db1c3bea5ba806516f15f6f905d3\">\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">HSET mykey field 10.50</span>\n<pre>(integer) 1</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">HINCRBYFLOAT mykey field 0.1</span>\n<pre>\"10.6\"</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">HINCRBYFLOAT mykey field -5</span>\n<pre>\"5.6\"</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">HSET mykey field 5.0e3</span>\n<pre>(integer) 0</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">HINCRBYFLOAT mykey field 2.0e2</span>\n<pre>\"5200\"</pre><form>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<input autocomplete=\"off\" name=\"command\" spellcheck=\"false\" type=\"text\"/>\n</form></div>\n<span class=\"anchor\" id=\"implementation-details\"></span><h2><a class=\"anchor-link\" href=\"#implementation-details\">*</a>Implementation details</h2>\n<p>The command is always propagated in the replication link and the Append Only\n              File as a <a href=\"/commands/hset\">HSET</a> operation, so that differences in the underlying floating point\n              math implementation will not be sources of inconsistency.</p>\n</div>"}, "HKEYS": {"category": "hash", "help_link": "/commands/hkeys", "args": ["key"], "summary": "Get all the fields in a hash", "name": "HKEYS", "help_text": "<div class=\"article-main\">\n<div class=\"metadata\">\n<p><strong>Available since 2.0.0.</strong></p>\n<p><strong>Time complexity:</strong> O(N) where N is the size of the hash.</p>\n</div>\n<p>Returns all field names in the hash stored at <code>key</code>.</p>\n<span class=\"anchor\" id=\"return-value\"></span><h2><a class=\"anchor-link\" href=\"#return-value\">*</a>Return value</h2>\n<p><a href=\"/topics/protocol#array-reply\">Array reply</a>: list of fields in the hash, or an empty list when <code>key</code> does\n              not exist.</p>\n<span class=\"anchor\" id=\"examples\"></span><h2><a class=\"anchor-link\" href=\"#examples\">*</a>Examples</h2>\n<div class=\"example\" data-session=\"27efb3cd99c69891b142a814dde0fbc2\">\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">HSET myhash field1 \"Hello\"</span>\n<pre>(integer) 1</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">HSET myhash field2 \"World\"</span>\n<pre>(integer) 1</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">HKEYS myhash</span>\n<pre>1) \"field1\"\n2) \"field2\"</pre><form>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<input autocomplete=\"off\" name=\"command\" spellcheck=\"false\" type=\"text\"/>\n</form></div>\n</div>"}, "HLEN": {"category": "hash", "help_link": "/commands/hlen", "args": ["key"], "summary": "Get the number of fields in a hash", "name": "HLEN", "help_text": "<div class=\"article-main\">\n<div class=\"metadata\">\n<p><strong>Available since 2.0.0.</strong></p>\n<p><strong>Time complexity:</strong> O(1)</p>\n</div>\n<p>Returns the number of fields contained in the hash stored at <code>key</code>.</p>\n<span class=\"anchor\" id=\"return-value\"></span><h2><a class=\"anchor-link\" href=\"#return-value\">*</a>Return value</h2>\n<p><a href=\"/topics/protocol#integer-reply\">Integer reply</a>: number of fields in the hash, or <code>0</code> when <code>key</code> does not exist.</p>\n<span class=\"anchor\" id=\"examples\"></span><h2><a class=\"anchor-link\" href=\"#examples\">*</a>Examples</h2>\n<div class=\"example\" data-session=\"212ac9cc652ac103e404cb9b7927cd92\">\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">HSET myhash field1 \"Hello\"</span>\n<pre>(integer) 1</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">HSET myhash field2 \"World\"</span>\n<pre>(integer) 1</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">HLEN myhash</span>\n<pre>(integer) 2</pre><form>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<input autocomplete=\"off\" name=\"command\" spellcheck=\"false\" type=\"text\"/>\n</form></div>\n</div>"}, "HMGET": {"category": "hash", "help_link": "/commands/hmget", "args": ["key", "field [field ...]"], "summary": "Get the values of all the given hash fields", "name": "HMGET", "help_text": "<div class=\"article-main\">\n<div class=\"metadata\">\n<p><strong>Available since 2.0.0.</strong></p>\n<p><strong>Time complexity:</strong> O(N) where N is the number of fields being requested.</p>\n</div>\n<p>Returns the values associated with the specified <code>fields</code> in the hash stored at\n              <code>key</code>.</p>\n<p>For every <code>field</code> that does not exist in the hash, a <code>nil</code> value is returned.\n              Because non-existing keys are treated as empty hashes, running <a href=\"/commands/hmget\">HMGET</a> against\n              a non-existing <code>key</code> will return a list of <code>nil</code> values.</p>\n<span class=\"anchor\" id=\"return-value\"></span><h2><a class=\"anchor-link\" href=\"#return-value\">*</a>Return value</h2>\n<p><a href=\"/topics/protocol#array-reply\">Array reply</a>: list of values associated with the given fields, in the same\n              order as they are requested.</p>\n<div class=\"example\" data-session=\"56a673c6f7aae2f38f5163f05240e233\">\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">HSET myhash field1 \"Hello\"</span>\n<pre>(integer) 1</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">HSET myhash field2 \"World\"</span>\n<pre>(integer) 1</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">HMGET myhash field1 field2 nofield</span>\n<pre>1) \"Hello\"\n2) \"World\"\n3) (nil)</pre><form>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<input autocomplete=\"off\" name=\"command\" spellcheck=\"false\" type=\"text\"/>\n</form></div>\n</div>"}, "HMSET": {"category": "hash", "help_link": "/commands/hmset", "args": ["key", "field value [field value ...]"], "summary": "Set multiple hash fields to multiple values", "name": "HMSET", "help_text": "<div class=\"article-main\">\n<div class=\"metadata\">\n<p><strong>Available since 2.0.0.</strong></p>\n<p><strong>Time complexity:</strong> O(N) where N is the number of fields being set.</p>\n</div>\n<p>Sets the specified fields to their respective values in the hash stored at\n              <code>key</code>.\n              This command overwrites any specified fields already existing in the hash.\n              If <code>key</code> does not exist, a new key holding a hash is created.</p>\n<p>As per Redis 4.0.0, HMSET is considered deprecated. Please use <a href=\"/commands/hset\">HSET</a> in new code.</p>\n<span class=\"anchor\" id=\"return-value\"></span><h2><a class=\"anchor-link\" href=\"#return-value\">*</a>Return value</h2>\n<p><a href=\"/topics/protocol#simple-string-reply\">Simple string reply</a></p>\n<span class=\"anchor\" id=\"examples\"></span><h2><a class=\"anchor-link\" href=\"#examples\">*</a>Examples</h2>\n<div class=\"example\" data-session=\"f4c1479546858d4f45ab011f44acb9e8\">\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">HMSET myhash field1 \"Hello\" field2 \"World\"</span>\n<pre>\"OK\"</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">HGET myhash field1</span>\n<pre>\"Hello\"</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">HGET myhash field2</span>\n<pre>\"World\"</pre><form>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<input autocomplete=\"off\" name=\"command\" spellcheck=\"false\" type=\"text\"/>\n</form></div>\n</div>"}, "HSET": {"category": "hash", "help_link": "/commands/hset", "args": ["key", "field value [field value ...]"], "summary": "Set the string value of a hash field", "name": "HSET", "help_text": "<div class=\"article-main\">\n<div class=\"metadata\">\n<p><strong>Available since 2.0.0.</strong></p>\n<p><strong>Time complexity:</strong> O(1) for each field/value pair added, so O(N) to add N field/value pairs when the command is called with multiple field/value pairs.</p>\n</div>\n<p>Sets <code>field</code> in the hash stored at <code>key</code> to <code>value</code>.\n              If <code>key</code> does not exist, a new key holding a hash is created.\n              If <code>field</code> already exists in the hash, it is overwritten.</p>\n<p>As of Redis 4.0.0, HSET is variadic and allows for multiple <code>field</code>/<code>value</code> pairs.</p>\n<span class=\"anchor\" id=\"return-value\"></span><h2><a class=\"anchor-link\" href=\"#return-value\">*</a>Return value</h2>\n<p><a href=\"/topics/protocol#integer-reply\">Integer reply</a>: The number of fields that were added.</p>\n<span class=\"anchor\" id=\"examples\"></span><h2><a class=\"anchor-link\" href=\"#examples\">*</a>Examples</h2>\n<div class=\"example\" data-session=\"272055cdcacb1fe0ef2fb30b9668ffac\">\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">HSET myhash field1 \"Hello\"</span>\n<pre>(integer) 1</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">HGET myhash field1</span>\n<pre>\"Hello\"</pre><form>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<input autocomplete=\"off\" name=\"command\" spellcheck=\"false\" type=\"text\"/>\n</form></div>\n</div>"}, "HSETNX": {"category": "hash", "help_link": "/commands/hsetnx", "args": ["key", "field", "value"], "summary": "Set the value of a hash field, only if the field does not exist", "name": "HSETNX", "help_text": "<div class=\"article-main\">\n<div class=\"metadata\">\n<p><strong>Available since 2.0.0.</strong></p>\n<p><strong>Time complexity:</strong> O(1)</p>\n</div>\n<p>Sets <code>field</code> in the hash stored at <code>key</code> to <code>value</code>, only if <code>field</code> does not\n              yet exist.\n              If <code>key</code> does not exist, a new key holding a hash is created.\n              If <code>field</code> already exists, this operation has no effect.</p>\n<span class=\"anchor\" id=\"return-value\"></span><h2><a class=\"anchor-link\" href=\"#return-value\">*</a>Return value</h2>\n<p><a href=\"/topics/protocol#integer-reply\">Integer reply</a>, specifically:</p>\n<ul>\n<li><code>1</code> if <code>field</code> is a new field in the hash and <code>value</code> was set.</li>\n<li><code>0</code> if <code>field</code> already exists in the hash and no operation was performed.</li>\n</ul>\n<span class=\"anchor\" id=\"examples\"></span><h2><a class=\"anchor-link\" href=\"#examples\">*</a>Examples</h2>\n<div class=\"example\" data-session=\"e384af6f8f8f9d87e7c55d57ea17c360\">\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">HSETNX myhash field \"Hello\"</span>\n<pre>(integer) 1</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">HSETNX myhash field \"World\"</span>\n<pre>(integer) 0</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">HGET myhash field</span>\n<pre>\"Hello\"</pre><form>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<input autocomplete=\"off\" name=\"command\" spellcheck=\"false\" type=\"text\"/>\n</form></div>\n</div>"}, "HSTRLEN": {"category": "hash", "help_link": "/commands/hstrlen", "args": ["key", "field"], "summary": "Get the length of the value of a hash field", "name": "HSTRLEN", "help_text": "<div class=\"article-main\">\n<div class=\"metadata\">\n<p><strong>Available since 3.2.0.</strong></p>\n<p><strong>Time complexity:</strong> O(1)</p>\n</div>\n<p>Returns the string length of the value associated with <code>field</code> in the hash stored at <code>key</code>. If the <code>key</code> or the <code>field</code> do not exist, 0 is returned.</p>\n<span class=\"anchor\" id=\"return-value\"></span><h2><a class=\"anchor-link\" href=\"#return-value\">*</a>Return value</h2>\n<p><a href=\"/topics/protocol#integer-reply\">Integer reply</a>: the string length of the value associated with <code>field</code>, or zero when <code>field</code> is not present in the hash or <code>key</code> does not exist at all.</p>\n<span class=\"anchor\" id=\"examples\"></span><h2><a class=\"anchor-link\" href=\"#examples\">*</a>Examples</h2>\n<div class=\"example\" data-session=\"194534b6661ffa11c2ea10423cc3aabd\">\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">HMSET myhash f1 HelloWorld f2 99 f3 -256</span>\n<pre>\"OK\"</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">HSTRLEN myhash f1</span>\n<pre>(integer) 10</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">HSTRLEN myhash f2</span>\n<pre>(integer) 2</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">HSTRLEN myhash f3</span>\n<pre>(integer) 4</pre><form>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<input autocomplete=\"off\" name=\"command\" spellcheck=\"false\" type=\"text\"/>\n</form></div>\n</div>"}, "HVALS": {"category": "hash", "help_link": "/commands/hvals", "args": ["key"], "summary": "Get all the values in a hash", "name": "HVALS", "help_text": "<div class=\"article-main\">\n<div class=\"metadata\">\n<p><strong>Available since 2.0.0.</strong></p>\n<p><strong>Time complexity:</strong> O(N) where N is the size of the hash.</p>\n</div>\n<p>Returns all values in the hash stored at <code>key</code>.</p>\n<span class=\"anchor\" id=\"return-value\"></span><h2><a class=\"anchor-link\" href=\"#return-value\">*</a>Return value</h2>\n<p><a href=\"/topics/protocol#array-reply\">Array reply</a>: list of values in the hash, or an empty list when <code>key</code> does\n              not exist.</p>\n<span class=\"anchor\" id=\"examples\"></span><h2><a class=\"anchor-link\" href=\"#examples\">*</a>Examples</h2>\n<div class=\"example\" data-session=\"c2865fbd6fce50a3f37e8d3398502830\">\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">HSET myhash field1 \"Hello\"</span>\n<pre>(integer) 1</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">HSET myhash field2 \"World\"</span>\n<pre>(integer) 1</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">HVALS myhash</span>\n<pre>1) \"Hello\"\n2) \"World\"</pre><form>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<input autocomplete=\"off\" name=\"command\" spellcheck=\"false\" type=\"text\"/>\n</form></div>\n</div>"}, "INCR": {"category": "string", "help_link": "/commands/incr", "args": ["key"], "summary": "Increment the integer value of a key by one", "name": "INCR", "help_text": "<div class=\"article-main\">\n<div class=\"metadata\">\n<p><strong>Available since 1.0.0.</strong></p>\n<p><strong>Time complexity:</strong> O(1)</p>\n</div>\n<p>Increments the number stored at <code>key</code> by one.\n              If the key does not exist, it is set to <code>0</code> before performing the operation.\n              An error is returned if the key contains a value of the wrong type or contains a\n              string that can not be represented as integer.\n              This operation is limited to 64 bit signed integers.</p>\n<p><strong>Note</strong>: this is a string operation because Redis does not have a dedicated\n              integer type.\n              The string stored at the key is interpreted as a base-10 <strong>64 bit signed\n              integer</strong> to execute the operation.</p>\n<p>Redis stores integers in their integer representation, so for string values\n              that actually hold an integer, there is no overhead for storing the string\n              representation of the integer.</p>\n<span class=\"anchor\" id=\"return-value\"></span><h2><a class=\"anchor-link\" href=\"#return-value\">*</a>Return value</h2>\n<p><a href=\"/topics/protocol#integer-reply\">Integer reply</a>: the value of <code>key</code> after the increment</p>\n<span class=\"anchor\" id=\"examples\"></span><h2><a class=\"anchor-link\" href=\"#examples\">*</a>Examples</h2>\n<div class=\"example\" data-session=\"efbb69e2a2a0555e18149bdb3e5f5d90\">\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">SET mykey \"10\"</span>\n<pre>\"OK\"</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">INCR mykey</span>\n<pre>(integer) 11</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">GET mykey</span>\n<pre>\"11\"</pre><form>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<input autocomplete=\"off\" name=\"command\" spellcheck=\"false\" type=\"text\"/>\n</form></div>\n<span class=\"anchor\" id=\"pattern-counter\"></span><h2><a class=\"anchor-link\" href=\"#pattern-counter\">*</a>Pattern: Counter</h2>\n<p>The counter pattern is the most obvious thing you can do with Redis atomic\n              increment operations.\n              The idea is simply send an <a href=\"/commands/incr\">INCR</a> command to Redis every time an operation\n              occurs.\n              For instance in a web application we may want to know how many page views this\n              user did every day of the year.</p>\n<p>To do so the web application may simply increment a key every time the user\n              performs a page view, creating the key name concatenating the User ID and a\n              string representing the current date.</p>\n<p>This simple pattern can be extended in many ways:</p>\n<ul>\n<li>It is possible to use <a href=\"/commands/incr\">INCR</a> and <a href=\"/commands/expire\">EXPIRE</a> together at every page view to have\n              a counter counting only the latest N page views separated by less than the\n              specified amount of seconds.</li>\n<li>A client may use GETSET in order to atomically get the current counter value\n              and reset it to zero.</li>\n<li>Using other atomic increment/decrement commands like <a href=\"/commands/decr\">DECR</a> or <a href=\"/commands/incrby\">INCRBY</a> it\n              is possible to handle values that may get bigger or smaller depending on the\n              operations performed by the user.\n              Imagine for instance the score of different users in an online game.</li>\n</ul>\n<span class=\"anchor\" id=\"pattern-rate-limiter\"></span><h2><a class=\"anchor-link\" href=\"#pattern-rate-limiter\">*</a>Pattern: Rate limiter</h2>\n<p>The rate limiter pattern is a special counter that is used to limit the rate at\n              which an operation can be performed.\n              The classical materialization of this pattern involves limiting the number of\n              requests that can be performed against a public API.</p>\n<p>We provide two implementations of this pattern using <a href=\"/commands/incr\">INCR</a>, where we assume\n              that the problem to solve is limiting the number of API calls to a maximum of\n              <em>ten requests per second per IP address</em>.</p>\n<span class=\"anchor\" id=\"pattern-rate-limiter-1\"></span><h2><a class=\"anchor-link\" href=\"#pattern-rate-limiter-1\">*</a>Pattern: Rate limiter 1</h2>\n<p>The more simple and direct implementation of this pattern is the following:</p>\n<pre><code>FUNCTION LIMIT_API_CALL(ip)\nts = CURRENT_UNIX_TIME()\nkeyname = ip+\":\"+ts\ncurrent = GET(keyname)\nIF current != NULL AND current &gt; 10 THEN\n    ERROR \"too many requests per second\"\nELSE\n    MULTI\n        INCR(keyname,1)\n        EXPIRE(keyname,10)\n    EXEC\n    PERFORM_API_CALL()\nEND\n</code></pre>\n<p>Basically we have a counter for every IP, for every different second.\n              But this counters are always incremented setting an expire of 10 seconds so that\n              they'll be removed by Redis automatically when the current second is a different\n              one.</p>\n<p>Note the used of <a href=\"/commands/multi\">MULTI</a> and <a href=\"/commands/exec\">EXEC</a> in order to make sure that we'll both\n              increment and set the expire at every API call.</p>\n<span class=\"anchor\" id=\"pattern-rate-limiter-2\"></span><h2><a class=\"anchor-link\" href=\"#pattern-rate-limiter-2\">*</a>Pattern: Rate limiter 2</h2>\n<p>An alternative implementation uses a single counter, but is a bit more complex\n              to get it right without race conditions.\n              We'll examine different variants.</p>\n<pre><code>FUNCTION LIMIT_API_CALL(ip):\ncurrent = GET(ip)\nIF current != NULL AND current &gt; 10 THEN\n    ERROR \"too many requests per second\"\nELSE\n    value = INCR(ip)\n    IF value == 1 THEN\n        EXPIRE(ip,1)\n    END\n    PERFORM_API_CALL()\nEND\n</code></pre>\n<p>The counter is created in a way that it only will survive one second, starting\n              from the first request performed in the current second.\n              If there are more than 10 requests in the same second the counter will reach a\n              value greater than 10, otherwise it will expire and start again from 0.</p>\n<p><strong>In the above code there is a race condition</strong>.\n              If for some reason the client performs the <a href=\"/commands/incr\">INCR</a> command but does not perform\n              the <a href=\"/commands/expire\">EXPIRE</a> the key will be leaked until we'll see the same IP address again.</p>\n<p>This can be fixed easily turning the <a href=\"/commands/incr\">INCR</a> with optional <a href=\"/commands/expire\">EXPIRE</a> into a Lua\n              script that is send using the <a href=\"/commands/eval\">EVAL</a> command (only available since Redis version\n              2.6).</p>\n<pre><code>local current\ncurrent = redis.call(\"incr\",KEYS[1])\nif tonumber(current) == 1 then\n    redis.call(\"expire\",KEYS[1],1)\nend\n</code></pre>\n<p>There is a different way to fix this issue without using scripting, but using\n              Redis lists instead of counters.\n              The implementation is more complex and uses more advanced features but has the\n              advantage of remembering the IP addresses of the clients currently performing an\n              API call, that may be useful or not depending on the application.</p>\n<pre><code>FUNCTION LIMIT_API_CALL(ip)\ncurrent = LLEN(ip)\nIF current &gt; 10 THEN\n    ERROR \"too many requests per second\"\nELSE\n    IF EXISTS(ip) == FALSE\n        MULTI\n            RPUSH(ip,ip)\n            EXPIRE(ip,1)\n        EXEC\n    ELSE\n        RPUSHX(ip,ip)\n    END\n    PERFORM_API_CALL()\nEND\n</code></pre>\n<p>The <a href=\"/commands/rpushx\">RPUSHX</a> command only pushes the element if the key already exists.</p>\n<p>Note that we have a race here, but it is not a problem: <a href=\"/commands/exists\">EXISTS</a> may return\n              false but the key may be created by another client before we create it inside\n              the <a href=\"/commands/multi\">MULTI</a> / <a href=\"/commands/exec\">EXEC</a> block.\n              However this race will just miss an API call under rare conditions, so the rate\n              limiting will still work correctly.</p>\n</div>"}, "INCRBY": {"category": "string", "help_link": "/commands/incrby", "args": ["key", "increment"], "summary": "Increment the integer value of a key by the given amount", "name": "INCRBY", "help_text": "<div class=\"article-main\">\n<div class=\"metadata\">\n<p><strong>Available since 1.0.0.</strong></p>\n<p><strong>Time complexity:</strong> O(1)</p>\n</div>\n<p>Increments the number stored at <code>key</code> by <code>increment</code>.\n              If the key does not exist, it is set to <code>0</code> before performing the operation.\n              An error is returned if the key contains a value of the wrong type or contains a\n              string that can not be represented as integer.\n              This operation is limited to 64 bit signed integers.</p>\n<p>See <a href=\"/commands/incr\">INCR</a> for extra information on increment/decrement operations.</p>\n<span class=\"anchor\" id=\"return-value\"></span><h2><a class=\"anchor-link\" href=\"#return-value\">*</a>Return value</h2>\n<p><a href=\"/topics/protocol#integer-reply\">Integer reply</a>: the value of <code>key</code> after the increment</p>\n<span class=\"anchor\" id=\"examples\"></span><h2><a class=\"anchor-link\" href=\"#examples\">*</a>Examples</h2>\n<div class=\"example\" data-session=\"732347990d0f06372d5d330316b598db\">\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">SET mykey \"10\"</span>\n<pre>\"OK\"</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">INCRBY mykey 5</span>\n<pre>(integer) 15</pre><form>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<input autocomplete=\"off\" name=\"command\" spellcheck=\"false\" type=\"text\"/>\n</form></div>\n</div>"}, "INCRBYFLOAT": {"category": "string", "help_link": "/commands/incrbyfloat", "args": ["key", "increment"], "summary": "Increment the float value of a key by the given amount", "name": "INCRBYFLOAT", "help_text": "<div class=\"article-main\">\n<div class=\"metadata\">\n<p><strong>Available since 2.6.0.</strong></p>\n<p><strong>Time complexity:</strong> O(1)</p>\n</div>\n<p>Increment the string representing a floating point number stored at <code>key</code> by the\n              specified <code>increment</code>. By using a negative <code>increment</code> value, the result is\n              that the value stored at the key is decremented (by the obvious properties\n              of addition).\n              If the key does not exist, it is set to <code>0</code> before performing the operation.\n              An error is returned if one of the following conditions occur:</p>\n<ul>\n<li>The key contains a value of the wrong type (not a string).</li>\n<li>The current key content or the specified increment are not parsable as a\n              double precision floating point number.</li>\n</ul>\n<p>If the command is successful the new incremented value is stored as the new\n              value of the key (replacing the old one), and returned to the caller as a\n              string.</p>\n<p>Both the value already contained in the string key and the increment argument\n              can be optionally provided in exponential notation, however the value computed\n              after the increment is stored consistently in the same format, that is, an\n              integer number followed (if needed) by a dot, and a variable number of digits\n              representing the decimal part of the number.\n              Trailing zeroes are always removed.</p>\n<p>The precision of the output is fixed at 17 digits after the decimal point\n              regardless of the actual internal precision of the computation.</p>\n<span class=\"anchor\" id=\"return-value\"></span><h2><a class=\"anchor-link\" href=\"#return-value\">*</a>Return value</h2>\n<p><a href=\"/topics/protocol#bulk-string-reply\">Bulk string reply</a>: the value of <code>key</code> after the increment.</p>\n<span class=\"anchor\" id=\"examples\"></span><h2><a class=\"anchor-link\" href=\"#examples\">*</a>Examples</h2>\n<div class=\"example\" data-session=\"83130f428f2df83674753c442def7991\">\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">SET mykey 10.50</span>\n<pre>\"OK\"</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">INCRBYFLOAT mykey 0.1</span>\n<pre>\"10.6\"</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">INCRBYFLOAT mykey -5</span>\n<pre>\"5.6\"</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">SET mykey 5.0e3</span>\n<pre>\"OK\"</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">INCRBYFLOAT mykey 2.0e2</span>\n<pre>\"5200\"</pre><form>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<input autocomplete=\"off\" name=\"command\" spellcheck=\"false\" type=\"text\"/>\n</form></div>\n<span class=\"anchor\" id=\"implementation-details\"></span><h2><a class=\"anchor-link\" href=\"#implementation-details\">*</a>Implementation details</h2>\n<p>The command is always propagated in the replication link and the Append Only\n              File as a <a href=\"/commands/set\">SET</a> operation, so that differences in the underlying floating point\n              math implementation will not be sources of inconsistency.</p>\n</div>"}, "INFO": {"category": "server", "help_link": "/commands/info", "args": ["[section]"], "summary": "Get information and statistics about the server", "name": "INFO", "help_text": "<div class=\"article-main\">\n<div class=\"metadata\">\n<p><strong>Available since 1.0.0.</strong></p>\n</div>\n<p>The <a href=\"/commands/info\">INFO</a> command returns information and statistics about the server in a\n              format that is simple to parse by computers and easy to read by humans.</p>\n<p>The optional parameter can be used to select a specific section of information:</p>\n<ul>\n<li> <code>server</code>: General information about the Redis server</li>\n<li> <code>clients</code>: Client connections section</li>\n<li> <code>memory</code>: Memory consumption related information</li>\n<li> <code>persistence</code>: RDB and AOF related information</li>\n<li> <code>stats</code>: General statistics</li>\n<li> <code>replication</code>: Master/replica replication information</li>\n<li> <code>cpu</code>: CPU consumption statistics</li>\n<li> <code>commandstats</code>: Redis command statistics</li>\n<li> <code>cluster</code>: Redis Cluster section</li>\n<li> <code>keyspace</code>: Database related statistics</li>\n</ul>\n<p>It can also take the following values:</p>\n<ul>\n<li> <code>all</code>: Return all sections</li>\n<li> <code>default</code>: Return only the default set of sections</li>\n</ul>\n<p>When no parameter is provided, the <code>default</code> option is assumed.</p>\n<span class=\"anchor\" id=\"return-value\"></span><h2><a class=\"anchor-link\" href=\"#return-value\">*</a>Return value</h2>\n<p><a href=\"/topics/protocol#bulk-string-reply\">Bulk string reply</a>: as a collection of text lines.</p>\n<p>Lines can contain a section name (starting with a # character) or a property.\n              All the properties are in the form of <code>field:value</code> terminated by <code>\\r\\n</code>.</p>\n<div class=\"example\" data-session=\"06010cfafadbd61d41965c671945d33a\">\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">INFO</span>\n<pre># Server\nredis_version:999.999.999\nredis_git_sha1:3c968ff0\nredis_git_dirty:0\nredis_build_id:51089de051945df4\nredis_mode:standalone\nos:Linux 4.8.0-1-amd64 x86_64\narch_bits:64\nmultiplexing_api:epoll\natomicvar_api:atomic-builtin\ngcc_version:6.3.0\nprocess_id:9941\nrun_id:b770a8af038963f3d1b55358c2e376d0b5e00182\ntcp_port:6379\nuptime_in_seconds:1401359\nuptime_in_days:16\nhz:10\nlru_clock:11122979\nexecutable:/usr/local/bin/redis-server\nconfig_file:\n\n# Clients\nconnected_clients:4\nclient_longest_output_list:0\nclient_biggest_input_buf:0\nblocked_clients:0\n\n# Memory\nused_memory:255264336\nused_memory_human:243.44M\nused_memory_rss:264302592\nused_memory_rss_human:252.06M\nused_memory_peak:255308880\nused_memory_peak_human:243.48M\nused_memory_peak_perc:99.98%\nused_memory_overhead:74636280\nused_memory_startup:510704\nused_memory_dataset:180628056\nused_memory_dataset_perc:70.90%\nallocator_allocated:255325656\nallocator_active:255561728\nallocator_resident:263229440\ntotal_system_memory:1044770816\ntotal_system_memory_human:996.37M\nused_memory_lua:37888\nused_memory_lua_human:37.00K\nmaxmemory:0\nmaxmemory_human:0B\nmaxmemory_policy:noeviction\nallocator_frag_ratio:1.00\nallocator_frag_bytes:236072\nallocator_rss_ratio:1.03\nallocator_rss_bytes:7667712\nrss_overhead_ratio:1.00\nrss_overhead_bytes:1073152\nmem_fragmentation_ratio:1.04\nmem_fragmentation_bytes:9039328\nmem_allocator:jemalloc-4.0.3\nactive_defrag_running:0\nlazyfree_pending_objects:0\n\n# Persistence\nloading:0\nrdb_changes_since_last_save:6091965\nrdb_bgsave_in_progress:0\nrdb_last_save_time:1570002708\nrdb_last_bgsave_status:ok\nrdb_last_bgsave_time_sec:-1\nrdb_current_bgsave_time_sec:-1\nrdb_last_cow_size:0\naof_enabled:0\naof_rewrite_in_progress:0\naof_rewrite_scheduled:0\naof_last_rewrite_time_sec:-1\naof_current_rewrite_time_sec:-1\naof_last_bgrewrite_status:ok\naof_last_write_status:ok\naof_last_cow_size:0\n\n# Stats\ntotal_connections_received:460\ntotal_commands_processed:13716295\ninstantaneous_ops_per_sec:125\ntotal_net_input_bytes:1119106353\ntotal_net_output_bytes:168864333\ninstantaneous_input_kbps:9.76\ninstantaneous_output_kbps:1.00\nrejected_connections:0\nsync_full:0\nsync_partial_ok:0\nsync_partial_err:0\nexpired_keys:49211\nexpired_stale_perc:0.00\nexpired_time_cap_reached_count:0\nevicted_keys:0\nkeyspace_hits:2999389\nkeyspace_misses:1158952\npubsub_channels:0\npubsub_patterns:0\nlatest_fork_usec:0\nmigrate_cached_sockets:0\nslave_expires_tracked_keys:0\nactive_defrag_hits:0\nactive_defrag_misses:0\nactive_defrag_key_hits:0\nactive_defrag_key_misses:0\n\n# Replication\nrole:master\nconnected_slaves:0\nmaster_replid:33f9e49948d61df7fa02e315ecff02bbc3b2c9aa\nmaster_replid2:0000000000000000000000000000000000000000\nmaster_repl_offset:0\nsecond_repl_offset:-1\nrepl_backlog_active:0\nrepl_backlog_size:1048576\nrepl_backlog_first_byte_offset:0\nrepl_backlog_histlen:0\n\n# CPU\nused_cpu_sys:1291.08\nused_cpu_user:7955.18\nused_cpu_sys_children:0.00\nused_cpu_user_children:0.00\n\n# Cluster\ncluster_enabled:0\n\n# Keyspace\ndb0:keys=1430379,expires=0,avg_ttl=0</pre><form>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<input autocomplete=\"off\" name=\"command\" spellcheck=\"false\" type=\"text\"/>\n</form></div>\n<span class=\"anchor\" id=\"notes\"></span><h2><a class=\"anchor-link\" href=\"#notes\">*</a>Notes</h2>\n<p>Please note depending on the version of Redis some of the fields have been\n              added or removed. A robust client application should therefore parse the\n              result of this command by skipping unknown properties, and gracefully handle\n              missing fields.</p>\n<p>Here is the description of fields for Redis &gt;= 2.4.</p>\n<p>Here is the meaning of all fields in the <strong>server</strong> section:</p>\n<ul>\n<li> <code>redis_version</code>: Version of the Redis server</li>\n<li> <code>redis_git_sha1</code>:  Git SHA1</li>\n<li> <code>redis_git_dirty</code>: Git dirty flag</li>\n<li> <code>redis_build_id</code>: The build id</li>\n<li> <code>redis_mode</code>: The server's mode (\"standalone\", \"sentinel\" or \"cluster\")</li>\n<li> <code>os</code>: Operating system hosting the Redis server</li>\n<li> <code>arch_bits</code>: Architecture (32 or 64 bits)</li>\n<li> <code>multiplexing_api</code>: Event loop mechanism used by Redis</li>\n<li> <code>atomicvar_api</code>: Atomicvar API used by Redis</li>\n<li> <code>gcc_version</code>: Version of the GCC compiler used to compile the Redis server</li>\n<li> <code>process_id</code>: PID of the server process</li>\n<li> <code>run_id</code>: Random value identifying the Redis server (to be used by Sentinel\n               and Cluster)</li>\n<li> <code>tcp_port</code>: TCP/IP listen port</li>\n<li> <code>uptime_in_seconds</code>: Number of seconds since Redis server start</li>\n<li> <code>uptime_in_days</code>: Same value expressed in days</li>\n<li> <code>hz</code>: The server's frequency setting</li>\n<li> <code>lru_clock</code>: Clock incrementing every minute, for LRU management</li>\n<li> <code>executable</code>: The path to the server's executable</li>\n<li> <code>config_file</code>: The path to the config file</li>\n</ul>\n<p>Here is the meaning of all fields in the <strong>clients</strong> section:</p>\n<ul>\n<li> <code>connected_clients</code>: Number of client connections (excluding connections\n               from replicas)</li>\n<li> <code>client_longest_output_list</code>: longest output list among current client\n               connections</li>\n<li> <code>client_biggest_input_buf</code>: biggest input buffer among current client\n               connections</li>\n<li> <code>blocked_clients</code>: Number of clients pending on a blocking call (BLPOP, \n               BRPOP, BRPOPLPUSH)</li>\n</ul>\n<p>Here is the meaning of all fields in the <strong>memory</strong> section:</p>\n<ul>\n<li> <code>used_memory</code>: Total number of bytes allocated by Redis using its\n               allocator (either standard <strong>libc</strong>, <strong>jemalloc</strong>, or an alternative\n               allocator such as <a href=\"http://code.google.com/p/google-perftools/\"><strong>tcmalloc</strong></a>)</li>\n<li> <code>used_memory_human</code>: Human readable representation of previous value</li>\n<li> <code>used_memory_rss</code>: Number of bytes that Redis allocated as seen by the\n               operating system (a.k.a resident set size). This is the number reported by\n               tools such as <code>top(1)</code> and <code>ps(1)</code></li>\n<li> <code>used_memory_rss_human</code>: Human readable representation of previous value</li>\n<li> <code>used_memory_peak</code>: Peak memory consumed by Redis (in bytes)</li>\n<li> <code>used_memory_peak_human</code>: Human readable representation of previous value</li>\n<li> <code>used_memory_peak_perc</code>: The percentage of <code>used_memory_peak</code> out of\n               <code>used_memory</code></li>\n<li> <code>used_memory_overhead</code>: The sum in bytes of all overheads that the server\n               allocated for managing its internal data structures</li>\n<li> <code>used_memory_startup</code>: Initial amount of memory consumed by Redis at startup\n               in bytes</li>\n<li> <code>used_memory_dataset</code>: The size in bytes of the dataset\n               (<code>used_memory_overhead</code> subtracted from <code>used_memory</code>)</li>\n<li> <code>used_memory_dataset_perc</code>: The percentage of <code>used_memory_dataset</code> out of\n               the net memory usage (<code>used_memory</code> minus <code>used_memory_startup</code>)</li>\n<li> <code>total_system_memory</code>: The total amount of memory that the Redis host has</li>\n<li> <code>total_system_memory_human</code>: Human readable representation of previous value</li>\n<li> <code>used_memory_lua</code>: Number of bytes used by the Lua engine</li>\n<li> <code>used_memory_lua_human</code>: Human readable representation of previous value</li>\n<li> <code>used_memory_scripts</code>: Number of bytes used by cached Lua scripts</li>\n<li> <code>used_memory_scripts_human</code>: Human readable representation of previous value</li>\n<li> <code>maxmemory</code>: The value of the <code>maxmemory</code> configuration directive</li>\n<li> <code>maxmemory_human</code>: Human readable representation of previous value</li>\n<li> <code>maxmemory_policy</code>: The value of the <code>maxmemory-policy</code> configuration\n               directive</li>\n<li> <code>mem_fragmentation_ratio</code>: Ratio between <code>used_memory_rss</code> and <code>used_memory</code></li>\n<li> <code>mem_allocator</code>: Memory allocator, chosen at compile time</li>\n<li> <code>active_defrag_running</code>: Flag indicating if active defragmentation is active</li>\n<li> <code>lazyfree_pending_objects</code>: The number of objects waiting to be freed (as a\n               result of calling <a href=\"/commands/unlink\">UNLINK</a>, or <a href=\"/commands/flushdb\">FLUSHDB</a> and <a href=\"/commands/flushall\">FLUSHALL</a> with the <strong>ASYNC</strong>\n               option)</li>\n</ul>\n<p>Ideally, the <code>used_memory_rss</code> value should be only slightly higher than\n              <code>used_memory</code>.\n              When rss &gt;&gt; used, a large difference means there is memory fragmentation\n              (internal or external), which can be evaluated by checking\n              <code>mem_fragmentation_ratio</code>.\n              When used &gt;&gt; rss, it means part of Redis memory has been swapped off by the\n              operating system: expect some significant latencies.</p>\n<p>Because Redis does not have control over how its allocations are mapped to\n              memory pages, high <code>used_memory_rss</code> is often the result of a spike in memory\n              usage.</p>\n<p>When Redis frees memory, the memory is given back to the allocator, and the\n              allocator may or may not give the memory back to the system. There may be\n              a discrepancy between the <code>used_memory</code> value and memory consumption as\n              reported by the operating system. It may be due to the fact memory has been\n              used and released by Redis, but not given back to the system. The \n              <code>used_memory_peak</code> value is generally useful to check this point.</p>\n<p>Additional introspective information about the server's memory can be obtained\n              by referring to the <a href=\"/commands/memory-stats\">MEMORY STATS</a> command and the <a href=\"/commands/memory-doctor\">MEMORY DOCTOR</a>.</p>\n<p>Here is the meaning of all fields in the <strong>persistence</strong> section:</p>\n<ul>\n<li> <code>loading</code>: Flag indicating if the load of a dump file is on-going</li>\n<li> <code>rdb_changes_since_last_save</code>: Number of changes since the last dump</li>\n<li> <code>rdb_bgsave_in_progress</code>: Flag indicating a RDB save is on-going</li>\n<li> <code>rdb_last_save_time</code>: Epoch-based timestamp of last successful RDB save</li>\n<li> <code>rdb_last_bgsave_status</code>: Status of the last RDB save operation</li>\n<li> <code>rdb_last_bgsave_time_sec</code>: Duration of the last RDB save operation in\n               seconds</li>\n<li> <code>rdb_current_bgsave_time_sec</code>: Duration of the on-going RDB save operation\n               if any</li>\n<li> <code>rdb_last_cow_size</code>: The size in bytes of copy-on-write allocations during\n               the last RBD save operation</li>\n<li> <code>aof_enabled</code>: Flag indicating AOF logging is activated</li>\n<li> <code>aof_rewrite_in_progress</code>: Flag indicating a AOF rewrite operation is\n               on-going</li>\n<li> <code>aof_rewrite_scheduled</code>: Flag indicating an AOF rewrite operation\n               will be scheduled once the on-going RDB save is complete.</li>\n<li> <code>aof_last_rewrite_time_sec</code>: Duration of the last AOF rewrite operation in\n               seconds</li>\n<li> <code>aof_current_rewrite_time_sec</code>: Duration of the on-going AOF rewrite\n               operation if any</li>\n<li> <code>aof_last_bgrewrite_status</code>: Status of the last AOF rewrite operation</li>\n<li> <code>aof_last_write_status</code>: Status of the last write operation to the AOF</li>\n<li> <code>aof_last_cow_size</code>: The size in bytes of copy-on-write allocations during\n               the last AOF rewrite operation</li>\n</ul>\n<p><code>changes_since_last_save</code> refers to the number of operations that produced\n              some kind of changes in the dataset since the last time either <a href=\"/commands/save\">SAVE</a> or\n              <a href=\"/commands/bgsave\">BGSAVE</a> was called.</p>\n<p>If AOF is activated, these additional fields will be added:</p>\n<ul>\n<li> <code>aof_current_size</code>: AOF current file size</li>\n<li> <code>aof_base_size</code>: AOF file size on latest startup or rewrite</li>\n<li> <code>aof_pending_rewrite</code>: Flag indicating an AOF rewrite operation\n               will be scheduled once the on-going RDB save is complete.</li>\n<li> <code>aof_buffer_length</code>: Size of the AOF buffer</li>\n<li> <code>aof_rewrite_buffer_length</code>: Size of the AOF rewrite buffer</li>\n<li> <code>aof_pending_bio_fsync</code>: Number of fsync pending jobs in background I/O\n               queue</li>\n<li> <code>aof_delayed_fsync</code>: Delayed fsync counter</li>\n</ul>\n<p>If a load operation is on-going, these additional fields will be added:</p>\n<ul>\n<li> <code>loading_start_time</code>: Epoch-based timestamp of the start of the load\n               operation</li>\n<li> <code>loading_total_bytes</code>: Total file size</li>\n<li> <code>loading_loaded_bytes</code>: Number of bytes already loaded</li>\n<li> <code>loading_loaded_perc</code>: Same value expressed as a percentage</li>\n<li> <code>loading_eta_seconds</code>: ETA in seconds for the load to be complete</li>\n</ul>\n<p>Here is the meaning of all fields in the <strong>stats</strong> section:</p>\n<ul>\n<li> <code>total_connections_received</code>: Total number of connections accepted by the\n               server</li>\n<li> <code>total_commands_processed</code>: Total number of commands processed by the server</li>\n<li> <code>instantaneous_ops_per_sec</code>: Number of commands processed per second</li>\n<li> <code>total_net_input_bytes</code>: The total number of bytes read from the network</li>\n<li> <code>total_net_output_bytes</code>: The total number of bytes written to the network</li>\n<li> <code>instantaneous_input_kbps</code>: The network's read rate per second in KB/sec</li>\n<li> <code>instantaneous_output_kbps</code>: The network's write rate per second in KB/sec</li>\n<li> <code>rejected_connections</code>: Number of connections rejected because of\n               <code>maxclients</code> limit</li>\n<li> <code>sync_full</code>: The number of full resyncs with replicas</li>\n<li> <code>sync_partial_ok</code>: The number of accepted partial resync requests</li>\n<li> <code>sync_partial_err</code>: The number of denied partial resync requests</li>\n<li> <code>expired_keys</code>: Total number of key expiration events</li>\n<li> <code>evicted_keys</code>: Number of evicted keys due to <code>maxmemory</code> limit</li>\n<li> <code>keyspace_hits</code>: Number of successful lookup of keys in the main dictionary</li>\n<li> <code>keyspace_misses</code>: Number of failed lookup of keys in the main dictionary</li>\n<li> <code>pubsub_channels</code>: Global number of pub/sub channels with client\n               subscriptions</li>\n<li> <code>pubsub_patterns</code>: Global number of pub/sub pattern with client\n               subscriptions</li>\n<li> <code>latest_fork_usec</code>: Duration of the latest fork operation in microseconds</li>\n<li> <code>migrate_cached_sockets</code>: The number of sockets open for <a href=\"/commands/migrate\">MIGRATE</a> purposes</li>\n<li> <code>slave_expires_tracked_keys</code>: The number of keys tracked for expiry purposes\n               (applicable only to writable replicas)</li>\n<li> <code>active_defrag_hits</code>: Number of value reallocations performed by active the\n               defragmentation process</li>\n<li> <code>active_defrag_misses</code>: Number of aborted value reallocations started by the\n               active defragmentation process</li>\n<li> <code>active_defrag_key_hits</code>: Number of keys that were actively defragmented</li>\n<li> <code>active_defrag_key_misses</code>: Number of keys that were skipped by the active\n               defragmentation process</li>\n</ul>\n<p>Here is the meaning of all fields in the <strong>replication</strong> section:</p>\n<ul>\n<li> <code>role</code>: Value is \"master\" if the instance is replica of no one, or \"slave\" if the instance is a replica of some master instance.\n               Note that a replica can be master of another replica (chained replication).</li>\n<li> <code>master_replid</code>: The replication ID of the Redis server.</li>\n<li> <code>master_replid2</code>: The secondary replication ID, used for PSYNC after a failover.</li>\n<li> <code>master_repl_offset</code>: The server's current replication offset</li>\n<li> <code>second_repl_offset</code>: The offset up to which replication IDs are accepted</li>\n<li> <code>repl_backlog_active</code>: Flag indicating replication backlog is active</li>\n<li> <code>repl_backlog_size</code>: Total size in bytes of the replication backlog buffer</li>\n<li> <code>repl_backlog_first_byte_offset</code>: The master offset of the replication\n               backlog buffer</li>\n<li> <code>repl_backlog_histlen</code>: Size in bytes of the data in the replication backlog\n               buffer</li>\n</ul>\n<p>If the instance is a replica, these additional fields are provided:</p>\n<ul>\n<li> <code>master_host</code>: Host or IP address of the master</li>\n<li> <code>master_port</code>: Master listening TCP port</li>\n<li> <code>master_link_status</code>: Status of the link (up/down)</li>\n<li> <code>master_last_io_seconds_ago</code>: Number of seconds since the last interaction\n               with master</li>\n<li> <code>master_sync_in_progress</code>: Indicate the master is syncing to the replica </li>\n<li> <code>slave_repl_offset</code>: The replication offset of the replica instance</li>\n<li> <code>slave_priority</code>: The priority of the instance as a candidate for failover</li>\n<li> <code>slave_read_only</code>: Flag indicating if the replica is read-only</li>\n</ul>\n<p>If a SYNC operation is on-going, these additional fields are provided:</p>\n<ul>\n<li> <code>master_sync_left_bytes</code>: Number of bytes left before syncing is complete</li>\n<li> <code>master_sync_last_io_seconds_ago</code>: Number of seconds since last transfer I/O\n               during a SYNC operation</li>\n</ul>\n<p>If the link between master and replica is down, an additional field is provided:</p>\n<ul>\n<li> <code>master_link_down_since_seconds</code>: Number of seconds since the link is down</li>\n</ul>\n<p>The following field is always provided:</p>\n<ul>\n<li> <code>connected_slaves</code>: Number of connected replicas</li>\n</ul>\n<p>If the server is configured with the <code>min-slaves-to-write</code> (or starting with Redis 5 with the <code>min-replicas-to-write</code>) directive, an additional field is provided:</p>\n<ul>\n<li> <code>min_slaves_good_slaves</code>: Number of replicas currently considered good </li>\n</ul>\n<p>For each replica, the following line is added:</p>\n<ul>\n<li> <code>slaveXXX</code>: id, IP address, port, state, offset, lag</li>\n</ul>\n<p>Here is the meaning of all fields in the <strong>cpu</strong> section:</p>\n<ul>\n<li> <code>used_cpu_sys</code>: System CPU consumed by the Redis server</li>\n<li> <code>used_cpu_user</code>:User CPU consumed by the Redis server</li>\n<li> <code>used_cpu_sys_children</code>: System CPU consumed by the background processes</li>\n<li> <code>used_cpu_user_children</code>: User CPU consumed by the background processes</li>\n</ul>\n<p>The <strong>commandstats</strong> section provides statistics based on the command type,\n              including the number of calls, the total CPU time consumed by these commands,\n              and the average CPU consumed per command execution.</p>\n<p>For each command type, the following line is added:</p>\n<ul>\n<li> <code>cmdstat_XXX</code>: <code>calls=XXX,usec=XXX,usec_per_call=XXX</code></li>\n</ul>\n<p>The <strong>cluster</strong> section currently only contains a unique field:</p>\n<ul>\n<li> <code>cluster_enabled</code>: Indicate Redis cluster is enabled</li>\n</ul>\n<p>The <strong>keyspace</strong> section provides statistics on the main dictionary of each\n              database.\n              The statistics are the number of keys, and the number of keys with an expiration.</p>\n<p>For each database, the following line is added:</p>\n<ul>\n<li> <code>dbXXX</code>: <code>keys=XXX,expires=XXX</code></li>\n</ul>\n<p><strong>A note about the word slave used in this man page</strong>: Starting with Redis 5, if not for backward compatibility, the Redis project no longer uses the word slave. Unfortunately in this command the word slave is part of the protocol, so we'll be able to remove such occurrences only when this API will be naturally deprecated.</p>\n</div>"}, "LOLWUT": {"category": "server", "help_link": "/commands/lolwut", "args": ["[VERSION version]"], "summary": "Display some computer art and the Redis version", "name": "LOLWUT", "help_text": "<div class=\"article-main\">\n<div class=\"metadata\">\n<p><strong>Available since 5.0.0.</strong></p>\n</div>\n<p>The LOLWUT command displays the Redis version: however as a side effect of\n              doing so, it also creates a piece of generative computer art that is different\n              with each version of Redis. The command was introduced in Redis 5 and announced\n              with this <a href=\"http://antirez.com/news/123\">blog post</a>.</p>\n<p>By default the <a href=\"/commands/lolwut\">LOLWUT</a> command will display the piece corresponding to the\n              current Redis version, however it is possible to display a specific version\n              using the following form:</p>\n<pre><code>LOLWUT VERSION 5 ... other optional arguments ...\n</code></pre>\n<p>Of course the \"5\" above is an example. Each LOLWUT version takes a different\n              set of arguments in order to change the output. The user is encouraged to\n              play with it to discover how the output changes adding more numerical\n              arguments.</p>\n<p>LOLWUT wants to be a reminder that there is more in programming than just\n              putting some code together in order to create something useful. Every\n              LOLWUT version should have the following properties:</p>\n<ol>\n<li>It should display some computer art. There are no limits as long as the output works well in a normal terminal display. However the output should not be limited to graphics (like LOLWUT 5 and 6 actually do), but can be generative poetry and other non graphical things.</li>\n<li>LOLWUT output should be completely useless. Displaying some useful Redis internal metrics does not count as a valid LOLWUT.</li>\n<li>LOLWUT output should be fast to generate so that the command can be called in production instances without issues. It should remain fast even when the user experiments with odd parameters.</li>\n<li>LOLWUT implementations should be safe and carefully checked for security, and resist to untrusted inputs if they take arguments.</li>\n<li>LOLWUT must always display the Redis version at the end.</li>\n</ol>\n<span class=\"anchor\" id=\"return-value\"></span><h2><a class=\"anchor-link\" href=\"#return-value\">*</a>Return value</h2>\n<p><a href=\"/topics/protocol#bulk-string-reply\">Bulk string reply</a> (or verbatim reply when using the RESP3 protocol): the string containing the generative computer art, and a text with the Redis version.</p>\n</div>"}, "KEYS": {"category": "generic", "help_link": "/commands/keys", "args": ["pattern"], "summary": "Find all keys matching the given pattern", "name": "KEYS", "help_text": "<div class=\"article-main\">\n<div class=\"metadata\">\n<p><strong>Available since 1.0.0.</strong></p>\n<p><strong>Time complexity:</strong> O(N) with N being the number of keys in the database, under the assumption that the key names in the database and the given pattern have limited length.</p>\n</div>\n<p>Returns all keys matching <code>pattern</code>.</p>\n<p>While the time complexity for this operation is <span class=\"math\">O(N),</span> the constant times are\n              fairly low.\n              For example, Redis running on an entry level laptop can scan a 1 million key\n              database in 40 milliseconds.</p>\n<p><strong>Warning</strong>: consider <a href=\"/commands/keys\">KEYS</a> as a command that should only be used in production\n              environments with extreme care.\n              It may ruin performance when it is executed against large databases.\n              This command is intended for debugging and special operations, such as changing\n              your keyspace layout.\n              Don't use <a href=\"/commands/keys\">KEYS</a> in your regular application code.\n              If you're looking for a way to find keys in a subset of your keyspace, consider\n              using <a href=\"/commands/scan\">SCAN</a> or <a href=\"/topics/data-types#sets\">sets</a>.</p>\n<p>Supported glob-style patterns:</p>\n<ul>\n<li><code>h?llo</code> matches <code>hello</code>, <code>hallo</code> and <code>hxllo</code></li>\n<li><code>h*llo</code> matches <code>hllo</code> and <code>heeeello</code></li>\n<li><code>h[ae]llo</code> matches <code>hello</code> and <code>hallo,</code> but not <code>hillo</code></li>\n<li><code>h[^e]llo</code> matches <code>hallo</code>, <code>hbllo</code>, ... but not <code>hello</code></li>\n<li><code>h[a-b]llo</code> matches <code>hallo</code> and <code>hbllo</code></li>\n</ul>\n<p>Use <code>\\</code> to escape special characters if you want to match them verbatim.</p>\n<span class=\"anchor\" id=\"return-value\"></span><h2><a class=\"anchor-link\" href=\"#return-value\">*</a>Return value</h2>\n<p><a href=\"/topics/protocol#array-reply\">Array reply</a>: list of keys matching <code>pattern</code>.</p>\n<span class=\"anchor\" id=\"examples\"></span><h2><a class=\"anchor-link\" href=\"#examples\">*</a>Examples</h2>\n<div class=\"example\" data-session=\"bb3176b24ec3ae5b1d83d9170b91226c\">\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">MSET firstname Jack lastname Stuntman age 35</span>\n<pre>\"OK\"</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">KEYS *name*</span>\n<pre>1) \"lastname\"\n2) \"firstname\"</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">KEYS a??</span>\n<pre>1) \"age\"</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">KEYS *</span>\n<pre>1) \"lastname\"\n2) \"firstname\"\n3) \"age\"</pre><form>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<input autocomplete=\"off\" name=\"command\" spellcheck=\"false\" type=\"text\"/>\n</form></div>\n</div>"}, "LASTSAVE": {"category": "server", "help_link": "/commands/lastsave", "args": [], "summary": "Get the UNIX time stamp of the last successful save to disk", "name": "LASTSAVE", "help_text": "<div class=\"article-main\">\n<div class=\"metadata\">\n<p><strong>Available since 1.0.0.</strong></p>\n</div>\n<p>Return the UNIX TIME of the last DB save executed with success.\n              A client may check if a <a href=\"/commands/bgsave\">BGSAVE</a> command succeeded reading the <a href=\"/commands/lastsave\">LASTSAVE</a> value,\n              then issuing a <a href=\"/commands/bgsave\">BGSAVE</a> command and checking at regular intervals every N\n              seconds if <a href=\"/commands/lastsave\">LASTSAVE</a> changed.</p>\n<span class=\"anchor\" id=\"return-value\"></span><h2><a class=\"anchor-link\" href=\"#return-value\">*</a>Return value</h2>\n<p><a href=\"/topics/protocol#integer-reply\">Integer reply</a>: an UNIX time stamp.</p>\n</div>"}, "LINDEX": {"category": "list", "help_link": "/commands/lindex", "args": ["key", "index"], "summary": "Get an element from a list by its index", "name": "LINDEX", "help_text": "<div class=\"article-main\">\n<div class=\"metadata\">\n<p><strong>Available since 1.0.0.</strong></p>\n<p><strong>Time complexity:</strong> O(N) where N is the number of elements to traverse to get to the element at index. This makes asking for the first or the last element of the list O(1).</p>\n</div>\n<p>Returns the element at index <code>index</code> in the list stored at <code>key</code>.\n              The index is zero-based, so <code>0</code> means the first element, <code>1</code> the second element\n              and so on.\n              Negative indices can be used to designate elements starting at the tail of the\n              list.\n              Here, <code>-1</code> means the last element, <code>-2</code> means the penultimate and so forth.</p>\n<p>When the value at <code>key</code> is not a list, an error is returned.</p>\n<span class=\"anchor\" id=\"return-value\"></span><h2><a class=\"anchor-link\" href=\"#return-value\">*</a>Return value</h2>\n<p><a href=\"/topics/protocol#bulk-string-reply\">Bulk string reply</a>: the requested element, or <code>nil</code> when <code>index</code> is out of range.</p>\n<span class=\"anchor\" id=\"examples\"></span><h2><a class=\"anchor-link\" href=\"#examples\">*</a>Examples</h2>\n<div class=\"example\" data-session=\"ae91b3e69bc9690f59c5af9470bfe171\">\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">LPUSH mylist \"World\"</span>\n<pre>(integer) 1</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">LPUSH mylist \"Hello\"</span>\n<pre>(integer) 2</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">LINDEX mylist 0</span>\n<pre>\"Hello\"</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">LINDEX mylist -1</span>\n<pre>\"World\"</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">LINDEX mylist 3</span>\n<pre>(nil)</pre><form>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<input autocomplete=\"off\" name=\"command\" spellcheck=\"false\" type=\"text\"/>\n</form></div>\n</div>"}, "LINSERT": {"category": "list", "help_link": "/commands/linsert", "args": ["key", "BEFORE|AFTER", "pivot", "element"], "summary": "Insert an element before or after another element in a list", "name": "LINSERT", "help_text": "<div class=\"article-main\">\n<div class=\"metadata\">\n<p><strong>Available since 2.2.0.</strong></p>\n<p><strong>Time complexity:</strong> O(N) where N is the number of elements to traverse before seeing the value pivot. This means that inserting somewhere on the left end on the list (head) can be considered O(1) and inserting somewhere on the right end (tail) is O(N).</p>\n</div>\n<p>Inserts <code>value</code> in the list stored at <code>key</code> either before or after the reference\n              value <code>pivot</code>.</p>\n<p>When <code>key</code> does not exist, it is considered an empty list and no operation is\n              performed.</p>\n<p>An error is returned when <code>key</code> exists but does not hold a list value.</p>\n<span class=\"anchor\" id=\"return-value\"></span><h2><a class=\"anchor-link\" href=\"#return-value\">*</a>Return value</h2>\n<p><a href=\"/topics/protocol#integer-reply\">Integer reply</a>: the length of the list after the insert operation, or <code>-1</code> when\n              the value <code>pivot</code> was not found.</p>\n<span class=\"anchor\" id=\"examples\"></span><h2><a class=\"anchor-link\" href=\"#examples\">*</a>Examples</h2>\n<div class=\"example\" data-session=\"f858741c21790c017f21266189bb153c\">\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">RPUSH mylist \"Hello\"</span>\n<pre>(integer) 1</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">RPUSH mylist \"World\"</span>\n<pre>(integer) 2</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">LINSERT mylist BEFORE \"World\" \"There\"</span>\n<pre>(integer) 3</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">LRANGE mylist 0 -1</span>\n<pre>1) \"Hello\"\n2) \"There\"\n3) \"World\"</pre><form>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<input autocomplete=\"off\" name=\"command\" spellcheck=\"false\" type=\"text\"/>\n</form></div>\n</div>"}, "LLEN": {"category": "list", "help_link": "/commands/llen", "args": ["key"], "summary": "Get the length of a list", "name": "LLEN", "help_text": "<div class=\"article-main\">\n<div class=\"metadata\">\n<p><strong>Available since 1.0.0.</strong></p>\n<p><strong>Time complexity:</strong> O(1)</p>\n</div>\n<p>Returns the length of the list stored at <code>key</code>.\n              If <code>key</code> does not exist, it is interpreted as an empty list and <code>0</code> is returned.\n              An error is returned when the value stored at <code>key</code> is not a list.</p>\n<span class=\"anchor\" id=\"return-value\"></span><h2><a class=\"anchor-link\" href=\"#return-value\">*</a>Return value</h2>\n<p><a href=\"/topics/protocol#integer-reply\">Integer reply</a>: the length of the list at <code>key</code>.</p>\n<span class=\"anchor\" id=\"examples\"></span><h2><a class=\"anchor-link\" href=\"#examples\">*</a>Examples</h2>\n<div class=\"example\" data-session=\"ea08f1c34e56ceecae607385111592da\">\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">LPUSH mylist \"World\"</span>\n<pre>(integer) 1</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">LPUSH mylist \"Hello\"</span>\n<pre>(integer) 2</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">LLEN mylist</span>\n<pre>(integer) 2</pre><form>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<input autocomplete=\"off\" name=\"command\" spellcheck=\"false\" type=\"text\"/>\n</form></div>\n</div>"}, "LPOP": {"category": "list", "help_link": "/commands/lpop", "args": ["key"], "summary": "Remove and get the first element in a list", "name": "LPOP", "help_text": "<div class=\"article-main\">\n<div class=\"metadata\">\n<p><strong>Available since 1.0.0.</strong></p>\n<p><strong>Time complexity:</strong> O(1)</p>\n</div>\n<p>Removes and returns the first element of the list stored at <code>key</code>.</p>\n<span class=\"anchor\" id=\"return-value\"></span><h2><a class=\"anchor-link\" href=\"#return-value\">*</a>Return value</h2>\n<p><a href=\"/topics/protocol#bulk-string-reply\">Bulk string reply</a>: the value of the first element, or <code>nil</code> when <code>key</code> does not exist.</p>\n<span class=\"anchor\" id=\"examples\"></span><h2><a class=\"anchor-link\" href=\"#examples\">*</a>Examples</h2>\n<div class=\"example\" data-session=\"2f892c4ce99c1984341424e6f4913aaf\">\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">RPUSH mylist \"one\"</span>\n<pre>(integer) 1</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">RPUSH mylist \"two\"</span>\n<pre>(integer) 2</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">RPUSH mylist \"three\"</span>\n<pre>(integer) 3</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">LPOP mylist</span>\n<pre>\"one\"</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">LRANGE mylist 0 -1</span>\n<pre>1) \"two\"\n2) \"three\"</pre><form>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<input autocomplete=\"off\" name=\"command\" spellcheck=\"false\" type=\"text\"/>\n</form></div>\n</div>"}, "LPUSH": {"category": "list", "help_link": "/commands/lpush", "args": ["key", "element [element ...]"], "summary": "Prepend one or multiple elements to a list", "name": "LPUSH", "help_text": "<div class=\"article-main\">\n<div class=\"metadata\">\n<p><strong>Available since 1.0.0.</strong></p>\n<p><strong>Time complexity:</strong> O(1) for each element added, so O(N) to add N elements when the command is called with multiple arguments.</p>\n</div>\n<p>Insert all the specified values at the head of the list stored at <code>key</code>.\n              If <code>key</code> does not exist, it is created as empty list before performing the push\n              operations.\n              When <code>key</code> holds a value that is not a list, an error is returned.</p>\n<p>It is possible to push multiple elements using a single command call just\n              specifying multiple arguments at the end of the command.\n              Elements are inserted one after the other to the head of the list, from the\n              leftmost element to the rightmost element.\n              So for instance the command <code>LPUSH mylist a b c</code> will result into a list\n              containing <code>c</code> as first element, <code>b</code> as second element and <code>a</code> as third element.</p>\n<span class=\"anchor\" id=\"return-value\"></span><h2><a class=\"anchor-link\" href=\"#return-value\">*</a>Return value</h2>\n<p><a href=\"/topics/protocol#integer-reply\">Integer reply</a>: the length of the list after the push operations.</p>\n<span class=\"anchor\" id=\"history\"></span><h2><a class=\"anchor-link\" href=\"#history\">*</a>History</h2>\n<ul>\n<li><code>&gt;= 2.4</code>: Accepts multiple <code>value</code> arguments.\n              In Redis versions older than 2.4 it was possible to push a single value per\n              command.</li>\n</ul>\n<span class=\"anchor\" id=\"examples\"></span><h2><a class=\"anchor-link\" href=\"#examples\">*</a>Examples</h2>\n<div class=\"example\" data-session=\"5bd21546a21911f0a3cf7490b01a8089\">\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">LPUSH mylist \"world\"</span>\n<pre>(integer) 1</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">LPUSH mylist \"hello\"</span>\n<pre>(integer) 2</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">LRANGE mylist 0 -1</span>\n<pre>1) \"hello\"\n2) \"world\"</pre><form>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<input autocomplete=\"off\" name=\"command\" spellcheck=\"false\" type=\"text\"/>\n</form></div>\n</div>"}, "LPUSHX": {"category": "list", "help_link": "/commands/lpushx", "args": ["key", "element"], "summary": "Prepend an element to a list, only if the list exists", "name": "LPUSHX", "help_text": "<div class=\"article-main\">\n<div class=\"metadata\">\n<p><strong>Available since 2.2.0.</strong></p>\n<p><strong>Time complexity:</strong> O(1) for each element added, so O(N) to add N elements when the command is called with multiple arguments.</p>\n</div>\n<p>Inserts <code>value</code> at the head of the list stored at <code>key</code>, only if <code>key</code> already\n              exists and holds a list.\n              In contrary to <a href=\"/commands/lpush\">LPUSH</a>, no operation will be performed when <code>key</code> does not yet\n              exist.</p>\n<span class=\"anchor\" id=\"return-value\"></span><h2><a class=\"anchor-link\" href=\"#return-value\">*</a>Return value</h2>\n<p><a href=\"/topics/protocol#integer-reply\">Integer reply</a>: the length of the list after the push operation.</p>\n<span class=\"anchor\" id=\"examples\"></span><h2><a class=\"anchor-link\" href=\"#examples\">*</a>Examples</h2>\n<div class=\"example\" data-session=\"45a99d21ffd3e8830d9d90cb468f1b1c\">\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">LPUSH mylist \"World\"</span>\n<pre>(integer) 1</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">LPUSHX mylist \"Hello\"</span>\n<pre>(integer) 2</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">LPUSHX myotherlist \"Hello\"</span>\n<pre>(integer) 0</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">LRANGE mylist 0 -1</span>\n<pre>1) \"Hello\"\n2) \"World\"</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">LRANGE myotherlist 0 -1</span>\n<pre>(empty list or set)</pre><form>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<input autocomplete=\"off\" name=\"command\" spellcheck=\"false\" type=\"text\"/>\n</form></div>\n</div>"}, "LRANGE": {"category": "list", "help_link": "/commands/lrange", "args": ["key", "start", "stop"], "summary": "Get a range of elements from a list", "name": "LRANGE", "help_text": "<div class=\"article-main\">\n<div class=\"metadata\">\n<p><strong>Available since 1.0.0.</strong></p>\n<p><strong>Time complexity:</strong> O(S+N) where S is the distance of start offset from HEAD for small lists, from nearest end (HEAD or TAIL) for large lists; and N is the number of elements in the specified range.</p>\n</div>\n<p>Returns the specified elements of the list stored at <code>key</code>.\n              The offsets <code>start</code> and <code>stop</code> are zero-based indexes, with <code>0</code> being the first\n              element of the list (the head of the list), <code>1</code> being the next element and so\n              on.</p>\n<p>These offsets can also be negative numbers indicating offsets starting at the\n              end of the list.\n              For example, <code>-1</code> is the last element of the list, <code>-2</code> the penultimate, and so\n              on.</p>\n<span class=\"anchor\" id=\"consistency-with-range-functions-in-various-programming-languages\"></span><h2><a class=\"anchor-link\" href=\"#consistency-with-range-functions-in-various-programming-languages\">*</a>Consistency with range functions in various programming languages</h2>\n<p>Note that if you have a list of numbers from 0 to 100, <code>LRANGE list 0 10</code> will\n              return 11 elements, that is, the rightmost item is included.\n              This <strong>may or may not</strong> be consistent with behavior of range-related functions\n              in your programming language of choice (think Ruby's <code>Range.new</code>, <code>Array#slice</code>\n              or Python's <code>range()</code> function).</p>\n<span class=\"anchor\" id=\"out-of-range-indexes\"></span><h2><a class=\"anchor-link\" href=\"#out-of-range-indexes\">*</a>Out-of-range indexes</h2>\n<p>Out of range indexes will not produce an error.\n              If <code>start</code> is larger than the end of the list, an empty list is returned.\n              If <code>stop</code> is larger than the actual end of the list, Redis will treat it like\n              the last element of the list.</p>\n<span class=\"anchor\" id=\"return-value\"></span><h2><a class=\"anchor-link\" href=\"#return-value\">*</a>Return value</h2>\n<p><a href=\"/topics/protocol#array-reply\">Array reply</a>: list of elements in the specified range.</p>\n<span class=\"anchor\" id=\"examples\"></span><h2><a class=\"anchor-link\" href=\"#examples\">*</a>Examples</h2>\n<div class=\"example\" data-session=\"a097da44f4d7d2fd8045e882e20368e3\">\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">RPUSH mylist \"one\"</span>\n<pre>(integer) 1</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">RPUSH mylist \"two\"</span>\n<pre>(integer) 2</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">RPUSH mylist \"three\"</span>\n<pre>(integer) 3</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">LRANGE mylist 0 0</span>\n<pre>1) \"one\"</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">LRANGE mylist -3 2</span>\n<pre>1) \"one\"\n2) \"two\"\n3) \"three\"</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">LRANGE mylist -100 100</span>\n<pre>1) \"one\"\n2) \"two\"\n3) \"three\"</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">LRANGE mylist 5 10</span>\n<pre>(empty list or set)</pre><form>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<input autocomplete=\"off\" name=\"command\" spellcheck=\"false\" type=\"text\"/>\n</form></div>\n</div>"}, "LREM": {"category": "list", "help_link": "/commands/lrem", "args": ["key", "count", "value"], "summary": "Remove elements from a list", "name": "LREM", "help_text": "<div class=\"article-main\">\n<div class=\"metadata\">\n<p><strong>Available since 1.0.0.</strong></p>\n<p><strong>Time complexity:</strong> O(N) where N is the length of the list.</p>\n</div>\n<p>Removes the first <code>count</code> occurrences of elements equal to <code>value</code> from the list\n              stored at <code>key</code>.\n              The <code>count</code> argument influences the operation in the following ways:</p>\n<ul>\n<li><code>count &gt; 0</code>: Remove elements equal to <code>value</code> moving from head to tail.</li>\n<li><code>count &lt; 0</code>: Remove elements equal to <code>value</code> moving from tail to head.</li>\n<li><code>count = 0</code>: Remove all elements equal to <code>value</code>.</li>\n</ul>\n<p>For example, <code>LREM list -2 \"hello\"</code> will remove the last two occurrences of\n              <code>\"hello\"</code> in the list stored at <code>list</code>.</p>\n<p>Note that non-existing keys are treated like empty lists, so when <code>key</code> does not\n              exist, the command will always return <code>0</code>.</p>\n<span class=\"anchor\" id=\"return-value\"></span><h2><a class=\"anchor-link\" href=\"#return-value\">*</a>Return value</h2>\n<p><a href=\"/topics/protocol#integer-reply\">Integer reply</a>: the number of removed elements.</p>\n<span class=\"anchor\" id=\"examples\"></span><h2><a class=\"anchor-link\" href=\"#examples\">*</a>Examples</h2>\n<div class=\"example\" data-session=\"719c2fc76ff646adbb7741c929953684\">\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">RPUSH mylist \"hello\"</span>\n<pre>(integer) 1</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">RPUSH mylist \"hello\"</span>\n<pre>(integer) 2</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">RPUSH mylist \"foo\"</span>\n<pre>(integer) 3</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">RPUSH mylist \"hello\"</span>\n<pre>(integer) 4</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">LREM mylist -2 \"hello\"</span>\n<pre>(integer) 2</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">LRANGE mylist 0 -1</span>\n<pre>1) \"hello\"\n2) \"foo\"</pre><form>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<input autocomplete=\"off\" name=\"command\" spellcheck=\"false\" type=\"text\"/>\n</form></div>\n</div>"}, "LSET": {"category": "list", "help_link": "/commands/lset", "args": ["key", "index", "value"], "summary": "Set the value of an element in a list by its index", "name": "LSET", "help_text": "<div class=\"article-main\">\n<div class=\"metadata\">\n<p><strong>Available since 1.0.0.</strong></p>\n<p><strong>Time complexity:</strong> O(N) where N is the length of the list. Setting either the first or the last element of the list is O(1).</p>\n</div>\n<p>Sets the list element at <code>index</code> to <code>value</code>.\n              For more information on the <code>index</code> argument, see <a href=\"/commands/lindex\">LINDEX</a>.</p>\n<p>An error is returned for out of range indexes.</p>\n<span class=\"anchor\" id=\"return-value\"></span><h2><a class=\"anchor-link\" href=\"#return-value\">*</a>Return value</h2>\n<p><a href=\"/topics/protocol#simple-string-reply\">Simple string reply</a></p>\n<span class=\"anchor\" id=\"examples\"></span><h2><a class=\"anchor-link\" href=\"#examples\">*</a>Examples</h2>\n<div class=\"example\" data-session=\"69323b67dfd3a7166d49cfb77056df6c\">\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">RPUSH mylist \"one\"</span>\n<pre>(integer) 1</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">RPUSH mylist \"two\"</span>\n<pre>(integer) 2</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">RPUSH mylist \"three\"</span>\n<pre>(integer) 3</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">LSET mylist 0 \"four\"</span>\n<pre>\"OK\"</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">LSET mylist -2 \"five\"</span>\n<pre>\"OK\"</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">LRANGE mylist 0 -1</span>\n<pre>1) \"four\"\n2) \"five\"\n3) \"three\"</pre><form>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<input autocomplete=\"off\" name=\"command\" spellcheck=\"false\" type=\"text\"/>\n</form></div>\n</div>"}, "LTRIM": {"category": "list", "help_link": "/commands/ltrim", "args": ["key", "start", "stop"], "summary": "Trim a list to the specified range", "name": "LTRIM", "help_text": "<div class=\"article-main\">\n<div class=\"metadata\">\n<p><strong>Available since 1.0.0.</strong></p>\n<p><strong>Time complexity:</strong> O(N) where N is the number of elements to be removed by the operation.</p>\n</div>\n<p>Trim an existing list so that it will contain only the specified range of\n              elements specified.\n              Both <code>start</code> and <code>stop</code> are zero-based indexes, where <code>0</code> is the first element\n              of the list (the head), <code>1</code> the next element and so on.</p>\n<p>For example: <code>LTRIM foobar 0 2</code> will modify the list stored at <code>foobar</code> so that\n              only the first three elements of the list will remain.</p>\n<p><code>start</code> and <code>end</code> can also be negative numbers indicating offsets from the end\n              of the list, where <code>-1</code> is the last element of the list, <code>-2</code> the penultimate\n              element and so on.</p>\n<p>Out of range indexes will not produce an error: if <code>start</code> is larger than the\n              end of the list, or <code>start &gt; end</code>, the result will be an empty list (which\n              causes <code>key</code> to be removed).\n              If <code>end</code> is larger than the end of the list, Redis will treat it like the last\n              element of the list.</p>\n<p>A common use of <a href=\"/commands/ltrim\">LTRIM</a> is together with <a href=\"/commands/lpush\">LPUSH</a> / <a href=\"/commands/rpush\">RPUSH</a>.\n              For example:</p>\n<pre><code>LPUSH mylist someelement\nLTRIM mylist 0 99\n</code></pre>\n<p>This pair of commands will push a new element on the list, while making sure\n              that the list will not grow larger than 100 elements.\n              This is very useful when using Redis to store logs for example.\n              It is important to note that when used in this way <a href=\"/commands/ltrim\">LTRIM</a> is an <span class=\"math\">O(1) </span>operation\n              because in the average case just one element is removed from the tail of the\n              list.</p>\n<span class=\"anchor\" id=\"return-value\"></span><h2><a class=\"anchor-link\" href=\"#return-value\">*</a>Return value</h2>\n<p><a href=\"/topics/protocol#simple-string-reply\">Simple string reply</a></p>\n<span class=\"anchor\" id=\"examples\"></span><h2><a class=\"anchor-link\" href=\"#examples\">*</a>Examples</h2>\n<div class=\"example\" data-session=\"98951b1319ac26bc4eb4479c15f38fca\">\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">RPUSH mylist \"one\"</span>\n<pre>(integer) 1</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">RPUSH mylist \"two\"</span>\n<pre>(integer) 2</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">RPUSH mylist \"three\"</span>\n<pre>(integer) 3</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">LTRIM mylist 1 -1</span>\n<pre>\"OK\"</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">LRANGE mylist 0 -1</span>\n<pre>1) \"two\"\n2) \"three\"</pre><form>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<input autocomplete=\"off\" name=\"command\" spellcheck=\"false\" type=\"text\"/>\n</form></div>\n</div>"}, "MEMORY DOCTOR": {"category": "server", "help_link": "/commands/memory-doctor", "args": [], "summary": "Outputs memory problems report", "name": "MEMORY DOCTOR", "help_text": "<div class=\"article-main\">\n<div class=\"metadata\">\n<p><strong>Available since 4.0.0.</strong></p>\n</div>\n<p>The <a href=\"/commands/memory-doctor\">MEMORY DOCTOR</a> command reports about different memory-related issues that\n              the Redis server experiences, and advises about possible remedies.</p>\n<span class=\"anchor\" id=\"return-value\"></span><h2><a class=\"anchor-link\" href=\"#return-value\">*</a>Return value</h2>\n<p><a href=\"/topics/protocol#bulk-string-reply\">Bulk string reply</a> </p>\n</div>"}, "MEMORY HELP": {"category": "server", "help_link": "/commands/memory-help", "args": [], "summary": "Show helpful text about the different subcommands", "name": "MEMORY HELP", "help_text": "<div class=\"article-main\">\n<div class=\"metadata\">\n<p><strong>Available since 4.0.0.</strong></p>\n</div>\n<p>The <a href=\"/commands/memory-help\">MEMORY HELP</a> command returns a helpful text describing the different\n              subcommands.</p>\n<span class=\"anchor\" id=\"return-value\"></span><h2><a class=\"anchor-link\" href=\"#return-value\">*</a>Return value</h2>\n<p><a href=\"/topics/protocol#array-reply\">Array reply</a>: a list of subcommands and their descriptions</p>\n</div>"}, "MEMORY MALLOC-STATS": {"category": "server", "help_link": "/commands/memory-malloc-stats", "args": [], "summary": "Show allocator internal stats", "name": "MEMORY MALLOC-STATS", "help_text": "<div class=\"article-main\">\n<div class=\"metadata\">\n<p><strong>Available since 4.0.0.</strong></p>\n</div>\n<p>The <a href=\"/commands/memory-malloc-stats\">MEMORY MALLOC-STATS</a> command provides an internal statistics report from\n              the memory allocator.</p>\n<p>This command is currently implemented only when using <strong>jemalloc</strong> as an\n              allocator, and evaluates to a benign NOOP for all others.</p>\n<span class=\"anchor\" id=\"return-value\"></span><h2><a class=\"anchor-link\" href=\"#return-value\">*</a>Return value</h2>\n<p><a href=\"/topics/protocol#bulk-string-reply\">Bulk string reply</a>: the memory allocator's internal statistics report</p>\n</div>"}, "MEMORY PURGE": {"category": "server", "help_link": "/commands/memory-purge", "args": [], "summary": "Ask the allocator to release memory", "name": "MEMORY PURGE", "help_text": "<div class=\"article-main\">\n<div class=\"metadata\">\n<p><strong>Available since 4.0.0.</strong></p>\n</div>\n<p>The <a href=\"/commands/memory-purge\">MEMORY PURGE</a> command attempts to purge dirty pages so these can be\n              reclaimed by the allocator.</p>\n<p>This command is currently implemented only when using <strong>jemalloc</strong> as an\n              allocator, and evaluates to a benign NOOP for all others.</p>\n<span class=\"anchor\" id=\"return-value\"></span><h2><a class=\"anchor-link\" href=\"#return-value\">*</a>Return value</h2>\n<p><a href=\"/topics/protocol#simple-string-reply\">Simple string reply</a></p>\n</div>"}, "MEMORY STATS": {"category": "server", "help_link": "/commands/memory-stats", "args": [], "summary": "Show memory usage details", "name": "MEMORY STATS", "help_text": "<div class=\"article-main\">\n<div class=\"metadata\">\n<p><strong>Available since 4.0.0.</strong></p>\n</div>\n<p>The <a href=\"/commands/memory-stats\">MEMORY STATS</a> command returns an <a href=\"/topics/protocol#array-reply\">Array reply</a> about the memory usage of the\n              server.</p>\n<p>The information about memory usage is provided as metrics and their respective\n              values. The following metrics are reported:</p>\n<ul>\n<li> <code>peak.allocated</code>: Peak memory consumed by Redis in bytes (see <a href=\"/commands/info\">INFO</a>'s\n               <code>used_memory_peak</code>)</li>\n<li> <code>total.allocated</code>: Total number of bytes allocated by Redis using its\n               allocator (see <a href=\"/commands/info\">INFO</a>'s <code>used_memory</code>)</li>\n<li> <code>startup.allocated</code>: Initial amount of memory consumed by Redis at startup\n               in bytes (see <a href=\"/commands/info\">INFO</a>'s <code>used_memory_startup</code>)</li>\n<li> <code>replication.backlog</code>: Size in bytes of the replication backlog (see\n               <a href=\"/commands/info\">INFO</a>'s <code>repl_backlog_active</code>)</li>\n<li> <code>clients.slaves</code>: The total size in bytes of all replicas overheads (output\n               and query buffers, connection contexts)</li>\n<li> <code>clients.normal</code>: The total size in bytes of all clients overheads (output\n               and query buffers, connection contexts)</li>\n<li> <code>aof.buffer</code>: The summed size in bytes of the current and rewrite AOF\n               buffers (see <a href=\"/commands/info\">INFO</a>'s <code>aof_buffer_length</code> and <code>aof_rewrite_buffer_length</code>,\n               respectively)</li>\n<li> <code>lua.caches</code>: the summed size in bytes of the overheads of the Lua scripts'\n               caches</li>\n<li> <code>dbXXX</code>: For each of the server's databases, the overheads of the main and\n               expiry dictionaries (<code>overhead.hashtable.main</code> and\n              <code>overhead.hashtable.expires</code>, respectively) are reported in bytes</li>\n<li> <code>overhead.total</code>: The sum of all overheads, i.e. <code>startup.allocated</code>,\n               <code>replication.backlog</code>, <code>clients.slaves</code>, <code>clients.normal</code>, <code>aof.buffer</code> and\n               those of the internal data structures that are used in managing the\n               Redis keyspace (see <a href=\"/commands/info\">INFO</a>'s <code>used_memory_overhead</code>)</li>\n<li> <code>keys.count</code>: The total number of keys stored across all databases in the\n               server</li>\n<li> <code>keys.bytes-per-key</code>: The ratio between <strong>net memory usage</strong> (<code>total.allocated</code>\n               minus <code>startup.allocated</code>) and <code>keys.count</code> </li>\n<li> <code>dataset.bytes</code>: The size in bytes of the dataset, i.e. <code>overhead.total</code>\n               subtracted from <code>total.allocated</code> (see <a href=\"/commands/info\">INFO</a>'s <code>used_memory_dataset</code>)</li>\n<li> <code>dataset.percentage</code>: The percentage of <code>dataset.bytes</code> out of the net\n               memory usage</li>\n<li> <code>peak.percentage</code>: The percentage of <code>peak.allocated</code> out of\n               <code>total.allocated</code></li>\n<li> <code>fragmentation</code>: See <a href=\"/commands/info\">INFO</a>'s <code>mem_fragmentation_ratio</code></li>\n</ul>\n<span class=\"anchor\" id=\"return-value\"></span><h2><a class=\"anchor-link\" href=\"#return-value\">*</a>Return value</h2>\n<p><a href=\"/topics/protocol#array-reply\">Array reply</a>: nested list of memory usage metrics and their values</p>\n<p><strong>A note about the word slave used in this man page</strong>: Starting with Redis 5, if not for backward compatibility, the Redis project no longer uses the word slave. Unfortunately in this command the word slave is part of the protocol, so we'll be able to remove such occurrences only when this API will be naturally deprecated.</p>\n</div>"}, "MEMORY USAGE": {"category": "server", "help_link": "/commands/memory-usage", "args": ["key", "[SAMPLES count]"], "summary": "Estimate the memory usage of a key", "name": "MEMORY USAGE", "help_text": "<div class=\"article-main\">\n<div class=\"metadata\">\n<p><strong>Available since 4.0.0.</strong></p>\n<p><strong>Time complexity:</strong> O(N) where N is the number of samples.</p>\n</div>\n<p>The <a href=\"/commands/memory-usage\">MEMORY USAGE</a> command reports the number of bytes that a key and its value\n              require to be stored in RAM.</p>\n<p>The reported usage is the total of memory allocations for data and\n              administrative overheads that a key its value require.</p>\n<p>For nested data types, the optional <code>SAMPLES</code> option can be provided, where\n              <code>count</code> is the number of sampled nested values. By default, this option is set\n              to <code>5</code>. To sample the all of the nested values, use <code>SAMPLES 0</code>. </p>\n<span class=\"anchor\" id=\"examples\"></span><h2><a class=\"anchor-link\" href=\"#examples\">*</a>Examples</h2>\n<p>With Redis v4.0.1 64-bit and <strong>jemalloc</strong>, the empty string measures as follows:</p>\n<pre><code>&gt; SET \"\" \"\"\nOK\n&gt; MEMORY USAGE \"\"\n(integer) 51\n</code></pre>\n<p>These bytes are pure overhead at the moment as no actual data is stored, and are\n              used for maintaining the internal data structures of the server. Longer keys and\n              values show asymptotically linear usage.</p>\n<pre><code>&gt; SET foo bar\nOK\n&gt; MEMORY USAGE foo\n(integer) 54\n&gt; SET cento 01234567890123456789012345678901234567890123\n45678901234567890123456789012345678901234567890123456789\nOK\n127.0.0.1:6379&gt; MEMORY USAGE cento\n(integer) 153\n</code></pre>\n<span class=\"anchor\" id=\"return-value\"></span><h2><a class=\"anchor-link\" href=\"#return-value\">*</a>Return value</h2>\n<p><a href=\"/topics/protocol#integer-reply\">Integer reply</a>: the memory usage in bytes </p>\n</div>"}, "MGET": {"category": "string", "help_link": "/commands/mget", "args": ["key [key ...]"], "summary": "Get the values of all the given keys", "name": "MGET", "help_text": "<div class=\"article-main\">\n<div class=\"metadata\">\n<p><strong>Available since 1.0.0.</strong></p>\n<p><strong>Time complexity:</strong> O(N) where N is the number of keys to retrieve.</p>\n</div>\n<p>Returns the values of all specified keys.\n              For every key that does not hold a string value or does not exist, the special\n              value <code>nil</code> is returned.\n              Because of this, the operation never fails.</p>\n<span class=\"anchor\" id=\"return-value\"></span><h2><a class=\"anchor-link\" href=\"#return-value\">*</a>Return value</h2>\n<p><a href=\"/topics/protocol#array-reply\">Array reply</a>: list of values at the specified keys.</p>\n<span class=\"anchor\" id=\"examples\"></span><h2><a class=\"anchor-link\" href=\"#examples\">*</a>Examples</h2>\n<div class=\"example\" data-session=\"8ee20857e5b249d50b815dccb3bbacb0\">\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">SET key1 \"Hello\"</span>\n<pre>\"OK\"</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">SET key2 \"World\"</span>\n<pre>\"OK\"</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">MGET key1 key2 nonexisting</span>\n<pre>1) \"Hello\"\n2) \"World\"\n3) (nil)</pre><form>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<input autocomplete=\"off\" name=\"command\" spellcheck=\"false\" type=\"text\"/>\n</form></div>\n</div>"}, "MIGRATE": {"category": "generic", "help_link": "/commands/migrate", "args": ["host", "port", "key|\"\"", "destination-db", "timeout", "[COPY]", "[REPLACE]", "[AUTH password]", "[KEYS key [key ...]]"], "summary": "Atomically transfer a key from a Redis instance to another one.", "name": "MIGRATE", "help_text": "<div class=\"article-main\">\n<div class=\"metadata\">\n<p><strong>Available since 2.6.0.</strong></p>\n<p><strong>Time complexity:</strong> This command actually executes a DUMP+DEL in the source instance, and a RESTORE in the target instance. See the pages of these commands for time complexity. Also an O(N) data transfer between the two instances is performed.</p>\n</div>\n<p>Atomically transfer a key from a source Redis instance to a destination Redis\n              instance.\n              On success the key is deleted from the original instance and is guaranteed to\n              exist in the target instance.</p>\n<p>The command is atomic and blocks the two instances for the time required to\n              transfer the key, at any given time the key will appear to exist in a given\n              instance or in the other instance, unless a timeout error occurs. In 3.2 and\n              above, multiple keys can be pipelined in a single call to <a href=\"/commands/migrate\">MIGRATE</a> by passing\n              the empty string (\"\") as key and adding the <a href=\"/commands/keys\">KEYS</a> clause.</p>\n<p>The command internally uses <a href=\"/commands/dump\">DUMP</a> to generate the serialized version of the key\n              value, and <a href=\"/commands/restore\">RESTORE</a> in order to synthesize the key in the target instance.\n              The source instance acts as a client for the target instance.\n              If the target instance returns OK to the <a href=\"/commands/restore\">RESTORE</a> command, the source instance\n              deletes the key using <a href=\"/commands/del\">DEL</a>.</p>\n<p>The timeout specifies the maximum idle time in any moment of the communication\n              with the destination instance in milliseconds.\n              This means that the operation does not need to be completed within the specified\n              amount of milliseconds, but that the transfer should make progresses without\n              blocking for more than the specified amount of milliseconds.</p>\n<p><a href=\"/commands/migrate\">MIGRATE</a> needs to perform I/O operations and to honor the specified timeout.\n              When there is an I/O error during the transfer or if the timeout is reached the\n              operation is aborted and the special error - <code>IOERR</code> returned.\n              When this happens the following two cases are possible:</p>\n<ul>\n<li>The key may be on both the instances.</li>\n<li>The key may be only in the source instance.</li>\n</ul>\n<p>It is not possible for the key to get lost in the event of a timeout, but the\n              client calling <a href=\"/commands/migrate\">MIGRATE</a>, in the event of a timeout error, should check if the\n              key is <em>also</em> present in the target instance and act accordingly.</p>\n<p>When any other error is returned (starting with <code>ERR</code>) <a href=\"/commands/migrate\">MIGRATE</a> guarantees that\n              the key is still only present in the originating instance (unless a key with the\n              same name was also <em>already</em> present on the target instance).</p>\n<p>If there are no keys to migrate in the source instance <code>NOKEY</code> is returned.\n              Because missing keys are possible in normal conditions, from expiry for example,\n              <code>NOKEY</code> isn't an error. </p>\n<span class=\"anchor\" id=\"migrating-multiple-keys-with-a-single-command-call\"></span><h2><a class=\"anchor-link\" href=\"#migrating-multiple-keys-with-a-single-command-call\">*</a>Migrating multiple keys with a single command call</h2>\n<p>Starting with Redis 3.0.6 <a href=\"/commands/migrate\">MIGRATE</a> supports a new bulk-migration mode that\n              uses pipelining in order to migrate multiple keys between instances without\n              incurring in the round trip time latency and other overheads that there are\n              when moving each key with a single <a href=\"/commands/migrate\">MIGRATE</a> call.</p>\n<p>In order to enable this form, the <a href=\"/commands/keys\">KEYS</a> option is used, and the normal <em>key</em>\n              argument is set to an empty string. The actual key names will be provided\n              after the <a href=\"/commands/keys\">KEYS</a> argument itself, like in the following example:</p>\n<pre><code>MIGRATE 192.168.1.34 6379 \"\" 0 5000 KEYS key1 key2 key3\n</code></pre>\n<p>When this form is used the <code>NOKEY</code> status code is only returned when none\n              of the keys is present in the instance, otherwise the command is executed, even if\n              just a single key exists.</p>\n<span class=\"anchor\" id=\"options\"></span><h2><a class=\"anchor-link\" href=\"#options\">*</a>Options</h2>\n<ul>\n<li><code>COPY</code> -- Do not remove the key from the local instance.</li>\n<li><code>REPLACE</code> -- Replace existing key on the remote instance.</li>\n<li><a href=\"/commands/keys\">KEYS</a> -- If the key argument is an empty string, the command will instead migrate all the keys that follow the <a href=\"/commands/keys\">KEYS</a> option (see the above section for more info).</li>\n<li><a href=\"/commands/auth\">AUTH</a> -- Authenticate with the given password to the remote instance.</li>\n</ul>\n<p><code>COPY</code> and <code>REPLACE</code> are available only in 3.0 and above.\n              <a href=\"/commands/keys\">KEYS</a> is available starting with Redis 3.0.6.\n              <a href=\"/commands/auth\">AUTH</a> is available starting with Redis 4.0.7.</p>\n<span class=\"anchor\" id=\"return-value\"></span><h2><a class=\"anchor-link\" href=\"#return-value\">*</a>Return value</h2>\n<p><a href=\"/topics/protocol#simple-string-reply\">Simple string reply</a>: The command returns OK on success, or <code>NOKEY</code> if no keys were\n              found in the source instance.</p>\n</div>"}, "MODULE LIST": {"category": "server", "help_link": "/commands/module-list", "args": [], "summary": "List all modules loaded by the server", "name": "MODULE LIST", "help_text": "<div class=\"article-main\">\n<div class=\"metadata\">\n<p><strong>Available since 4.0.0.</strong></p>\n<p><strong>Time complexity:</strong> O(N) where N is the number of loaded modules.</p>\n</div>\n<p>Returns information about the modules loaded to the server.</p>\n<span class=\"anchor\" id=\"return-value\"></span><h2><a class=\"anchor-link\" href=\"#return-value\">*</a>Return value</h2>\n<p><a href=\"/topics/protocol#array-reply\">Array reply</a>: list of loaded modules. Each element in the list represents a\n              module, and is in itself a list of property names and their values. The\n              following properties is reported for each loaded module:</p>\n<ul>\n<li> <code>name</code>: Name of the module</li>\n<li> <code>ver</code>: Version of the module</li>\n</ul>\n</div>"}, "MODULE LOAD": {"category": "server", "help_link": "/commands/module-load", "args": ["path", "[ arg [arg ...]]"], "summary": "Load a module", "name": "MODULE LOAD", "help_text": "<div class=\"article-main\">\n<div class=\"metadata\">\n<p><strong>Available since 4.0.0.</strong></p>\n<p><strong>Time complexity:</strong> O(1)</p>\n</div>\n<p>Loads a module from a dynamic library at runtime.</p>\n<p>This command loads and initializes the Redis module from the dynamic library\n              specified by the <code>path</code> argument. The <code>path</code> should be the absolute path of the\n              library, including the full filename. Any additional arguments are passed\n              unmodified to the module.</p>\n<p><strong>Note</strong>: modules can also be loaded at server startup with 'loadmodule'\n              configuration directive in <code>redis.conf</code>.</p>\n<span class=\"anchor\" id=\"return-value\"></span><h2><a class=\"anchor-link\" href=\"#return-value\">*</a>Return value</h2>\n<p><a href=\"/topics/protocol#simple-string-reply\">Simple string reply</a>: <code>OK</code> if module was loaded.</p>\n</div>"}, "MODULE UNLOAD": {"category": "server", "help_link": "/commands/module-unload", "args": ["name"], "summary": "Unload a module", "name": "MODULE UNLOAD", "help_text": "<div class=\"article-main\">\n<div class=\"metadata\">\n<p><strong>Available since 4.0.0.</strong></p>\n<p><strong>Time complexity:</strong> O(1)</p>\n</div>\n<p>Unloads a module.</p>\n<p>This command unloads the module specified by <code>name</code>. Note that the module's name\n              is reported by the <a href=\"/commands/module-list\">MODULE LIST</a> command, and may differ from the dynamic\n              library's filename.</p>\n<p>Known limitations:</p>\n<ul>\n<li>  Modules that register custom data types can not be unloaded.</li>\n</ul>\n<span class=\"anchor\" id=\"return-value\"></span><h2><a class=\"anchor-link\" href=\"#return-value\">*</a>Return value</h2>\n<p><a href=\"/topics/protocol#simple-string-reply\">Simple string reply</a>: <code>OK</code> if module was unloaded.</p>\n</div>"}, "MONITOR": {"category": "server", "help_link": "/commands/monitor", "args": [], "summary": "Listen for all requests received by the server in real time", "name": "MONITOR", "help_text": "<div class=\"article-main\">\n<div class=\"metadata\">\n<p><strong>Available since 1.0.0.</strong></p>\n</div>\n<p><a href=\"/commands/monitor\">MONITOR</a> is a debugging command that streams back every command processed by\n              the Redis server.\n              It can help in understanding what is happening to the database.\n              This command can both be used via <code>redis-cli</code> and via <code>telnet</code>.</p>\n<p>The ability to see all the requests processed by the server is useful in order\n              to spot bugs in an application both when using Redis as a database and as a\n              distributed caching system.</p>\n<pre><code>$ redis-cli monitor\n1339518083.107412 [0 127.0.0.1:60866] \"keys\" \"*\"\n1339518087.877697 [0 127.0.0.1:60866] \"dbsize\"\n1339518090.420270 [0 127.0.0.1:60866] \"set\" \"x\" \"6\"\n1339518096.506257 [0 127.0.0.1:60866] \"get\" \"x\"\n1339518099.363765 [0 127.0.0.1:60866] \"del\" \"x\"\n1339518100.544926 [0 127.0.0.1:60866] \"get\" \"x\"\n</code></pre>\n<p>Use <code>SIGINT</code> (Ctrl-C) to stop a <a href=\"/commands/monitor\">MONITOR</a> stream running via <code>redis-cli</code>.</p>\n<pre><code>$ telnet localhost 6379\nTrying 127.0.0.1...\nConnected to localhost.\nEscape character is '^]'.\nMONITOR\n+OK\n+1339518083.107412 [0 127.0.0.1:60866] \"keys\" \"*\"\n+1339518087.877697 [0 127.0.0.1:60866] \"dbsize\"\n+1339518090.420270 [0 127.0.0.1:60866] \"set\" \"x\" \"6\"\n+1339518096.506257 [0 127.0.0.1:60866] \"get\" \"x\"\n+1339518099.363765 [0 127.0.0.1:60866] \"del\" \"x\"\n+1339518100.544926 [0 127.0.0.1:60866] \"get\" \"x\"\nQUIT\n+OK\nConnection closed by foreign host.\n</code></pre>\n<p>Manually issue the <a href=\"/commands/quit\">QUIT</a> command to stop a <a href=\"/commands/monitor\">MONITOR</a> stream running via\n              <code>telnet</code>.</p>\n<span class=\"anchor\" id=\"commands-not-logged-by-monitor\"></span><h2><a class=\"anchor-link\" href=\"#commands-not-logged-by-monitor\">*</a>Commands not logged by MONITOR</h2>\n<p>For security concerns, certain special administration commands like <code>CONFIG</code>\n              are not logged into the <a href=\"/commands/monitor\">MONITOR</a> output.</p>\n<span class=\"anchor\" id=\"cost-of-running-a-hrefcommandsmonitormonitora\"></span><h2><a class=\"anchor-link\" href=\"#cost-of-running-a-hrefcommandsmonitormonitora\">*</a>Cost of running <a href=\"/commands/monitor\">MONITOR</a></h2>\n<p>Because <a href=\"/commands/monitor\">MONITOR</a> streams back <strong>all</strong> commands, its use comes at a cost.\n              The following (totally unscientific) benchmark numbers illustrate what the cost\n              of running <a href=\"/commands/monitor\">MONITOR</a> can be.</p>\n<p>Benchmark result <strong>without</strong> <a href=\"/commands/monitor\">MONITOR</a> running:</p>\n<pre><code>$ src/redis-benchmark -c 10 -n 100000 -q\nPING_INLINE: 101936.80 requests per second\nPING_BULK: 102880.66 requests per second\nSET: 95419.85 requests per second\nGET: 104275.29 requests per second\nINCR: 93283.58 requests per second\n</code></pre>\n<p>Benchmark result <strong>with</strong> <a href=\"/commands/monitor\">MONITOR</a> running (<code>redis-cli monitor &gt; /dev/null</code>):</p>\n<pre><code>$ src/redis-benchmark -c 10 -n 100000 -q\nPING_INLINE: 58479.53 requests per second\nPING_BULK: 59136.61 requests per second\nSET: 41823.50 requests per second\nGET: 45330.91 requests per second\nINCR: 41771.09 requests per second\n</code></pre>\n<p>In this particular case, running a single <a href=\"/commands/monitor\">MONITOR</a> client can reduce the\n              throughput by more than 50%.\n              Running more <a href=\"/commands/monitor\">MONITOR</a> clients will reduce throughput even more.</p>\n<span class=\"anchor\" id=\"return-value\"></span><h2><a class=\"anchor-link\" href=\"#return-value\">*</a>Return value</h2>\n<p><strong>Non standard return value</strong>, just dumps the received commands in an infinite\n              flow.</p>\n</div>"}, "MOVE": {"category": "generic", "help_link": "/commands/move", "args": ["key", "db"], "summary": "Move a key to another database", "name": "MOVE", "help_text": "<div class=\"article-main\">\n<div class=\"metadata\">\n<p><strong>Available since 1.0.0.</strong></p>\n<p><strong>Time complexity:</strong> O(1)</p>\n</div>\n<p>Move <code>key</code> from the currently selected database (see <a href=\"/commands/select\">SELECT</a>) to the specified\n              destination database.\n              When <code>key</code> already exists in the destination database, or it does not exist in\n              the source database, it does nothing.\n              It is possible to use <a href=\"/commands/move\">MOVE</a> as a locking primitive because of this.</p>\n<span class=\"anchor\" id=\"return-value\"></span><h2><a class=\"anchor-link\" href=\"#return-value\">*</a>Return value</h2>\n<p><a href=\"/topics/protocol#integer-reply\">Integer reply</a>, specifically:</p>\n<ul>\n<li><code>1</code> if <code>key</code> was moved.</li>\n<li><code>0</code> if <code>key</code> was not moved.</li>\n</ul>\n</div>"}, "MSET": {"category": "string", "help_link": "/commands/mset", "args": ["key value [key value ...]"], "summary": "Set multiple keys to multiple values", "name": "MSET", "help_text": "<div class=\"article-main\">\n<div class=\"metadata\">\n<p><strong>Available since 1.0.1.</strong></p>\n<p><strong>Time complexity:</strong> O(N) where N is the number of keys to set.</p>\n</div>\n<p>Sets the given keys to their respective values.\n              <a href=\"/commands/mset\">MSET</a> replaces existing values with new values, just as regular <a href=\"/commands/set\">SET</a>.\n              See <a href=\"/commands/msetnx\">MSETNX</a> if you don't want to overwrite existing values.</p>\n<p><a href=\"/commands/mset\">MSET</a> is atomic, so all given keys are set at once.\n              It is not possible for clients to see that some of the keys were updated while\n              others are unchanged.</p>\n<span class=\"anchor\" id=\"return-value\"></span><h2><a class=\"anchor-link\" href=\"#return-value\">*</a>Return value</h2>\n<p><a href=\"/topics/protocol#simple-string-reply\">Simple string reply</a>: always <code>OK</code> since <a href=\"/commands/mset\">MSET</a> can't fail.</p>\n<span class=\"anchor\" id=\"examples\"></span><h2><a class=\"anchor-link\" href=\"#examples\">*</a>Examples</h2>\n<div class=\"example\" data-session=\"8c5a6a648ef229cd96b3a0ecaac7266b\">\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">MSET key1 \"Hello\" key2 \"World\"</span>\n<pre>\"OK\"</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">GET key1</span>\n<pre>\"Hello\"</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">GET key2</span>\n<pre>\"World\"</pre><form>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<input autocomplete=\"off\" name=\"command\" spellcheck=\"false\" type=\"text\"/>\n</form></div>\n</div>"}, "MSETNX": {"category": "string", "help_link": "/commands/msetnx", "args": ["key value [key value ...]"], "summary": "Set multiple keys to multiple values, only if none of the keys exist", "name": "MSETNX", "help_text": "<div class=\"article-main\">\n<div class=\"metadata\">\n<p><strong>Available since 1.0.1.</strong></p>\n<p><strong>Time complexity:</strong> O(N) where N is the number of keys to set.</p>\n</div>\n<p>Sets the given keys to their respective values.\n              <a href=\"/commands/msetnx\">MSETNX</a> will not perform any operation at all even if just a single key already\n              exists.</p>\n<p>Because of this semantic <a href=\"/commands/msetnx\">MSETNX</a> can be used in order to set different keys\n              representing different fields of an unique logic object in a way that ensures\n              that either all the fields or none at all are set.</p>\n<p><a href=\"/commands/msetnx\">MSETNX</a> is atomic, so all given keys are set at once.\n              It is not possible for clients to see that some of the keys were updated while\n              others are unchanged.</p>\n<span class=\"anchor\" id=\"return-value\"></span><h2><a class=\"anchor-link\" href=\"#return-value\">*</a>Return value</h2>\n<p><a href=\"/topics/protocol#integer-reply\">Integer reply</a>, specifically:</p>\n<ul>\n<li><code>1</code> if the all the keys were set.</li>\n<li><code>0</code> if no key was set (at least one key already existed).</li>\n</ul>\n<span class=\"anchor\" id=\"examples\"></span><h2><a class=\"anchor-link\" href=\"#examples\">*</a>Examples</h2>\n<div class=\"example\" data-session=\"97f5d4db8c26e17c9198be3ba862b05c\">\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">MSETNX key1 \"Hello\" key2 \"there\"</span>\n<pre>(integer) 1</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">MSETNX key2 \"new\" key3 \"world\"</span>\n<pre>(integer) 0</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">MGET key1 key2 key3</span>\n<pre>1) \"Hello\"\n2) \"there\"\n3) (nil)</pre><form>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<input autocomplete=\"off\" name=\"command\" spellcheck=\"false\" type=\"text\"/>\n</form></div>\n</div>"}, "MULTI": {"category": "transactions", "help_link": "/commands/multi", "args": [], "summary": "Mark the start of a transaction block", "name": "MULTI", "help_text": "<div class=\"article-main\">\n<div class=\"metadata\">\n<p><strong>Available since 1.2.0.</strong></p>\n</div>\n<p>Marks the start of a <a href=\"/topics/transactions\">transaction</a> block.\n              Subsequent commands will be queued for atomic execution using <a href=\"/commands/exec\">EXEC</a>.</p>\n<span class=\"anchor\" id=\"return-value\"></span><h2><a class=\"anchor-link\" href=\"#return-value\">*</a>Return value</h2>\n<p><a href=\"/topics/protocol#simple-string-reply\">Simple string reply</a>: always <code>OK</code>.</p>\n</div>"}, "OBJECT": {"category": "generic", "help_link": "/commands/object", "args": ["subcommand", "[arguments [arguments ...]]"], "summary": "Inspect the internals of Redis objects", "name": "OBJECT", "help_text": "<div class=\"article-main\">\n<div class=\"metadata\">\n<p><strong>Available since 2.2.3.</strong></p>\n<p><strong>Time complexity:</strong> O(1) for all the currently implemented subcommands.</p>\n</div>\n<p>The <a href=\"/commands/object\">OBJECT</a> command allows to inspect the internals of Redis Objects associated\n              with keys.\n              It is useful for debugging or to understand if your keys are using the specially\n              encoded data types to save space.\n              Your application may also use the information reported by the <a href=\"/commands/object\">OBJECT</a> command\n              to implement application level key eviction policies when using Redis as a\n              Cache.</p>\n<p>The <a href=\"/commands/object\">OBJECT</a> command supports multiple sub commands:</p>\n<ul>\n<li><code>OBJECT REFCOUNT &lt;key&gt;</code> returns the number of references of the value\n              associated with the specified key.\n              This command is mainly useful for debugging.</li>\n<li><code>OBJECT ENCODING &lt;key&gt;</code> returns the kind of internal representation used in\n              order to store the value associated with a key.</li>\n<li><code>OBJECT IDLETIME &lt;key&gt;</code> returns the number of seconds since the object stored\n              at the specified key is idle (not requested by read or write operations).\n              While the value is returned in seconds the actual resolution of this timer is\n              10 seconds, but may vary in future implementations. This subcommand is\n              available when <code>maxmemory-policy</code> is set to an LRU policy or <code>noeviction</code>. </li>\n<li><code>OBJECT FREQ &lt;key&gt;</code> returns the logarithmic access frequency counter of the\n              object stored at the specified key. This subcommand is available when\n              <code>maxmemory-policy</code> is set to an LFU policy.</li>\n<li><code>OBJECT HELP</code> returns a succint help text.</li>\n</ul>\n<p>Objects can be encoded in different ways:</p>\n<ul>\n<li>Strings can be encoded as <code>raw</code> (normal string encoding) or <code>int</code> (strings\n              representing integers in a 64 bit signed interval are encoded in this way in\n              order to save space).</li>\n<li>Lists can be encoded as <code>ziplist</code> or <code>linkedlist</code>.\n              The <code>ziplist</code> is the special representation that is used to save space for\n              small lists.</li>\n<li>Sets can be encoded as <code>intset</code> or <code>hashtable</code>.\n              The <code>intset</code> is a special encoding used for small sets composed solely of\n              integers.</li>\n<li>Hashes can be encoded as <code>ziplist</code> or <code>hashtable</code>.\n              The <code>ziplist</code> is a special encoding used for small hashes.</li>\n<li>Sorted Sets can be encoded as <code>ziplist</code> or <code>skiplist</code> format.\n              As for the List type small sorted sets can be specially encoded using\n              <code>ziplist</code>, while the <code>skiplist</code> encoding is the one that works with sorted\n              sets of any size.</li>\n</ul>\n<p>All the specially encoded types are automatically converted to the general type\n              once you perform an operation that makes it impossible for Redis to retain the\n              space saving encoding.</p>\n<span class=\"anchor\" id=\"return-value\"></span><h2><a class=\"anchor-link\" href=\"#return-value\">*</a>Return value</h2>\n<p>Different return values are used for different subcommands.</p>\n<ul>\n<li>Subcommands <code>refcount</code> and <code>idletime</code> return integers.</li>\n<li>Subcommand <code>encoding</code> returns a bulk reply.</li>\n</ul>\n<p>If the object you try to inspect is missing, a null bulk reply is returned.</p>\n<span class=\"anchor\" id=\"examples\"></span><h2><a class=\"anchor-link\" href=\"#examples\">*</a>Examples</h2>\n<pre><code>redis&gt; lpush mylist \"Hello World\"\n(integer) 4\nredis&gt; object refcount mylist\n(integer) 1\nredis&gt; object encoding mylist\n\"ziplist\"\nredis&gt; object idletime mylist\n(integer) 10\n</code></pre>\n<p>In the following example you can see how the encoding changes once Redis is no\n              longer able to use the space saving encoding.</p>\n<pre><code>redis&gt; set foo 1000\nOK\nredis&gt; object encoding foo\n\"int\"\nredis&gt; append foo bar\n(integer) 7\nredis&gt; get foo\n\"1000bar\"\nredis&gt; object encoding foo\n\"raw\"\n</code></pre>\n</div>"}, "PERSIST": {"category": "generic", "help_link": "/commands/persist", "args": ["key"], "summary": "Remove the expiration from a key", "name": "PERSIST", "help_text": "<div class=\"article-main\">\n<div class=\"metadata\">\n<p><strong>Available since 2.2.0.</strong></p>\n<p><strong>Time complexity:</strong> O(1)</p>\n</div>\n<p>Remove the existing timeout on <code>key</code>, turning the key from <em>volatile</em> (a key\n              with an expire set) to <em>persistent</em> (a key that will never expire as no timeout\n              is associated).</p>\n<span class=\"anchor\" id=\"return-value\"></span><h2><a class=\"anchor-link\" href=\"#return-value\">*</a>Return value</h2>\n<p><a href=\"/topics/protocol#integer-reply\">Integer reply</a>, specifically:</p>\n<ul>\n<li><code>1</code> if the timeout was removed.</li>\n<li><code>0</code> if <code>key</code> does not exist or does not have an associated timeout.</li>\n</ul>\n<span class=\"anchor\" id=\"examples\"></span><h2><a class=\"anchor-link\" href=\"#examples\">*</a>Examples</h2>\n<div class=\"example\" data-session=\"2ae65c5447d222f05c393b2028a56061\">\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">SET mykey \"Hello\"</span>\n<pre>\"OK\"</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">EXPIRE mykey 10</span>\n<pre>(integer) 1</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">TTL mykey</span>\n<pre>(integer) 10</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">PERSIST mykey</span>\n<pre>(integer) 1</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">TTL mykey</span>\n<pre>(integer) -1</pre><form>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<input autocomplete=\"off\" name=\"command\" spellcheck=\"false\" type=\"text\"/>\n</form></div>\n</div>"}, "PEXPIRE": {"category": "generic", "help_link": "/commands/pexpire", "args": ["key", "milliseconds"], "summary": "Set a key's time to live in milliseconds", "name": "PEXPIRE", "help_text": "<div class=\"article-main\">\n<div class=\"metadata\">\n<p><strong>Available since 2.6.0.</strong></p>\n<p><strong>Time complexity:</strong> O(1)</p>\n</div>\n<p>This command works exactly like <a href=\"/commands/expire\">EXPIRE</a> but the time to live of the key is\n              specified in milliseconds instead of seconds.</p>\n<span class=\"anchor\" id=\"return-value\"></span><h2><a class=\"anchor-link\" href=\"#return-value\">*</a>Return value</h2>\n<p><a href=\"/topics/protocol#integer-reply\">Integer reply</a>, specifically:</p>\n<ul>\n<li><code>1</code> if the timeout was set.</li>\n<li><code>0</code> if <code>key</code> does not exist.</li>\n</ul>\n<span class=\"anchor\" id=\"examples\"></span><h2><a class=\"anchor-link\" href=\"#examples\">*</a>Examples</h2>\n<div class=\"example\" data-session=\"e65c9f3a081b8ac6b65dca9067c4d5bf\">\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">SET mykey \"Hello\"</span>\n<pre>\"OK\"</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">PEXPIRE mykey 1500</span>\n<pre>(integer) 1</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">TTL mykey</span>\n<pre>(integer) 1</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">PTTL mykey</span>\n<pre>(integer) 1498</pre><form>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<input autocomplete=\"off\" name=\"command\" spellcheck=\"false\" type=\"text\"/>\n</form></div>\n</div>"}, "PEXPIREAT": {"category": "generic", "help_link": "/commands/pexpireat", "args": ["key", "milliseconds-timestamp"], "summary": "Set the expiration for a key as a UNIX timestamp specified in milliseconds", "name": "PEXPIREAT", "help_text": "<div class=\"article-main\">\n<div class=\"metadata\">\n<p><strong>Available since 2.6.0.</strong></p>\n<p><strong>Time complexity:</strong> O(1)</p>\n</div>\n<p><a href=\"/commands/pexpireat\">PEXPIREAT</a> has the same effect and semantic as <a href=\"/commands/expireat\">EXPIREAT</a>, but the Unix time at\n              which the key will expire is specified in milliseconds instead of seconds.</p>\n<span class=\"anchor\" id=\"return-value\"></span><h2><a class=\"anchor-link\" href=\"#return-value\">*</a>Return value</h2>\n<p><a href=\"/topics/protocol#integer-reply\">Integer reply</a>, specifically:</p>\n<ul>\n<li><code>1</code> if the timeout was set.</li>\n<li><code>0</code> if <code>key</code> does not exist.</li>\n</ul>\n<span class=\"anchor\" id=\"examples\"></span><h2><a class=\"anchor-link\" href=\"#examples\">*</a>Examples</h2>\n<div class=\"example\" data-session=\"4ae2cfd37b9fd4847fcddb3e4326a7f2\">\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">SET mykey \"Hello\"</span>\n<pre>\"OK\"</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">PEXPIREAT mykey 1555555555005</span>\n<pre>(integer) 1</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">TTL mykey</span>\n<pre>(integer) -2</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">PTTL mykey</span>\n<pre>(integer) -2</pre><form>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<input autocomplete=\"off\" name=\"command\" spellcheck=\"false\" type=\"text\"/>\n</form></div>\n</div>"}, "PFADD": {"category": "hyperloglog", "help_link": "/commands/pfadd", "args": ["key", "element [element ...]"], "summary": "Adds the specified elements to the specified HyperLogLog.", "name": "PFADD", "help_text": "<div class=\"article-main\">\n<div class=\"metadata\">\n<p><strong>Available since 2.8.9.</strong></p>\n<p><strong>Time complexity:</strong> O(1) to add every element.</p>\n</div>\n<p>Adds all the element arguments to the HyperLogLog data structure stored at the variable name specified as first argument.</p>\n<p>As a side effect of this command the HyperLogLog internals may be updated to reflect a different estimation of the number of unique items added so far (the cardinality of the set).</p>\n<p>If the approximated cardinality estimated by the HyperLogLog changed after executing the command, <a href=\"/commands/pfadd\">PFADD</a> returns 1, otherwise 0 is returned. The command automatically creates an empty HyperLogLog structure (that is, a Redis String of a specified length and with a given encoding) if the specified key does not exist.</p>\n<p>To call the command without elements but just the variable name is valid, this will result into no operation performed if the variable already exists, or just the creation of the data structure if the key does not exist (in the latter case 1 is returned).</p>\n<p>For an introduction to HyperLogLog data structure check the <a href=\"/commands/pfcount\">PFCOUNT</a> command page.</p>\n<span class=\"anchor\" id=\"return-value\"></span><h2><a class=\"anchor-link\" href=\"#return-value\">*</a>Return value</h2>\n<p><a href=\"/topics/protocol#integer-reply\">Integer reply</a>, specifically:</p>\n<ul>\n<li>1 if at least 1 HyperLogLog internal register was altered. 0 otherwise.</li>\n</ul>\n<span class=\"anchor\" id=\"examples\"></span><h2><a class=\"anchor-link\" href=\"#examples\">*</a>Examples</h2>\n<div class=\"example\" data-session=\"6d7f36be2f62a22ddcde3ed63f013b16\">\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">PFADD hll a b c d e f g</span>\n<pre>(integer) 1</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">PFCOUNT hll</span>\n<pre>(integer) 7</pre><form>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<input autocomplete=\"off\" name=\"command\" spellcheck=\"false\" type=\"text\"/>\n</form></div>\n</div>"}, "PFCOUNT": {"category": "hyperloglog", "help_link": "/commands/pfcount", "args": ["key [key ...]"], "summary": "Return the approximated cardinality of the set(s) observed by the HyperLogLog at key(s).", "name": "PFCOUNT", "help_text": "<div class=\"article-main\">\n<div class=\"metadata\">\n<p><strong>Available since 2.8.9.</strong></p>\n<p><strong>Time complexity:</strong> O(1) with a very small average constant time when called with a single key. O(N) with N being the number of keys, and much bigger constant times, when called with multiple keys.</p>\n</div>\n<p>When called with a single key, returns the approximated cardinality computed by the HyperLogLog data structure stored at the specified variable, which is 0 if the variable does not exist.</p>\n<p>When called with multiple keys, returns the approximated cardinality of the union of the HyperLogLogs passed, by internally merging the HyperLogLogs stored at the provided keys into a temporary HyperLogLog.</p>\n<p>The HyperLogLog data structure can be used in order to count <strong>unique</strong> elements in a set using just a small constant amount of memory, specifically 12k bytes for every HyperLogLog (plus a few bytes for the key itself).</p>\n<p>The returned cardinality of the observed set is not exact, but approximated with a standard error of 0.81%.</p>\n<p>For example in order to take the count of all the unique search queries performed in a day, a program needs to call <a href=\"/commands/pfadd\">PFADD</a> every time a query is processed. The estimated number of unique queries can be retrieved with <a href=\"/commands/pfcount\">PFCOUNT</a> at any time.</p>\n<p>Note: as a side effect of calling this function, it is possible that the HyperLogLog is modified, since the last 8 bytes encode the latest computed cardinality\n              for caching purposes. So <a href=\"/commands/pfcount\">PFCOUNT</a> is technically a write command.</p>\n<span class=\"anchor\" id=\"return-value\"></span><h2><a class=\"anchor-link\" href=\"#return-value\">*</a>Return value</h2>\n<p><a href=\"/topics/protocol#integer-reply\">Integer reply</a>, specifically:</p>\n<ul>\n<li>The approximated number of unique elements observed via <a href=\"/commands/pfadd\">PFADD</a>.</li>\n</ul>\n<span class=\"anchor\" id=\"examples\"></span><h2><a class=\"anchor-link\" href=\"#examples\">*</a>Examples</h2>\n<div class=\"example\" data-session=\"2ede63402eda45517df7bf57da68ef4f\">\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">PFADD hll foo bar zap</span>\n<pre>(integer) 1</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">PFADD hll zap zap zap</span>\n<pre>(integer) 0</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">PFADD hll foo bar</span>\n<pre>(integer) 0</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">PFCOUNT hll</span>\n<pre>(integer) 3</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">PFADD some-other-hll 1 2 3</span>\n<pre>(integer) 1</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">PFCOUNT hll some-other-hll</span>\n<pre>(integer) 6</pre><form>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<input autocomplete=\"off\" name=\"command\" spellcheck=\"false\" type=\"text\"/>\n</form></div>\n<span class=\"anchor\" id=\"performances\"></span><h2><a class=\"anchor-link\" href=\"#performances\">*</a>Performances</h2>\n<p>When <a href=\"/commands/pfcount\">PFCOUNT</a> is called with a single key, performances are excellent even if\n              in theory constant times to process a dense HyperLogLog are high. This is\n              possible because the <a href=\"/commands/pfcount\">PFCOUNT</a> uses caching in order to remember the cardinality\n              previously computed, that rarely changes because most <a href=\"/commands/pfadd\">PFADD</a> operations will\n              not update any register. Hundreds of operations per second are possible.</p>\n<p>When <a href=\"/commands/pfcount\">PFCOUNT</a> is called with multiple keys, an on-the-fly merge of the\n              HyperLogLogs is performed, which is slow, moreover the cardinality of the union\n              can't be cached, so when used with multiple keys <a href=\"/commands/pfcount\">PFCOUNT</a> may take a time in\n              the order of magnitude of the millisecond, and should be not abused.</p>\n<p>The user should take in mind that single-key and multiple-keys executions of\n              this command are semantically different and have different performances.</p>\n<span class=\"anchor\" id=\"hyperloglog-representation\"></span><h2><a class=\"anchor-link\" href=\"#hyperloglog-representation\">*</a>HyperLogLog representation</h2>\n<p>Redis HyperLogLogs are represented using a double representation: the <em>sparse</em> representation suitable for HLLs counting a small number of elements (resulting in a small number of registers set to non-zero value), and a <em>dense</em> representation suitable for higher cardinalities. Redis automatically switches from the sparse to the dense representation when needed.</p>\n<p>The sparse representation uses a run-length encoding optimized to store efficiently a big number of registers set to zero. The dense representation is a Redis string of 12288 bytes in order to store 16384 6-bit counters. The need for the double representation comes from the fact that using 12k (which is the dense representation memory requirement) to encode just a few registers for smaller cardinalities is extremely suboptimal.</p>\n<p>Both representations are prefixed with a 16 bytes header, that includes a magic, an encoding / version field, and the cached cardinality estimation computed, stored in little endian format (the most significant bit is 1 if the estimation is invalid since the HyperLogLog was updated since the cardinality was computed).</p>\n<p>The HyperLogLog, being a Redis string, can be retrieved with <a href=\"/commands/get\">GET</a> and restored with <a href=\"/commands/set\">SET</a>. Calling <a href=\"/commands/pfadd\">PFADD</a>, <a href=\"/commands/pfcount\">PFCOUNT</a> or <a href=\"/commands/pfmerge\">PFMERGE</a> commands with a corrupted HyperLogLog is never a problem, it may return random values but does not affect the stability of the server. Most of the times when corrupting a sparse representation, the server recognizes the corruption and returns an error.</p>\n<p>The representation is neutral from the point of view of the processor word size and endianness, so the same representation is used by 32 bit and 64 bit processor, big endian or little endian.</p>\n<p>More details about the Redis HyperLogLog implementation can be found in <a href=\"http://antirez.com/news/75\">this blog post</a>. The source code of the implementation in the <code>hyperloglog.c</code> file is also easy to read and understand, and includes a full specification for the exact encoding used for the sparse and dense representations.</p>\n</div>"}, "PFMERGE": {"category": "hyperloglog", "help_link": "/commands/pfmerge", "args": ["destkey", "sourcekey [sourcekey ...]"], "summary": "Merge N different HyperLogLogs into a single one.", "name": "PFMERGE", "help_text": "<div class=\"article-main\">\n<div class=\"metadata\">\n<p><strong>Available since 2.8.9.</strong></p>\n<p><strong>Time complexity:</strong> O(N) to merge N HyperLogLogs, but with high constant times.</p>\n</div>\n<p>Merge multiple HyperLogLog values into an unique value that will approximate\n              the cardinality of the union of the observed Sets of the source HyperLogLog\n              structures.</p>\n<p>The computed merged HyperLogLog is set to the destination variable, which is\n              created if does not exist (defaulting to an empty HyperLogLog).</p>\n<span class=\"anchor\" id=\"return-value\"></span><h2><a class=\"anchor-link\" href=\"#return-value\">*</a>Return value</h2>\n<p><a href=\"/topics/protocol#simple-string-reply\">Simple string reply</a>: The command just returns <code>OK</code>.</p>\n<span class=\"anchor\" id=\"examples\"></span><h2><a class=\"anchor-link\" href=\"#examples\">*</a>Examples</h2>\n<div class=\"example\" data-session=\"01057364d5a359d13060e5c8d04ed132\">\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">PFADD hll1 foo bar zap a</span>\n<pre>(integer) 1</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">PFADD hll2 a b c foo</span>\n<pre>(integer) 1</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">PFMERGE hll3 hll1 hll2</span>\n<pre>\"OK\"</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">PFCOUNT hll3</span>\n<pre>(integer) 6</pre><form>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<input autocomplete=\"off\" name=\"command\" spellcheck=\"false\" type=\"text\"/>\n</form></div>\n</div>"}, "PING": {"category": "connection", "help_link": "/commands/ping", "args": ["[message]"], "summary": "Ping the server", "name": "PING", "help_text": "<div class=\"article-main\">\n<div class=\"metadata\">\n<p><strong>Available since 1.0.0.</strong></p>\n</div>\n<p>Returns <code>PONG</code> if no argument is provided, otherwise return a copy of the\n              argument as a bulk.\n              This command is often used to test if a connection is still alive, or to measure\n              latency.</p>\n<p>If the client is subscribed to a channel or a pattern, it will instead return a\n              multi-bulk with a \"pong\" in the first position and an empty bulk in the second\n              position, unless an argument is provided in which case it returns a copy\n              of the argument.</p>\n<span class=\"anchor\" id=\"return-value\"></span><h2><a class=\"anchor-link\" href=\"#return-value\">*</a>Return value</h2>\n<p><a href=\"/topics/protocol#simple-string-reply\">Simple string reply</a></p>\n<span class=\"anchor\" id=\"examples\"></span><h2><a class=\"anchor-link\" href=\"#examples\">*</a>Examples</h2>\n<div class=\"example\" data-session=\"2eebd5f4cb1d368f6cd31e7bcd8d3eac\">\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">PING</span>\n<pre>\"PONG\"</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">PING \"hello world\"</span>\n<pre>\"hello world\"</pre><form>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<input autocomplete=\"off\" name=\"command\" spellcheck=\"false\" type=\"text\"/>\n</form></div>\n</div>"}, "PSETEX": {"category": "string", "help_link": "/commands/psetex", "args": ["key", "milliseconds", "value"], "summary": "Set the value and expiration in milliseconds of a key", "name": "PSETEX", "help_text": "<div class=\"article-main\">\n<div class=\"metadata\">\n<p><strong>Available since 2.6.0.</strong></p>\n<p><strong>Time complexity:</strong> O(1)</p>\n</div>\n<p><a href=\"/commands/psetex\">PSETEX</a> works exactly like <a href=\"/commands/setex\">SETEX</a> with the sole difference that the expire\n              time is specified in milliseconds instead of seconds.</p>\n<span class=\"anchor\" id=\"examples\"></span><h2><a class=\"anchor-link\" href=\"#examples\">*</a>Examples</h2>\n<div class=\"example\" data-session=\"5e74ea4158f79c7ae751a24e1c48b377\">\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">PSETEX mykey 1000 \"Hello\"</span>\n<pre>\"OK\"</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">PTTL mykey</span>\n<pre>(integer) 999</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">GET mykey</span>\n<pre>\"Hello\"</pre><form>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<input autocomplete=\"off\" name=\"command\" spellcheck=\"false\" type=\"text\"/>\n</form></div>\n</div>"}, "PSUBSCRIBE": {"category": "pubsub", "help_link": "/commands/psubscribe", "args": ["pattern [pattern ...]"], "summary": "Listen for messages published to channels matching the given patterns", "name": "PSUBSCRIBE", "help_text": "<div class=\"article-main\">\n<div class=\"metadata\">\n<p><strong>Available since 2.0.0.</strong></p>\n<p><strong>Time complexity:</strong> O(N) where N is the number of patterns the client is already subscribed to.</p>\n</div>\n<p>Subscribes the client to the given patterns.</p>\n<p>Supported glob-style patterns:</p>\n<ul>\n<li><code>h?llo</code> subscribes to <code>hello</code>, <code>hallo</code> and <code>hxllo</code></li>\n<li><code>h*llo</code> subscribes to <code>hllo</code> and <code>heeeello</code></li>\n<li><code>h[ae]llo</code> subscribes to <code>hello</code> and <code>hallo,</code> but not <code>hillo</code></li>\n</ul>\n<p>Use <code>\\</code> to escape special characters if you want to match them verbatim.</p>\n</div>"}, "PUBSUB": {"category": "pubsub", "help_link": "/commands/pubsub", "args": ["subcommand", "[argument [argument ...]]"], "summary": "Inspect the state of the Pub/Sub subsystem", "name": "PUBSUB", "help_text": "<div class=\"article-main\">\n<div class=\"metadata\">\n<p><strong>Available since 2.8.0.</strong></p>\n<p><strong>Time complexity:</strong> O(N) for the CHANNELS subcommand, where N is the number of active channels, and assuming constant time pattern matching (relatively short channels and patterns). O(N) for the NUMSUB subcommand, where N is the number of requested channels. O(1) for the NUMPAT subcommand.</p>\n</div>\n<p>The PUBSUB command is an introspection command that allows to inspect the\n              state of the Pub/Sub subsystem. It is composed of subcommands that are\n              documented separately. The general form is:</p>\n<pre><code>PUBSUB &lt;subcommand&gt; ... args ...\n</code></pre>\n<span class=\"anchor\" id=\"pubsub-channels-pattern\"></span><h1><a class=\"anchor-link\" href=\"#pubsub-channels-pattern\">*</a>PUBSUB CHANNELS [pattern]</h1>\n<p>Lists the currently <em>active channels</em>. An active channel is a Pub/Sub channel\n              with one or more subscribers (not including clients subscribed to patterns).</p>\n<p>If no <code>pattern</code> is specified, all the channels are listed, otherwise if pattern\n              is specified only channels matching the specified glob-style pattern are\n              listed.</p>\n<span class=\"anchor\" id=\"return-value\"></span><h2><a class=\"anchor-link\" href=\"#return-value\">*</a>Return value</h2>\n<p><a href=\"/topics/protocol#array-reply\">Array reply</a>: a list of active channels, optionally matching the specified pattern.</p>\n<span class=\"anchor\" id=\"codepubsub-numsub-channel-1--channel-ncode\"></span><h1><a class=\"anchor-link\" href=\"#codepubsub-numsub-channel-1--channel-ncode\">*</a><code>PUBSUB NUMSUB [channel-1 ... channel-N]</code></h1>\n<p>Returns the number of subscribers (not counting clients subscribed to patterns)\n              for the specified channels.</p>\n<span class=\"anchor\" id=\"return-value\"></span><h2><a class=\"anchor-link\" href=\"#return-value\">*</a>Return value</h2>\n<p><a href=\"/topics/protocol#array-reply\">Array reply</a>: a list of channels and number of subscribers for every channel. The format is channel, count, channel, count, ..., so the list is flat.\n              The order in which the channels are listed is the same as the order of the\n              channels specified in the command call.</p>\n<p>Note that it is valid to call this command without channels. In this case it\n              will just return an empty list.</p>\n<span class=\"anchor\" id=\"codepubsub-numpatcode\"></span><h1><a class=\"anchor-link\" href=\"#codepubsub-numpatcode\">*</a><code>PUBSUB NUMPAT</code></h1>\n<p>Returns the number of subscriptions to patterns (that are performed using the\n              <a href=\"/commands/psubscribe\">PSUBSCRIBE</a> command). Note that this is not just the count of clients subscribed\n              to patterns but the total number of patterns all the clients are subscribed to.</p>\n<span class=\"anchor\" id=\"return-value\"></span><h2><a class=\"anchor-link\" href=\"#return-value\">*</a>Return value</h2>\n<p><a href=\"/topics/protocol#integer-reply\">Integer reply</a>: the number of patterns all the clients are subscribed to.</p>\n</div>"}, "PTTL": {"category": "generic", "help_link": "/commands/pttl", "args": ["key"], "summary": "Get the time to live for a key in milliseconds", "name": "PTTL", "help_text": "<div class=\"article-main\">\n<div class=\"metadata\">\n<p><strong>Available since 2.6.0.</strong></p>\n<p><strong>Time complexity:</strong> O(1)</p>\n</div>\n<p>Like <a href=\"/commands/ttl\">TTL</a> this command returns the remaining time to live of a key that has an\n              expire set, with the sole difference that <a href=\"/commands/ttl\">TTL</a> returns the amount of remaining\n              time in seconds while <a href=\"/commands/pttl\">PTTL</a> returns it in milliseconds.</p>\n<p>In Redis 2.6 or older the command returns <code>-1</code> if the key does not exist or if the key exist but has no associated expire.</p>\n<p>Starting with Redis 2.8 the return value in case of error changed:</p>\n<ul>\n<li>The command returns <code>-2</code> if the key does not exist.</li>\n<li>The command returns <code>-1</code> if the key exists but has no associated expire.</li>\n</ul>\n<span class=\"anchor\" id=\"return-value\"></span><h2><a class=\"anchor-link\" href=\"#return-value\">*</a>Return value</h2>\n<p><a href=\"/topics/protocol#integer-reply\">Integer reply</a>: TTL in milliseconds, or a negative value in order to signal an error (see the description above).</p>\n<span class=\"anchor\" id=\"examples\"></span><h2><a class=\"anchor-link\" href=\"#examples\">*</a>Examples</h2>\n<div class=\"example\" data-session=\"affb78aa55969a22752c11a93310b5c9\">\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">SET mykey \"Hello\"</span>\n<pre>\"OK\"</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">EXPIRE mykey 1</span>\n<pre>(integer) 1</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">PTTL mykey</span>\n<pre>(integer) 999</pre><form>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<input autocomplete=\"off\" name=\"command\" spellcheck=\"false\" type=\"text\"/>\n</form></div>\n</div>"}, "PUBLISH": {"category": "pubsub", "help_link": "/commands/publish", "args": ["channel", "message"], "summary": "Post a message to a channel", "name": "PUBLISH", "help_text": "<div class=\"article-main\">\n<div class=\"metadata\">\n<p><strong>Available since 2.0.0.</strong></p>\n<p><strong>Time complexity:</strong> O(N+M) where N is the number of clients subscribed to the receiving channel and M is the total number of subscribed patterns (by any client).</p>\n</div>\n<p>Posts a message to the given channel.</p>\n<span class=\"anchor\" id=\"return-value\"></span><h2><a class=\"anchor-link\" href=\"#return-value\">*</a>Return value</h2>\n<p><a href=\"/topics/protocol#integer-reply\">Integer reply</a>: the number of clients that received the message.</p>\n</div>"}, "PUNSUBSCRIBE": {"category": "pubsub", "help_link": "/commands/punsubscribe", "args": ["[pattern [pattern ...]]"], "summary": "Stop listening for messages posted to channels matching the given patterns", "name": "PUNSUBSCRIBE", "help_text": "<div class=\"article-main\">\n<div class=\"metadata\">\n<p><strong>Available since 2.0.0.</strong></p>\n<p><strong>Time complexity:</strong> O(N+M) where N is the number of patterns the client is already subscribed and M is the number of total patterns subscribed in the system (by any client).</p>\n</div>\n<p>Unsubscribes the client from the given patterns, or from all of them if none is\n              given.</p>\n<p>When no patterns are specified, the client is unsubscribed from all the\n              previously subscribed patterns.\n              In this case, a message for every unsubscribed pattern will be sent to the\n              client.</p>\n</div>"}, "QUIT": {"category": "connection", "help_link": "/commands/quit", "args": [], "summary": "Close the connection", "name": "QUIT", "help_text": "<div class=\"article-main\">\n<div class=\"metadata\">\n<p><strong>Available since 1.0.0.</strong></p>\n</div>\n<p>Ask the server to close the connection.\n              The connection is closed as soon as all pending replies have been written to the\n              client.</p>\n<span class=\"anchor\" id=\"return-value\"></span><h2><a class=\"anchor-link\" href=\"#return-value\">*</a>Return value</h2>\n<p><a href=\"/topics/protocol#simple-string-reply\">Simple string reply</a>: always OK.</p>\n</div>"}, "RANDOMKEY": {"category": "generic", "help_link": "/commands/randomkey", "args": [], "summary": "Return a random key from the keyspace", "name": "RANDOMKEY", "help_text": "<div class=\"article-main\">\n<div class=\"metadata\">\n<p><strong>Available since 1.0.0.</strong></p>\n<p><strong>Time complexity:</strong> O(1)</p>\n</div>\n<p>Return a random key from the currently selected database.</p>\n<span class=\"anchor\" id=\"return-value\"></span><h2><a class=\"anchor-link\" href=\"#return-value\">*</a>Return value</h2>\n<p><a href=\"/topics/protocol#bulk-string-reply\">Bulk string reply</a>: the random key, or <code>nil</code> when the database is empty.</p>\n</div>"}, "READONLY": {"category": "cluster", "help_link": "/commands/readonly", "args": [], "summary": "Enables read queries for a connection to a cluster replica node", "name": "READONLY", "help_text": "<div class=\"article-main\">\n<div class=\"metadata\">\n<p><strong>Available since 3.0.0.</strong></p>\n<p><strong>Time complexity:</strong> O(1)</p>\n</div>\n<p>Enables read queries for a connection to a Redis Cluster replica node. </p>\n<p>Normally replica nodes will redirect clients to the authoritative master for\n              the hash slot involved in a given command, however clients can use replicas\n              in order to scale reads using the <a href=\"/commands/readonly\">READONLY</a> command.</p>\n<p><a href=\"/commands/readonly\">READONLY</a> tells a Redis Cluster replica node that the client is willing to\n              read possibly stale data and is not interested in running write queries.</p>\n<p>When the connection is in readonly mode, the cluster will send a redirection\n              to the client only if the operation involves keys not served by the replica's\n              master node. This may happen because:</p>\n<ol>\n<li>The client sent a command about hash slots never served by the master of this replica.</li>\n<li>The cluster was reconfigured (for example resharded) and the replica is no longer able to serve commands for a given hash slot.</li>\n</ol>\n<span class=\"anchor\" id=\"return-value\"></span><h2><a class=\"anchor-link\" href=\"#return-value\">*</a>Return value</h2>\n<p><a href=\"/topics/protocol#simple-string-reply\">Simple string reply</a></p>\n</div>"}, "READWRITE": {"category": "cluster", "help_link": "/commands/readwrite", "args": [], "summary": "Disables read queries for a connection to a cluster replica node", "name": "READWRITE", "help_text": "<div class=\"article-main\">\n<div class=\"metadata\">\n<p><strong>Available since 3.0.0.</strong></p>\n<p><strong>Time complexity:</strong> O(1)</p>\n</div>\n<p>Disables read queries for a connection to a Redis Cluster slave node.</p>\n<p>Read queries against a Redis Cluster slave node are disabled by default,\n              but you can use the <a href=\"/commands/readonly\">READONLY</a> command to change this behavior on a per-\n              connection basis. The <a href=\"/commands/readwrite\">READWRITE</a> command resets the readonly mode flag\n              of a connection back to readwrite.</p>\n<span class=\"anchor\" id=\"return-value\"></span><h2><a class=\"anchor-link\" href=\"#return-value\">*</a>Return value</h2>\n<p><a href=\"/topics/protocol#simple-string-reply\">Simple string reply</a></p>\n</div>"}, "RENAME": {"category": "generic", "help_link": "/commands/rename", "args": ["key", "newkey"], "summary": "Rename a key", "name": "RENAME", "help_text": "<div class=\"article-main\">\n<div class=\"metadata\">\n<p><strong>Available since 1.0.0.</strong></p>\n<p><strong>Time complexity:</strong> O(1)</p>\n</div>\n<p>Renames <code>key</code> to <code>newkey</code>.\n              It returns an error when <code>key</code> does not exist.\n              If <code>newkey</code> already exists it is overwritten, when this happens <a href=\"/commands/rename\">RENAME</a> executes an implicit <a href=\"/commands/del\">DEL</a> operation, so if the deleted key contains a very big value it may cause high latency even if <a href=\"/commands/rename\">RENAME</a> itself is usually a constant-time operation.</p>\n<p><strong>Note:</strong> Before Redis 3.2.0, an error is returned if source and destination names are the same.</p>\n<span class=\"anchor\" id=\"return-value\"></span><h2><a class=\"anchor-link\" href=\"#return-value\">*</a>Return value</h2>\n<p><a href=\"/topics/protocol#simple-string-reply\">Simple string reply</a></p>\n<span class=\"anchor\" id=\"examples\"></span><h2><a class=\"anchor-link\" href=\"#examples\">*</a>Examples</h2>\n<div class=\"example\" data-session=\"68af5929a3c719c252c0784ef03f8e22\">\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">SET mykey \"Hello\"</span>\n<pre>\"OK\"</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">RENAME mykey myotherkey</span>\n<pre>\"OK\"</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">GET myotherkey</span>\n<pre>\"Hello\"</pre><form>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<input autocomplete=\"off\" name=\"command\" spellcheck=\"false\" type=\"text\"/>\n</form></div>\n</div>"}, "RENAMENX": {"category": "generic", "help_link": "/commands/renamenx", "args": ["key", "newkey"], "summary": "Rename a key, only if the new key does not exist", "name": "RENAMENX", "help_text": "<div class=\"article-main\">\n<div class=\"metadata\">\n<p><strong>Available since 1.0.0.</strong></p>\n<p><strong>Time complexity:</strong> O(1)</p>\n</div>\n<p>Renames <code>key</code> to <code>newkey</code> if <code>newkey</code> does not yet exist.\n              It returns an error when <code>key</code> does not exist.</p>\n<p><strong>Note:</strong> Before Redis 3.2.0, an error is returned if source and destination names are the same.</p>\n<span class=\"anchor\" id=\"return-value\"></span><h2><a class=\"anchor-link\" href=\"#return-value\">*</a>Return value</h2>\n<p><a href=\"/topics/protocol#integer-reply\">Integer reply</a>, specifically:</p>\n<ul>\n<li><code>1</code> if <code>key</code> was renamed to <code>newkey</code>.</li>\n<li><code>0</code> if <code>newkey</code> already exists.</li>\n</ul>\n<span class=\"anchor\" id=\"examples\"></span><h2><a class=\"anchor-link\" href=\"#examples\">*</a>Examples</h2>\n<div class=\"example\" data-session=\"94a534dc7e419f1b53c167952cdc616d\">\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">SET mykey \"Hello\"</span>\n<pre>\"OK\"</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">SET myotherkey \"World\"</span>\n<pre>\"OK\"</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">RENAMENX mykey myotherkey</span>\n<pre>(integer) 0</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">GET myotherkey</span>\n<pre>\"World\"</pre><form>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<input autocomplete=\"off\" name=\"command\" spellcheck=\"false\" type=\"text\"/>\n</form></div>\n</div>"}, "RESTORE": {"category": "generic", "help_link": "/commands/restore", "args": ["key", "ttl", "serialized-value", "[REPLACE]", "[ABSTTL]", "[IDLETIME seconds]", "[FREQ frequency]"], "summary": "Create a key using the provided serialized value, previously obtained using DUMP.", "name": "RESTORE", "help_text": "<div class=\"article-main\">\n<div class=\"metadata\">\n<p><strong>Available since 2.6.0.</strong></p>\n<p><strong>Time complexity:</strong> O(1) to create the new key and additional O(N*M) to reconstruct the serialized value, where N is the number of Redis objects composing the value and M their average size. For small string values the time complexity is thus O(1)+O(1*M) where M is small, so simply O(1). However for sorted set values the complexity is O(N*M*log(N)) because inserting values into sorted sets is O(log(N)).</p>\n</div>\n<p>Create a key associated with a value that is obtained by deserializing the\n              provided serialized value (obtained via <a href=\"/commands/dump\">DUMP</a>).</p>\n<p>If <code>ttl</code> is 0 the key is created without any expire, otherwise the specified\n              expire time (in milliseconds) is set.</p>\n<p>If the <code>ABSTTL</code> modifier was used, <code>ttl</code> should represent an absolute\n              <a href=\"http://en.wikipedia.org/wiki/Unix_time\">Unix timestamp</a> (in milliseconds) in which the key will expire.\n              (Redis 5.0 or greater).</p>\n<p>For eviction purposes, you may use the <code>IDLETIME</code> or <code>FREQ</code> modifiers. See\n              <a href=\"/commands/object\">OBJECT</a> for more information (Redis 5.0 or greater).</p>\n<p><a href=\"/commands/restore\">RESTORE</a> will return a \"Target key name is busy\" error when <code>key</code> already\n              exists unless you use the <code>REPLACE</code> modifier (Redis 3.0 or greater).</p>\n<p><a href=\"/commands/restore\">RESTORE</a> checks the RDB version and data checksum.\n              If they don't match an error is returned.</p>\n<span class=\"anchor\" id=\"return-value\"></span><h2><a class=\"anchor-link\" href=\"#return-value\">*</a>Return value</h2>\n<p><a href=\"/topics/protocol#simple-string-reply\">Simple string reply</a>: The command returns OK on success.</p>\n<span class=\"anchor\" id=\"examples\"></span><h2><a class=\"anchor-link\" href=\"#examples\">*</a>Examples</h2>\n<pre><code>redis&gt; DEL mykey\n0\nredis&gt; RESTORE mykey 0 \"\\n\\x17\\x17\\x00\\x00\\x00\\x12\\x00\\x00\\x00\\x03\\x00\\\n                        x00\\xc0\\x01\\x00\\x04\\xc0\\x02\\x00\\x04\\xc0\\x03\\x00\\\n                        xff\\x04\\x00u#&lt;\\xc0;.\\xe9\\xdd\"\nOK\nredis&gt; TYPE mykey\nlist\nredis&gt; LRANGE mykey 0 -1\n1) \"1\"\n2) \"2\"\n3) \"3\"\n</code></pre>\n</div>"}, "ROLE": {"category": "server", "help_link": "/commands/role", "args": [], "summary": "Return the role of the instance in the context of replication", "name": "ROLE", "help_text": "<div class=\"article-main\">\n<div class=\"metadata\">\n<p><strong>Available since 2.8.12.</strong></p>\n</div>\n<p>Provide information on the role of a Redis instance in the context of replication, by returning if the instance is currently a <code>master</code>, <code>slave</code>, or <code>sentinel</code>. The command also returns additional information about the state of the replication (if the role is master or slave) or the list of monitored master names (if the role is sentinel).</p>\n<span class=\"anchor\" id=\"output-format\"></span><h2><a class=\"anchor-link\" href=\"#output-format\">*</a>Output format</h2>\n<p>The command returns an array of elements. The first element is the role of\n              the instance, as one of the following three strings:</p>\n<ul>\n<li>\"master\"</li>\n<li>\"slave\"</li>\n<li>\"sentinel\"</li>\n</ul>\n<p>The additional elements of the array depends on the role.</p>\n<span class=\"anchor\" id=\"master-output\"></span><h2><a class=\"anchor-link\" href=\"#master-output\">*</a>Master output</h2>\n<p>An example of output when <a href=\"/commands/role\">ROLE</a> is called in a master instance:</p>\n<pre><code>1) \"master\"\n2) (integer) 3129659\n3) 1) 1) \"127.0.0.1\"\n      2) \"9001\"\n      3) \"3129242\"\n   2) 1) \"127.0.0.1\"\n      2) \"9002\"\n      3) \"3129543\"\n</code></pre>\n<p>The master output is composed of the following parts:</p>\n<ol>\n<li>The string <code>master</code>.</li>\n<li>The current master replication offset, which is an offset that masters and replicas share to understand, in partial resynchronizations, the part of the replication stream the replicas needs to fetch to continue.</li>\n<li>An array composed of three elements array representing the connected replicas. Every sub-array contains the replica IP, port, and the last acknowledged replication offset.</li>\n</ol>\n<span class=\"anchor\" id=\"output-of-the-command-on-replicas\"></span><h2><a class=\"anchor-link\" href=\"#output-of-the-command-on-replicas\">*</a>Output of the command on replicas</h2>\n<p>An example of output when <a href=\"/commands/role\">ROLE</a> is called in a replica instance:</p>\n<pre><code>1) \"slave\"\n2) \"127.0.0.1\"\n3) (integer) 9000\n4) \"connected\"\n5) (integer) 3167038\n</code></pre>\n<p>The replica output is composed of the following parts:</p>\n<ol>\n<li>The string <code>slave</code>, because of backward compatbility (see note at the end of this page).</li>\n<li>The IP of the master.</li>\n<li>The port number of the master.</li>\n<li>The state of the replication from the point of view of the master, that can be <code>connect</code> (the instance needs to connect to its master), <code>connecting</code> (the master-replica connection is in progress), <code>sync</code> (the master and replica are trying to perform the synchronization), <code>connected</code> (the replica is online).</li>\n<li>The amount of data received from the replica so far in terms of master replication offset.</li>\n</ol>\n<span class=\"anchor\" id=\"sentinel-output\"></span><h2><a class=\"anchor-link\" href=\"#sentinel-output\">*</a>Sentinel output</h2>\n<p>An example of Sentinel output:</p>\n<pre><code>1) \"sentinel\"\n2) 1) \"resque-master\"\n   2) \"html-fragments-master\"\n   3) \"stats-master\"\n   4) \"metadata-master\"\n</code></pre>\n<p>The sentinel output is composed of the following parts:</p>\n<ol>\n<li>The string <code>sentinel</code>.</li>\n<li>An array of master names monitored by this Sentinel instance.</li>\n</ol>\n<span class=\"anchor\" id=\"return-value\"></span><h2><a class=\"anchor-link\" href=\"#return-value\">*</a>Return value</h2>\n<p><a href=\"/topics/protocol#array-reply\">Array reply</a>: where the first element is one of <code>master</code>, <code>slave</code>, <code>sentinel</code> and the additional elements are role-specific as illustrated above.</p>\n<span class=\"anchor\" id=\"history\"></span><h2><a class=\"anchor-link\" href=\"#history\">*</a>History</h2>\n<ul>\n<li>This command was introduced in the middle of a Redis stable release, specifically with Redis 2.8.12.</li>\n</ul>\n<span class=\"anchor\" id=\"examples\"></span><h2><a class=\"anchor-link\" href=\"#examples\">*</a>Examples</h2>\n<div class=\"example\" data-session=\"bb87dd326a39da30c77445b52cdc690a\">\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">ROLE</span>\n<pre>1) \"master\"\n2) (integer) 0\n3) (empty list or set)</pre><form>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<input autocomplete=\"off\" name=\"command\" spellcheck=\"false\" type=\"text\"/>\n</form></div>\n<p><strong>A note about the word slave used in this man page</strong>: Starting with Redis 5, if not for backward compatibility, the Redis project no longer uses the word slave. Unfortunately in this command the word slave is part of the protocol, so we'll be able to remove such occurrences only when this API will be naturally deprecated.</p>\n</div>"}, "RPOP": {"category": "list", "help_link": "/commands/rpop", "args": ["key"], "summary": "Remove and get the last element in a list", "name": "RPOP", "help_text": "<div class=\"article-main\">\n<div class=\"metadata\">\n<p><strong>Available since 1.0.0.</strong></p>\n<p><strong>Time complexity:</strong> O(1)</p>\n</div>\n<p>Removes and returns the last element of the list stored at <code>key</code>.</p>\n<span class=\"anchor\" id=\"return-value\"></span><h2><a class=\"anchor-link\" href=\"#return-value\">*</a>Return value</h2>\n<p><a href=\"/topics/protocol#bulk-string-reply\">Bulk string reply</a>: the value of the last element, or <code>nil</code> when <code>key</code> does not exist.</p>\n<span class=\"anchor\" id=\"examples\"></span><h2><a class=\"anchor-link\" href=\"#examples\">*</a>Examples</h2>\n<div class=\"example\" data-session=\"aca0901f38979760544f46cecfc68b45\">\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">RPUSH mylist \"one\"</span>\n<pre>(integer) 1</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">RPUSH mylist \"two\"</span>\n<pre>(integer) 2</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">RPUSH mylist \"three\"</span>\n<pre>(integer) 3</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">RPOP mylist</span>\n<pre>\"three\"</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">LRANGE mylist 0 -1</span>\n<pre>1) \"one\"\n2) \"two\"</pre><form>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<input autocomplete=\"off\" name=\"command\" spellcheck=\"false\" type=\"text\"/>\n</form></div>\n</div>"}, "RPOPLPUSH": {"category": "list", "help_link": "/commands/rpoplpush", "args": ["source", "destination"], "summary": "Remove the last element in a list, prepend it to another list and return it", "name": "RPOPLPUSH", "help_text": "<div class=\"article-main\">\n<div class=\"metadata\">\n<p><strong>Available since 1.2.0.</strong></p>\n<p><strong>Time complexity:</strong> O(1)</p>\n</div>\n<p>Atomically returns and removes the last element (tail) of the list stored at\n              <code>source</code>, and pushes the element at the first element (head) of the list stored\n              at <code>destination</code>.</p>\n<p>For example: consider <code>source</code> holding the list <code>a,b,c</code>, and <code>destination</code>\n              holding the list <code>x,y,z</code>.\n              Executing <a href=\"/commands/rpoplpush\">RPOPLPUSH</a> results in <code>source</code> holding <code>a,b</code> and <code>destination</code>\n              holding <code>c,x,y,z</code>.</p>\n<p>If <code>source</code> does not exist, the value <code>nil</code> is returned and no operation is\n              performed.\n              If <code>source</code> and <code>destination</code> are the same, the operation is equivalent to\n              removing the last element from the list and pushing it as first element of the\n              list, so it can be considered as a list rotation command.</p>\n<span class=\"anchor\" id=\"return-value\"></span><h2><a class=\"anchor-link\" href=\"#return-value\">*</a>Return value</h2>\n<p><a href=\"/topics/protocol#bulk-string-reply\">Bulk string reply</a>: the element being popped and pushed.</p>\n<span class=\"anchor\" id=\"examples\"></span><h2><a class=\"anchor-link\" href=\"#examples\">*</a>Examples</h2>\n<div class=\"example\" data-session=\"97cf3a4634996eee3afa5f0112e8f298\">\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">RPUSH mylist \"one\"</span>\n<pre>(integer) 1</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">RPUSH mylist \"two\"</span>\n<pre>(integer) 2</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">RPUSH mylist \"three\"</span>\n<pre>(integer) 3</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">RPOPLPUSH mylist myotherlist</span>\n<pre>\"three\"</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">LRANGE mylist 0 -1</span>\n<pre>1) \"one\"\n2) \"two\"</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">LRANGE myotherlist 0 -1</span>\n<pre>1) \"three\"</pre><form>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<input autocomplete=\"off\" name=\"command\" spellcheck=\"false\" type=\"text\"/>\n</form></div>\n<span class=\"anchor\" id=\"pattern-reliable-queue\"></span><h2><a class=\"anchor-link\" href=\"#pattern-reliable-queue\">*</a>Pattern: Reliable queue</h2>\n<p>Redis is often used as a messaging server to implement processing of background\n              jobs or other kinds of messaging tasks.\n              A simple form of queue is often obtained pushing values into a list in the\n              producer side, and waiting for this values in the consumer side using <a href=\"/commands/rpop\">RPOP</a>\n              (using polling), or <a href=\"/commands/brpop\">BRPOP</a> if the client is better served by a blocking\n              operation.</p>\n<p>However in this context the obtained queue is not <em>reliable</em> as messages can\n              be lost, for example in the case there is a network problem or if the consumer\n              crashes just after the message is received but it is still to process.</p>\n<p><a href=\"/commands/rpoplpush\">RPOPLPUSH</a> (or <a href=\"/commands/brpoplpush\">BRPOPLPUSH</a> for the blocking variant) offers a way to avoid\n              this problem: the consumer fetches the message and at the same time pushes it\n              into a <em>processing</em> list.\n              It will use the <a href=\"/commands/lrem\">LREM</a> command in order to remove the message from the\n              <em>processing</em> list once the message has been processed.</p>\n<p>An additional client may monitor the <em>processing</em> list for items that remain\n              there for too much time, and will push those timed out items into the queue\n              again if needed.</p>\n<span class=\"anchor\" id=\"pattern-circular-list\"></span><h2><a class=\"anchor-link\" href=\"#pattern-circular-list\">*</a>Pattern: Circular list</h2>\n<p>Using <a href=\"/commands/rpoplpush\">RPOPLPUSH</a> with the same source and destination key, a client can visit\n              all the elements of an N-elements list, one after the other, in <span class=\"math\">O(N) </span>without\n              transferring the full list from the server to the client using a single <a href=\"/commands/lrange\">LRANGE</a>\n              operation.</p>\n<p>The above pattern works even if the following two conditions:</p>\n<ul>\n<li>There are multiple clients rotating the list: they'll fetch different \n              elements, until all the elements of the list are visited, and the process \n              restarts.</li>\n<li>Even if other clients are actively pushing new items at the end of the list.</li>\n</ul>\n<p>The above makes it very simple to implement a system where a set of items must\n              be processed by N workers continuously as fast as possible.\n              An example is a monitoring system that must check that a set of web sites are\n              reachable, with the smallest delay possible, using a number of parallel workers.</p>\n<p>Note that this implementation of workers is trivially scalable and reliable,\n              because even if a message is lost the item is still in the queue and will be\n              processed at the next iteration.</p>\n</div>"}, "RPUSH": {"category": "list", "help_link": "/commands/rpush", "args": ["key", "element [element ...]"], "summary": "Append one or multiple elements to a list", "name": "RPUSH", "help_text": "<div class=\"article-main\">\n<div class=\"metadata\">\n<p><strong>Available since 1.0.0.</strong></p>\n<p><strong>Time complexity:</strong> O(1) for each element added, so O(N) to add N elements when the command is called with multiple arguments.</p>\n</div>\n<p>Insert all the specified values at the tail of the list stored at <code>key</code>.\n              If <code>key</code> does not exist, it is created as empty list before performing the push\n              operation.\n              When <code>key</code> holds a value that is not a list, an error is returned.</p>\n<p>It is possible to push multiple elements using a single command call just\n              specifying multiple arguments at the end of the command.\n              Elements are inserted one after the other to the tail of the list, from the\n              leftmost element to the rightmost element.\n              So for instance the command <code>RPUSH mylist a b c</code> will result into a list\n              containing <code>a</code> as first element, <code>b</code> as second element and <code>c</code> as third element.</p>\n<span class=\"anchor\" id=\"return-value\"></span><h2><a class=\"anchor-link\" href=\"#return-value\">*</a>Return value</h2>\n<p><a href=\"/topics/protocol#integer-reply\">Integer reply</a>: the length of the list after the push operation.</p>\n<span class=\"anchor\" id=\"history\"></span><h2><a class=\"anchor-link\" href=\"#history\">*</a>History</h2>\n<ul>\n<li><code>&gt;= 2.4</code>: Accepts multiple <code>value</code> arguments.\n              In Redis versions older than 2.4 it was possible to push a single value per\n              command.</li>\n</ul>\n<span class=\"anchor\" id=\"examples\"></span><h2><a class=\"anchor-link\" href=\"#examples\">*</a>Examples</h2>\n<div class=\"example\" data-session=\"e2d9ba806c32dd1dd6b2916e681384f3\">\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">RPUSH mylist \"hello\"</span>\n<pre>(integer) 1</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">RPUSH mylist \"world\"</span>\n<pre>(integer) 2</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">LRANGE mylist 0 -1</span>\n<pre>1) \"hello\"\n2) \"world\"</pre><form>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<input autocomplete=\"off\" name=\"command\" spellcheck=\"false\" type=\"text\"/>\n</form></div>\n</div>"}, "RPUSHX": {"category": "list", "help_link": "/commands/rpushx", "args": ["key", "element"], "summary": "Append an element to a list, only if the list exists", "name": "RPUSHX", "help_text": "<div class=\"article-main\">\n<div class=\"metadata\">\n<p><strong>Available since 2.2.0.</strong></p>\n<p><strong>Time complexity:</strong> O(1) for each element added, so O(N) to add N elements when the command is called with multiple arguments.</p>\n</div>\n<p>Inserts <code>value</code> at the tail of the list stored at <code>key</code>, only if <code>key</code> already\n              exists and holds a list.\n              In contrary to <a href=\"/commands/rpush\">RPUSH</a>, no operation will be performed when <code>key</code> does not yet\n              exist.</p>\n<span class=\"anchor\" id=\"return-value\"></span><h2><a class=\"anchor-link\" href=\"#return-value\">*</a>Return value</h2>\n<p><a href=\"/topics/protocol#integer-reply\">Integer reply</a>: the length of the list after the push operation.</p>\n<span class=\"anchor\" id=\"examples\"></span><h2><a class=\"anchor-link\" href=\"#examples\">*</a>Examples</h2>\n<div class=\"example\" data-session=\"6757ace0d7d1eaf540f99407b99d2362\">\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">RPUSH mylist \"Hello\"</span>\n<pre>(integer) 1</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">RPUSHX mylist \"World\"</span>\n<pre>(integer) 2</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">RPUSHX myotherlist \"World\"</span>\n<pre>(integer) 0</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">LRANGE mylist 0 -1</span>\n<pre>1) \"Hello\"\n2) \"World\"</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">LRANGE myotherlist 0 -1</span>\n<pre>(empty list or set)</pre><form>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<input autocomplete=\"off\" name=\"command\" spellcheck=\"false\" type=\"text\"/>\n</form></div>\n</div>"}, "SADD": {"category": "set", "help_link": "/commands/sadd", "args": ["key", "member [member ...]"], "summary": "Add one or more members to a set", "name": "SADD", "help_text": "<div class=\"article-main\">\n<div class=\"metadata\">\n<p><strong>Available since 1.0.0.</strong></p>\n<p><strong>Time complexity:</strong> O(1) for each element added, so O(N) to add N elements when the command is called with multiple arguments.</p>\n</div>\n<p>Add the specified members to the set stored at <code>key</code>.\n              Specified members that are already a member of this set are ignored.\n              If <code>key</code> does not exist, a new set is created before adding the specified\n              members.</p>\n<p>An error is returned when the value stored at <code>key</code> is not a set.</p>\n<span class=\"anchor\" id=\"return-value\"></span><h2><a class=\"anchor-link\" href=\"#return-value\">*</a>Return value</h2>\n<p><a href=\"/topics/protocol#integer-reply\">Integer reply</a>: the number of elements that were added to the set, not including\n              all the elements already present into the set.</p>\n<span class=\"anchor\" id=\"history\"></span><h2><a class=\"anchor-link\" href=\"#history\">*</a>History</h2>\n<ul>\n<li><code>&gt;= 2.4</code>: Accepts multiple <code>member</code> arguments.\n              Redis versions before 2.4 are only able to add a single member per call.</li>\n</ul>\n<span class=\"anchor\" id=\"examples\"></span><h2><a class=\"anchor-link\" href=\"#examples\">*</a>Examples</h2>\n<div class=\"example\" data-session=\"da717f73a5dc22eb0d41388cbd261619\">\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">SADD myset \"Hello\"</span>\n<pre>(integer) 1</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">SADD myset \"World\"</span>\n<pre>(integer) 1</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">SADD myset \"World\"</span>\n<pre>(integer) 0</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">SMEMBERS myset</span>\n<pre>1) \"Hello\"\n2) \"World\"</pre><form>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<input autocomplete=\"off\" name=\"command\" spellcheck=\"false\" type=\"text\"/>\n</form></div>\n</div>"}, "SAVE": {"category": "server", "help_link": "/commands/save", "args": [], "summary": "Synchronously save the dataset to disk", "name": "SAVE", "help_text": "<div class=\"article-main\">\n<div class=\"metadata\">\n<p><strong>Available since 1.0.0.</strong></p>\n</div>\n<p>The <a href=\"/commands/save\">SAVE</a> commands performs a <strong>synchronous</strong> save of the dataset producing a\n              <em>point in time</em> snapshot of all the data inside the Redis instance, in the form\n              of an RDB file.</p>\n<p>You almost never want to call <a href=\"/commands/save\">SAVE</a> in production environments where it will\n              block all the other clients.\n              Instead usually <a href=\"/commands/bgsave\">BGSAVE</a> is used.\n              However in case of issues preventing Redis to create the background saving child\n              (for instance errors in the fork(2) system call), the <a href=\"/commands/save\">SAVE</a> command can be a\n              good last resort to perform the dump of the latest dataset.</p>\n<p>Please refer to the <a href=\"/topics/persistence\">persistence documentation</a> for detailed information.</p>\n<span class=\"anchor\" id=\"return-value\"></span><h2><a class=\"anchor-link\" href=\"#return-value\">*</a>Return value</h2>\n<p><a href=\"/topics/protocol#simple-string-reply\">Simple string reply</a>: The commands returns OK on success.</p>\n</div>"}, "SCARD": {"category": "set", "help_link": "/commands/scard", "args": ["key"], "summary": "Get the number of members in a set", "name": "SCARD", "help_text": "<div class=\"article-main\">\n<div class=\"metadata\">\n<p><strong>Available since 1.0.0.</strong></p>\n<p><strong>Time complexity:</strong> O(1)</p>\n</div>\n<p>Returns the set cardinality (number of elements) of the set stored at <code>key</code>.</p>\n<span class=\"anchor\" id=\"return-value\"></span><h2><a class=\"anchor-link\" href=\"#return-value\">*</a>Return value</h2>\n<p><a href=\"/topics/protocol#integer-reply\">Integer reply</a>: the cardinality (number of elements) of the set, or <code>0</code> if <code>key</code>\n              does not exist.</p>\n<span class=\"anchor\" id=\"examples\"></span><h2><a class=\"anchor-link\" href=\"#examples\">*</a>Examples</h2>\n<div class=\"example\" data-session=\"4b91f5f031d377b2a9b00585550a3eb5\">\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">SADD myset \"Hello\"</span>\n<pre>(integer) 1</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">SADD myset \"World\"</span>\n<pre>(integer) 1</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">SCARD myset</span>\n<pre>(integer) 2</pre><form>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<input autocomplete=\"off\" name=\"command\" spellcheck=\"false\" type=\"text\"/>\n</form></div>\n</div>"}, "SCRIPT DEBUG": {"category": "scripting", "help_link": "/commands/script-debug", "args": ["YES|SYNC|NO"], "summary": "Set the debug mode for executed scripts.", "name": "SCRIPT DEBUG", "help_text": "<div class=\"article-main\">\n<div class=\"metadata\">\n<p><strong>Available since 3.2.0.</strong></p>\n<p><strong>Time complexity:</strong> O(1)</p>\n</div>\n<p>Set the debug mode for subsequent scripts executed with <a href=\"/commands/eval\">EVAL</a>. Redis includes a\n              complete Lua debugger, codename LDB, that can be used to make the task of\n              writing complex scripts much simpler. In debug mode Redis acts as a remote\n              debugging server and a client, such as <code>redis-cli</code>, can execute scripts step by\n              step, set breakpoints, inspect variables and more - for additional information\n              about LDB refer to the <a href=\"/topics/ldb\">Redis Lua debugger</a> page.</p>\n<p><strong>Important note:</strong> avoid debugging Lua scripts using your Redis production\n              server. Use a development server instead.</p>\n<p>LDB can be enabled in one of two modes: asynchronous or synchronous. In\n              asynchronous mode the server creates a forked debugging session that does not\n              block and all changes to the data are <strong>rolled back</strong> after the session\n              finishes, so debugging can be restarted using the same initial state. The\n              alternative synchronous debug mode blocks the server while the debugging session\n              is active and retains all changes to the data set once it ends.</p>\n<ul>\n<li><code>YES</code>. Enable non-blocking asynchronous debugging of Lua scripts (changes are discarded).</li>\n<li><a href=\"/commands/sync\">SYNC</a>. Enable blocking synchronous debugging of Lua scripts (saves changes to data).</li>\n<li><code>NO</code>. Disables scripts debug mode.</li>\n</ul>\n<span class=\"anchor\" id=\"return-value\"></span><h2><a class=\"anchor-link\" href=\"#return-value\">*</a>Return value</h2>\n<p><a href=\"/topics/protocol#simple-string-reply\">Simple string reply</a>: <code>OK</code>.</p>\n</div>"}, "SCRIPT EXISTS": {"category": "scripting", "help_link": "/commands/script-exists", "args": ["sha1 [sha1 ...]"], "summary": "Check existence of scripts in the script cache.", "name": "SCRIPT EXISTS", "help_text": "<div class=\"article-main\">\n<div class=\"metadata\">\n<p><strong>Available since 2.6.0.</strong></p>\n<p><strong>Time complexity:</strong> O(N) with N being the number of scripts to check (so checking a single script is an O(1) operation).</p>\n</div>\n<p>Returns information about the existence of the scripts in the script cache.</p>\n<p>This command accepts one or more SHA1 digests and returns a list of ones or\n              zeros to signal if the scripts are already defined or not inside the script\n              cache.\n              This can be useful before a pipelining operation to ensure that scripts are\n              loaded (and if not, to load them using <a href=\"/commands/script-load\">SCRIPT LOAD</a>) so that the pipelining\n              operation can be performed solely using <a href=\"/commands/evalsha\">EVALSHA</a> instead of <a href=\"/commands/eval\">EVAL</a> to save\n              bandwidth.</p>\n<p>Please refer to the <a href=\"/commands/eval\">EVAL</a> documentation for detailed information about Redis\n              Lua scripting.</p>\n<span class=\"anchor\" id=\"return-value\"></span><h2><a class=\"anchor-link\" href=\"#return-value\">*</a>Return value</h2>\n<p><a href=\"/topics/protocol#array-reply\">Array reply</a> The command returns an array of integers that correspond to\n              the specified SHA1 digest arguments.\n              For every corresponding SHA1 digest of a script that actually exists in the\n              script cache, an 1 is returned, otherwise 0 is returned.</p>\n</div>"}, "SCRIPT FLUSH": {"category": "scripting", "help_link": "/commands/script-flush", "args": [], "summary": "Remove all the scripts from the script cache.", "name": "SCRIPT FLUSH", "help_text": "<div class=\"article-main\">\n<div class=\"metadata\">\n<p><strong>Available since 2.6.0.</strong></p>\n<p><strong>Time complexity:</strong> O(N) with N being the number of scripts in cache</p>\n</div>\n<p>Flush the Lua scripts cache.</p>\n<p>Please refer to the <a href=\"/commands/eval\">EVAL</a> documentation for detailed information about Redis\n              Lua scripting.</p>\n<span class=\"anchor\" id=\"return-value\"></span><h2><a class=\"anchor-link\" href=\"#return-value\">*</a>Return value</h2>\n<p><a href=\"/topics/protocol#simple-string-reply\">Simple string reply</a></p>\n</div>"}, "SCRIPT KILL": {"category": "scripting", "help_link": "/commands/script-kill", "args": [], "summary": "Kill the script currently in execution.", "name": "SCRIPT KILL", "help_text": "<div class=\"article-main\">\n<div class=\"metadata\">\n<p><strong>Available since 2.6.0.</strong></p>\n<p><strong>Time complexity:</strong> O(1)</p>\n</div>\n<p>Kills the currently executing Lua script, assuming no write operation was yet\n              performed by the script.</p>\n<p>This command is mainly useful to kill a script that is running for too much\n              time(for instance because it entered an infinite loop because of a bug).\n              The script will be killed and the client currently blocked into EVAL will see\n              the command returning with an error.</p>\n<p>If the script already performed write operations it can not be killed in this\n              way because it would violate Lua script atomicity contract.\n              In such a case only <code>SHUTDOWN NOSAVE</code> is able to kill the script, killing\n              the Redis process in an hard way preventing it to persist with half-written\n              information.</p>\n<p>Please refer to the <a href=\"/commands/eval\">EVAL</a> documentation for detailed information about Redis\n              Lua scripting.</p>\n<span class=\"anchor\" id=\"return-value\"></span><h2><a class=\"anchor-link\" href=\"#return-value\">*</a>Return value</h2>\n<p><a href=\"/topics/protocol#simple-string-reply\">Simple string reply</a></p>\n</div>"}, "SCRIPT LOAD": {"category": "scripting", "help_link": "/commands/script-load", "args": ["script"], "summary": "Load the specified Lua script into the script cache.", "name": "SCRIPT LOAD", "help_text": "<div class=\"article-main\">\n<div class=\"metadata\">\n<p><strong>Available since 2.6.0.</strong></p>\n<p><strong>Time complexity:</strong> O(N) with N being the length in bytes of the script body.</p>\n</div>\n<p>Load a script into the scripts cache, without executing it.\n              After the specified command is loaded into the script cache it will be callable\n              using <a href=\"/commands/evalsha\">EVALSHA</a> with the correct SHA1 digest of the script, exactly like after\n              the first successful invocation of <a href=\"/commands/eval\">EVAL</a>.</p>\n<p>The script is guaranteed to stay in the script cache forever (unless <code>SCRIPT\nFLUSH</code> is called).</p>\n<p>The command works in the same way even if the script was already present in the\n              script cache.</p>\n<p>Please refer to the <a href=\"/commands/eval\">EVAL</a> documentation for detailed information about Redis\n              Lua scripting.</p>\n<span class=\"anchor\" id=\"return-value\"></span><h2><a class=\"anchor-link\" href=\"#return-value\">*</a>Return value</h2>\n<p><a href=\"/topics/protocol#bulk-string-reply\">Bulk string reply</a> This command returns the SHA1 digest of the script added into the\n              script cache.</p>\n</div>"}, "SDIFF": {"category": "set", "help_link": "/commands/sdiff", "args": ["key [key ...]"], "summary": "Subtract multiple sets", "name": "SDIFF", "help_text": "<div class=\"article-main\">\n<div class=\"metadata\">\n<p><strong>Available since 1.0.0.</strong></p>\n<p><strong>Time complexity:</strong> O(N) where N is the total number of elements in all given sets.</p>\n</div>\n<p>Returns the members of the set resulting from the difference between the first\n              set and all the successive sets.</p>\n<p>For example:</p>\n<pre><code>key1 = {a,b,c,d}\nkey2 = {c}\nkey3 = {a,c,e}\nSDIFF key1 key2 key3 = {b,d}\n</code></pre>\n<p>Keys that do not exist are considered to be empty sets.</p>\n<span class=\"anchor\" id=\"return-value\"></span><h2><a class=\"anchor-link\" href=\"#return-value\">*</a>Return value</h2>\n<p><a href=\"/topics/protocol#array-reply\">Array reply</a>: list with members of the resulting set.</p>\n<span class=\"anchor\" id=\"examples\"></span><h2><a class=\"anchor-link\" href=\"#examples\">*</a>Examples</h2>\n<div class=\"example\" data-session=\"8686c0199d8dd216413a86a79a5d5b5f\">\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">SADD key1 \"a\"</span>\n<pre>(integer) 1</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">SADD key1 \"b\"</span>\n<pre>(integer) 1</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">SADD key1 \"c\"</span>\n<pre>(integer) 1</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">SADD key2 \"c\"</span>\n<pre>(integer) 1</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">SADD key2 \"d\"</span>\n<pre>(integer) 1</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">SADD key2 \"e\"</span>\n<pre>(integer) 1</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">SDIFF key1 key2</span>\n<pre>1) \"a\"\n2) \"b\"</pre><form>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<input autocomplete=\"off\" name=\"command\" spellcheck=\"false\" type=\"text\"/>\n</form></div>\n</div>"}, "SDIFFSTORE": {"category": "set", "help_link": "/commands/sdiffstore", "args": ["destination", "key [key ...]"], "summary": "Subtract multiple sets and store the resulting set in a key", "name": "SDIFFSTORE", "help_text": "<div class=\"article-main\">\n<div class=\"metadata\">\n<p><strong>Available since 1.0.0.</strong></p>\n<p><strong>Time complexity:</strong> O(N) where N is the total number of elements in all given sets.</p>\n</div>\n<p>This command is equal to <a href=\"/commands/sdiff\">SDIFF</a>, but instead of returning the resulting set, it\n              is stored in <code>destination</code>.</p>\n<p>If <code>destination</code> already exists, it is overwritten.</p>\n<span class=\"anchor\" id=\"return-value\"></span><h2><a class=\"anchor-link\" href=\"#return-value\">*</a>Return value</h2>\n<p><a href=\"/topics/protocol#integer-reply\">Integer reply</a>: the number of elements in the resulting set.</p>\n<span class=\"anchor\" id=\"examples\"></span><h2><a class=\"anchor-link\" href=\"#examples\">*</a>Examples</h2>\n<div class=\"example\" data-session=\"9d362e2230e9309c8f0e6ff9a692d50d\">\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">SADD key1 \"a\"</span>\n<pre>(integer) 1</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">SADD key1 \"b\"</span>\n<pre>(integer) 1</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">SADD key1 \"c\"</span>\n<pre>(integer) 1</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">SADD key2 \"c\"</span>\n<pre>(integer) 1</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">SADD key2 \"d\"</span>\n<pre>(integer) 1</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">SADD key2 \"e\"</span>\n<pre>(integer) 1</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">SDIFFSTORE key key1 key2</span>\n<pre>(integer) 2</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">SMEMBERS key</span>\n<pre>1) \"a\"\n2) \"b\"</pre><form>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<input autocomplete=\"off\" name=\"command\" spellcheck=\"false\" type=\"text\"/>\n</form></div>\n</div>"}, "SELECT": {"category": "connection", "help_link": "/commands/select", "args": ["index"], "summary": "Change the selected database for the current connection", "name": "SELECT", "help_text": "<div class=\"article-main\">\n<div class=\"metadata\">\n<p><strong>Available since 1.0.0.</strong></p>\n</div>\n<p>Select the Redis logical database having the specified zero-based numeric index.\n              New connections always use the database 0.</p>\n<p>Selectable Redis databases are a form of namespacing: all databases are still persisted in the same RDB / AOF file. However different databases can have keys with the same name, and commands like <a href=\"/commands/flushdb\">FLUSHDB</a>, <a href=\"/commands/swapdb\">SWAPDB</a> or <a href=\"/commands/randomkey\">RANDOMKEY</a> work on specific databases.</p>\n<p>In practical terms, Redis databases should be used to separate different keys belonging to the same application (if needed), and not to use a single Redis instance for multiple unrelated applications.</p>\n<p>When using Redis Cluster, the <a href=\"/commands/select\">SELECT</a> command cannot be used, since Redis Cluster only supports database zero. In the case of a Redis Cluster, having multiple databases would be useless and an unnecessary source of complexity. Commands operating atomically on a single database would not be possible with the Redis Cluster design and goals.</p>\n<p>Since the currently selected database is a property of the connection, clients should track the currently selected database and re-select it on reconnection. While there is no command in order to query the selected database in the current connection, the <a href=\"/commands/client-list\">CLIENT LIST</a> output shows, for each client, the currently selected database.</p>\n<span class=\"anchor\" id=\"return-value\"></span><h2><a class=\"anchor-link\" href=\"#return-value\">*</a>Return value</h2>\n<p><a href=\"/topics/protocol#simple-string-reply\">Simple string reply</a></p>\n</div>"}, "SET": {"category": "string", "help_link": "/commands/set", "args": ["key", "value", "[EX seconds|PX milliseconds]", "[NX|XX]"], "summary": "Set the string value of a key", "name": "SET", "help_text": "<div class=\"article-main\">\n<div class=\"metadata\">\n<p><strong>Available since 1.0.0.</strong></p>\n<p><strong>Time complexity:</strong> O(1)</p>\n</div>\n<p>Set <code>key</code> to hold the string <code>value</code>.\n              If <code>key</code> already holds a value, it is overwritten, regardless of its type.\n              Any previous time to live associated with the key is discarded on successful <a href=\"/commands/set\">SET</a> operation.</p>\n<span class=\"anchor\" id=\"options\"></span><h2><a class=\"anchor-link\" href=\"#options\">*</a>Options</h2>\n<p>Starting with Redis 2.6.12 <a href=\"/commands/set\">SET</a> supports a set of options that modify its\n              behavior:</p>\n<ul>\n<li><code>EX</code> <em>seconds</em> -- Set the specified expire time, in seconds.</li>\n<li><code>PX</code> <em>milliseconds</em> -- Set the specified expire time, in milliseconds.</li>\n<li><code>NX</code> -- Only set the key if it does not already exist.</li>\n<li><code>XX</code> -- Only set the key if it already exist.</li>\n</ul>\n<p>Note: Since the <a href=\"/commands/set\">SET</a> command options can replace <a href=\"/commands/setnx\">SETNX</a>, <a href=\"/commands/setex\">SETEX</a>, <a href=\"/commands/psetex\">PSETEX</a>, it is possible that in future versions of Redis these three commands will be deprecated and finally removed.</p>\n<span class=\"anchor\" id=\"return-value\"></span><h2><a class=\"anchor-link\" href=\"#return-value\">*</a>Return value</h2>\n<p><a href=\"/topics/protocol#simple-string-reply\">Simple string reply</a>: <code>OK</code> if <a href=\"/commands/set\">SET</a> was executed correctly.\n              <a href=\"/topics/protocol#nil-reply\">Null reply</a>: a Null Bulk Reply is returned if the <a href=\"/commands/set\">SET</a> operation was not performed because the user specified the <code>NX</code> or <code>XX</code> option but the condition was not met.</p>\n<span class=\"anchor\" id=\"examples\"></span><h2><a class=\"anchor-link\" href=\"#examples\">*</a>Examples</h2>\n<div class=\"example\" data-session=\"12f46dea7d6693b8c74a9cbc2fb8107b\">\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">SET mykey \"Hello\"</span>\n<pre>\"OK\"</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">GET mykey</span>\n<pre>\"Hello\"</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">SET anotherkey \"will expire in a minute\" EX 60</span>\n<pre>\"OK\"</pre><form>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<input autocomplete=\"off\" name=\"command\" spellcheck=\"false\" type=\"text\"/>\n</form></div>\n<span class=\"anchor\" id=\"patterns\"></span><h2><a class=\"anchor-link\" href=\"#patterns\">*</a>Patterns</h2>\n<p><strong>Note:</strong> The following pattern is discouraged in favor of <a href=\"http://redis.io/topics/distlock\">the Redlock algorithm</a> which is only a bit more complex to implement, but offers better guarantees and is fault tolerant.</p>\n<p>The command <code>SET resource-name anystring NX EX max-lock-time</code> is a simple way to implement a locking system with Redis.</p>\n<p>A client can acquire the lock if the above command returns <code>OK</code> (or retry after some time if the command returns Nil), and remove the lock just using <a href=\"/commands/del\">DEL</a>.</p>\n<p>The lock will be auto-released after the expire time is reached.</p>\n<p>It is possible to make this system more robust modifying the unlock schema as follows:</p>\n<ul>\n<li>Instead of setting a fixed string, set a non-guessable large random string, called token.</li>\n<li>Instead of releasing the lock with <a href=\"/commands/del\">DEL</a>, send a script that only removes the key if the value matches.</li>\n</ul>\n<p>This avoids that a client will try to release the lock after the expire time deleting the key created by another client that acquired the lock later.</p>\n<p>An example of unlock script would be similar to the following:</p>\n<pre><code>if redis.call(\"get\",KEYS[1]) == ARGV[1]\nthen\n    return redis.call(\"del\",KEYS[1])\nelse\n    return 0\nend\n</code></pre>\n<p>The script should be called with <code>EVAL ...script... 1 resource-name token-value</code></p>\n</div>"}, "SETBIT": {"category": "string", "help_link": "/commands/setbit", "args": ["key", "offset", "value"], "summary": "Sets or clears the bit at offset in the string value stored at key", "name": "SETBIT", "help_text": "<div class=\"article-main\">\n<div class=\"metadata\">\n<p><strong>Available since 2.2.0.</strong></p>\n<p><strong>Time complexity:</strong> O(1)</p>\n</div>\n<p>Sets or clears the bit at <em>offset</em> in the string value stored at <em>key</em>.</p>\n<p>The bit is either set or cleared depending on <em>value</em>, which can be either 0 or\n              1.\n              When <em>key</em> does not exist, a new string value is created.\n              The string is grown to make sure it can hold a bit at <em>offset</em>.\n              The <em>offset</em> argument is required to be greater than or equal to 0, and smaller\n              than 2<sup>32</sup> (this limits bitmaps to 512MB).\n              When the string at <em>key</em> is grown, added bits are set to 0.</p>\n<p><strong>Warning</strong>: When setting the last possible bit (<em>offset</em> equal to 2<sup>32</sup> -1) and\n              the string value stored at <em>key</em> does not yet hold a string value, or holds a\n              small string value, Redis needs to allocate all intermediate memory which can\n              block the server for some time.\n              On a 2010 MacBook Pro, setting bit number 2<sup>32</sup> -1 (512MB allocation) takes\n              ~300ms, setting bit number 2<sup>30</sup> -1 (128MB allocation) takes ~80ms, setting bit\n              number 2<sup>28</sup> -1 (32MB allocation) takes ~30ms and setting bit number 2<sup>26</sup> -1 (8MB\n              allocation) takes ~8ms.\n              Note that once this first allocation is done, subsequent calls to <a href=\"/commands/setbit\">SETBIT</a> for\n              the same <em>key</em> will not have the allocation overhead.</p>\n<span class=\"anchor\" id=\"return-value\"></span><h2><a class=\"anchor-link\" href=\"#return-value\">*</a>Return value</h2>\n<p><a href=\"/topics/protocol#integer-reply\">Integer reply</a>: the original bit value stored at <em>offset</em>.</p>\n<span class=\"anchor\" id=\"examples\"></span><h2><a class=\"anchor-link\" href=\"#examples\">*</a>Examples</h2>\n<div class=\"example\" data-session=\"6d65b73b19f0d6cc14c545df4b5987be\">\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">SETBIT mykey 7 1</span>\n<pre>(integer) 0</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">SETBIT mykey 7 0</span>\n<pre>(integer) 1</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">GET mykey</span>\n<pre>\"\\u0000\"</pre><form>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<input autocomplete=\"off\" name=\"command\" spellcheck=\"false\" type=\"text\"/>\n</form></div>\n</div>"}, "SETEX": {"category": "string", "help_link": "/commands/setex", "args": ["key", "seconds", "value"], "summary": "Set the value and expiration of a key", "name": "SETEX", "help_text": "<div class=\"article-main\">\n<div class=\"metadata\">\n<p><strong>Available since 2.0.0.</strong></p>\n<p><strong>Time complexity:</strong> O(1)</p>\n</div>\n<p>Set <code>key</code> to hold the string <code>value</code> and set <code>key</code> to timeout after a given\n              number of seconds.\n              This command is equivalent to executing the following commands:</p>\n<pre><code>SET mykey value\nEXPIRE mykey seconds\n</code></pre>\n<p><a href=\"/commands/setex\">SETEX</a> is atomic, and can be reproduced by using the previous two commands\n              inside an <a href=\"/commands/multi\">MULTI</a> / <a href=\"/commands/exec\">EXEC</a> block.\n              It is provided as a faster alternative to the given sequence of operations,\n              because this operation is very common when Redis is used as a cache.</p>\n<p>An error is returned when <code>seconds</code> is invalid.</p>\n<span class=\"anchor\" id=\"return-value\"></span><h2><a class=\"anchor-link\" href=\"#return-value\">*</a>Return value</h2>\n<p><a href=\"/topics/protocol#simple-string-reply\">Simple string reply</a></p>\n<span class=\"anchor\" id=\"examples\"></span><h2><a class=\"anchor-link\" href=\"#examples\">*</a>Examples</h2>\n<div class=\"example\" data-session=\"18c4bc431ae5e94e8aecbe590b9e5920\">\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">SETEX mykey 10 \"Hello\"</span>\n<pre>\"OK\"</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">TTL mykey</span>\n<pre>(integer) 10</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">GET mykey</span>\n<pre>\"Hello\"</pre><form>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<input autocomplete=\"off\" name=\"command\" spellcheck=\"false\" type=\"text\"/>\n</form></div>\n</div>"}, "SETNX": {"category": "string", "help_link": "/commands/setnx", "args": ["key", "value"], "summary": "Set the value of a key, only if the key does not exist", "name": "SETNX", "help_text": "<div class=\"article-main\">\n<div class=\"metadata\">\n<p><strong>Available since 1.0.0.</strong></p>\n<p><strong>Time complexity:</strong> O(1)</p>\n</div>\n<p>Set <code>key</code> to hold string <code>value</code> if <code>key</code> does not exist.\n              In that case, it is equal to <a href=\"/commands/set\">SET</a>.\n              When <code>key</code> already holds a value, no operation is performed.\n              <a href=\"/commands/setnx\">SETNX</a> is short for \"<strong>SET</strong> if <strong>N</strong>ot e<strong>X</strong>ists\".</p>\n<span class=\"anchor\" id=\"return-value\"></span><h2><a class=\"anchor-link\" href=\"#return-value\">*</a>Return value</h2>\n<p><a href=\"/topics/protocol#integer-reply\">Integer reply</a>, specifically:</p>\n<ul>\n<li><code>1</code> if the key was set</li>\n<li><code>0</code> if the key was not set</li>\n</ul>\n<span class=\"anchor\" id=\"examples\"></span><h2><a class=\"anchor-link\" href=\"#examples\">*</a>Examples</h2>\n<div class=\"example\" data-session=\"74e5e299e5331e4f94f2257fda2dd7b8\">\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">SETNX mykey \"Hello\"</span>\n<pre>(integer) 1</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">SETNX mykey \"World\"</span>\n<pre>(integer) 0</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">GET mykey</span>\n<pre>\"Hello\"</pre><form>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<input autocomplete=\"off\" name=\"command\" spellcheck=\"false\" type=\"text\"/>\n</form></div>\n<span class=\"anchor\" id=\"design-pattern-locking-with-codesetnxcode\"></span><h2><a class=\"anchor-link\" href=\"#design-pattern-locking-with-codesetnxcode\">*</a>Design pattern: Locking with <code>SETNX</code></h2>\n<p><strong>Please note that:</strong></p>\n<ol>\n<li>The following pattern is discouraged in favor of <a href=\"http://redis.io/topics/distlock\">the Redlock algorithm</a> which is only a bit more complex to implement, but offers better guarantees and is fault tolerant.</li>\n<li>We document the old pattern anyway because certain existing implementations link to this page as a reference. Moreover it is an interesting example of how Redis commands can be used in order to mount programming primitives.</li>\n<li>Anyway even assuming a single-instance locking primitive, starting with 2.6.12 it is possible to create a much simpler locking primitive, equivalent to the one discussed here, using the <a href=\"/commands/set\">SET</a> command to acquire the lock, and a simple Lua script to release the lock. The pattern is documented in the <a href=\"/commands/set\">SET</a> command page.</li>\n</ol>\n<p>That said, <a href=\"/commands/setnx\">SETNX</a> can be used, and was historically used, as a locking primitive. For example, to acquire the lock of the key <code>foo</code>, the client could try the\n              following:</p>\n<pre><code>SETNX lock.foo &lt;current Unix time + lock timeout + 1&gt;\n</code></pre>\n<p>If <a href=\"/commands/setnx\">SETNX</a> returns <code>1</code> the client acquired the lock, setting the <code>lock.foo</code> key\n              to the Unix time at which the lock should no longer be considered valid.\n              The client will later use <code>DEL lock.foo</code> in order to release the lock.</p>\n<p>If <a href=\"/commands/setnx\">SETNX</a> returns <code>0</code> the key is already locked by some other client.\n              We can either return to the caller if it's a non blocking lock, or enter a loop\n              retrying to hold the lock until we succeed or some kind of timeout expires.</p>\n<span class=\"anchor\" id=\"handling-deadlocks\"></span><h3><a class=\"anchor-link\" href=\"#handling-deadlocks\">*</a>Handling deadlocks</h3>\n<p>In the above locking algorithm there is a problem: what happens if a client\n              fails, crashes, or is otherwise not able to release the lock?\n              It's possible to detect this condition because the lock key contains a UNIX\n              timestamp.\n              If such a timestamp is equal to the current Unix time the lock is no longer\n              valid.</p>\n<p>When this happens we can't just call <a href=\"/commands/del\">DEL</a> against the key to remove the lock\n              and then try to issue a <a href=\"/commands/setnx\">SETNX</a>, as there is a race condition here, when\n              multiple clients detected an expired lock and are trying to release it.</p>\n<ul>\n<li>C1 and C2 read <code>lock.foo</code> to check the timestamp, because they both received\n              <code>0</code> after executing <a href=\"/commands/setnx\">SETNX</a>, as the lock is still held by C3 that crashed\n              after holding the lock.</li>\n<li>C1 sends <code>DEL lock.foo</code></li>\n<li>C1 sends <code>SETNX lock.foo</code> and it succeeds</li>\n<li>C2 sends <code>DEL lock.foo</code></li>\n<li>C2 sends <code>SETNX lock.foo</code> and it succeeds</li>\n<li><strong>ERROR</strong>: both C1 and C2 acquired the lock because of the race condition.</li>\n</ul>\n<p>Fortunately, it's possible to avoid this issue using the following algorithm.\n              Let's see how C4, our sane client, uses the good algorithm:</p>\n<ul>\n<li><p>C4 sends <code>SETNX lock.foo</code> in order to acquire the lock</p></li>\n<li><p>The crashed client C3 still holds it, so Redis will reply with <code>0</code> to C4.</p></li>\n<li><p>C4 sends <code>GET lock.foo</code> to check if the lock expired.\n              If it is not, it will sleep for some time and retry from the start.</p></li>\n<li><p>Instead, if the lock is expired because the Unix time at <code>lock.foo</code> is older\n              than the current Unix time, C4 tries to perform:</p>\n<pre><code>GETSET lock.foo &lt;current Unix timestamp + lock timeout + 1&gt;\n</code></pre></li>\n<li><p>Because of the <a href=\"/commands/getset\">GETSET</a> semantic, C4 can check if the old value stored at\n              <code>key</code> is still an expired timestamp.\n              If it is, the lock was acquired.</p></li>\n<li><p>If another client, for instance C5, was faster than C4 and acquired the lock\n              with the <a href=\"/commands/getset\">GETSET</a> operation, the C4 <a href=\"/commands/getset\">GETSET</a> operation will return a non\n              expired timestamp.\n              C4 will simply restart from the first step.\n              Note that even if C4 set the key a bit a few seconds in the future this is\n              not a problem.</p></li>\n</ul>\n<p>In order to make this locking algorithm more robust, a\n              client holding a lock should always check the timeout didn't expire before\n              unlocking the key with <a href=\"/commands/del\">DEL</a> because client failures can be complex, not just\n              crashing but also blocking a lot of time against some operations and trying\n              to issue <a href=\"/commands/del\">DEL</a> after a lot of time (when the LOCK is already held by another\n              client).</p>\n</div>"}, "SETRANGE": {"category": "string", "help_link": "/commands/setrange", "args": ["key", "offset", "value"], "summary": "Overwrite part of a string at key starting at the specified offset", "name": "SETRANGE", "help_text": "<div class=\"article-main\">\n<div class=\"metadata\">\n<p><strong>Available since 2.2.0.</strong></p>\n<p><strong>Time complexity:</strong> O(1), not counting the time taken to copy the new string in place. Usually, this string is very small so the amortized complexity is O(1). Otherwise, complexity is O(M) with M being the length of the value argument.</p>\n</div>\n<p>Overwrites part of the string stored at <em>key</em>, starting at the specified offset,\n              for the entire length of <em>value</em>.\n              If the offset is larger than the current length of the string at <em>key</em>, the\n              string is padded with zero-bytes to make <em>offset</em> fit.\n              Non-existing keys are considered as empty strings, so this command will make\n              sure it holds a string large enough to be able to set <em>value</em> at <em>offset</em>.</p>\n<p>Note that the maximum offset that you can set is 2<sup>29</sup> -1 (536870911), as Redis\n              Strings are limited to 512 megabytes.\n              If you need to grow beyond this size, you can use multiple keys.</p>\n<p><strong>Warning</strong>: When setting the last possible byte and the string value stored at\n              <em>key</em> does not yet hold a string value, or holds a small string value, Redis\n              needs to allocate all intermediate memory which can block the server for some\n              time.\n              On a 2010 MacBook Pro, setting byte number 536870911 (512MB allocation) takes\n              ~300ms, setting byte number 134217728 (128MB allocation) takes ~80ms, setting\n              bit number 33554432 (32MB allocation) takes ~30ms and setting bit number 8388608\n              (8MB allocation) takes ~8ms.\n              Note that once this first allocation is done, subsequent calls to <a href=\"/commands/setrange\">SETRANGE</a> for\n              the same <em>key</em> will not have the allocation overhead.</p>\n<span class=\"anchor\" id=\"patterns\"></span><h2><a class=\"anchor-link\" href=\"#patterns\">*</a>Patterns</h2>\n<p>Thanks to <a href=\"/commands/setrange\">SETRANGE</a> and the analogous <a href=\"/commands/getrange\">GETRANGE</a> commands, you can use Redis\n              strings as a linear array with <span class=\"math\">O(1) </span>random access.\n              This is a very fast and efficient storage in many real world use cases.</p>\n<span class=\"anchor\" id=\"return-value\"></span><h2><a class=\"anchor-link\" href=\"#return-value\">*</a>Return value</h2>\n<p><a href=\"/topics/protocol#integer-reply\">Integer reply</a>: the length of the string after it was modified by the command.</p>\n<span class=\"anchor\" id=\"examples\"></span><h2><a class=\"anchor-link\" href=\"#examples\">*</a>Examples</h2>\n<p>Basic usage:</p>\n<div class=\"example\" data-session=\"8a74948f776390dbc8615293b43c7822\">\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">SET key1 \"Hello World\"</span>\n<pre>\"OK\"</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">SETRANGE key1 6 \"Redis\"</span>\n<pre>(integer) 11</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">GET key1</span>\n<pre>\"Hello Redis\"</pre><form>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<input autocomplete=\"off\" name=\"command\" spellcheck=\"false\" type=\"text\"/>\n</form></div>\n<p>Example of zero padding:</p>\n<div class=\"example\" data-session=\"8a74948f776390dbc8615293b43c7822\">\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">SETRANGE key2 6 \"Redis\"</span>\n<pre>(integer) 11</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">GET key2</span>\n<pre>\"\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000Redis\"</pre><form>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<input autocomplete=\"off\" name=\"command\" spellcheck=\"false\" type=\"text\"/>\n</form></div>\n</div>"}, "SHUTDOWN": {"category": "server", "help_link": "/commands/shutdown", "args": ["[NOSAVE|SAVE]"], "summary": "Synchronously save the dataset to disk and then shut down the server", "name": "SHUTDOWN", "help_text": "<div class=\"article-main\">\n<div class=\"metadata\">\n<p><strong>Available since 1.0.0.</strong></p>\n</div>\n<p>The command behavior is the following:</p>\n<ul>\n<li>Stop all the clients.</li>\n<li>Perform a blocking SAVE if at least one <strong>save point</strong> is configured.</li>\n<li>Flush the Append Only File if AOF is enabled.</li>\n<li>Quit the server.</li>\n</ul>\n<p>If persistence is enabled this commands makes sure that Redis is switched off\n              without the lost of any data.\n              This is not guaranteed if the client uses simply <a href=\"/commands/save\">SAVE</a> and then <a href=\"/commands/quit\">QUIT</a> because\n              other clients may alter the DB data between the two commands.</p>\n<p>Note: A Redis instance that is configured for not persisting on disk (no AOF\n              configured, nor \"save\" directive) will not dump the RDB file on <a href=\"/commands/shutdown\">SHUTDOWN</a>, as\n              usually you don't want Redis instances used only for caching to block on when\n              shutting down.</p>\n<span class=\"anchor\" id=\"save-and-nosave-modifiers\"></span><h2><a class=\"anchor-link\" href=\"#save-and-nosave-modifiers\">*</a>SAVE and NOSAVE modifiers</h2>\n<p>It is possible to specify an optional modifier to alter the behavior of the\n              command.\n              Specifically:</p>\n<ul>\n<li><strong>SHUTDOWN SAVE</strong> will force a DB saving operation even if no save points are\n              configured.</li>\n<li><strong>SHUTDOWN NOSAVE</strong> will prevent a DB saving operation even if one or more\n              save points are configured.\n              (You can think of this variant as an hypothetical <strong>ABORT</strong> command that just\n              stops the server).</li>\n</ul>\n<span class=\"anchor\" id=\"conditions-where-a-shutdown-fails\"></span><h2><a class=\"anchor-link\" href=\"#conditions-where-a-shutdown-fails\">*</a>Conditions where a SHUTDOWN fails</h2>\n<p>When the Append Only File is enabled the shutdown may fail because the\n              system is in a state that does not allow to safely immediately persist\n              on disk.</p>\n<p>Normally if there is an AOF child process performing an AOF rewrite, Redis\n              will simply kill it and exit. However there are two conditions where it is\n              unsafe to do so, and the <strong>SHUTDOWN</strong> command will be refused with an error\n              instead. This happens when:</p>\n<ul>\n<li>The user just turned on AOF, and the server triggered the first AOF rewrite in order to create the initial AOF file. In this context, stopping will result in losing the dataset at all: once restarted, the server will potentially have AOF enabled without having any AOF file at all.</li>\n<li>A replica with AOF enabled, reconnected with its master, performed a full resynchronization, and restarted the AOF file, triggering the initial AOF creation process. In this case not completing the AOF rewrite is dangerous because the latest dataset received from the master would be lost. The new master can actually be even a different instance (if the <strong>REPLICAOF</strong> or <strong>SLAVEOF</strong> command was used in order to reconfigure the replica), so it is important to finish the AOF rewrite and start with the correct data set representing the data set in memory when the server was terminated.</li>\n</ul>\n<p>There are conditions when we want just to terminate a Redis instance ASAP, regardless of what its content is. In such a case, the right combination of commands is to send a <strong>CONFIG appendonly no</strong> followed by a <strong>SHUTDOWN NOSAVE</strong>. The first command will turn off the AOF if needed, and will terminate the AOF rewriting child if there is one active. The second command will not have any problem to execute since the AOF is no longer enabled.</p>\n<span class=\"anchor\" id=\"return-value\"></span><h2><a class=\"anchor-link\" href=\"#return-value\">*</a>Return value</h2>\n<p><a href=\"/topics/protocol#simple-string-reply\">Simple string reply</a> on error.\n              On success nothing is returned since the server quits and the connection is\n              closed.</p>\n</div>"}, "SINTER": {"category": "set", "help_link": "/commands/sinter", "args": ["key [key ...]"], "summary": "Intersect multiple sets", "name": "SINTER", "help_text": "<div class=\"article-main\">\n<div class=\"metadata\">\n<p><strong>Available since 1.0.0.</strong></p>\n<p><strong>Time complexity:</strong> O(N*M) worst case where N is the cardinality of the smallest set and M is the number of sets.</p>\n</div>\n<p>Returns the members of the set resulting from the intersection of all the given\n              sets.</p>\n<p>For example:</p>\n<pre><code>key1 = {a,b,c,d}\nkey2 = {c}\nkey3 = {a,c,e}\nSINTER key1 key2 key3 = {c}\n</code></pre>\n<p>Keys that do not exist are considered to be empty sets.\n              With one of the keys being an empty set, the resulting set is also empty (since\n              set intersection with an empty set always results in an empty set).</p>\n<span class=\"anchor\" id=\"return-value\"></span><h2><a class=\"anchor-link\" href=\"#return-value\">*</a>Return value</h2>\n<p><a href=\"/topics/protocol#array-reply\">Array reply</a>: list with members of the resulting set.</p>\n<span class=\"anchor\" id=\"examples\"></span><h2><a class=\"anchor-link\" href=\"#examples\">*</a>Examples</h2>\n<div class=\"example\" data-session=\"33bdd30c9ac86a02fbb00925ec42b67e\">\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">SADD key1 \"a\"</span>\n<pre>(integer) 1</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">SADD key1 \"b\"</span>\n<pre>(integer) 1</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">SADD key1 \"c\"</span>\n<pre>(integer) 1</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">SADD key2 \"c\"</span>\n<pre>(integer) 1</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">SADD key2 \"d\"</span>\n<pre>(integer) 1</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">SADD key2 \"e\"</span>\n<pre>(integer) 1</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">SINTER key1 key2</span>\n<pre>1) \"c\"</pre><form>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<input autocomplete=\"off\" name=\"command\" spellcheck=\"false\" type=\"text\"/>\n</form></div>\n</div>"}, "SINTERSTORE": {"category": "set", "help_link": "/commands/sinterstore", "args": ["destination", "key [key ...]"], "summary": "Intersect multiple sets and store the resulting set in a key", "name": "SINTERSTORE", "help_text": "<div class=\"article-main\">\n<div class=\"metadata\">\n<p><strong>Available since 1.0.0.</strong></p>\n<p><strong>Time complexity:</strong> O(N*M) worst case where N is the cardinality of the smallest set and M is the number of sets.</p>\n</div>\n<p>This command is equal to <a href=\"/commands/sinter\">SINTER</a>, but instead of returning the resulting set,\n              it is stored in <code>destination</code>.</p>\n<p>If <code>destination</code> already exists, it is overwritten.</p>\n<span class=\"anchor\" id=\"return-value\"></span><h2><a class=\"anchor-link\" href=\"#return-value\">*</a>Return value</h2>\n<p><a href=\"/topics/protocol#integer-reply\">Integer reply</a>: the number of elements in the resulting set.</p>\n<span class=\"anchor\" id=\"examples\"></span><h2><a class=\"anchor-link\" href=\"#examples\">*</a>Examples</h2>\n<div class=\"example\" data-session=\"46b4bca28a06fd2d1b8a43bfa3d5bfcd\">\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">SADD key1 \"a\"</span>\n<pre>(integer) 1</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">SADD key1 \"b\"</span>\n<pre>(integer) 1</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">SADD key1 \"c\"</span>\n<pre>(integer) 1</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">SADD key2 \"c\"</span>\n<pre>(integer) 1</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">SADD key2 \"d\"</span>\n<pre>(integer) 1</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">SADD key2 \"e\"</span>\n<pre>(integer) 1</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">SINTERSTORE key key1 key2</span>\n<pre>(integer) 1</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">SMEMBERS key</span>\n<pre>1) \"c\"</pre><form>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<input autocomplete=\"off\" name=\"command\" spellcheck=\"false\" type=\"text\"/>\n</form></div>\n</div>"}, "SISMEMBER": {"category": "set", "help_link": "/commands/sismember", "args": ["key", "member"], "summary": "Determine if a given value is a member of a set", "name": "SISMEMBER", "help_text": "<div class=\"article-main\">\n<div class=\"metadata\">\n<p><strong>Available since 1.0.0.</strong></p>\n<p><strong>Time complexity:</strong> O(1)</p>\n</div>\n<p>Returns if <code>member</code> is a member of the set stored at <code>key</code>.</p>\n<span class=\"anchor\" id=\"return-value\"></span><h2><a class=\"anchor-link\" href=\"#return-value\">*</a>Return value</h2>\n<p><a href=\"/topics/protocol#integer-reply\">Integer reply</a>, specifically:</p>\n<ul>\n<li><code>1</code> if the element is a member of the set.</li>\n<li><code>0</code> if the element is not a member of the set, or if <code>key</code> does not exist.</li>\n</ul>\n<span class=\"anchor\" id=\"examples\"></span><h2><a class=\"anchor-link\" href=\"#examples\">*</a>Examples</h2>\n<div class=\"example\" data-session=\"286b02cab505a63e7a55e6d8ff68c2b2\">\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">SADD myset \"one\"</span>\n<pre>(integer) 1</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">SISMEMBER myset \"one\"</span>\n<pre>(integer) 1</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">SISMEMBER myset \"two\"</span>\n<pre>(integer) 0</pre><form>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<input autocomplete=\"off\" name=\"command\" spellcheck=\"false\" type=\"text\"/>\n</form></div>\n</div>"}, "SLAVEOF": {"category": "server", "help_link": "/commands/slaveof", "args": ["host", "port"], "summary": "Make the server a replica of another instance, or promote it as master. Deprecated starting with Redis 5. Use REPLICAOF instead.", "name": "SLAVEOF", "help_text": "<div class=\"article-main\">\n<div class=\"metadata\">\n<p><strong>Available since 1.0.0.</strong></p>\n</div>\n<p><strong>A note about the word slave used in this man page and command name</strong>: Starting with Redis 5 this command: starting with Redis version 5, if not for backward compatibility, the Redis project no longer uses the word slave. Please use the new command <a href=\"/commands/replicaof\">REPLICAOF</a>. The command <a href=\"/commands/slaveof\">SLAVEOF</a> will continue to work for backward compatibility.</p>\n<p>The <a href=\"/commands/slaveof\">SLAVEOF</a> command can change the replication settings of a replica on the fly.\n              If a Redis server is already acting as replica, the command <a href=\"/commands/slaveof\">SLAVEOF</a> NO ONE will\n              turn off the replication, turning the Redis server into a MASTER.\n              In the proper form <a href=\"/commands/slaveof\">SLAVEOF</a> hostname port will make the server a replica of\n              another server listening at the specified hostname and port.</p>\n<p>If a server is already a replica of some master, <a href=\"/commands/slaveof\">SLAVEOF</a> hostname port will stop\n              the replication against the old server and start the synchronization against the\n              new one, discarding the old dataset.</p>\n<p>The form <a href=\"/commands/slaveof\">SLAVEOF</a> NO ONE will stop replication, turning the server into a\n              MASTER, but will not discard the replication.\n              So, if the old master stops working, it is possible to turn the replica into a\n              master and set the application to use this new master in read/write.\n              Later when the other Redis server is fixed, it can be reconfigured to work as a\n              replica.</p>\n<span class=\"anchor\" id=\"return-value\"></span><h2><a class=\"anchor-link\" href=\"#return-value\">*</a>Return value</h2>\n<p><a href=\"/topics/protocol#simple-string-reply\">Simple string reply</a></p>\n</div>"}, "REPLICAOF": {"category": "server", "help_link": "/commands/replicaof", "args": ["host", "port"], "summary": "Make the server a replica of another instance, or promote it as master.", "name": "REPLICAOF", "help_text": "<div class=\"article-main\">\n<div class=\"metadata\">\n<p><strong>Available since 5.0.0.</strong></p>\n</div>\n<p>The <a href=\"/commands/replicaof\">REPLICAOF</a> command can change the replication settings of a replica on the fly.</p>\n<p>If a Redis server is already acting as replica, the command <a href=\"/commands/replicaof\">REPLICAOF</a> NO ONE will turn off the replication, turning the Redis server into a MASTER.  In the proper form <a href=\"/commands/replicaof\">REPLICAOF</a> hostname port will make the server a replica of another server listening at the specified hostname and port.</p>\n<p>If a server is already a replica of some master, <a href=\"/commands/replicaof\">REPLICAOF</a> hostname port will stop the replication against the old server and start the synchronization against the new one, discarding the old dataset.</p>\n<p>The form <a href=\"/commands/replicaof\">REPLICAOF</a> NO ONE will stop replication, turning the server into a MASTER, but will not discard the replication. So, if the old master stops working, it is possible to turn the replica into a master and set the application to use this new master in read/write. Later when the other Redis server is fixed, it can be reconfigured to work as a replica.</p>\n<span class=\"anchor\" id=\"return-value\"></span><h2><a class=\"anchor-link\" href=\"#return-value\">*</a>Return value</h2>\n<p><a href=\"/topics/protocol#simple-string-reply\">Simple string reply</a></p>\n</div>"}, "SLOWLOG": {"category": "server", "help_link": "/commands/slowlog", "args": ["subcommand", "[argument]"], "summary": "Manages the Redis slow queries log", "name": "SLOWLOG", "help_text": "<div class=\"article-main\">\n<div class=\"metadata\">\n<p><strong>Available since 2.2.12.</strong></p>\n</div>\n<p>This command is used in order to read and reset the Redis slow queries log.</p>\n<span class=\"anchor\" id=\"redis-slow-log-overview\"></span><h2><a class=\"anchor-link\" href=\"#redis-slow-log-overview\">*</a>Redis slow log overview</h2>\n<p>The Redis Slow Log is a system to log queries that exceeded a specified\n              execution time.\n              The execution time does not include I/O operations like talking with the client,\n              sending the reply and so forth, but just the time needed to actually execute the\n              command (this is the only stage of command execution where the thread is blocked\n              and can not serve other requests in the meantime).</p>\n<p>You can configure the slow log with two parameters: <em>slowlog-log-slower-than</em>\n              tells Redis what is the execution time, in microseconds, to exceed in order for\n              the command to get logged.\n              Note that a negative number disables the slow log, while a value of zero forces\n              the logging of every command.\n              <em>slowlog-max-len</em> is the length of the slow log.\n              The minimum value is zero.\n              When a new command is logged and the slow log is already at its maximum length,\n              the oldest one is removed from the queue of logged commands in order to make\n              space.</p>\n<p>The configuration can be done by editing <code>redis.conf</code> or while the server is\n              running using the <a href=\"/commands/config-get\">CONFIG GET</a> and <a href=\"/commands/config-set\">CONFIG SET</a> commands.</p>\n<span class=\"anchor\" id=\"reading-the-slow-log\"></span><h2><a class=\"anchor-link\" href=\"#reading-the-slow-log\">*</a>Reading the slow log</h2>\n<p>The slow log is accumulated in memory, so no file is written with information\n              about the slow command executions.\n              This makes the slow log remarkably fast at the point that you can enable the\n              logging of all the commands (setting the <em>slowlog-log-slower-than</em> config\n              parameter to zero) with minor performance hit.</p>\n<p>To read the slow log the <strong>SLOWLOG GET</strong> command is used, that returns every\n              entry in the slow log.\n              It is possible to return only the N most recent entries passing an additional\n              argument to the command (for instance <strong>SLOWLOG GET 10</strong>).</p>\n<p>Note that you need a recent version of redis-cli in order to read the slow log\n              output, since it uses some features of the protocol that were not formerly\n              implemented in redis-cli (deeply nested multi bulk replies).</p>\n<span class=\"anchor\" id=\"output-format\"></span><h2><a class=\"anchor-link\" href=\"#output-format\">*</a>Output format</h2>\n<pre><code>redis 127.0.0.1:6379&gt; slowlog get 2\n1) 1) (integer) 14\n   2) (integer) 1309448221\n   3) (integer) 15\n   4) 1) \"ping\"\n2) 1) (integer) 13\n   2) (integer) 1309448128\n   3) (integer) 30\n   4) 1) \"slowlog\"\n      2) \"get\"\n      3) \"100\"\n</code></pre>\n<p>There are also optional fields emitted only by Redis 4.0 or greater:</p>\n<pre><code>5) \"127.0.0.1:58217\"\n6) \"worker-123\"\n</code></pre>\n<p>Every entry is composed of four (or six starting with Redis 4.0) fields:</p>\n<ul>\n<li>A unique progressive identifier for every slow log entry.</li>\n<li>The unix timestamp at which the logged command was processed.</li>\n<li>The amount of time needed for its execution, in microseconds.</li>\n<li>The array composing the arguments of the command.</li>\n<li>Client IP address and port (4.0 only).</li>\n<li>Client name if set via the <a href=\"/commands/client-setname\">CLIENT SETNAME</a> command (4.0 only).</li>\n</ul>\n<p>The entry's unique ID can be used in order to avoid processing slow log entries\n              multiple times (for instance you may have a script sending you an email alert\n              for every new slow log entry).</p>\n<p>The ID is never reset in the course of the Redis server execution, only a server\n              restart will reset it.</p>\n<span class=\"anchor\" id=\"obtaining-the-current-length-of-the-slow-log\"></span><h2><a class=\"anchor-link\" href=\"#obtaining-the-current-length-of-the-slow-log\">*</a>Obtaining the current length of the slow log</h2>\n<p>It is possible to get just the length of the slow log using the command\n              <strong>SLOWLOG LEN</strong>.</p>\n<span class=\"anchor\" id=\"resetting-the-slow-log\"></span><h2><a class=\"anchor-link\" href=\"#resetting-the-slow-log\">*</a>Resetting the slow log.</h2>\n<p>You can reset the slow log using the <strong>SLOWLOG RESET</strong> command.\n              Once deleted the information is lost forever.</p>\n</div>"}, "SMEMBERS": {"category": "set", "help_link": "/commands/smembers", "args": ["key"], "summary": "Get all the members in a set", "name": "SMEMBERS", "help_text": "<div class=\"article-main\">\n<div class=\"metadata\">\n<p><strong>Available since 1.0.0.</strong></p>\n<p><strong>Time complexity:</strong> O(N) where N is the set cardinality.</p>\n</div>\n<p>Returns all the members of the set value stored at <code>key</code>.</p>\n<p>This has the same effect as running <a href=\"/commands/sinter\">SINTER</a> with one argument <code>key</code>.</p>\n<span class=\"anchor\" id=\"return-value\"></span><h2><a class=\"anchor-link\" href=\"#return-value\">*</a>Return value</h2>\n<p><a href=\"/topics/protocol#array-reply\">Array reply</a>: all elements of the set.</p>\n<span class=\"anchor\" id=\"examples\"></span><h2><a class=\"anchor-link\" href=\"#examples\">*</a>Examples</h2>\n<div class=\"example\" data-session=\"f7fdb457faa942ef8c302eee1168c103\">\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">SADD myset \"Hello\"</span>\n<pre>(integer) 1</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">SADD myset \"World\"</span>\n<pre>(integer) 1</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">SMEMBERS myset</span>\n<pre>1) \"Hello\"\n2) \"World\"</pre><form>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<input autocomplete=\"off\" name=\"command\" spellcheck=\"false\" type=\"text\"/>\n</form></div>\n</div>"}, "SMOVE": {"category": "set", "help_link": "/commands/smove", "args": ["source", "destination", "member"], "summary": "Move a member from one set to another", "name": "SMOVE", "help_text": "<div class=\"article-main\">\n<div class=\"metadata\">\n<p><strong>Available since 1.0.0.</strong></p>\n<p><strong>Time complexity:</strong> O(1)</p>\n</div>\n<p>Move <code>member</code> from the set at <code>source</code> to the set at <code>destination</code>.\n              This operation is atomic.\n              In every given moment the element will appear to be a member of <code>source</code> <strong>or</strong>\n<code>destination</code> for other clients.</p>\n<p>If the source set does not exist or does not contain the specified element, no\n              operation is performed and <code>0</code> is returned.\n              Otherwise, the element is removed from the source set and added to the\n              destination set.\n              When the specified element already exists in the destination set, it is only\n              removed from the source set.</p>\n<p>An error is returned if <code>source</code> or <code>destination</code> does not hold a set value.</p>\n<span class=\"anchor\" id=\"return-value\"></span><h2><a class=\"anchor-link\" href=\"#return-value\">*</a>Return value</h2>\n<p><a href=\"/topics/protocol#integer-reply\">Integer reply</a>, specifically:</p>\n<ul>\n<li><code>1</code> if the element is moved.</li>\n<li><code>0</code> if the element is not a member of <code>source</code> and no operation was performed.</li>\n</ul>\n<span class=\"anchor\" id=\"examples\"></span><h2><a class=\"anchor-link\" href=\"#examples\">*</a>Examples</h2>\n<div class=\"example\" data-session=\"ef08c33bf023030f523b80a2420bd9b8\">\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">SADD myset \"one\"</span>\n<pre>(integer) 1</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">SADD myset \"two\"</span>\n<pre>(integer) 1</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">SADD myotherset \"three\"</span>\n<pre>(integer) 1</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">SMOVE myset myotherset \"two\"</span>\n<pre>(integer) 1</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">SMEMBERS myset</span>\n<pre>1) \"one\"</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">SMEMBERS myotherset</span>\n<pre>1) \"three\"\n2) \"two\"</pre><form>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<input autocomplete=\"off\" name=\"command\" spellcheck=\"false\" type=\"text\"/>\n</form></div>\n</div>"}, "SORT": {"category": "generic", "help_link": "/commands/sort", "args": ["key", "[BY pattern]", "[LIMIT offset count]", "[GET pattern [GET pattern ...]]", "[ASC|DESC]", "[ALPHA]", "[STORE destination]"], "summary": "Sort the elements in a list, set or sorted set", "name": "SORT", "help_text": "<div class=\"article-main\">\n<div class=\"metadata\">\n<p><strong>Available since 1.0.0.</strong></p>\n<p><strong>Time complexity:</strong> O(N+M*log(M)) where N is the number of elements in the list or set to sort, and M the number of returned elements. When the elements are not sorted, complexity is currently O(N) as there is a copy step that will be avoided in next releases.</p>\n</div>\n<p>Returns or stores the elements contained in the <a href=\"/topics/data-types#lists\">list</a>, <a href=\"/topics/data-types#set\">set</a> or\n              <a href=\"/topics/data-types#sorted-sets\">sorted set</a> at <code>key</code>.\n              By default, sorting is numeric and elements are compared by their value\n              interpreted as double precision floating point number.\n              This is <a href=\"/commands/sort\">SORT</a> in its simplest form:</p>\n<pre><code>SORT mylist\n</code></pre>\n<p>Assuming <code>mylist</code> is a list of numbers, this command will return the same list\n              with the elements sorted from small to large.\n              In order to sort the numbers from large to small, use the <code>DESC</code> modifier:</p>\n<pre><code>SORT mylist DESC\n</code></pre>\n<p>When <code>mylist</code> contains string values and you want to sort them\n              lexicographically, use the <code>ALPHA</code> modifier:</p>\n<pre><code>SORT mylist ALPHA\n</code></pre>\n<p>Redis is UTF-8 aware, assuming you correctly set the <code>!LC_COLLATE</code> environment\n              variable.</p>\n<p>The number of returned elements can be limited using the <code>LIMIT</code> modifier.\n              This modifier takes the <code>offset</code> argument, specifying the number of elements to\n              skip and the <code>count</code> argument, specifying the number of elements to return from\n              starting at <code>offset</code>.\n              The following example will return 10 elements of the sorted version of <code>mylist</code>,\n              starting at element 0 (<code>offset</code> is zero-based):</p>\n<pre><code>SORT mylist LIMIT 0 10\n</code></pre>\n<p>Almost all modifiers can be used together.\n              The following example will return the first 5 elements, lexicographically sorted\n              in descending order:</p>\n<pre><code>SORT mylist LIMIT 0 5 ALPHA DESC\n</code></pre>\n<span class=\"anchor\" id=\"sorting-by-external-keys\"></span><h2><a class=\"anchor-link\" href=\"#sorting-by-external-keys\">*</a>Sorting by external keys</h2>\n<p>Sometimes you want to sort elements using external keys as weights to compare\n              instead of comparing the actual elements in the list, set or sorted set.\n              Let's say the list <code>mylist</code> contains the elements <code>1</code>, <code>2</code> and <code>3</code> representing\n              unique IDs of objects stored in <code>object_1</code>, <code>object_2</code> and <code>object_3</code>.\n              When these objects have associated weights stored in <code>weight_1</code>, <code>weight_2</code> and\n              <code>weight_3</code>, <a href=\"/commands/sort\">SORT</a> can be instructed to use these weights to sort <code>mylist</code> with\n              the following statement:</p>\n<pre><code>SORT mylist BY weight_*\n</code></pre>\n<p>The <code>BY</code> option takes a pattern (equal to <code>weight_*</code> in this example) that is\n              used to generate the keys that are used for sorting.\n              These key names are obtained substituting the first occurrence of <code>*</code> with the\n              actual value of the element in the list (<code>1</code>, <code>2</code> and <code>3</code> in this example).</p>\n<span class=\"anchor\" id=\"skip-sorting-the-elements\"></span><h2><a class=\"anchor-link\" href=\"#skip-sorting-the-elements\">*</a>Skip sorting the elements</h2>\n<p>The <code>BY</code> option can also take a non-existent key, which causes <a href=\"/commands/sort\">SORT</a> to skip\n              the sorting operation.\n              This is useful if you want to retrieve external keys (see the <code>GET</code> option\n              below) without the overhead of sorting.</p>\n<pre><code>SORT mylist BY nosort\n</code></pre>\n<span class=\"anchor\" id=\"retrieving-external-keys\"></span><h2><a class=\"anchor-link\" href=\"#retrieving-external-keys\">*</a>Retrieving external keys</h2>\n<p>Our previous example returns just the sorted IDs.\n              In some cases, it is more useful to get the actual objects instead of their IDs\n              (<code>object_1</code>, <code>object_2</code> and <code>object_3</code>).\n              Retrieving external keys based on the elements in a list, set or sorted set can\n              be done with the following command:</p>\n<pre><code>SORT mylist BY weight_* GET object_*\n</code></pre>\n<p>The <code>GET</code> option can be used multiple times in order to get more keys for every\n              element of the original list, set or sorted set.</p>\n<p>It is also possible to <code>GET</code> the element itself using the special pattern <code>#</code>:</p>\n<pre><code>SORT mylist BY weight_* GET object_* GET #\n</code></pre>\n<span class=\"anchor\" id=\"storing-the-result-of-a-sort-operation\"></span><h2><a class=\"anchor-link\" href=\"#storing-the-result-of-a-sort-operation\">*</a>Storing the result of a SORT operation</h2>\n<p>By default, <a href=\"/commands/sort\">SORT</a> returns the sorted elements to the client.\n              With the <code>STORE</code> option, the result will be stored as a list at the specified\n              key instead of being returned to the client.</p>\n<pre><code>SORT mylist BY weight_* STORE resultkey\n</code></pre>\n<p>An interesting pattern using <code>SORT ... STORE</code> consists in associating an\n              <a href=\"/commands/expire\">EXPIRE</a> timeout to the resulting key so that in applications where the result\n              of a <a href=\"/commands/sort\">SORT</a> operation can be cached for some time.\n              Other clients will use the cached list instead of calling <a href=\"/commands/sort\">SORT</a> for every\n              request.\n              When the key will timeout, an updated version of the cache can be created by\n              calling <code>SORT ... STORE</code> again.</p>\n<p>Note that for correctly implementing this pattern it is important to avoid\n              multiple clients rebuilding the cache at the same time.\n              Some kind of locking is needed here (for instance using <a href=\"/commands/setnx\">SETNX</a>).</p>\n<span class=\"anchor\" id=\"using-hashes-in-codebycode-and-codegetcode\"></span><h2><a class=\"anchor-link\" href=\"#using-hashes-in-codebycode-and-codegetcode\">*</a>Using hashes in <code>BY</code> and <code>GET</code></h2>\n<p>It is possible to use <code>BY</code> and <code>GET</code> options against hash fields with the\n              following syntax:</p>\n<pre><code>SORT mylist BY weight_*-&gt;fieldname GET object_*-&gt;fieldname\n</code></pre>\n<p>The string <code>-&gt;</code> is used to separate the key name from the hash field name.\n              The key is substituted as documented above, and the hash stored at the resulting\n              key is accessed to retrieve the specified hash field.</p>\n<span class=\"anchor\" id=\"return-value\"></span><h2><a class=\"anchor-link\" href=\"#return-value\">*</a>Return value</h2>\n<p><a href=\"/topics/protocol#array-reply\">Array reply</a>: without passing the <code>store</code> option the command returns a list of sorted elements.\n              <a href=\"/topics/protocol#integer-reply\">Integer reply</a>: when the <code>store</code> option is specified the command returns the number of sorted elements in the destination list.</p>\n</div>"}, "SPOP": {"category": "set", "help_link": "/commands/spop", "args": ["key", "[count]"], "summary": "Remove and return one or multiple random members from a set", "name": "SPOP", "help_text": "<div class=\"article-main\">\n<div class=\"metadata\">\n<p><strong>Available since 1.0.0.</strong></p>\n<p><strong>Time complexity:</strong> O(1)</p>\n</div>\n<p>Removes and returns one or more random elements from the set value store at <code>key</code>.</p>\n<p>This operation is similar to <a href=\"/commands/srandmember\">SRANDMEMBER</a>, that returns one or more random elements from a set but does not remove it.</p>\n<p>The <code>count</code> argument is available since version 3.2.</p>\n<span class=\"anchor\" id=\"return-value\"></span><h2><a class=\"anchor-link\" href=\"#return-value\">*</a>Return value</h2>\n<p><a href=\"/topics/protocol#bulk-string-reply\">Bulk string reply</a>: the removed element, or <code>nil</code> when <code>key</code> does not exist.</p>\n<span class=\"anchor\" id=\"examples\"></span><h2><a class=\"anchor-link\" href=\"#examples\">*</a>Examples</h2>\n<div class=\"example\" data-session=\"cb1c3fd4cf925a7150c6001c80383ca1\">\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">SADD myset \"one\"</span>\n<pre>(integer) 1</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">SADD myset \"two\"</span>\n<pre>(integer) 1</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">SADD myset \"three\"</span>\n<pre>(integer) 1</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">SPOP myset</span>\n<pre>\"two\"</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">SMEMBERS myset</span>\n<pre>1) \"three\"\n2) \"one\"</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">SADD myset \"four\"</span>\n<pre>(integer) 1</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">SADD myset \"five\"</span>\n<pre>(integer) 1</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">SPOP myset 3</span>\n<pre>1) \"five\"\n2) \"three\"\n3) \"one\"</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">SMEMBERS myset</span>\n<pre>1) \"four\"</pre><form>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<input autocomplete=\"off\" name=\"command\" spellcheck=\"false\" type=\"text\"/>\n</form></div>\n<span class=\"anchor\" id=\"specification-of-the-behavior-when-count-is-passed\"></span><h2><a class=\"anchor-link\" href=\"#specification-of-the-behavior-when-count-is-passed\">*</a>Specification of the behavior when count is passed</h2>\n<p>If count is bigger than the number of elements inside the Set, the command will only return the whole set without additional elements.</p>\n<span class=\"anchor\" id=\"distribution-of-returned-elements\"></span><h2><a class=\"anchor-link\" href=\"#distribution-of-returned-elements\">*</a>Distribution of returned elements</h2>\n<p>Note that this command is not suitable when you need a guaranteed uniform distribution of the returned elements. For more information about the algorithms used for SPOP, look up both the Knuth sampling and Floyd sampling algorithms.</p>\n<span class=\"anchor\" id=\"count-argument-extension\"></span><h2><a class=\"anchor-link\" href=\"#count-argument-extension\">*</a>Count argument extension</h2>\n<p>Redis 3.2 introduced an optional <code>count</code> argument that can be passed to <a href=\"/commands/spop\">SPOP</a> in order to retrieve multiple elements in a single call.</p>\n</div>"}, "SRANDMEMBER": {"category": "set", "help_link": "/commands/srandmember", "args": ["key", "[count]"], "summary": "Get one or multiple random members from a set", "name": "SRANDMEMBER", "help_text": "<div class=\"article-main\">\n<div class=\"metadata\">\n<p><strong>Available since 1.0.0.</strong></p>\n<p><strong>Time complexity:</strong> Without the count argument O(1), otherwise O(N) where N is the absolute value of the passed count.</p>\n</div>\n<p>When called with just the <code>key</code> argument, return a random element from the set value stored at <code>key</code>.</p>\n<p>Starting from Redis version 2.6, when called with the additional <code>count</code> argument, return an array of <code>count</code> <strong>distinct elements</strong> if <code>count</code> is positive. If called with a negative <code>count</code> the behavior changes and the command is allowed to return the <strong>same element multiple times</strong>. In this case the number of returned elements is the absolute value of the specified <code>count</code>.</p>\n<p>When called with just the key argument, the operation is similar to <a href=\"/commands/spop\">SPOP</a>, however while <a href=\"/commands/spop\">SPOP</a> also removes the randomly selected element from the set, <a href=\"/commands/srandmember\">SRANDMEMBER</a> will just return a random element without altering the original set in any way.</p>\n<span class=\"anchor\" id=\"return-value\"></span><h2><a class=\"anchor-link\" href=\"#return-value\">*</a>Return value</h2>\n<p><a href=\"/topics/protocol#bulk-string-reply\">Bulk string reply</a>: without the additional <code>count</code> argument the command returns a Bulk Reply with the randomly selected element, or <code>nil</code> when <code>key</code> does not exist.\n              <a href=\"/topics/protocol#array-reply\">Array reply</a>: when the additional <code>count</code> argument is passed the command returns an array of elements, or an empty array when <code>key</code> does not exist.</p>\n<span class=\"anchor\" id=\"examples\"></span><h2><a class=\"anchor-link\" href=\"#examples\">*</a>Examples</h2>\n<div class=\"example\" data-session=\"99b725cc91013981c496fc4564ed1714\">\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">SADD myset one two three</span>\n<pre>(integer) 3</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">SRANDMEMBER myset</span>\n<pre>\"three\"</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">SRANDMEMBER myset 2</span>\n<pre>1) \"three\"\n2) \"two\"</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">SRANDMEMBER myset -5</span>\n<pre>1) \"two\"\n2) \"two\"\n3) \"two\"\n4) \"three\"\n5) \"three\"</pre><form>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<input autocomplete=\"off\" name=\"command\" spellcheck=\"false\" type=\"text\"/>\n</form></div>\n<span class=\"anchor\" id=\"specification-of-the-behavior-when-count-is-passed\"></span><h2><a class=\"anchor-link\" href=\"#specification-of-the-behavior-when-count-is-passed\">*</a>Specification of the behavior when count is passed</h2>\n<p>When a count argument is passed and is positive, the elements are returned\n              as if every selected element is removed from the set (like the extraction\n              of numbers in the game of Bingo). However elements are <strong>not removed</strong> from\n              the Set. So basically:</p>\n<ul>\n<li>No repeated elements are returned.</li>\n<li>If count is bigger than the number of elements inside the Set, the command will only return the whole set without additional elements.</li>\n</ul>\n<p>When instead the count is negative, the behavior changes and the extraction happens as if you put the extracted element inside the bag again after every extraction, so repeated elements are possible, and the number of elements requested is always returned as we can repeat the same elements again and again, with the exception of an empty Set (non existing key) that will always produce an empty array as a result.</p>\n<span class=\"anchor\" id=\"distribution-of-returned-elements\"></span><h2><a class=\"anchor-link\" href=\"#distribution-of-returned-elements\">*</a>Distribution of returned elements</h2>\n<p>The distribution of the returned elements is far from perfect when the number of elements in the set is small, this is due to the fact that we used an approximated random element function that does not really guarantees good distribution.</p>\n<p>The algorithm used, that is implemented inside dict.c, samples the hash table buckets to find a non-empty one. Once a non empty bucket is found, since we use chaining in our hash table implementation, the number of elements inside the bucket is checked and a random element is selected.</p>\n<p>This means that if you have two non-empty buckets in the entire hash table, and one has three elements while one has just one, the element that is alone in its bucket will be returned with much higher probability.</p>\n</div>"}, "SREM": {"category": "set", "help_link": "/commands/srem", "args": ["key", "member [member ...]"], "summary": "Remove one or more members from a set", "name": "SREM", "help_text": "<div class=\"article-main\">\n<div class=\"metadata\">\n<p><strong>Available since 1.0.0.</strong></p>\n<p><strong>Time complexity:</strong> O(N) where N is the number of members to be removed.</p>\n</div>\n<p>Remove the specified members from the set stored at <code>key</code>.\n              Specified members that are not a member of this set are ignored.\n              If <code>key</code> does not exist, it is treated as an empty set and this command returns\n              <code>0</code>.</p>\n<p>An error is returned when the value stored at <code>key</code> is not a set.</p>\n<span class=\"anchor\" id=\"return-value\"></span><h2><a class=\"anchor-link\" href=\"#return-value\">*</a>Return value</h2>\n<p><a href=\"/topics/protocol#integer-reply\">Integer reply</a>: the number of members that were removed from the set, not\n              including non existing members.</p>\n<span class=\"anchor\" id=\"history\"></span><h2><a class=\"anchor-link\" href=\"#history\">*</a>History</h2>\n<ul>\n<li><code>&gt;= 2.4</code>: Accepts multiple <code>member</code> arguments.\n              Redis versions older than 2.4 can only remove a set member per call.</li>\n</ul>\n<span class=\"anchor\" id=\"examples\"></span><h2><a class=\"anchor-link\" href=\"#examples\">*</a>Examples</h2>\n<div class=\"example\" data-session=\"9e46a845a8b7dc3d69c94eeada5aa6ba\">\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">SADD myset \"one\"</span>\n<pre>(integer) 1</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">SADD myset \"two\"</span>\n<pre>(integer) 1</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">SADD myset \"three\"</span>\n<pre>(integer) 1</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">SREM myset \"one\"</span>\n<pre>(integer) 1</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">SREM myset \"four\"</span>\n<pre>(integer) 0</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">SMEMBERS myset</span>\n<pre>1) \"three\"\n2) \"two\"</pre><form>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<input autocomplete=\"off\" name=\"command\" spellcheck=\"false\" type=\"text\"/>\n</form></div>\n</div>"}, "STRLEN": {"category": "string", "help_link": "/commands/strlen", "args": ["key"], "summary": "Get the length of the value stored in a key", "name": "STRLEN", "help_text": "<div class=\"article-main\">\n<div class=\"metadata\">\n<p><strong>Available since 2.2.0.</strong></p>\n<p><strong>Time complexity:</strong> O(1)</p>\n</div>\n<p>Returns the length of the string value stored at <code>key</code>.\n              An error is returned when <code>key</code> holds a non-string value.</p>\n<span class=\"anchor\" id=\"return-value\"></span><h2><a class=\"anchor-link\" href=\"#return-value\">*</a>Return value</h2>\n<p><a href=\"/topics/protocol#integer-reply\">Integer reply</a>: the length of the string at <code>key</code>, or <code>0</code> when <code>key</code> does not\n              exist.</p>\n<span class=\"anchor\" id=\"examples\"></span><h2><a class=\"anchor-link\" href=\"#examples\">*</a>Examples</h2>\n<div class=\"example\" data-session=\"4ae8cd257fbfabc3dd17cad30daed11b\">\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">SET mykey \"Hello world\"</span>\n<pre>\"OK\"</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">STRLEN mykey</span>\n<pre>(integer) 11</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">STRLEN nonexisting</span>\n<pre>(integer) 0</pre><form>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<input autocomplete=\"off\" name=\"command\" spellcheck=\"false\" type=\"text\"/>\n</form></div>\n</div>"}, "SUBSCRIBE": {"category": "pubsub", "help_link": "/commands/subscribe", "args": ["channel [channel ...]"], "summary": "Listen for messages published to the given channels", "name": "SUBSCRIBE", "help_text": "<div class=\"article-main\">\n<div class=\"metadata\">\n<p><strong>Available since 2.0.0.</strong></p>\n<p><strong>Time complexity:</strong> O(N) where N is the number of channels to subscribe to.</p>\n</div>\n<p>Subscribes the client to the specified channels.</p>\n<p>Once the client enters the subscribed state it is not supposed to issue any\n              other commands, except for additional <a href=\"/commands/subscribe\">SUBSCRIBE</a>, <a href=\"/commands/psubscribe\">PSUBSCRIBE</a>, <a href=\"/commands/unsubscribe\">UNSUBSCRIBE</a>,\n              <a href=\"/commands/punsubscribe\">PUNSUBSCRIBE</a>, <a href=\"/commands/ping\">PING</a> and <a href=\"/commands/quit\">QUIT</a> commands.</p>\n</div>"}, "SUNION": {"category": "set", "help_link": "/commands/sunion", "args": ["key [key ...]"], "summary": "Add multiple sets", "name": "SUNION", "help_text": "<div class=\"article-main\">\n<div class=\"metadata\">\n<p><strong>Available since 1.0.0.</strong></p>\n<p><strong>Time complexity:</strong> O(N) where N is the total number of elements in all given sets.</p>\n</div>\n<p>Returns the members of the set resulting from the union of all the given sets.</p>\n<p>For example:</p>\n<pre><code>key1 = {a,b,c,d}\nkey2 = {c}\nkey3 = {a,c,e}\nSUNION key1 key2 key3 = {a,b,c,d,e}\n</code></pre>\n<p>Keys that do not exist are considered to be empty sets.</p>\n<span class=\"anchor\" id=\"return-value\"></span><h2><a class=\"anchor-link\" href=\"#return-value\">*</a>Return value</h2>\n<p><a href=\"/topics/protocol#array-reply\">Array reply</a>: list with members of the resulting set.</p>\n<span class=\"anchor\" id=\"examples\"></span><h2><a class=\"anchor-link\" href=\"#examples\">*</a>Examples</h2>\n<div class=\"example\" data-session=\"cd324eff837388c89f1923dcdd19a1b7\">\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">SADD key1 \"a\"</span>\n<pre>(integer) 1</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">SADD key1 \"b\"</span>\n<pre>(integer) 1</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">SADD key1 \"c\"</span>\n<pre>(integer) 1</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">SADD key2 \"c\"</span>\n<pre>(integer) 1</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">SADD key2 \"d\"</span>\n<pre>(integer) 1</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">SADD key2 \"e\"</span>\n<pre>(integer) 1</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">SUNION key1 key2</span>\n<pre>1) \"c\"\n2) \"d\"\n3) \"a\"\n4) \"b\"\n5) \"e\"</pre><form>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<input autocomplete=\"off\" name=\"command\" spellcheck=\"false\" type=\"text\"/>\n</form></div>\n</div>"}, "SUNIONSTORE": {"category": "set", "help_link": "/commands/sunionstore", "args": ["destination", "key [key ...]"], "summary": "Add multiple sets and store the resulting set in a key", "name": "SUNIONSTORE", "help_text": "<div class=\"article-main\">\n<div class=\"metadata\">\n<p><strong>Available since 1.0.0.</strong></p>\n<p><strong>Time complexity:</strong> O(N) where N is the total number of elements in all given sets.</p>\n</div>\n<p>This command is equal to <a href=\"/commands/sunion\">SUNION</a>, but instead of returning the resulting set,\n              it is stored in <code>destination</code>.</p>\n<p>If <code>destination</code> already exists, it is overwritten.</p>\n<span class=\"anchor\" id=\"return-value\"></span><h2><a class=\"anchor-link\" href=\"#return-value\">*</a>Return value</h2>\n<p><a href=\"/topics/protocol#integer-reply\">Integer reply</a>: the number of elements in the resulting set.</p>\n<span class=\"anchor\" id=\"examples\"></span><h2><a class=\"anchor-link\" href=\"#examples\">*</a>Examples</h2>\n<div class=\"example\" data-session=\"f649badb61d47947457f3a2045e12ab9\">\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">SADD key1 \"a\"</span>\n<pre>(integer) 1</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">SADD key1 \"b\"</span>\n<pre>(integer) 1</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">SADD key1 \"c\"</span>\n<pre>(integer) 1</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">SADD key2 \"c\"</span>\n<pre>(integer) 1</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">SADD key2 \"d\"</span>\n<pre>(integer) 1</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">SADD key2 \"e\"</span>\n<pre>(integer) 1</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">SUNIONSTORE key key1 key2</span>\n<pre>(integer) 5</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">SMEMBERS key</span>\n<pre>1) \"c\"\n2) \"d\"\n3) \"a\"\n4) \"b\"\n5) \"e\"</pre><form>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<input autocomplete=\"off\" name=\"command\" spellcheck=\"false\" type=\"text\"/>\n</form></div>\n</div>"}, "SWAPDB": {"category": "connection", "help_link": "/commands/swapdb", "args": ["index", "index"], "summary": "Swaps two Redis databases", "name": "SWAPDB", "help_text": "<div class=\"article-main\">\n<div class=\"metadata\">\n<p><strong>Available since 4.0.0.</strong></p>\n</div>\n<p>This command swaps two Redis databases, so that immediately all the\n              clients connected to a given database will see the data of the other database, and\n              the other way around. Example:</p>\n<pre><code>SWAPDB 0 1\n</code></pre>\n<p>This will swap database 0 with database 1. All the clients connected with database 0 will immediately see the new data, exactly like all the clients connected with database 1 will see the data that was formerly of database 0.</p>\n<span class=\"anchor\" id=\"return-value\"></span><h2><a class=\"anchor-link\" href=\"#return-value\">*</a>Return value</h2>\n<p><a href=\"/topics/protocol#simple-string-reply\">Simple string reply</a>: <code>OK</code> if <a href=\"/commands/swapdb\">SWAPDB</a> was executed correctly.</p>\n<span class=\"anchor\" id=\"examples\"></span><h2><a class=\"anchor-link\" href=\"#examples\">*</a>Examples</h2>\n<pre><code>SWAPDB 0 1\n</code></pre>\n</div>"}, "SYNC": {"category": "server", "help_link": "/commands/sync", "args": [], "summary": "Internal command used for replication", "name": "SYNC", "help_text": "<div class=\"article-main\">\n<div class=\"metadata\">\n<p><strong>Available since 1.0.0.</strong></p>\n</div>\n<p>Initiates a replication stream from the master.</p>\n<p>The <a href=\"/commands/sync\">SYNC</a> command is called by Redis replicas for initiating a replication\n              stream from the master. It has been replaced in newer versions of Redis by\n               <a href=\"/commands/psync\">PSYNC</a>.</p>\n<p>For more information about replication in Redis please check the\n              <a href=\"/topics/replication\">replication page</a>.</p>\n<span class=\"anchor\" id=\"return-value\"></span><h2><a class=\"anchor-link\" href=\"#return-value\">*</a>Return value</h2>\n<p><strong>Non standard return value</strong>, a bulk transfer of the data followed by <a href=\"/commands/ping\">PING</a> and write requests from the master.</p>\n</div>"}, "PSYNC": {"category": "server", "help_link": "/commands/psync", "args": ["replicationid", "offset"], "summary": "Internal command used for replication", "name": "PSYNC", "help_text": "<div class=\"article-main\">\n<div class=\"metadata\">\n<p><strong>Available since 2.8.0.</strong></p>\n</div>\n<p>Initiates a replication stream from the master.</p>\n<p>The <a href=\"/commands/psync\">PSYNC</a> command is called by Redis replicas for initiating a replication\n              stream from the master.</p>\n<p>For more information about replication in Redis please check the\n              <a href=\"/topics/replication\">replication page</a>.</p>\n<span class=\"anchor\" id=\"return-value\"></span><h2><a class=\"anchor-link\" href=\"#return-value\">*</a>Return value</h2>\n<p><strong>Non standard return value</strong>, a bulk transfer of the data followed by <a href=\"/commands/ping\">PING</a> and write requests from the master.</p>\n</div>"}, "TIME": {"category": "server", "help_link": "/commands/time", "args": [], "summary": "Return the current server time", "name": "TIME", "help_text": "<div class=\"article-main\">\n<div class=\"metadata\">\n<p><strong>Available since 2.6.0.</strong></p>\n<p><strong>Time complexity:</strong> O(1)</p>\n</div>\n<p>The <a href=\"/commands/time\">TIME</a> command returns the current server time as a two items lists: a Unix\n              timestamp and the amount of microseconds already elapsed in the current second.\n              Basically the interface is very similar to the one of the <code>gettimeofday</code> system\n              call.</p>\n<span class=\"anchor\" id=\"return-value\"></span><h2><a class=\"anchor-link\" href=\"#return-value\">*</a>Return value</h2>\n<p><a href=\"/topics/protocol#array-reply\">Array reply</a>, specifically:</p>\n<p>A multi bulk reply containing two elements:</p>\n<ul>\n<li>unix time in seconds.</li>\n<li>microseconds.</li>\n</ul>\n<span class=\"anchor\" id=\"examples\"></span><h2><a class=\"anchor-link\" href=\"#examples\">*</a>Examples</h2>\n<div class=\"example\" data-session=\"3072d2104de6c4fb3f32aabe1f502738\">\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">TIME</span>\n<pre>1) \"1571404081\"\n2) \"444142\"</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">TIME</span>\n<pre>1) \"1571404081\"\n2) \"444939\"</pre><form>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<input autocomplete=\"off\" name=\"command\" spellcheck=\"false\" type=\"text\"/>\n</form></div>\n</div>"}, "TOUCH": {"category": "generic", "help_link": "/commands/touch", "args": ["key [key ...]"], "summary": "Alters the last access time of a key(s). Returns the number of existing keys specified.", "name": "TOUCH", "help_text": "<div class=\"article-main\">\n<div class=\"metadata\">\n<p><strong>Available since 3.2.1.</strong></p>\n<p><strong>Time complexity:</strong> O(N) where N is the number of keys that will be touched.</p>\n</div>\n<p>Alters the last access time of a key(s).\n              A key is ignored if it does not exist.</p>\n<span class=\"anchor\" id=\"return-value\"></span><h2><a class=\"anchor-link\" href=\"#return-value\">*</a>Return value</h2>\n<p><a href=\"/topics/protocol#integer-reply\">Integer reply</a>: The number of keys that were touched.</p>\n<span class=\"anchor\" id=\"examples\"></span><h2><a class=\"anchor-link\" href=\"#examples\">*</a>Examples</h2>\n<div class=\"example\" data-session=\"aa20b141addcb3405d892931806939eb\">\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">SET key1 \"Hello\"</span>\n<pre>\"OK\"</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">SET key2 \"World\"</span>\n<pre>\"OK\"</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">TOUCH key1 key2</span>\n<pre>(integer) 2</pre><form>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<input autocomplete=\"off\" name=\"command\" spellcheck=\"false\" type=\"text\"/>\n</form></div>\n</div>"}, "TTL": {"category": "generic", "help_link": "/commands/ttl", "args": ["key"], "summary": "Get the time to live for a key", "name": "TTL", "help_text": "<div class=\"article-main\">\n<div class=\"metadata\">\n<p><strong>Available since 1.0.0.</strong></p>\n<p><strong>Time complexity:</strong> O(1)</p>\n</div>\n<p>Returns the remaining time to live of a key that has a timeout.\n              This introspection capability allows a Redis client to check how many seconds a\n              given key will continue to be part of the dataset.</p>\n<p>In Redis 2.6 or older the command returns <code>-1</code> if the key does not exist or if the key exist but has no associated expire.</p>\n<p>Starting with Redis 2.8 the return value in case of error changed:</p>\n<ul>\n<li>The command returns <code>-2</code> if the key does not exist.</li>\n<li>The command returns <code>-1</code> if the key exists but has no associated expire.</li>\n</ul>\n<p>See also the <a href=\"/commands/pttl\">PTTL</a> command that returns the same information with milliseconds resolution (Only available in Redis 2.6 or greater).</p>\n<span class=\"anchor\" id=\"return-value\"></span><h2><a class=\"anchor-link\" href=\"#return-value\">*</a>Return value</h2>\n<p><a href=\"/topics/protocol#integer-reply\">Integer reply</a>: TTL in seconds, or a negative value in order to signal an error (see the description above).</p>\n<span class=\"anchor\" id=\"examples\"></span><h2><a class=\"anchor-link\" href=\"#examples\">*</a>Examples</h2>\n<div class=\"example\" data-session=\"0e711a285acd50adfce9a6b1242e4df0\">\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">SET mykey \"Hello\"</span>\n<pre>\"OK\"</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">EXPIRE mykey 10</span>\n<pre>(integer) 1</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">TTL mykey</span>\n<pre>(integer) 10</pre><form>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<input autocomplete=\"off\" name=\"command\" spellcheck=\"false\" type=\"text\"/>\n</form></div>\n</div>"}, "TYPE": {"category": "generic", "help_link": "/commands/type", "args": ["key"], "summary": "Determine the type stored at key", "name": "TYPE", "help_text": "<div class=\"article-main\">\n<div class=\"metadata\">\n<p><strong>Available since 1.0.0.</strong></p>\n<p><strong>Time complexity:</strong> O(1)</p>\n</div>\n<p>Returns the string representation of the type of the value stored at <code>key</code>.\n              The different types that can be returned are: <code>string</code>, <code>list</code>, <code>set</code>, <code>zset</code>,\n              <code>hash</code> and <code>stream</code>.</p>\n<span class=\"anchor\" id=\"return-value\"></span><h2><a class=\"anchor-link\" href=\"#return-value\">*</a>Return value</h2>\n<p><a href=\"/topics/protocol#simple-string-reply\">Simple string reply</a>: type of <code>key</code>, or <code>none</code> when <code>key</code> does not exist.</p>\n<span class=\"anchor\" id=\"examples\"></span><h2><a class=\"anchor-link\" href=\"#examples\">*</a>Examples</h2>\n<div class=\"example\" data-session=\"3d13ba8c363ccaaa41642aaab8236ceb\">\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">SET key1 \"value\"</span>\n<pre>\"OK\"</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">LPUSH key2 \"value\"</span>\n<pre>(integer) 1</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">SADD key3 \"value\"</span>\n<pre>(integer) 1</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">TYPE key1</span>\n<pre>\"string\"</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">TYPE key2</span>\n<pre>\"list\"</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">TYPE key3</span>\n<pre>\"set\"</pre><form>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<input autocomplete=\"off\" name=\"command\" spellcheck=\"false\" type=\"text\"/>\n</form></div>\n</div>"}, "UNSUBSCRIBE": {"category": "pubsub", "help_link": "/commands/unsubscribe", "args": ["[channel [channel ...]]"], "summary": "Stop listening for messages posted to the given channels", "name": "UNSUBSCRIBE", "help_text": "<div class=\"article-main\">\n<div class=\"metadata\">\n<p><strong>Available since 2.0.0.</strong></p>\n<p><strong>Time complexity:</strong> O(N) where N is the number of clients already subscribed to a channel.</p>\n</div>\n<p>Unsubscribes the client from the given channels, or from all of them if none is\n              given.</p>\n<p>When no channels are specified, the client is unsubscribed from all the\n              previously subscribed channels.\n              In this case, a message for every unsubscribed channel will be sent to the\n              client.</p>\n</div>"}, "UNLINK": {"category": "generic", "help_link": "/commands/unlink", "args": ["key [key ...]"], "summary": "Delete a key asynchronously in another thread. Otherwise it is just as DEL, but non blocking.", "name": "UNLINK", "help_text": "<div class=\"article-main\">\n<div class=\"metadata\">\n<p><strong>Available since 4.0.0.</strong></p>\n<p><strong>Time complexity:</strong> O(1) for each key removed regardless of its size. Then the command does O(N) work in a different thread in order to reclaim memory, where N is the number of allocations the deleted objects where composed of.</p>\n</div>\n<p>This command is very similar to <a href=\"/commands/del\">DEL</a>: it removes the specified keys.\n              Just like <a href=\"/commands/del\">DEL</a> a key is ignored if it does not exist. However the command\n              performs the actual memory reclaiming in a different thread, so it is not\n              blocking, while <a href=\"/commands/del\">DEL</a> is. This is where the command name comes from: the\n              command just <strong>unlinks</strong> the keys from the keyspace. The actual removal\n              will happen later asynchronously.</p>\n<span class=\"anchor\" id=\"return-value\"></span><h2><a class=\"anchor-link\" href=\"#return-value\">*</a>Return value</h2>\n<p><a href=\"/topics/protocol#integer-reply\">Integer reply</a>: The number of keys that were unlinked.</p>\n<span class=\"anchor\" id=\"examples\"></span><h2><a class=\"anchor-link\" href=\"#examples\">*</a>Examples</h2>\n<div class=\"example\" data-session=\"d6c6edf1d3739e533e633875f8623c2a\">\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">SET key1 \"Hello\"</span>\n<pre>\"OK\"</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">SET key2 \"World\"</span>\n<pre>\"OK\"</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">UNLINK key1 key2 key3</span>\n<pre>(integer) 2</pre><form>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<input autocomplete=\"off\" name=\"command\" spellcheck=\"false\" type=\"text\"/>\n</form></div>\n</div>"}, "UNWATCH": {"category": "transactions", "help_link": "/commands/unwatch", "args": [], "summary": "Forget about all watched keys", "name": "UNWATCH", "help_text": "<div class=\"article-main\">\n<div class=\"metadata\">\n<p><strong>Available since 2.2.0.</strong></p>\n<p><strong>Time complexity:</strong> O(1)</p>\n</div>\n<p>Flushes all the previously watched keys for a <a href=\"/topics/transactions\">transaction</a>.</p>\n<p>If you call <a href=\"/commands/exec\">EXEC</a> or <a href=\"/commands/discard\">DISCARD</a>, there's no need to manually call <a href=\"/commands/unwatch\">UNWATCH</a>.</p>\n<span class=\"anchor\" id=\"return-value\"></span><h2><a class=\"anchor-link\" href=\"#return-value\">*</a>Return value</h2>\n<p><a href=\"/topics/protocol#simple-string-reply\">Simple string reply</a>: always <code>OK</code>.</p>\n</div>"}, "WAIT": {"category": "generic", "help_link": "/commands/wait", "args": ["numreplicas", "timeout"], "summary": "Wait for the synchronous replication of all the write commands sent in the context of the current connection", "name": "WAIT", "help_text": "<div class=\"article-main\">\n<div class=\"metadata\">\n<p><strong>Available since 3.0.0.</strong></p>\n<p><strong>Time complexity:</strong> O(1)</p>\n</div>\n<p>This command blocks the current client until all the previous write commands\n              are successfully transferred and acknowledged by at least the specified number\n              of replicas. If the timeout, specified in milliseconds, is reached, the command\n              returns even if the specified number of replicas were not yet reached.</p>\n<p>The command <strong>will always return</strong> the number of replicas that acknowledged\n              the write commands sent before the <a href=\"/commands/wait\">WAIT</a> command, both in the case where\n              the specified number of replicas are reached, or when the timeout is reached.</p>\n<p>A few remarks:</p>\n<ol>\n<li>When <a href=\"/commands/wait\">WAIT</a> returns, all the previous write commands sent in the context of the current connection are guaranteed to be received by the number of replicas returned by <a href=\"/commands/wait\">WAIT</a>.</li>\n<li>If the command is sent as part of a <a href=\"/commands/multi\">MULTI</a> transaction, the command does not block but instead just return ASAP the number of replicas that acknowledged the previous write commands.</li>\n<li>A timeout of 0 means to block forever.</li>\n<li>Since <a href=\"/commands/wait\">WAIT</a> returns the number of replicas reached both in case of failure and success, the client should check that the returned value is equal or greater to the replication level it demanded.</li>\n</ol>\n<span class=\"anchor\" id=\"consistency-and-wait\"></span><h2><a class=\"anchor-link\" href=\"#consistency-and-wait\">*</a>Consistency and WAIT</h2>\n<p>Note that <a href=\"/commands/wait\">WAIT</a> does not make Redis a strongly consistent store: while synchronous replication is part of a replicated state machine, it is not the only thing needed. However in the context of Sentinel or Redis Cluster failover, <a href=\"/commands/wait\">WAIT</a> improves the real world data safety.</p>\n<p>Specifically if a given write is transferred to one or more replicas, it is more likely (but not guaranteed) that if the master fails, we'll be able to promote, during a failover, a replica that received the write: both Sentinel and Redis Cluster will do a best-effort attempt to promote the best replica among the set of available replicas.</p>\n<p>However this is just a best-effort attempt so it is possible to still lose a write synchronously replicated to multiple replicas.</p>\n<span class=\"anchor\" id=\"implementation-details\"></span><h2><a class=\"anchor-link\" href=\"#implementation-details\">*</a>Implementation details</h2>\n<p>Since the introduction of partial resynchronization with replicas (PSYNC feature) Redis replicas asynchronously ping their master with the offset they already processed in the replication stream. This is used in multiple ways:</p>\n<ol>\n<li>Detect timed out replicas.</li>\n<li>Perform a partial resynchronization after a disconnection.</li>\n<li>Implement <a href=\"/commands/wait\">WAIT</a>.</li>\n</ol>\n<p>In the specific case of the implementation of <a href=\"/commands/wait\">WAIT</a>, Redis remembers, for each client, the replication offset of the produced replication stream when a given\n              write command was executed in the context of a given client. When <a href=\"/commands/wait\">WAIT</a> is\n              called Redis checks if the specified number of replicas already acknowledged\n              this offset or a greater one.</p>\n<span class=\"anchor\" id=\"return-value\"></span><h2><a class=\"anchor-link\" href=\"#return-value\">*</a>Return value</h2>\n<p><a href=\"/topics/protocol#integer-reply\">Integer reply</a>: The command returns the number of replicas reached by all the writes performed in the context of the current connection.</p>\n<span class=\"anchor\" id=\"examples\"></span><h2><a class=\"anchor-link\" href=\"#examples\">*</a>Examples</h2>\n<pre><code>&gt; SET foo bar\nOK\n&gt; WAIT 1 0\n(integer) 1\n&gt; WAIT 2 1000\n(integer) 1\n</code></pre>\n<p>In the following example the first call to <a href=\"/commands/wait\">WAIT</a> does not use a timeout and asks for the write to reach 1 replica. It returns with success. In the second attempt instead we put a timeout, and ask for the replication of the write to two replicas. Since there is a single replica available, after one second <a href=\"/commands/wait\">WAIT</a> unblocks and returns 1, the number of replicas reached.</p>\n</div>"}, "WATCH": {"category": "transactions", "help_link": "/commands/watch", "args": ["key [key ...]"], "summary": "Watch the given keys to determine execution of the MULTI/EXEC block", "name": "WATCH", "help_text": "<div class=\"article-main\">\n<div class=\"metadata\">\n<p><strong>Available since 2.2.0.</strong></p>\n<p><strong>Time complexity:</strong> O(1) for every key.</p>\n</div>\n<p>Marks the given keys to be watched for conditional execution of a\n              <a href=\"/topics/transactions\">transaction</a>.</p>\n<span class=\"anchor\" id=\"return-value\"></span><h2><a class=\"anchor-link\" href=\"#return-value\">*</a>Return value</h2>\n<p><a href=\"/topics/protocol#simple-string-reply\">Simple string reply</a>: always <code>OK</code>.</p>\n</div>"}, "ZADD": {"category": "sorted_set", "help_link": "/commands/zadd", "args": ["key", "[NX|XX]", "[CH]", "[INCR]", "score member [score member ...]"], "summary": "Add one or more members to a sorted set, or update its score if it already exists", "name": "ZADD", "help_text": "<div class=\"article-main\">\n<div class=\"metadata\">\n<p><strong>Available since 1.2.0.</strong></p>\n<p><strong>Time complexity:</strong> O(log(N)) for each item added, where N is the number of elements in the sorted set.</p>\n</div>\n<p>Adds all the specified members with the specified scores to the sorted set\n              stored at <code>key</code>.\n              It is possible to specify multiple score / member pairs.\n              If a specified member is already a member of the sorted set, the score is\n              updated and the element reinserted at the right position to ensure the correct\n              ordering.</p>\n<p>If <code>key</code> does not exist, a new sorted set with the specified members as sole\n              members is created, like if the sorted set was empty. If the key exists but does not hold a sorted set, an error is returned.</p>\n<p>The score values should be the string representation of a double precision floating point number. <code>+inf</code> and <code>-inf</code> values are valid values as well.</p>\n<span class=\"anchor\" id=\"zadd-options-redis-302-or-greater\"></span><h2><a class=\"anchor-link\" href=\"#zadd-options-redis-302-or-greater\">*</a>ZADD options (Redis 3.0.2 or greater)</h2>\n<p>ZADD supports a list of options, specified after the name of the key and before\n              the first score argument. Options are:</p>\n<ul>\n<li><strong>XX</strong>: Only update elements that already exist. Never add elements.</li>\n<li><strong>NX</strong>: Don't update already existing elements. Always add new elements.</li>\n<li><strong>CH</strong>: Modify the return value from the number of new elements added, to the total number of elements changed (CH is an abbreviation of <em>changed</em>). Changed elements are <strong>new elements added</strong> and elements already existing for which <strong>the score was updated</strong>. So elements specified in the command line having the same score as they had in the past are not counted. Note: normally the return value of <a href=\"/commands/zadd\">ZADD</a> only counts the number of new elements added.</li>\n<li><strong>INCR</strong>: When this option is specified <a href=\"/commands/zadd\">ZADD</a> acts like <a href=\"/commands/zincrby\">ZINCRBY</a>. Only one score-element pair can be specified in this mode.</li>\n</ul>\n<span class=\"anchor\" id=\"range-of-integer-scores-that-can-be-expressed-precisely\"></span><h2><a class=\"anchor-link\" href=\"#range-of-integer-scores-that-can-be-expressed-precisely\">*</a>Range of integer scores that can be expressed precisely</h2>\n<p>Redis sorted sets use a <em>double 64-bit floating point number</em> to represent the score. In all the architectures we support, this is represented as an <strong>IEEE 754 floating point number</strong>, that is able to represent precisely integer numbers between <code>-(2^53)</code> and <code>+(2^53)</code> included. In more practical terms, all the integers between -9007199254740992 and 9007199254740992 are perfectly representable. Larger integers, or fractions, are internally represented in exponential form, so it is possible that you get only an approximation of the decimal number, or of the very big integer, that you set as score.</p>\n<span class=\"anchor\" id=\"sorted-sets-101\"></span><h2><a class=\"anchor-link\" href=\"#sorted-sets-101\">*</a>Sorted sets 101</h2>\n<p>Sorted sets are sorted by their score in an ascending way.\n              The same element only exists a single time, no repeated elements are\n              permitted. The score can be modified both by <a href=\"/commands/zadd\">ZADD</a> that will update the\n              element score, and as a side effect, its position on the sorted set, and\n              by <a href=\"/commands/zincrby\">ZINCRBY</a> that can be used in order to update the score relatively to its\n              previous value.</p>\n<p>The current score of an element can be retrieved using the <a href=\"/commands/zscore\">ZSCORE</a> command,\n              that can also be used to verify if an element already exists or not.</p>\n<p>For an introduction to sorted sets, see the data types page on <a href=\"/topics/data-types#sorted-sets\">sorted\n              sets</a>.</p>\n<span class=\"anchor\" id=\"elements-with-the-same-score\"></span><h2><a class=\"anchor-link\" href=\"#elements-with-the-same-score\">*</a>Elements with the same score</h2>\n<p>While the same element can't be repeated in a sorted set since every element\n              is unique, it is possible to add multiple different elements <em>having the same score</em>. When multiple elements have the same score, they are <em>ordered lexicographically</em> (they are still ordered by score as a first key, however, locally, all the elements with the same score are relatively ordered lexicographically).</p>\n<p>The lexicographic ordering used is binary, it compares strings as array of bytes.</p>\n<p>If the user inserts all the elements in a sorted set with the same score (for example 0), all the elements of the sorted set are sorted lexicographically, and range queries on elements are possible using the command <a href=\"/commands/zrangebylex\">ZRANGEBYLEX</a> (Note: it is also possible to query sorted sets by range of scores using <a href=\"/commands/zrangebyscore\">ZRANGEBYSCORE</a>).</p>\n<span class=\"anchor\" id=\"return-value\"></span><h2><a class=\"anchor-link\" href=\"#return-value\">*</a>Return value</h2>\n<p><a href=\"/topics/protocol#integer-reply\">Integer reply</a>, specifically:</p>\n<ul>\n<li>The number of elements added to the sorted set, not including elements\n              already existing for which the score was updated.</li>\n</ul>\n<p>If the <a href=\"/commands/incr\">INCR</a> option is specified, the return value will be <a href=\"/topics/protocol#bulk-string-reply\">Bulk string reply</a>:</p>\n<ul>\n<li>The new score of <code>member</code> (a double precision floating point number) represented as string, or <code>nil</code> if the operation was aborted (when called with either the <code>XX</code> or the <code>NX</code> option).</li>\n</ul>\n<span class=\"anchor\" id=\"history\"></span><h2><a class=\"anchor-link\" href=\"#history\">*</a>History</h2>\n<ul>\n<li><code>&gt;= 2.4</code>: Accepts multiple elements.\n              In Redis versions older than 2.4 it was possible to add or update a single\n              member per call.</li>\n</ul>\n<span class=\"anchor\" id=\"examples\"></span><h2><a class=\"anchor-link\" href=\"#examples\">*</a>Examples</h2>\n<div class=\"example\" data-session=\"0817c18ac967650df38a3c48816ea1d5\">\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">ZADD myzset 1 \"one\"</span>\n<pre>(integer) 1</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">ZADD myzset 1 \"uno\"</span>\n<pre>(integer) 1</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">ZADD myzset 2 \"two\" 3 \"three\"</span>\n<pre>(integer) 2</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">ZRANGE myzset 0 -1 WITHSCORES</span>\n<pre>1) \"one\"\n2) \"1\"\n3) \"uno\"\n4) \"1\"\n5) \"two\"\n6) \"2\"\n7) \"three\"\n8) \"3\"</pre><form>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<input autocomplete=\"off\" name=\"command\" spellcheck=\"false\" type=\"text\"/>\n</form></div>\n</div>"}, "ZCARD": {"category": "sorted_set", "help_link": "/commands/zcard", "args": ["key"], "summary": "Get the number of members in a sorted set", "name": "ZCARD", "help_text": "<div class=\"article-main\">\n<div class=\"metadata\">\n<p><strong>Available since 1.2.0.</strong></p>\n<p><strong>Time complexity:</strong> O(1)</p>\n</div>\n<p>Returns the sorted set cardinality (number of elements) of the sorted set stored\n              at <code>key</code>.</p>\n<span class=\"anchor\" id=\"return-value\"></span><h2><a class=\"anchor-link\" href=\"#return-value\">*</a>Return value</h2>\n<p><a href=\"/topics/protocol#integer-reply\">Integer reply</a>: the cardinality (number of elements) of the sorted set, or <code>0</code>\n              if <code>key</code> does not exist.</p>\n<span class=\"anchor\" id=\"examples\"></span><h2><a class=\"anchor-link\" href=\"#examples\">*</a>Examples</h2>\n<div class=\"example\" data-session=\"f6530deb6d7b435da76b44841106ea36\">\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">ZADD myzset 1 \"one\"</span>\n<pre>(integer) 1</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">ZADD myzset 2 \"two\"</span>\n<pre>(integer) 1</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">ZCARD myzset</span>\n<pre>(integer) 2</pre><form>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<input autocomplete=\"off\" name=\"command\" spellcheck=\"false\" type=\"text\"/>\n</form></div>\n</div>"}, "ZCOUNT": {"category": "sorted_set", "help_link": "/commands/zcount", "args": ["key", "min", "max"], "summary": "Count the members in a sorted set with scores within the given values", "name": "ZCOUNT", "help_text": "<div class=\"article-main\">\n<div class=\"metadata\">\n<p><strong>Available since 2.0.0.</strong></p>\n<p><strong>Time complexity:</strong> O(log(N)) with N being the number of elements in the sorted set.</p>\n</div>\n<p>Returns the number of elements in the sorted set at <code>key</code> with a score between\n              <code>min</code> and <code>max</code>.</p>\n<p>The <code>min</code> and <code>max</code> arguments have the same semantic as described for\n              <a href=\"/commands/zrangebyscore\">ZRANGEBYSCORE</a>.</p>\n<p>Note: the command has a complexity of just <span class=\"math\">O(log(N)) </span>because it uses elements ranks (see <a href=\"/commands/zrank\">ZRANK</a>) to get an idea of the range. Because of this there is no need to do a work proportional to the size of the range.</p>\n<span class=\"anchor\" id=\"return-value\"></span><h2><a class=\"anchor-link\" href=\"#return-value\">*</a>Return value</h2>\n<p><a href=\"/topics/protocol#integer-reply\">Integer reply</a>: the number of elements in the specified score range.</p>\n<span class=\"anchor\" id=\"examples\"></span><h2><a class=\"anchor-link\" href=\"#examples\">*</a>Examples</h2>\n<div class=\"example\" data-session=\"b8de2f9aec8c08e76d239186f1279a36\">\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">ZADD myzset 1 \"one\"</span>\n<pre>(integer) 1</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">ZADD myzset 2 \"two\"</span>\n<pre>(integer) 1</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">ZADD myzset 3 \"three\"</span>\n<pre>(integer) 1</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">ZCOUNT myzset -inf +inf</span>\n<pre>(integer) 3</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">ZCOUNT myzset (1 3</span>\n<pre>(integer) 2</pre><form>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<input autocomplete=\"off\" name=\"command\" spellcheck=\"false\" type=\"text\"/>\n</form></div>\n</div>"}, "ZINCRBY": {"category": "sorted_set", "help_link": "/commands/zincrby", "args": ["key", "increment", "member"], "summary": "Increment the score of a member in a sorted set", "name": "ZINCRBY", "help_text": "<div class=\"article-main\">\n<div class=\"metadata\">\n<p><strong>Available since 1.2.0.</strong></p>\n<p><strong>Time complexity:</strong> O(log(N)) where N is the number of elements in the sorted set.</p>\n</div>\n<p>Increments the score of <code>member</code> in the sorted set stored at <code>key</code> by\n              <code>increment</code>.\n              If <code>member</code> does not exist in the sorted set, it is added with <code>increment</code> as\n              its score (as if its previous score was <code>0.0</code>).\n              If <code>key</code> does not exist, a new sorted set with the specified <code>member</code> as its\n              sole member is created.</p>\n<p>An error is returned when <code>key</code> exists but does not hold a sorted set.</p>\n<p>The <code>score</code> value should be the string representation of a numeric value, and\n              accepts double precision floating point numbers.\n              It is possible to provide a negative value to decrement the score.</p>\n<span class=\"anchor\" id=\"return-value\"></span><h2><a class=\"anchor-link\" href=\"#return-value\">*</a>Return value</h2>\n<p><a href=\"/topics/protocol#bulk-string-reply\">Bulk string reply</a>: the new score of <code>member</code> (a double precision floating point\n              number), represented as string.</p>\n<span class=\"anchor\" id=\"examples\"></span><h2><a class=\"anchor-link\" href=\"#examples\">*</a>Examples</h2>\n<div class=\"example\" data-session=\"21dc7cdff262f5d7e0d124c47bd39cb6\">\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">ZADD myzset 1 \"one\"</span>\n<pre>(integer) 1</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">ZADD myzset 2 \"two\"</span>\n<pre>(integer) 1</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">ZINCRBY myzset 2 \"one\"</span>\n<pre>\"3\"</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">ZRANGE myzset 0 -1 WITHSCORES</span>\n<pre>1) \"two\"\n2) \"2\"\n3) \"one\"\n4) \"3\"</pre><form>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<input autocomplete=\"off\" name=\"command\" spellcheck=\"false\" type=\"text\"/>\n</form></div>\n</div>"}, "ZINTERSTORE": {"category": "sorted_set", "help_link": "/commands/zinterstore", "args": ["destination", "numkeys", "key [key ...]", "[WEIGHTS weight [weight ...]]", "[AGGREGATE SUM|MIN|MAX]"], "summary": "Intersect multiple sorted sets and store the resulting sorted set in a new key", "name": "ZINTERSTORE", "help_text": "<div class=\"article-main\">\n<div class=\"metadata\">\n<p><strong>Available since 2.0.0.</strong></p>\n<p><strong>Time complexity:</strong> O(N*K)+O(M*log(M)) worst case with N being the smallest input sorted set, K being the number of input sorted sets and M being the number of elements in the resulting sorted set.</p>\n</div>\n<p>Computes the intersection of <code>numkeys</code> sorted sets given by the specified keys,\n              and stores the result in <code>destination</code>.\n              It is mandatory to provide the number of input keys (<code>numkeys</code>) before passing\n              the input keys and the other (optional) arguments.</p>\n<p>By default, the resulting score of an element is the sum of its scores in the\n              sorted sets where it exists.\n              Because intersection requires an element to be a member of every given sorted\n              set, this results in the score of every element in the resulting sorted set to\n              be equal to the number of input sorted sets.</p>\n<p>For a description of the <code>WEIGHTS</code> and <code>AGGREGATE</code> options, see <a href=\"/commands/zunionstore\">ZUNIONSTORE</a>.</p>\n<p>If <code>destination</code> already exists, it is overwritten.</p>\n<span class=\"anchor\" id=\"return-value\"></span><h2><a class=\"anchor-link\" href=\"#return-value\">*</a>Return value</h2>\n<p><a href=\"/topics/protocol#integer-reply\">Integer reply</a>: the number of elements in the resulting sorted set at\n              <code>destination</code>.</p>\n<span class=\"anchor\" id=\"examples\"></span><h2><a class=\"anchor-link\" href=\"#examples\">*</a>Examples</h2>\n<div class=\"example\" data-session=\"bb487b1177ecd656f577a80931a52d0c\">\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">ZADD zset1 1 \"one\"</span>\n<pre>(integer) 1</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">ZADD zset1 2 \"two\"</span>\n<pre>(integer) 1</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">ZADD zset2 1 \"one\"</span>\n<pre>(integer) 1</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">ZADD zset2 2 \"two\"</span>\n<pre>(integer) 1</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">ZADD zset2 3 \"three\"</span>\n<pre>(integer) 1</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">ZINTERSTORE out 2 zset1 zset2 WEIGHTS 2 3</span>\n<pre>(integer) 2</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">ZRANGE out 0 -1 WITHSCORES</span>\n<pre>1) \"one\"\n2) \"5\"\n3) \"two\"\n4) \"10\"</pre><form>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<input autocomplete=\"off\" name=\"command\" spellcheck=\"false\" type=\"text\"/>\n</form></div>\n</div>"}, "ZLEXCOUNT": {"category": "sorted_set", "help_link": "/commands/zlexcount", "args": ["key", "min", "max"], "summary": "Count the number of members in a sorted set between a given lexicographical range", "name": "ZLEXCOUNT", "help_text": "<div class=\"article-main\">\n<div class=\"metadata\">\n<p><strong>Available since 2.8.9.</strong></p>\n<p><strong>Time complexity:</strong> O(log(N)) with N being the number of elements in the sorted set.</p>\n</div>\n<p>When all the elements in a sorted set are inserted with the same score, in order to force lexicographical ordering, this command returns the number of elements in the sorted set at <code>key</code> with a value between <code>min</code> and <code>max</code>.</p>\n<p>The <code>min</code> and <code>max</code> arguments have the same meaning as described for\n              <a href=\"/commands/zrangebylex\">ZRANGEBYLEX</a>.</p>\n<p>Note: the command has a complexity of just <span class=\"math\">O(log(N)) </span>because it uses elements ranks (see <a href=\"/commands/zrank\">ZRANK</a>) to get an idea of the range. Because of this there is no need to do a work proportional to the size of the range.</p>\n<span class=\"anchor\" id=\"return-value\"></span><h2><a class=\"anchor-link\" href=\"#return-value\">*</a>Return value</h2>\n<p><a href=\"/topics/protocol#integer-reply\">Integer reply</a>: the number of elements in the specified score range.</p>\n<span class=\"anchor\" id=\"examples\"></span><h2><a class=\"anchor-link\" href=\"#examples\">*</a>Examples</h2>\n<div class=\"example\" data-session=\"892f16f991b765eaef487ce73d32e6dc\">\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">ZADD myzset 0 a 0 b 0 c 0 d 0 e</span>\n<pre>(integer) 5</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">ZADD myzset 0 f 0 g</span>\n<pre>(integer) 2</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">ZLEXCOUNT myzset - +</span>\n<pre>(integer) 7</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">ZLEXCOUNT myzset [b [f</span>\n<pre>(integer) 5</pre><form>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<input autocomplete=\"off\" name=\"command\" spellcheck=\"false\" type=\"text\"/>\n</form></div>\n</div>"}, "ZPOPMAX": {"category": "sorted_set", "help_link": "/commands/zpopmax", "args": ["key", "[count]"], "summary": "Remove and return members with the highest scores in a sorted set", "name": "ZPOPMAX", "help_text": "<div class=\"article-main\">\n<div class=\"metadata\">\n<p><strong>Available since 5.0.0.</strong></p>\n<p><strong>Time complexity:</strong> O(log(N)*M) with N being the number of elements in the sorted set, and M being the number of elements popped.</p>\n</div>\n<p>Removes and returns up to <code>count</code> members with the highest scores in the sorted\n              set stored at <code>key</code>.</p>\n<p>When left unspecified, the default value for <code>count</code> is 1. Specifying a <code>count</code>\n              value that is higher than the sorted set's cardinality will not produce an\n              error. When returning multiple elements, the one with the highest score will\n              be the first, followed by the elements with lower scores.</p>\n<span class=\"anchor\" id=\"return-value\"></span><h2><a class=\"anchor-link\" href=\"#return-value\">*</a>Return value</h2>\n<p><a href=\"/topics/protocol#array-reply\">Array reply</a>: list of popped elements and scores.</p>\n<span class=\"anchor\" id=\"examples\"></span><h2><a class=\"anchor-link\" href=\"#examples\">*</a>Examples</h2>\n<div class=\"example\" data-session=\"3df7453435f6b205d984fcac9ad1f978\">\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">ZADD myzset 1 \"one\"</span>\n<pre>(integer) 1</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">ZADD myzset 2 \"two\"</span>\n<pre>(integer) 1</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">ZADD myzset 3 \"three\"</span>\n<pre>(integer) 1</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">ZPOPMAX myzset</span>\n<pre>1) \"3\"\n2) \"three\"</pre><form>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<input autocomplete=\"off\" name=\"command\" spellcheck=\"false\" type=\"text\"/>\n</form></div>\n</div>"}, "ZPOPMIN": {"category": "sorted_set", "help_link": "/commands/zpopmin", "args": ["key", "[count]"], "summary": "Remove and return members with the lowest scores in a sorted set", "name": "ZPOPMIN", "help_text": "<div class=\"article-main\">\n<div class=\"metadata\">\n<p><strong>Available since 5.0.0.</strong></p>\n<p><strong>Time complexity:</strong> O(log(N)*M) with N being the number of elements in the sorted set, and M being the number of elements popped.</p>\n</div>\n<p>Removes and returns up to <code>count</code> members with the lowest scores in the sorted\n              set stored at <code>key</code>.</p>\n<p>When left unspecified, the default value for <code>count</code> is 1. Specifying a <code>count</code>\n              value that is higher than the sorted set's cardinality will not produce an\n              error. When returning multiple elements, the one with the lowest score will\n              be the first, followed by the elements with greater scores.</p>\n<span class=\"anchor\" id=\"return-value\"></span><h2><a class=\"anchor-link\" href=\"#return-value\">*</a>Return value</h2>\n<p><a href=\"/topics/protocol#array-reply\">Array reply</a>: list of popped elements and scores.</p>\n<span class=\"anchor\" id=\"examples\"></span><h2><a class=\"anchor-link\" href=\"#examples\">*</a>Examples</h2>\n<div class=\"example\" data-session=\"3e7c95eeda2909d8e17c3c89f7359a68\">\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">ZADD myzset 1 \"one\"</span>\n<pre>(integer) 1</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">ZADD myzset 2 \"two\"</span>\n<pre>(integer) 1</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">ZADD myzset 3 \"three\"</span>\n<pre>(integer) 1</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">ZPOPMIN myzset</span>\n<pre>1) \"1\"\n2) \"one\"</pre><form>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<input autocomplete=\"off\" name=\"command\" spellcheck=\"false\" type=\"text\"/>\n</form></div>\n</div>"}, "ZRANGE": {"category": "sorted_set", "help_link": "/commands/zrange", "args": ["key", "start", "stop", "[WITHSCORES]"], "summary": "Return a range of members in a sorted set, by index", "name": "ZRANGE", "help_text": "<div class=\"article-main\">\n<div class=\"metadata\">\n<p><strong>Available since 1.2.0.</strong></p>\n<p><strong>Time complexity:</strong> O(log(N)+M) with N being the number of elements in the sorted set and M the number of elements returned.</p>\n</div>\n<p>Returns the specified range of elements in the sorted set stored at <code>key</code>.\n              The elements are considered to be ordered from the lowest to the highest score.\n              Lexicographical order is used for elements with equal score.</p>\n<p>See <a href=\"/commands/zrevrange\">ZREVRANGE</a> when you need the elements ordered from highest to lowest score\n              (and descending lexicographical order for elements with equal score).</p>\n<p>Both <code>start</code> and <code>stop</code> are zero-based indexes, where <code>0</code> is the first element,\n              <code>1</code> is the next element and so on.\n              They can also be negative numbers indicating offsets from the end of the sorted\n              set, with <code>-1</code> being the last element of the sorted set, <code>-2</code> the penultimate\n              element and so on.</p>\n<p><code>start</code> and <code>stop</code> are <strong>inclusive ranges</strong>, so for example <code>ZRANGE myzset 0 1</code>\n              will return both the first and the second element of the sorted set.</p>\n<p>Out of range indexes will not produce an error.\n              If <code>start</code> is larger than the largest index in the sorted set, or <code>start &gt;\nstop</code>, an empty list is returned.\n              If <code>stop</code> is larger than the end of the sorted set Redis will treat it like it\n              is the last element of the sorted set.</p>\n<p>It is possible to pass the <code>WITHSCORES</code> option in order to return the scores of\n              the elements together with the elements.\n              The returned list will contain <code>value1,score1,...,valueN,scoreN</code> instead of\n              <code>value1,...,valueN</code>.\n              Client libraries are free to return a more appropriate data type (suggestion: an\n              array with (value, score) arrays/tuples).</p>\n<span class=\"anchor\" id=\"return-value\"></span><h2><a class=\"anchor-link\" href=\"#return-value\">*</a>Return value</h2>\n<p><a href=\"/topics/protocol#array-reply\">Array reply</a>: list of elements in the specified range (optionally with\n              their scores, in case the <code>WITHSCORES</code> option is given).</p>\n<span class=\"anchor\" id=\"examples\"></span><h2><a class=\"anchor-link\" href=\"#examples\">*</a>Examples</h2>\n<div class=\"example\" data-session=\"c0ba025f65328918daefc486205c13aa\">\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">ZADD myzset 1 \"one\"</span>\n<pre>(integer) 1</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">ZADD myzset 2 \"two\"</span>\n<pre>(integer) 1</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">ZADD myzset 3 \"three\"</span>\n<pre>(integer) 1</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">ZRANGE myzset 0 -1</span>\n<pre>1) \"one\"\n2) \"two\"\n3) \"three\"</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">ZRANGE myzset 2 3</span>\n<pre>1) \"three\"</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">ZRANGE myzset -2 -1</span>\n<pre>1) \"two\"\n2) \"three\"</pre><form>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<input autocomplete=\"off\" name=\"command\" spellcheck=\"false\" type=\"text\"/>\n</form></div>\n<p>The following example using <code>WITHSCORES</code> shows how the command returns always an array, but this time, populated with <em>element_1</em>, <em>score_1</em>, <em>element_2</em>, <em>score_2</em>, ..., <em>element_N</em>, <em>score_N</em>.</p>\n<div class=\"example\" data-session=\"c0ba025f65328918daefc486205c13aa\">\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">ZRANGE myzset 0 1 WITHSCORES</span>\n<pre>1) \"one\"\n2) \"1\"\n3) \"two\"\n4) \"2\"</pre><form>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<input autocomplete=\"off\" name=\"command\" spellcheck=\"false\" type=\"text\"/>\n</form></div>\n</div>"}, "ZRANGEBYLEX": {"category": "sorted_set", "help_link": "/commands/zrangebylex", "args": ["key", "min", "max", "[LIMIT offset count]"], "summary": "Return a range of members in a sorted set, by lexicographical range", "name": "ZRANGEBYLEX", "help_text": "<div class=\"article-main\">\n<div class=\"metadata\">\n<p><strong>Available since 2.8.9.</strong></p>\n<p><strong>Time complexity:</strong> O(log(N)+M) with N being the number of elements in the sorted set and M the number of elements being returned. If M is constant (e.g. always asking for the first 10 elements with LIMIT), you can consider it O(log(N)).</p>\n</div>\n<p>When all the elements in a sorted set are inserted with the same score, in order to force lexicographical ordering, this command returns all the elements in the sorted set at <code>key</code> with a value between <code>min</code> and <code>max</code>.</p>\n<p>If the elements in the sorted set have different scores, the returned elements are unspecified.</p>\n<p>The elements are considered to be ordered from lower to higher strings as compared byte-by-byte using the <code>memcmp()</code> C function. Longer strings are considered greater than shorter strings if the common part is identical.</p>\n<p>The optional <code>LIMIT</code> argument can be used to only get a range of the matching\n              elements (similar to <em>SELECT LIMIT offset, count</em> in SQL). A negative <code>count</code>\n              returns all elements from the <code>offset</code>.\n              Keep in mind that if <code>offset</code> is large, the sorted set needs to be traversed for\n              <code>offset</code> elements before getting to the elements to return, which can add up to\n              <span class=\"math\">O(N) </span>time complexity.</p>\n<span class=\"anchor\" id=\"how-to-specify-intervals\"></span><h2><a class=\"anchor-link\" href=\"#how-to-specify-intervals\">*</a>How to specify intervals</h2>\n<p>Valid <em>start</em> and <em>stop</em> must start with <code>(</code> or <code>[</code>, in order to specify\n              if the range item is respectively exclusive or inclusive.\n              The special values of <code>+</code> or <code>-</code> for <em>start</em> and <em>stop</em> have the special\n              meaning or positively infinite and negatively infinite strings, so for\n              instance the command <strong>ZRANGEBYLEX myzset - +</strong> is guaranteed to return\n              all the elements in the sorted set, if all the elements have the same\n              score.</p>\n<span class=\"anchor\" id=\"details-on-strings-comparison\"></span><h2><a class=\"anchor-link\" href=\"#details-on-strings-comparison\">*</a>Details on strings comparison</h2>\n<p>Strings are compared as binary array of bytes. Because of how the ASCII character\n              set is specified, this means that usually this also have the effect of comparing\n              normal ASCII characters in an obvious dictionary way. However this is not true\n              if non plain ASCII strings are used (for example utf8 strings).</p>\n<p>However the user can apply a transformation to the encoded string so that\n              the first part of the element inserted in the sorted set will compare as the\n              user requires for the specific application. For example if I want to\n              add strings that will be compared in a case-insensitive way, but I still\n              want to retrieve the real case when querying, I can add strings in the\n              following way:</p>\n<pre><code>ZADD autocomplete 0 foo:Foo 0 bar:BAR 0 zap:zap\n</code></pre>\n<p>Because of the first <em>normalized</em> part in every element (before the colon character), we are forcing a given comparison, however after the range is queries using <a href=\"/commands/zrangebylex\">ZRANGEBYLEX</a> the application can display to the user the second part of the string, after the colon.</p>\n<p>The binary nature of the comparison allows to use sorted sets as a general\n              purpose index, for example the first part of the element can be a 64 bit\n              big endian number: since big endian numbers have the most significant bytes\n              in the initial positions, the binary comparison will match the numerical\n              comparison of the numbers. This can be used in order to implement range\n              queries on 64 bit values. As in the example below, after the first 8 bytes\n              we can store the value of the element we are actually indexing.</p>\n<span class=\"anchor\" id=\"return-value\"></span><h2><a class=\"anchor-link\" href=\"#return-value\">*</a>Return value</h2>\n<p><a href=\"/topics/protocol#array-reply\">Array reply</a>: list of elements in the specified score range.</p>\n<span class=\"anchor\" id=\"examples\"></span><h2><a class=\"anchor-link\" href=\"#examples\">*</a>Examples</h2>\n<div class=\"example\" data-session=\"8d0206e2205a6bccd5e60f85c2ecefb4\">\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">ZADD myzset 0 a 0 b 0 c 0 d 0 e 0 f 0 g</span>\n<pre>(integer) 7</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">ZRANGEBYLEX myzset - [c</span>\n<pre>1) \"a\"\n2) \"b\"\n3) \"c\"</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">ZRANGEBYLEX myzset - (c</span>\n<pre>1) \"a\"\n2) \"b\"</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">ZRANGEBYLEX myzset [aaa (g</span>\n<pre>1) \"b\"\n2) \"c\"\n3) \"d\"\n4) \"e\"\n5) \"f\"</pre><form>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<input autocomplete=\"off\" name=\"command\" spellcheck=\"false\" type=\"text\"/>\n</form></div>\n</div>"}, "ZREVRANGEBYLEX": {"category": "sorted_set", "help_link": "/commands/zrevrangebylex", "args": ["key", "max", "min", "[LIMIT offset count]"], "summary": "Return a range of members in a sorted set, by lexicographical range, ordered from higher to lower strings.", "name": "ZREVRANGEBYLEX", "help_text": "<div class=\"article-main\">\n<div class=\"metadata\">\n<p><strong>Available since 2.8.9.</strong></p>\n<p><strong>Time complexity:</strong> O(log(N)+M) with N being the number of elements in the sorted set and M the number of elements being returned. If M is constant (e.g. always asking for the first 10 elements with LIMIT), you can consider it O(log(N)).</p>\n</div>\n<p>When all the elements in a sorted set are inserted with the same score, in order to force lexicographical ordering, this command returns all the elements in the sorted set at <code>key</code> with a value between <code>max</code> and <code>min</code>.</p>\n<p>Apart from the reversed ordering, <a href=\"/commands/zrevrangebylex\">ZREVRANGEBYLEX</a> is similar to <a href=\"/commands/zrangebylex\">ZRANGEBYLEX</a>.</p>\n<span class=\"anchor\" id=\"return-value\"></span><h2><a class=\"anchor-link\" href=\"#return-value\">*</a>Return value</h2>\n<p><a href=\"/topics/protocol#array-reply\">Array reply</a>: list of elements in the specified score range.</p>\n<span class=\"anchor\" id=\"examples\"></span><h2><a class=\"anchor-link\" href=\"#examples\">*</a>Examples</h2>\n<div class=\"example\" data-session=\"96c0cb08c926d1db1c183f92788e352d\">\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">ZADD myzset 0 a 0 b 0 c 0 d 0 e 0 f 0 g</span>\n<pre>(integer) 7</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">ZREVRANGEBYLEX myzset [c -</span>\n<pre>1) \"c\"\n2) \"b\"\n3) \"a\"</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">ZREVRANGEBYLEX myzset (c -</span>\n<pre>1) \"b\"\n2) \"a\"</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">ZREVRANGEBYLEX myzset (g [aaa</span>\n<pre>1) \"f\"\n2) \"e\"\n3) \"d\"\n4) \"c\"\n5) \"b\"</pre><form>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<input autocomplete=\"off\" name=\"command\" spellcheck=\"false\" type=\"text\"/>\n</form></div>\n</div>"}, "ZRANGEBYSCORE": {"category": "sorted_set", "help_link": "/commands/zrangebyscore", "args": ["key", "min", "max", "[WITHSCORES]", "[LIMIT offset count]"], "summary": "Return a range of members in a sorted set, by score", "name": "ZRANGEBYSCORE", "help_text": "<div class=\"article-main\">\n<div class=\"metadata\">\n<p><strong>Available since 1.0.5.</strong></p>\n<p><strong>Time complexity:</strong> O(log(N)+M) with N being the number of elements in the sorted set and M the number of elements being returned. If M is constant (e.g. always asking for the first 10 elements with LIMIT), you can consider it O(log(N)).</p>\n</div>\n<p>Returns all the elements in the sorted set at <code>key</code> with a score between <code>min</code>\n              and <code>max</code> (including elements with score equal to <code>min</code> or <code>max</code>).\n              The elements are considered to be ordered from low to high scores.</p>\n<p>The elements having the same score are returned in lexicographical order (this\n              follows from a property of the sorted set implementation in Redis and does not\n              involve further computation).</p>\n<p>The optional <code>LIMIT</code> argument can be used to only get a range of the matching\n              elements (similar to <em>SELECT LIMIT offset, count</em> in SQL). A negative <code>count</code>\n              returns all elements from the <code>offset</code>.\n              Keep in mind that if <code>offset</code> is large, the sorted set needs to be traversed for\n              <code>offset</code> elements before getting to the elements to return, which can add up to\n              <span class=\"math\">O(N) </span>time complexity.</p>\n<p>The optional <code>WITHSCORES</code> argument makes the command return both the element and\n              its score, instead of the element alone.\n              This option is available since Redis 2.0.</p>\n<span class=\"anchor\" id=\"exclusive-intervals-and-infinity\"></span><h2><a class=\"anchor-link\" href=\"#exclusive-intervals-and-infinity\">*</a>Exclusive intervals and infinity</h2>\n<p><code>min</code> and <code>max</code> can be <code>-inf</code> and <code>+inf</code>, so that you are not required to know\n              the highest or lowest score in the sorted set to get all elements from or up to\n              a certain score.</p>\n<p>By default, the interval specified by <code>min</code> and <code>max</code> is closed (inclusive).\n              It is possible to specify an open interval (exclusive) by prefixing the score\n              with the character <code>(</code>.\n              For example:</p>\n<pre><code>ZRANGEBYSCORE zset (1 5\n</code></pre>\n<p>Will return all elements with <code>1 &lt; score &lt;= 5</code> while:</p>\n<pre><code>ZRANGEBYSCORE zset (5 (10\n</code></pre>\n<p>Will return all the elements with <code>5 &lt; score &lt; 10</code> (5 and 10 excluded).</p>\n<span class=\"anchor\" id=\"return-value\"></span><h2><a class=\"anchor-link\" href=\"#return-value\">*</a>Return value</h2>\n<p><a href=\"/topics/protocol#array-reply\">Array reply</a>: list of elements in the specified score range (optionally\n              with their scores).</p>\n<span class=\"anchor\" id=\"examples\"></span><h2><a class=\"anchor-link\" href=\"#examples\">*</a>Examples</h2>\n<div class=\"example\" data-session=\"09f29e0f9341e63dfa124d9d9dbb5c88\">\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">ZADD myzset 1 \"one\"</span>\n<pre>(integer) 1</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">ZADD myzset 2 \"two\"</span>\n<pre>(integer) 1</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">ZADD myzset 3 \"three\"</span>\n<pre>(integer) 1</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">ZRANGEBYSCORE myzset -inf +inf</span>\n<pre>1) \"one\"\n2) \"two\"\n3) \"three\"</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">ZRANGEBYSCORE myzset 1 2</span>\n<pre>1) \"one\"\n2) \"two\"</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">ZRANGEBYSCORE myzset (1 2</span>\n<pre>1) \"two\"</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">ZRANGEBYSCORE myzset (1 (2</span>\n<pre>(empty list or set)</pre><form>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<input autocomplete=\"off\" name=\"command\" spellcheck=\"false\" type=\"text\"/>\n</form></div>\n<span class=\"anchor\" id=\"pattern-weighted-random-selection-of-an-element\"></span><h2><a class=\"anchor-link\" href=\"#pattern-weighted-random-selection-of-an-element\">*</a>Pattern: weighted random selection of an element</h2>\n<p>Normally <a href=\"/commands/zrangebyscore\">ZRANGEBYSCORE</a> is simply used in order to get range of items\n              where the score is the indexed integer key, however it is possible to do less\n              obvious things with the command.</p>\n<p>For example a common problem when implementing Markov chains and other algorithms\n              is to select an element at random from a set, but different elements may have\n              different weights that change how likely it is they are picked.</p>\n<p>This is how we use this command in order to mount such an algorithm:</p>\n<p>Imagine you have elements A, B and C with weights 1, 2 and 3.\n              You compute the sum of the weights, which is 1+2+3 = 6</p>\n<p>At this point you add all the elements into a sorted set using this algorithm:</p>\n<pre><code>SUM = ELEMENTS.TOTAL_WEIGHT // 6 in this case.\nSCORE = 0\nFOREACH ELE in ELEMENTS\n    SCORE += ELE.weight / SUM\n    ZADD KEY SCORE ELE\nEND\n</code></pre>\n<p>This means that you set:</p>\n<pre><code>A to score 0.16\nB to score .5\nC to score 1\n</code></pre>\n<p>Since this involves approximations, in order to avoid C is set to,\n              like, 0.998 instead of 1, we just modify the above algorithm to make sure\n              the last score is 1 (left as an exercise for the reader...).</p>\n<p>At this point, each time you want to get a weighted random element,\n              just compute a random number between 0 and 1 (which is like calling\n              <code>rand()</code> in most languages), so you can just do:</p>\n<pre><code>RANDOM_ELE = ZRANGEBYSCORE key RAND() +inf LIMIT 0 1\n</code></pre>\n</div>"}, "ZRANK": {"category": "sorted_set", "help_link": "/commands/zrank", "args": ["key", "member"], "summary": "Determine the index of a member in a sorted set", "name": "ZRANK", "help_text": "<div class=\"article-main\">\n<div class=\"metadata\">\n<p><strong>Available since 2.0.0.</strong></p>\n<p><strong>Time complexity:</strong> O(log(N))</p>\n</div>\n<p>Returns the rank of <code>member</code> in the sorted set stored at <code>key</code>, with the scores\n              ordered from low to high.\n              The rank (or index) is 0-based, which means that the member with the lowest\n              score has rank <code>0</code>.</p>\n<p>Use <a href=\"/commands/zrevrank\">ZREVRANK</a> to get the rank of an element with the scores ordered from high\n              to low.</p>\n<span class=\"anchor\" id=\"return-value\"></span><h2><a class=\"anchor-link\" href=\"#return-value\">*</a>Return value</h2>\n<ul>\n<li>If <code>member</code> exists in the sorted set, <a href=\"/topics/protocol#integer-reply\">Integer reply</a>: the rank of <code>member</code>.</li>\n<li>If <code>member</code> does not exist in the sorted set or <code>key</code> does not exist,\n              <a href=\"/topics/protocol#bulk-string-reply\">Bulk string reply</a>: <code>nil</code>.</li>\n</ul>\n<span class=\"anchor\" id=\"examples\"></span><h2><a class=\"anchor-link\" href=\"#examples\">*</a>Examples</h2>\n<div class=\"example\" data-session=\"57fc448e5df97943a8e4791e3117cb19\">\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">ZADD myzset 1 \"one\"</span>\n<pre>(integer) 1</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">ZADD myzset 2 \"two\"</span>\n<pre>(integer) 1</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">ZADD myzset 3 \"three\"</span>\n<pre>(integer) 1</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">ZRANK myzset \"three\"</span>\n<pre>(integer) 2</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">ZRANK myzset \"four\"</span>\n<pre>(nil)</pre><form>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<input autocomplete=\"off\" name=\"command\" spellcheck=\"false\" type=\"text\"/>\n</form></div>\n</div>"}, "ZREM": {"category": "sorted_set", "help_link": "/commands/zrem", "args": ["key", "member [member ...]"], "summary": "Remove one or more members from a sorted set", "name": "ZREM", "help_text": "<div class=\"article-main\">\n<div class=\"metadata\">\n<p><strong>Available since 1.2.0.</strong></p>\n<p><strong>Time complexity:</strong> O(M*log(N)) with N being the number of elements in the sorted set and M the number of elements to be removed.</p>\n</div>\n<p>Removes the specified members from the sorted set stored at <code>key</code>.\n              Non existing members are ignored.</p>\n<p>An error is returned when <code>key</code> exists and does not hold a sorted set.</p>\n<span class=\"anchor\" id=\"return-value\"></span><h2><a class=\"anchor-link\" href=\"#return-value\">*</a>Return value</h2>\n<p><a href=\"/topics/protocol#integer-reply\">Integer reply</a>, specifically:</p>\n<ul>\n<li>The number of members removed from the sorted set, not including non existing\n              members.</li>\n</ul>\n<span class=\"anchor\" id=\"history\"></span><h2><a class=\"anchor-link\" href=\"#history\">*</a>History</h2>\n<ul>\n<li><code>&gt;= 2.4</code>: Accepts multiple elements.\n              In Redis versions older than 2.4 it was possible to remove a single member per\n              call.</li>\n</ul>\n<span class=\"anchor\" id=\"examples\"></span><h2><a class=\"anchor-link\" href=\"#examples\">*</a>Examples</h2>\n<div class=\"example\" data-session=\"b8e4f2352d3ccdcdabcccecfb37c14e9\">\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">ZADD myzset 1 \"one\"</span>\n<pre>(integer) 1</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">ZADD myzset 2 \"two\"</span>\n<pre>(integer) 1</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">ZADD myzset 3 \"three\"</span>\n<pre>(integer) 1</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">ZREM myzset \"two\"</span>\n<pre>(integer) 1</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">ZRANGE myzset 0 -1 WITHSCORES</span>\n<pre>1) \"one\"\n2) \"1\"\n3) \"three\"\n4) \"3\"</pre><form>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<input autocomplete=\"off\" name=\"command\" spellcheck=\"false\" type=\"text\"/>\n</form></div>\n</div>"}, "ZREMRANGEBYLEX": {"category": "sorted_set", "help_link": "/commands/zremrangebylex", "args": ["key", "min", "max"], "summary": "Remove all members in a sorted set between the given lexicographical range", "name": "ZREMRANGEBYLEX", "help_text": "<div class=\"article-main\">\n<div class=\"metadata\">\n<p><strong>Available since 2.8.9.</strong></p>\n<p><strong>Time complexity:</strong> O(log(N)+M) with N being the number of elements in the sorted set and M the number of elements removed by the operation.</p>\n</div>\n<p>When all the elements in a sorted set are inserted with the same score, in order to force lexicographical ordering, this command removes all elements in the sorted set stored at <code>key</code> between the lexicographical range specified by <code>min</code> and <code>max</code>.</p>\n<p>The meaning of <code>min</code> and <code>max</code> are the same of the <a href=\"/commands/zrangebylex\">ZRANGEBYLEX</a> command. Similarly, this command actually returns the same elements that <a href=\"/commands/zrangebylex\">ZRANGEBYLEX</a> would return if called with the same <code>min</code> and <code>max</code> arguments.</p>\n<span class=\"anchor\" id=\"return-value\"></span><h2><a class=\"anchor-link\" href=\"#return-value\">*</a>Return value</h2>\n<p><a href=\"/topics/protocol#integer-reply\">Integer reply</a>: the number of elements removed.</p>\n<span class=\"anchor\" id=\"examples\"></span><h2><a class=\"anchor-link\" href=\"#examples\">*</a>Examples</h2>\n<div class=\"example\" data-session=\"3ccd6f9dad9c08c5ebff993c27d411c0\">\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">ZADD myzset 0 aaaa 0 b 0 c 0 d 0 e</span>\n<pre>(integer) 5</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">ZADD myzset 0 foo 0 zap 0 zip 0 ALPHA 0 alpha</span>\n<pre>(integer) 5</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">ZRANGE myzset 0 -1</span>\n<pre>1) \"ALPHA\"\n 2) \"aaaa\"\n 3) \"alpha\"\n 4) \"b\"\n 5) \"c\"\n 6) \"d\"\n 7) \"e\"\n 8) \"foo\"\n 9) \"zap\"\n10) \"zip\"</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">ZREMRANGEBYLEX myzset [alpha [omega</span>\n<pre>(integer) 6</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">ZRANGE myzset 0 -1</span>\n<pre>1) \"ALPHA\"\n2) \"aaaa\"\n3) \"zap\"\n4) \"zip\"</pre><form>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<input autocomplete=\"off\" name=\"command\" spellcheck=\"false\" type=\"text\"/>\n</form></div>\n</div>"}, "ZREMRANGEBYRANK": {"category": "sorted_set", "help_link": "/commands/zremrangebyrank", "args": ["key", "start", "stop"], "summary": "Remove all members in a sorted set within the given indexes", "name": "ZREMRANGEBYRANK", "help_text": "<div class=\"article-main\">\n<div class=\"metadata\">\n<p><strong>Available since 2.0.0.</strong></p>\n<p><strong>Time complexity:</strong> O(log(N)+M) with N being the number of elements in the sorted set and M the number of elements removed by the operation.</p>\n</div>\n<p>Removes all elements in the sorted set stored at <code>key</code> with rank between <code>start</code>\n              and <code>stop</code>.\n              Both <code>start</code> and <code>stop</code> are <code>0</code> -based indexes with <code>0</code> being the element with\n              the lowest score.\n              These indexes can be negative numbers, where they indicate offsets starting at\n              the element with the highest score.\n              For example: <code>-1</code> is the element with the highest score, <code>-2</code> the element with\n              the second highest score and so forth.</p>\n<span class=\"anchor\" id=\"return-value\"></span><h2><a class=\"anchor-link\" href=\"#return-value\">*</a>Return value</h2>\n<p><a href=\"/topics/protocol#integer-reply\">Integer reply</a>: the number of elements removed.</p>\n<span class=\"anchor\" id=\"examples\"></span><h2><a class=\"anchor-link\" href=\"#examples\">*</a>Examples</h2>\n<div class=\"example\" data-session=\"952ea6ac957cd522d3407a8c292805af\">\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">ZADD myzset 1 \"one\"</span>\n<pre>(integer) 1</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">ZADD myzset 2 \"two\"</span>\n<pre>(integer) 1</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">ZADD myzset 3 \"three\"</span>\n<pre>(integer) 1</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">ZREMRANGEBYRANK myzset 0 1</span>\n<pre>(integer) 2</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">ZRANGE myzset 0 -1 WITHSCORES</span>\n<pre>1) \"three\"\n2) \"3\"</pre><form>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<input autocomplete=\"off\" name=\"command\" spellcheck=\"false\" type=\"text\"/>\n</form></div>\n</div>"}, "ZREMRANGEBYSCORE": {"category": "sorted_set", "help_link": "/commands/zremrangebyscore", "args": ["key", "min", "max"], "summary": "Remove all members in a sorted set within the given scores", "name": "ZREMRANGEBYSCORE", "help_text": "<div class=\"article-main\">\n<div class=\"metadata\">\n<p><strong>Available since 1.2.0.</strong></p>\n<p><strong>Time complexity:</strong> O(log(N)+M) with N being the number of elements in the sorted set and M the number of elements removed by the operation.</p>\n</div>\n<p>Removes all elements in the sorted set stored at <code>key</code> with a score between\n              <code>min</code> and <code>max</code> (inclusive).</p>\n<p>Since version 2.1.6, <code>min</code> and <code>max</code> can be exclusive, following the syntax of\n              <a href=\"/commands/zrangebyscore\">ZRANGEBYSCORE</a>.</p>\n<span class=\"anchor\" id=\"return-value\"></span><h2><a class=\"anchor-link\" href=\"#return-value\">*</a>Return value</h2>\n<p><a href=\"/topics/protocol#integer-reply\">Integer reply</a>: the number of elements removed.</p>\n<span class=\"anchor\" id=\"examples\"></span><h2><a class=\"anchor-link\" href=\"#examples\">*</a>Examples</h2>\n<div class=\"example\" data-session=\"68b52fc739ae9e84c8b10d75283de8b9\">\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">ZADD myzset 1 \"one\"</span>\n<pre>(integer) 1</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">ZADD myzset 2 \"two\"</span>\n<pre>(integer) 1</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">ZADD myzset 3 \"three\"</span>\n<pre>(integer) 1</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">ZREMRANGEBYSCORE myzset -inf (2</span>\n<pre>(integer) 1</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">ZRANGE myzset 0 -1 WITHSCORES</span>\n<pre>1) \"two\"\n2) \"2\"\n3) \"three\"\n4) \"3\"</pre><form>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<input autocomplete=\"off\" name=\"command\" spellcheck=\"false\" type=\"text\"/>\n</form></div>\n</div>"}, "ZREVRANGE": {"category": "sorted_set", "help_link": "/commands/zrevrange", "args": ["key", "start", "stop", "[WITHSCORES]"], "summary": "Return a range of members in a sorted set, by index, with scores ordered from high to low", "name": "ZREVRANGE", "help_text": "<div class=\"article-main\">\n<div class=\"metadata\">\n<p><strong>Available since 1.2.0.</strong></p>\n<p><strong>Time complexity:</strong> O(log(N)+M) with N being the number of elements in the sorted set and M the number of elements returned.</p>\n</div>\n<p>Returns the specified range of elements in the sorted set stored at <code>key</code>.\n              The elements are considered to be ordered from the highest to the lowest score.\n              Descending lexicographical order is used for elements with equal score.</p>\n<p>Apart from the reversed ordering, <a href=\"/commands/zrevrange\">ZREVRANGE</a> is similar to <a href=\"/commands/zrange\">ZRANGE</a>.</p>\n<span class=\"anchor\" id=\"return-value\"></span><h2><a class=\"anchor-link\" href=\"#return-value\">*</a>Return value</h2>\n<p><a href=\"/topics/protocol#array-reply\">Array reply</a>: list of elements in the specified range (optionally with\n              their scores).</p>\n<span class=\"anchor\" id=\"examples\"></span><h2><a class=\"anchor-link\" href=\"#examples\">*</a>Examples</h2>\n<div class=\"example\" data-session=\"ebc4a6cec516a7c58043f42907659af5\">\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">ZADD myzset 1 \"one\"</span>\n<pre>(integer) 1</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">ZADD myzset 2 \"two\"</span>\n<pre>(integer) 1</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">ZADD myzset 3 \"three\"</span>\n<pre>(integer) 1</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">ZREVRANGE myzset 0 -1</span>\n<pre>1) \"three\"\n2) \"two\"\n3) \"one\"</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">ZREVRANGE myzset 2 3</span>\n<pre>1) \"one\"</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">ZREVRANGE myzset -2 -1</span>\n<pre>1) \"two\"\n2) \"one\"</pre><form>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<input autocomplete=\"off\" name=\"command\" spellcheck=\"false\" type=\"text\"/>\n</form></div>\n</div>"}, "ZREVRANGEBYSCORE": {"category": "sorted_set", "help_link": "/commands/zrevrangebyscore", "args": ["key", "max", "min", "[WITHSCORES]", "[LIMIT offset count]"], "summary": "Return a range of members in a sorted set, by score, with scores ordered from high to low", "name": "ZREVRANGEBYSCORE", "help_text": "<div class=\"article-main\">\n<div class=\"metadata\">\n<p><strong>Available since 2.2.0.</strong></p>\n<p><strong>Time complexity:</strong> O(log(N)+M) with N being the number of elements in the sorted set and M the number of elements being returned. If M is constant (e.g. always asking for the first 10 elements with LIMIT), you can consider it O(log(N)).</p>\n</div>\n<p>Returns all the elements in the sorted set at <code>key</code> with a score between <code>max</code>\n              and <code>min</code> (including elements with score equal to <code>max</code> or <code>min</code>).\n              In contrary to the default ordering of sorted sets, for this command the\n              elements are considered to be ordered from high to low scores.</p>\n<p>The elements having the same score are returned in reverse lexicographical\n              order.</p>\n<p>Apart from the reversed ordering, <a href=\"/commands/zrevrangebyscore\">ZREVRANGEBYSCORE</a> is similar to\n              <a href=\"/commands/zrangebyscore\">ZRANGEBYSCORE</a>.</p>\n<span class=\"anchor\" id=\"return-value\"></span><h2><a class=\"anchor-link\" href=\"#return-value\">*</a>Return value</h2>\n<p><a href=\"/topics/protocol#array-reply\">Array reply</a>: list of elements in the specified score range (optionally\n              with their scores).</p>\n<span class=\"anchor\" id=\"examples\"></span><h2><a class=\"anchor-link\" href=\"#examples\">*</a>Examples</h2>\n<div class=\"example\" data-session=\"765a7562c111f3ece16b23815323e076\">\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">ZADD myzset 1 \"one\"</span>\n<pre>(integer) 1</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">ZADD myzset 2 \"two\"</span>\n<pre>(integer) 1</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">ZADD myzset 3 \"three\"</span>\n<pre>(integer) 1</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">ZREVRANGEBYSCORE myzset +inf -inf</span>\n<pre>1) \"three\"\n2) \"two\"\n3) \"one\"</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">ZREVRANGEBYSCORE myzset 2 1</span>\n<pre>1) \"two\"\n2) \"one\"</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">ZREVRANGEBYSCORE myzset 2 (1</span>\n<pre>1) \"two\"</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">ZREVRANGEBYSCORE myzset (2 (1</span>\n<pre>(empty list or set)</pre><form>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<input autocomplete=\"off\" name=\"command\" spellcheck=\"false\" type=\"text\"/>\n</form></div>\n</div>"}, "ZREVRANK": {"category": "sorted_set", "help_link": "/commands/zrevrank", "args": ["key", "member"], "summary": "Determine the index of a member in a sorted set, with scores ordered from high to low", "name": "ZREVRANK", "help_text": "<div class=\"article-main\">\n<div class=\"metadata\">\n<p><strong>Available since 2.0.0.</strong></p>\n<p><strong>Time complexity:</strong> O(log(N))</p>\n</div>\n<p>Returns the rank of <code>member</code> in the sorted set stored at <code>key</code>, with the scores\n              ordered from high to low.\n              The rank (or index) is 0-based, which means that the member with the highest\n              score has rank <code>0</code>.</p>\n<p>Use <a href=\"/commands/zrank\">ZRANK</a> to get the rank of an element with the scores ordered from low to\n              high.</p>\n<span class=\"anchor\" id=\"return-value\"></span><h2><a class=\"anchor-link\" href=\"#return-value\">*</a>Return value</h2>\n<ul>\n<li>If <code>member</code> exists in the sorted set, <a href=\"/topics/protocol#integer-reply\">Integer reply</a>: the rank of <code>member</code>.</li>\n<li>If <code>member</code> does not exist in the sorted set or <code>key</code> does not exist,\n              <a href=\"/topics/protocol#bulk-string-reply\">Bulk string reply</a>: <code>nil</code>.</li>\n</ul>\n<span class=\"anchor\" id=\"examples\"></span><h2><a class=\"anchor-link\" href=\"#examples\">*</a>Examples</h2>\n<div class=\"example\" data-session=\"429c4fbc933afd389169b70c3f19878d\">\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">ZADD myzset 1 \"one\"</span>\n<pre>(integer) 1</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">ZADD myzset 2 \"two\"</span>\n<pre>(integer) 1</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">ZADD myzset 3 \"three\"</span>\n<pre>(integer) 1</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">ZREVRANK myzset \"one\"</span>\n<pre>(integer) 2</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">ZREVRANK myzset \"four\"</span>\n<pre>(nil)</pre><form>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<input autocomplete=\"off\" name=\"command\" spellcheck=\"false\" type=\"text\"/>\n</form></div>\n</div>"}, "ZSCORE": {"category": "sorted_set", "help_link": "/commands/zscore", "args": ["key", "member"], "summary": "Get the score associated with the given member in a sorted set", "name": "ZSCORE", "help_text": "<div class=\"article-main\">\n<div class=\"metadata\">\n<p><strong>Available since 1.2.0.</strong></p>\n<p><strong>Time complexity:</strong> O(1)</p>\n</div>\n<p>Returns the score of <code>member</code> in the sorted set at <code>key</code>.</p>\n<p>If <code>member</code> does not exist in the sorted set, or <code>key</code> does not exist, <code>nil</code> is\n              returned.</p>\n<span class=\"anchor\" id=\"return-value\"></span><h2><a class=\"anchor-link\" href=\"#return-value\">*</a>Return value</h2>\n<p><a href=\"/topics/protocol#bulk-string-reply\">Bulk string reply</a>: the score of <code>member</code> (a double precision floating point number),\n              represented as string.</p>\n<span class=\"anchor\" id=\"examples\"></span><h2><a class=\"anchor-link\" href=\"#examples\">*</a>Examples</h2>\n<div class=\"example\" data-session=\"aefc202bf3e10fc62dedc1d0a5a9cc32\">\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">ZADD myzset 1 \"one\"</span>\n<pre>(integer) 1</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">ZSCORE myzset \"one\"</span>\n<pre>\"1\"</pre><form>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<input autocomplete=\"off\" name=\"command\" spellcheck=\"false\" type=\"text\"/>\n</form></div>\n</div>"}, "ZUNIONSTORE": {"category": "sorted_set", "help_link": "/commands/zunionstore", "args": ["destination", "numkeys", "key [key ...]", "[WEIGHTS weight [weight ...]]", "[AGGREGATE SUM|MIN|MAX]"], "summary": "Add multiple sorted sets and store the resulting sorted set in a new key", "name": "ZUNIONSTORE", "help_text": "<div class=\"article-main\">\n<div class=\"metadata\">\n<p><strong>Available since 2.0.0.</strong></p>\n<p><strong>Time complexity:</strong> O(N)+O(M log(M)) with N being the sum of the sizes of the input sorted sets, and M being the number of elements in the resulting sorted set.</p>\n</div>\n<p>Computes the union of <code>numkeys</code> sorted sets given by the specified keys, and\n              stores the result in <code>destination</code>.\n              It is mandatory to provide the number of input keys (<code>numkeys</code>) before passing\n              the input keys and the other (optional) arguments.</p>\n<p>By default, the resulting score of an element is the sum of its scores in the\n              sorted sets where it exists.</p>\n<p>Using the <code>WEIGHTS</code> option, it is possible to specify a multiplication factor\n              for each input sorted set.\n              This means that the score of every element in every input sorted set is\n              multiplied by this factor before being passed to the aggregation function.\n              When <code>WEIGHTS</code> is not given, the multiplication factors default to <code>1</code>.</p>\n<p>With the <code>AGGREGATE</code> option, it is possible to specify how the results of the\n              union are aggregated.\n              This option defaults to <code>SUM</code>, where the score of an element is summed across\n              the inputs where it exists.\n              When this option is set to either <code>MIN</code> or <code>MAX</code>, the resulting set will contain\n              the minimum or maximum score of an element across the inputs where it exists.</p>\n<p>If <code>destination</code> already exists, it is overwritten.</p>\n<span class=\"anchor\" id=\"return-value\"></span><h2><a class=\"anchor-link\" href=\"#return-value\">*</a>Return value</h2>\n<p><a href=\"/topics/protocol#integer-reply\">Integer reply</a>: the number of elements in the resulting sorted set at\n              <code>destination</code>.</p>\n<span class=\"anchor\" id=\"examples\"></span><h2><a class=\"anchor-link\" href=\"#examples\">*</a>Examples</h2>\n<div class=\"example\" data-session=\"1b24325f4bf75ec1fe95065fa101ab17\">\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">ZADD zset1 1 \"one\"</span>\n<pre>(integer) 1</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">ZADD zset1 2 \"two\"</span>\n<pre>(integer) 1</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">ZADD zset2 1 \"one\"</span>\n<pre>(integer) 1</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">ZADD zset2 2 \"two\"</span>\n<pre>(integer) 1</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">ZADD zset2 3 \"three\"</span>\n<pre>(integer) 1</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">ZUNIONSTORE out 2 zset1 zset2 WEIGHTS 2 3</span>\n<pre>(integer) 3</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">ZRANGE out 0 -1 WITHSCORES</span>\n<pre>1) \"one\"\n2) \"5\"\n3) \"three\"\n4) \"9\"\n5) \"two\"\n6) \"10\"</pre><form>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<input autocomplete=\"off\" name=\"command\" spellcheck=\"false\" type=\"text\"/>\n</form></div>\n</div>"}, "SCAN": {"category": "generic", "help_link": "/commands/scan", "args": ["cursor", "[MATCH pattern]", "[COUNT count]", "[TYPE type]"], "summary": "Incrementally iterate the keys space", "name": "SCAN", "help_text": "<div class=\"article-main\">\n<div class=\"metadata\">\n<p><strong>Available since 2.8.0.</strong></p>\n<p><strong>Time complexity:</strong> O(1) for every call. O(N) for a complete iteration, including enough command calls for the cursor to return back to 0. N is the number of elements inside the collection.</p>\n</div>\n<p>The <a href=\"/commands/scan\">SCAN</a> command and the closely related commands <a href=\"/commands/sscan\">SSCAN</a>, <a href=\"/commands/hscan\">HSCAN</a> and <a href=\"/commands/zscan\">ZSCAN</a> are used in order to incrementally iterate over a collection of elements.</p>\n<ul>\n<li><a href=\"/commands/scan\">SCAN</a> iterates the set of keys in the currently selected Redis database.</li>\n<li><a href=\"/commands/sscan\">SSCAN</a> iterates elements of Sets types.</li>\n<li><a href=\"/commands/hscan\">HSCAN</a> iterates fields of Hash types and their associated values.</li>\n<li><a href=\"/commands/zscan\">ZSCAN</a> iterates elements of Sorted Set types and their associated scores.</li>\n</ul>\n<p>Since these commands allow for incremental iteration, returning only a small number of elements per call, they can be used in production without the downside of commands like <a href=\"/commands/keys\">KEYS</a> or <a href=\"/commands/smembers\">SMEMBERS</a> that may block the server for a long time (even several seconds) when called against big collections of keys or elements.</p>\n<p>However while blocking commands like <a href=\"/commands/smembers\">SMEMBERS</a> are able to provide all the elements that are part of a Set in a given moment, The SCAN family of commands only offer limited guarantees about the returned elements since the collection that we incrementally iterate can change during the iteration process.</p>\n<p>Note that <a href=\"/commands/scan\">SCAN</a>, <a href=\"/commands/sscan\">SSCAN</a>, <a href=\"/commands/hscan\">HSCAN</a> and <a href=\"/commands/zscan\">ZSCAN</a> all work very similarly, so this documentation covers all the four commands. However an obvious difference is that in the case of <a href=\"/commands/sscan\">SSCAN</a>, <a href=\"/commands/hscan\">HSCAN</a> and <a href=\"/commands/zscan\">ZSCAN</a> the first argument is the name of the key holding the Set, Hash or Sorted Set value. The <a href=\"/commands/scan\">SCAN</a> command does not need any key name argument as it iterates keys in the current database, so the iterated object is the database itself.</p>\n<span class=\"anchor\" id=\"scan-basic-usage\"></span><h2><a class=\"anchor-link\" href=\"#scan-basic-usage\">*</a>SCAN basic usage</h2>\n<p>SCAN is a cursor based iterator. This means that at every call of the command, the server returns an updated cursor that the user needs to use as the cursor argument in the next call.</p>\n<p>An iteration starts when the cursor is set to 0, and terminates when the cursor returned by the server is 0. The following is an example of SCAN iteration:</p>\n<pre><code>redis 127.0.0.1:6379&gt; scan 0\n1) \"17\"\n2)  1) \"key:12\"\n    2) \"key:8\"\n    3) \"key:4\"\n    4) \"key:14\"\n    5) \"key:16\"\n    6) \"key:17\"\n    7) \"key:15\"\n    8) \"key:10\"\n    9) \"key:3\"\n   10) \"key:7\"\n   11) \"key:1\"\nredis 127.0.0.1:6379&gt; scan 17\n1) \"0\"\n2) 1) \"key:5\"\n   2) \"key:18\"\n   3) \"key:0\"\n   4) \"key:2\"\n   5) \"key:19\"\n   6) \"key:13\"\n   7) \"key:6\"\n   8) \"key:9\"\n   9) \"key:11\"\n</code></pre>\n<p>In the example above, the first call uses zero as a cursor, to start the iteration. The second call uses the cursor returned by the previous call as the first element of the reply, that is, 17.</p>\n<p>As you can see the <strong>SCAN return value</strong> is an array of two values: the first value is the new cursor to use in the next call, the second value is an array of elements.</p>\n<p>Since in the second call the returned cursor is 0, the server signaled to the caller that the iteration finished, and the collection was completely explored. Starting an iteration with a cursor value of 0, and calling <a href=\"/commands/scan\">SCAN</a> until the returned cursor is 0 again is called a <strong>full iteration</strong>.</p>\n<span class=\"anchor\" id=\"scan-guarantees\"></span><h2><a class=\"anchor-link\" href=\"#scan-guarantees\">*</a>Scan guarantees</h2>\n<p>The <a href=\"/commands/scan\">SCAN</a> command, and the other commands in the <a href=\"/commands/scan\">SCAN</a> family, are able to provide to the user a set of guarantees associated to full iterations.</p>\n<ul>\n<li>A full iteration always retrieves all the elements that were present in the collection from the start to the end of a full iteration. This means that if a given element is inside the collection when an iteration is started, and is still there when an iteration terminates, then at some point <a href=\"/commands/scan\">SCAN</a> returned it to the user.</li>\n<li>A full iteration never returns any element that was NOT present in the collection from the start to the end of a full iteration. So if an element was removed before the start of an iteration, and is never added back to the collection for all the time an iteration lasts, <a href=\"/commands/scan\">SCAN</a> ensures that this element will never be returned.</li>\n</ul>\n<p>However because <a href=\"/commands/scan\">SCAN</a> has very little state associated (just the cursor) it has the following drawbacks:</p>\n<ul>\n<li>A given element may be returned multiple times. It is up to the application to handle the case of duplicated elements, for example only using the returned elements in order to perform operations that are safe when re-applied multiple times.</li>\n<li>Elements that were not constantly present in the collection during a full iteration, may be returned or not: it is undefined.</li>\n</ul>\n<span class=\"anchor\" id=\"number-of-elements-returned-at-every-scan-call\"></span><h2><a class=\"anchor-link\" href=\"#number-of-elements-returned-at-every-scan-call\">*</a>Number of elements returned at every SCAN call</h2>\n<p><a href=\"/commands/scan\">SCAN</a> family functions do not guarantee that the number of elements returned per call are in a given range. The commands are also allowed to return zero elements, and the client should not consider the iteration complete as long as the returned cursor is not zero.</p>\n<p>However the number of returned elements is reasonable, that is, in practical terms SCAN may return a maximum number of elements in the order of a few tens of elements when iterating a large collection, or may return all the elements of the collection in a single call when the iterated collection is small enough to be internally represented as an encoded data structure (this happens for small sets, hashes and sorted sets).</p>\n<p>However there is a way for the user to tune the order of magnitude of the number of returned elements per call using the <strong>COUNT</strong> option.</p>\n<span class=\"anchor\" id=\"the-count-option\"></span><h2><a class=\"anchor-link\" href=\"#the-count-option\">*</a>The COUNT option</h2>\n<p>While <a href=\"/commands/scan\">SCAN</a> does not provide guarantees about the number of elements returned at every iteration, it is possible to empirically adjust the behavior of <a href=\"/commands/scan\">SCAN</a> using the <strong>COUNT</strong> option. Basically with COUNT the user specified the <em>amount of work that should be done at every call in order to retrieve elements from the collection</em>. This is <strong>just a hint</strong> for the implementation, however generally speaking this is what you could expect most of the times from the implementation.</p>\n<ul>\n<li>The default COUNT value is 10.</li>\n<li>When iterating the key space, or a Set, Hash or Sorted Set that is big enough to be represented by a hash table, assuming no <strong>MATCH</strong> option is used, the server will usually return <em>count</em> or a bit more than <em>count</em> elements per call. Please check the <em>why SCAN may return all the elements at once</em> section later in this document.</li>\n<li>When iterating Sets encoded as intsets (small sets composed of just integers), or Hashes and Sorted Sets encoded as ziplists (small hashes and sets composed of small individual values), usually all the elements are returned in the first <a href=\"/commands/scan\">SCAN</a> call regardless of the COUNT value.</li>\n</ul>\n<p>Important: <strong>there is no need to use the same COUNT value</strong> for every iteration. The caller is free to change the count from one iteration to the other as required, as long as the cursor passed in the next call is the one obtained in the previous call to the command.</p>\n<span class=\"anchor\" id=\"the-match-option\"></span><h2><a class=\"anchor-link\" href=\"#the-match-option\">*</a>The MATCH option</h2>\n<p>It is possible to only iterate elements matching a given glob-style pattern, similarly to the behavior of the <a href=\"/commands/keys\">KEYS</a> command that takes a pattern as only argument.</p>\n<p>To do so, just append the <code>MATCH &lt;pattern&gt;</code> arguments at the end of the <a href=\"/commands/scan\">SCAN</a> command (it works with all the SCAN family commands).</p>\n<p>This is an example of iteration using <strong>MATCH</strong>:</p>\n<pre><code>redis 127.0.0.1:6379&gt; sadd myset 1 2 3 foo foobar feelsgood\n(integer) 6\nredis 127.0.0.1:6379&gt; sscan myset 0 match f*\n1) \"0\"\n2) 1) \"foo\"\n   2) \"feelsgood\"\n   3) \"foobar\"\nredis 127.0.0.1:6379&gt;\n</code></pre>\n<p>It is important to note that the <strong>MATCH</strong> filter is applied after elements are retrieved from the collection, just before returning data to the client. This means that if the pattern matches very little elements inside the collection, <a href=\"/commands/scan\">SCAN</a> will likely return no elements in most iterations. An example is shown below:</p>\n<pre><code>redis 127.0.0.1:6379&gt; scan 0 MATCH *11*\n1) \"288\"\n2) 1) \"key:911\"\nredis 127.0.0.1:6379&gt; scan 288 MATCH *11*\n1) \"224\"\n2) (empty list or set)\nredis 127.0.0.1:6379&gt; scan 224 MATCH *11*\n1) \"80\"\n2) (empty list or set)\nredis 127.0.0.1:6379&gt; scan 80 MATCH *11*\n1) \"176\"\n2) (empty list or set)\nredis 127.0.0.1:6379&gt; scan 176 MATCH *11* COUNT 1000\n1) \"0\"\n2)  1) \"key:611\"\n    2) \"key:711\"\n    3) \"key:118\"\n    4) \"key:117\"\n    5) \"key:311\"\n    6) \"key:112\"\n    7) \"key:111\"\n    8) \"key:110\"\n    9) \"key:113\"\n   10) \"key:211\"\n   11) \"key:411\"\n   12) \"key:115\"\n   13) \"key:116\"\n   14) \"key:114\"\n   15) \"key:119\"\n   16) \"key:811\"\n   17) \"key:511\"\n   18) \"key:11\"\nredis 127.0.0.1:6379&gt;\n</code></pre>\n<p>As you can see most of the calls returned zero elements, but the last call where a COUNT of 1000 was used in order to force the command to do more scanning for that iteration.</p>\n<span class=\"anchor\" id=\"the-type-option\"></span><h2><a class=\"anchor-link\" href=\"#the-type-option\">*</a>The TYPE option</h2>\n<p>This option asks <a href=\"/commands/scan\">SCAN</a> to only return objects that match a given <code>type</code>, allowing you to iterate through the database looking for keys of a specific type. The <strong>TYPE</strong> option is only available on the whole-database <a href=\"/commands/scan\">SCAN</a>, not <a href=\"/commands/hscan\">HSCAN</a> or <a href=\"/commands/zscan\">ZSCAN</a> etc.</p>\n<p>The <code>type</code> argument is the same string name that the <a href=\"/commands/type\">TYPE</a> command returns. Note a quirk where some Redis types, such as GeoHashes, HyperLogLogs, Bitmaps, and Bitfields, may internally be implemented using other Redis types, such as a string or zset, so can't be distinguished from other keys of that same type by <a href=\"/commands/scan\">SCAN</a>. For example, a ZSET and GEOHASH:</p>\n<pre><code>redis 127.0.0.1:6379&gt; GEOADD geokey 0 0 value\n(integer) 1\nredis 127.0.0.1:6379&gt; ZADD zkey 1000 value\n(integer) 1\nredis 127.0.0.1:6379&gt; TYPE geokey\nzset\nredis 127.0.0.1:6379&gt; TYPE zkey\nzset\nredis 127.0.0.1:6379&gt; SCAN 0 TYPE zset\n1) \"0\"\n2) 1) \"geokey\"\n   2) \"zkey\"\n</code></pre>\n<p>It is important to note that the <strong>TYPE</strong> filter is also applied after elements are retrieved from the database, so the option does not reduce the amount of work the server has to do to complete a full iteration, and for rare types you may receive no elements in many iterations.</p>\n<span class=\"anchor\" id=\"multiple-parallel-iterations\"></span><h2><a class=\"anchor-link\" href=\"#multiple-parallel-iterations\">*</a>Multiple parallel iterations</h2>\n<p>It is possible for an infinite number of clients to iterate the same collection at the same time, as the full state of the iterator is in the cursor, that is obtained and returned to the client at every call. Server side no state is taken at all.</p>\n<span class=\"anchor\" id=\"terminating-iterations-in-the-middle\"></span><h2><a class=\"anchor-link\" href=\"#terminating-iterations-in-the-middle\">*</a>Terminating iterations in the middle</h2>\n<p>Since there is no state server side, but the full state is captured by the cursor, the caller is free to terminate an iteration half-way without signaling this to the server in any way. An infinite number of iterations can be started and never terminated without any issue.</p>\n<span class=\"anchor\" id=\"calling-scan-with-a-corrupted-cursor\"></span><h2><a class=\"anchor-link\" href=\"#calling-scan-with-a-corrupted-cursor\">*</a>Calling SCAN with a corrupted cursor</h2>\n<p>Calling <a href=\"/commands/scan\">SCAN</a> with a broken, negative, out of range, or otherwise invalid cursor, will result into undefined behavior but never into a crash. What will be undefined is that the guarantees about the returned elements can no longer be ensured by the <a href=\"/commands/scan\">SCAN</a> implementation.</p>\n<p>The only valid cursors to use are:</p>\n<ul>\n<li>The cursor value of 0 when starting an iteration.</li>\n<li>The cursor returned by the previous call to SCAN in order to continue the iteration.</li>\n</ul>\n<span class=\"anchor\" id=\"guarantee-of-termination\"></span><h2><a class=\"anchor-link\" href=\"#guarantee-of-termination\">*</a>Guarantee of termination</h2>\n<p>The <a href=\"/commands/scan\">SCAN</a> algorithm is guaranteed to terminate only if the size of the iterated collection remains bounded to a given maximum size, otherwise iterating a collection that always grows may result into <a href=\"/commands/scan\">SCAN</a> to never terminate a full iteration.</p>\n<p>This is easy to see intuitively: if the collection grows there is more and more work to do in order to visit all the possible elements, and the ability to terminate the iteration depends on the number of calls to <a href=\"/commands/scan\">SCAN</a> and its COUNT option value compared with the rate at which the collection grows.</p>\n<span class=\"anchor\" id=\"why-scan-may-return-all-the-items-of-an-aggregate-data-type-in-a-single-call\"></span><h2><a class=\"anchor-link\" href=\"#why-scan-may-return-all-the-items-of-an-aggregate-data-type-in-a-single-call\">*</a>Why SCAN may return all the items of an aggregate data type in a single call?</h2>\n<p>In the <code>COUNT</code> option documentation, we state that sometimes this family of commands may return all the elements of a Set, Hash or Sorted Set at once in a single call, regardless of the <code>COUNT</code> option value. The reason why this happens is that the cursor-based iterator can be implemented, and is useful, only when the aggregate data type that we are scanning is represented as an hash table. However Redis uses a <a href=\"/topics/memory-optimization\">memory optimization</a> where small aggregate data types, until they reach a given amount of items or a given max size of single elements, are represented using a compact single-allocation packed encoding. When this is the case, <a href=\"/commands/scan\">SCAN</a> has no meaningful cursor to return, and must iterate the whole data structure at once, so the only sane behavior it has is to return everything in a call.</p>\n<p>However once the data structures are bigger and are promoted to use real hash tables, the <a href=\"/commands/scan\">SCAN</a> family of commands will resort to the normal behavior. Note that since this special behavior of returning all the elements is true only for small aggregates, it has no effects on the command complexity or latency. However the exact limits to get converted into real hash tables are <a href=\"/topics/memory-optimization\">user configurable</a>, so the maximum number of elements you can see returned in a single call depends on how big an aggregate data type could be and still use the packed representation.</p>\n<p>Also note that this behavior is specific of <a href=\"/commands/sscan\">SSCAN</a>, <a href=\"/commands/hscan\">HSCAN</a> and <a href=\"/commands/zscan\">ZSCAN</a>. <a href=\"/commands/scan\">SCAN</a> itself never shows this behavior because the key space is always represented by hash tables.</p>\n<span class=\"anchor\" id=\"return-value\"></span><h2><a class=\"anchor-link\" href=\"#return-value\">*</a>Return value</h2>\n<p><a href=\"/commands/scan\">SCAN</a>, <a href=\"/commands/sscan\">SSCAN</a>, <a href=\"/commands/hscan\">HSCAN</a> and <a href=\"/commands/zscan\">ZSCAN</a> return a two elements multi-bulk reply, where the first element is a string representing an unsigned 64 bit number (the cursor), and the second element is a multi-bulk with an array of elements.</p>\n<ul>\n<li><a href=\"/commands/scan\">SCAN</a> array of elements is a list of keys.</li>\n<li><a href=\"/commands/sscan\">SSCAN</a> array of elements is a list of Set members.</li>\n<li><a href=\"/commands/hscan\">HSCAN</a> array of elements contain two elements, a field and a value, for every returned element of the Hash.</li>\n<li><a href=\"/commands/zscan\">ZSCAN</a> array of elements contain two elements, a member and its associated score, for every returned element of the sorted set.</li>\n</ul>\n<span class=\"anchor\" id=\"additional-examples\"></span><h2><a class=\"anchor-link\" href=\"#additional-examples\">*</a>Additional examples</h2>\n<p>Iteration of a Hash value.</p>\n<pre><code>redis 127.0.0.1:6379&gt; hmset hash name Jack age 33\nOK\nredis 127.0.0.1:6379&gt; hscan hash 0\n1) \"0\"\n2) 1) \"name\"\n   2) \"Jack\"\n   3) \"age\"\n   4) \"33\"\n</code></pre>\n</div>"}, "SSCAN": {"category": "set", "help_link": "/commands/sscan", "args": ["key", "cursor", "[MATCH pattern]", "[COUNT count]"], "summary": "Incrementally iterate Set elements", "name": "SSCAN", "help_text": "<div class=\"article-main\">\n<div class=\"metadata\">\n<p><strong>Available since 2.8.0.</strong></p>\n<p><strong>Time complexity:</strong> O(1) for every call. O(N) for a complete iteration, including enough command calls for the cursor to return back to 0. N is the number of elements inside the collection..</p>\n</div>\n<p>See <a href=\"/commands/scan\">SCAN</a> for <a href=\"/commands/sscan\">SSCAN</a> documentation.</p>\n</div>"}, "HSCAN": {"category": "hash", "help_link": "/commands/hscan", "args": ["key", "cursor", "[MATCH pattern]", "[COUNT count]"], "summary": "Incrementally iterate hash fields and associated values", "name": "HSCAN", "help_text": "<div class=\"article-main\">\n<div class=\"metadata\">\n<p><strong>Available since 2.8.0.</strong></p>\n<p><strong>Time complexity:</strong> O(1) for every call. O(N) for a complete iteration, including enough command calls for the cursor to return back to 0. N is the number of elements inside the collection..</p>\n</div>\n<p>See <a href=\"/commands/scan\">SCAN</a> for <a href=\"/commands/hscan\">HSCAN</a> documentation.</p>\n</div>"}, "ZSCAN": {"category": "sorted_set", "help_link": "/commands/zscan", "args": ["key", "cursor", "[MATCH pattern]", "[COUNT count]"], "summary": "Incrementally iterate sorted sets elements and associated scores", "name": "ZSCAN", "help_text": "<div class=\"article-main\">\n<div class=\"metadata\">\n<p><strong>Available since 2.8.0.</strong></p>\n<p><strong>Time complexity:</strong> O(1) for every call. O(N) for a complete iteration, including enough command calls for the cursor to return back to 0. N is the number of elements inside the collection..</p>\n</div>\n<p>See <a href=\"/commands/scan\">SCAN</a> for <a href=\"/commands/zscan\">ZSCAN</a> documentation.</p>\n</div>"}, "XINFO": {"category": "stream", "help_link": "/commands/xinfo", "args": ["[CONSUMERS key groupname]", "[GROUPS key]", "[STREAM key]", "[HELP]"], "summary": "Get information on streams and consumer groups", "name": "XINFO", "help_text": "<div class=\"article-main\">\n<div class=\"metadata\">\n<p><strong>Available since 5.0.0.</strong></p>\n<p><strong>Time complexity:</strong> O(N) with N being the number of returned items for the subcommands CONSUMERS and GROUPS. The STREAM subcommand is O(log N) with N being the number of items in the stream.</p>\n</div>\n<p>This is an introspection command used in order to retrieve different information\n              about the streams and associated consumer groups. Three forms are possible:</p>\n<ul>\n<li><code>XINFO STREAM &lt;key&gt;</code></li>\n</ul>\n<p>In this form the command returns general information about the stream stored\n              at the specified key.</p>\n<pre><code>&gt; XINFO STREAM mystream\n 1) length\n 2) (integer) 2\n 3) radix-tree-keys\n 4) (integer) 1\n 5) radix-tree-nodes\n 6) (integer) 2\n 7) groups\n 8) (integer) 2\n 9) last-generated-id\n10) 1538385846314-0\n11) first-entry\n12) 1) 1538385820729-0\n    2) 1) \"foo\"\n       2) \"bar\"\n13) last-entry\n14) 1) 1538385846314-0\n    2) 1) \"field\"\n       2) \"value\"\n</code></pre>\n<p>In the above example you can see that the reported information are the number\n              of elements of the stream, details about the radix tree representing the\n              stream mostly useful for optimization and debugging tasks, the number of\n              consumer groups associated with the stream, the last generated ID that may\n              not be the same as the last entry ID in case some entry was deleted. Finally\n              the full first and last entry in the stream are shown, in order to give some\n              sense about what is the stream content.</p>\n<ul>\n<li><code>XINFO GROUPS &lt;key&gt;</code></li>\n</ul>\n<p>In this form we just get as output all the consumer groups associated with the\n              stream:</p>\n<pre><code>&gt; XINFO GROUPS mystream\n1) 1) name\n   2) \"mygroup\"\n   3) consumers\n   4) (integer) 2\n   5) pending\n   6) (integer) 2\n2) 1) name\n   2) \"some-other-group\"\n   3) consumers\n   4) (integer) 1\n   5) pending\n   6) (integer) 0\n</code></pre>\n<p>For each consumer group listed the command also shows the number of consumers\n              known in that group and the pending messages (delivered but not yet acknowledged)\n              in that group.</p>\n<ul>\n<li><code>XINFO CONSUMERS &lt;key&gt; &lt;group&gt;</code></li>\n</ul>\n<p>Finally it is possible to get the list of every consumer in a specific consumer\n              group:</p>\n<pre><code>&gt; XINFO CONSUMERS mystream mygroup\n1) 1) name\n   2) \"Alice\"\n   3) pending\n   4) (integer) 1\n   5) idle\n   6) (integer) 9104628\n2) 1) name\n   2) \"Bob\"\n   3) pending\n   4) (integer) 1\n   5) idle\n   6) (integer) 83841983\n</code></pre>\n<p>We can see the idle time in milliseconds (last field) together with the\n              consumer name and the number of pending messages for this specific\n              consumer.</p>\n<p><strong>Note that you should not rely on the fields exact position</strong>, nor on the\n              number of fields, new fields may be added in the future. So a well behaving\n              client should fetch the whole list, and report it to the user, for example,\n              as a dictionary data structure. Low level clients such as C clients where\n              the items will likely be reported back in a linear array should document\n              that the order is undefined.</p>\n<p>Finally it is possible to get help from the command, in case the user can't\n              remember the exact syntax, by using the <code>HELP</code> subcommnad:</p>\n<pre><code>&gt; XINFO HELP\n1) XINFO &lt;subcommand&gt; arg arg ... arg. Subcommands are:\n2) CONSUMERS &lt;key&gt; &lt;groupname&gt;  -- Show consumer groups of group &lt;groupname&gt;.\n3) GROUPS &lt;key&gt;                 -- Show the stream consumer groups.\n4) STREAM &lt;key&gt;                 -- Show information about the stream.\n5) HELP\n</code></pre>\n</div>"}, "XADD": {"category": "stream", "help_link": "/commands/xadd", "args": ["key", "ID", "field string [field string ...]"], "summary": "Appends a new entry to a stream", "name": "XADD", "help_text": "<div class=\"article-main\">\n<div class=\"metadata\">\n<p><strong>Available since 5.0.0.</strong></p>\n<p><strong>Time complexity:</strong> O(1)</p>\n</div>\n<p>Appends the specified stream entry to the stream at the specified key.\n              If the key does not exist, as a side effect of running this command the\n              key is created with a stream value.</p>\n<p>An entry is composed of a set of field-value pairs, it is basically a\n              small dictionary. The field-value pairs are stored in the same order\n              they are given by the user, and commands to read the stream such as\n              <a href=\"/commands/xrange\">XRANGE</a> or <a href=\"/commands/xread\">XREAD</a> are guaranteed to return the fields and values\n              exactly in the same order they were added by <a href=\"/commands/xadd\">XADD</a>.</p>\n<p><a href=\"/commands/xadd\">XADD</a> is the <em>only Redis command</em> that can add data to a stream, but \n              there are other commands, such as <a href=\"/commands/xdel\">XDEL</a> and <a href=\"/commands/xtrim\">XTRIM</a>, that are able to\n              remove data from a stream.</p>\n<span class=\"anchor\" id=\"specifying-a-stream-id-as-an-argument\"></span><h2><a class=\"anchor-link\" href=\"#specifying-a-stream-id-as-an-argument\">*</a>Specifying a Stream ID as an argument</h2>\n<p>A stream entry ID identifies a given entry inside a stream.\n              The <a href=\"/commands/xadd\">XADD</a> command will auto-generate a unique ID for you if the ID argument\n              specified is the <code>*</code> character (asterisk ASCII character). However, while\n              useful only in very rare cases, it is possible to specify a well-formed ID, so\n              that the new entry will be added exactly with the specified ID.</p>\n<p>IDs are specified by two numbers separated by a <code>-</code> character:</p>\n<pre><code>1526919030474-55\n</code></pre>\n<p>Both quantities are 64-bit numbers. When an ID is auto-generated, the\n              first part is the Unix time in milliseconds of the Redis instance generating\n              the ID. The second part is just a sequence number and is used in order to\n              distinguish IDs generated in the same millisecond.</p>\n<p>IDs are guaranteed to be always incremental: If you compare the ID of the\n              entry just inserted it will be greater than any other past ID, so entries\n              are totally ordered inside a stream. In order to guarantee this property,\n              if the current top ID in the stream has a time greater than the current\n              local time of the instance, the top entry time will be used instead, and\n              the sequence part of the ID incremented. This may happen when, for instance,\n              the local clock jumps backward, or if after a failover the new master has\n              a different absolute time.</p>\n<p>When a user specified an explicit ID to <a href=\"/commands/xadd\">XADD</a>, the minimum valid ID is\n              <code>0-1</code>, and the user <em>must</em> specify an ID which is greater than any other\n              ID currently inside the stream, otherwise the command will fail. Usually\n              resorting to specific IDs is useful only if you have another system generating\n              unique IDs (for instance an SQL table) and you really want the Redis stream\n              IDs to match the one of this other system.</p>\n<span class=\"anchor\" id=\"capped-streams\"></span><h2><a class=\"anchor-link\" href=\"#capped-streams\">*</a>Capped streams</h2>\n<p>It is possible to limit the size of the stream to a maximum number of\n              elements using the <strong>MAXLEN</strong> option. </p>\n<p>Trimming with <strong>MAXLEN</strong> can be expensive compared to just adding entries with \n              <a href=\"/commands/xadd\">XADD</a>: streams are represented by macro nodes into a radix tree, in order to\n              be very memory efficient. Altering the single macro node, consisting of a few\n              tens of elements, is not optimal. So it is possible to give the command in the\n              following special form:</p>\n<pre><code>XADD mystream MAXLEN ~ 1000 * ... entry fields here ...\n</code></pre>\n<p>The <code>~</code> argument between the <strong>MAXLEN</strong> option and the actual count means that\n              the user is not really requesting that the stream length is exactly 1000 items,\n              but instead it could be a few tens of entries more, but never less than 1000\n              items. When this option modifier is used, the trimming is performed only when\n              Redis is able to remove a whole macro node. This makes it much more efficient,\n              and it is usually what you want.</p>\n<span class=\"anchor\" id=\"additional-information-about-streams\"></span><h2><a class=\"anchor-link\" href=\"#additional-information-about-streams\">*</a>Additional information about streams</h2>\n<p>For further information about Redis streams please check our\n              <a href=\"/topics/streams-intro\">introduction to Redis Streams document</a>.</p>\n<span class=\"anchor\" id=\"return-value\"></span><h2><a class=\"anchor-link\" href=\"#return-value\">*</a>Return value</h2>\n<p><a href=\"/topics/protocol#bulk-string-reply\">Bulk string reply</a>, specifically:</p>\n<p>The command returns the ID of the added entry. The ID is the one auto-generated\n              if <code>*</code> is passed as ID argument, otherwise the command just returns the same ID\n              specified by the user during insertion.</p>\n<span class=\"anchor\" id=\"examples\"></span><h2><a class=\"anchor-link\" href=\"#examples\">*</a>Examples</h2>\n<div class=\"example\" data-session=\"df3c400d10da6c6e90634b791ad00e4a\">\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">XADD mystream * name Sara surname OConnor</span>\n<pre>\"1571404086428-0\"</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">XADD mystream * field1 value1 field2 value2 field3 value3</span>\n<pre>\"1571404086429-0\"</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">XLEN mystream</span>\n<pre>(integer) 2</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">XRANGE mystream - +</span>\n<pre>1) 1) \"1571404086428-0\"\n   2) 1) \"name\"\n      2) \"Sara\"\n      3) \"surname\"\n      4) \"OConnor\"\n2) 1) \"1571404086429-0\"\n   2) 1) \"field1\"\n      2) \"value1\"\n      3) \"field2\"\n      4) \"value2\"\n      5) \"field3\"\n      6) \"value3\"</pre><form>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<input autocomplete=\"off\" name=\"command\" spellcheck=\"false\" type=\"text\"/>\n</form></div>\n</div>"}, "XTRIM": {"category": "stream", "help_link": "/commands/xtrim", "args": ["key", "MAXLEN", "[~]", "count"], "summary": "Trims the stream to (approximately if '~' is passed) a certain size", "name": "XTRIM", "help_text": "<div class=\"article-main\">\n<div class=\"metadata\">\n<p><strong>Available since 5.0.0.</strong></p>\n<p><strong>Time complexity:</strong> O(N), with N being the number of evicted entries. Constant times are very small however, since entries are organized in macro nodes containing multiple entries that can be released with a single deallocation.</p>\n</div>\n<p><a href=\"/commands/xtrim\">XTRIM</a> trims the stream to a given number of items, evicting older items\n              (items with lower IDs) if needed. The command is conceived to accept multiple\n              trimming strategies, however currently only a single one is implemented,\n              which is <code>MAXLEN</code>, and works exactly as the <code>MAXLEN</code> option in <a href=\"/commands/xadd\">XADD</a>.</p>\n<p>For example the following command will trim the stream to exactly\n              the latest 1000 items:</p>\n<pre><code>XTRIM mystream MAXLEN 1000\n</code></pre>\n<p>It is possible to give the command in the following special form in\n              order to make it more efficient:</p>\n<pre><code>XTRIM mystream MAXLEN ~ 1000\n</code></pre>\n<p>The <code>~</code> argument between the <strong>MAXLEN</strong> option and the actual count means that\n              the user is not really requesting that the stream length is exactly 1000 items,\n              but instead it could be a few tens of entries more, but never less than 1000\n              items. When this option modifier is used, the trimming is performed only when\n              Redis is able to remove a whole macro node. This makes it much more efficient,\n              and it is usually what you want.</p>\n<span class=\"anchor\" id=\"return-value\"></span><h2><a class=\"anchor-link\" href=\"#return-value\">*</a>Return value</h2>\n<p><a href=\"/topics/protocol#integer-reply\">Integer reply</a>, specifically:</p>\n<p>The command returns the number of entries deleted from the stream.</p>\n<div class=\"example\" data-session=\"b87dba2248a149c186eae6359311ba4a\">\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">XADD mystream * field1 A field2 B field3 C field4 D</span>\n<pre>\"1571404086567-0\"</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">XTRIM mystream MAXLEN 2</span>\n<pre>ERR Unknown or disabled command 'XTRIM'</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">XRANGE mystream - +</span>\n<pre>1) 1) \"1571404086567-0\"\n   2) 1) \"field1\"\n      2) \"A\"\n      3) \"field2\"\n      4) \"B\"\n      5) \"field3\"\n      6) \"C\"\n      7) \"field4\"\n      8) \"D\"</pre><form>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<input autocomplete=\"off\" name=\"command\" spellcheck=\"false\" type=\"text\"/>\n</form></div>\n</div>"}, "XDEL": {"category": "stream", "help_link": "/commands/xdel", "args": ["key", "ID [ID ...]"], "summary": "Removes the specified entries from the stream. Returns the number of items actually deleted, that may be different from the number of IDs passed in case certain IDs do not exist.", "name": "XDEL", "help_text": "<div class=\"article-main\">\n<div class=\"metadata\">\n<p><strong>Available since 5.0.0.</strong></p>\n<p><strong>Time complexity:</strong> O(1) for each single item to delete in the stream, regardless of the stream size.</p>\n</div>\n<p>Removes the specified entries from a stream, and returns the number of entries\n              deleted, that may be different from the number of IDs passed to the command in\n              case certain IDs do not exist.</p>\n<p>Normally you may think at a Redis stream as an append-only data structure,\n              however Redis streams are represented in memory, so we are able to also\n              delete entries. This may be useful, for instance, in order to comply with\n              certain privacy policies.</p>\n<span class=\"anchor\" id=\"understanding-the-low-level-details-of-entries-deletion\"></span><h1><a class=\"anchor-link\" href=\"#understanding-the-low-level-details-of-entries-deletion\">*</a>Understanding the low level details of entries deletion</h1>\n<p>Redis streams are represented in a way that makes them memory efficient:\n              a radix tree is used in order to index macro-nodes that pack linearly tens\n              of stream entries. Normally what happens when you delete an entry from a stream\n              is that the entry is not <em>really</em> evicted, it just gets marked as deleted.</p>\n<p>Eventually if all the entries in a macro-node are marked as deleted, the whole\n              node is destroyed and the memory reclaimed. This means that if you delete\n              a large amount of entries from a stream, for instance more than 50% of the\n              entries appended to the stream, the memory usage per entry may increment, since\n              what happens is that the stream will start to be fragmented. However the stream\n              performances will remain the same.</p>\n<p>In future versions of Redis it is possible that we'll trigger a node garbage\n              collection in case a given macro-node reaches a given amount of deleted\n              entries. Currently with the usage we anticipate for this data structure, it is\n              not a good idea to add such complexity.</p>\n<span class=\"anchor\" id=\"return-value\"></span><h2><a class=\"anchor-link\" href=\"#return-value\">*</a>Return value</h2>\n<p><a href=\"/topics/protocol#integer-reply\">Integer reply</a>: the number of entries actually deleted.</p>\n<span class=\"anchor\" id=\"examples\"></span><h2><a class=\"anchor-link\" href=\"#examples\">*</a>Examples</h2>\n<pre><code>&gt; XADD mystream * a 1\n1538561698944-0\n&gt; XADD mystream * b 2\n1538561700640-0\n&gt; XADD mystream * c 3\n1538561701744-0\n&gt; XDEL mystream 1538561700640-0\n(integer) 1\n127.0.0.1:6379&gt; XRANGE mystream - +\n1) 1) 1538561698944-0\n   2) 1) \"a\"\n      2) \"1\"\n2) 1) 1538561701744-0\n   2) 1) \"c\"\n      2) \"3\"\n</code></pre>\n</div>"}, "XRANGE": {"category": "stream", "help_link": "/commands/xrange", "args": ["key", "start", "end", "[COUNT count]"], "summary": "Return a range of elements in a stream, with IDs matching the specified IDs interval", "name": "XRANGE", "help_text": "<div class=\"article-main\">\n<div class=\"metadata\">\n<p><strong>Available since 5.0.0.</strong></p>\n<p><strong>Time complexity:</strong> O(N) with N being the number of elements being returned. If N is constant (e.g. always asking for the first 10 elements with COUNT), you can consider it O(1).</p>\n</div>\n<p>The command returns the stream entries matching a given range of IDs.\n              The range is specified by a minimum and maximum ID. All the entries having\n              an ID between the two specified or exactly one of the two IDs specified\n              (closed interval) are returned.</p>\n<p>The <a href=\"/commands/xrange\">XRANGE</a> command has a number of applications:</p>\n<ul>\n<li>Returning items in a specific time range. This is possible because\n              Stream IDs are <a href=\"/topics/streams-intro\">related to time</a>.</li>\n<li>Iterating a stream incrementally, returning just\n              a few items at every iteration. However it is semantically much more\n              robust than the <a href=\"/commands/scan\">SCAN</a> family of functions.</li>\n<li>Fetching a single entry from a stream, providing the ID of the entry\n              to fetch two times: as start and end of the query interval.</li>\n</ul>\n<p>The command also has a reciprocal command returning items in the\n              reverse order, called <a href=\"/commands/xrevrange\">XREVRANGE</a>, which is otherwise identical.</p>\n<span class=\"anchor\" id=\"code-code-and-code-code-special-ids\"></span><h2><a class=\"anchor-link\" href=\"#code-code-and-code-code-special-ids\">*</a><code>-</code> and <code>+</code> special IDs</h2>\n<p>The <code>-</code> and <code>+</code> special IDs mean respectively the minimum ID possible\n              and the maximum ID possible inside a stream, so the following command\n              will just return every entry in the stream:</p>\n<pre><code>&gt; XRANGE somestream - +\n1) 1) 1526985054069-0\n   2) 1) \"duration\"\n      2) \"72\"\n      3) \"event-id\"\n      4) \"9\"\n      5) \"user-id\"\n      6) \"839248\"\n2) 1) 1526985069902-0\n   2) 1) \"duration\"\n      2) \"415\"\n      3) \"event-id\"\n      4) \"2\"\n      5) \"user-id\"\n      6) \"772213\"\n... other entries here ...\n</code></pre>\n<p>The <code>-</code> ID is effectively just exactly as specifying <code>0-0</code>, while\n              <code>+</code> is equivalent to <code>18446744073709551615-18446744073709551615</code>, however\n              they are nicer to type.</p>\n<span class=\"anchor\" id=\"incomplete-ids\"></span><h2><a class=\"anchor-link\" href=\"#incomplete-ids\">*</a>Incomplete IDs</h2>\n<p>Stream IDs are composed of two parts, a Unix millisecond time stamp and a\n              sequence number for entries inserted in the same millisecond. It is possible\n              to use <a href=\"/commands/xrange\">XRANGE</a> specifying just the first part of the ID, the millisecond time,\n              like in the following example:</p>\n<pre><code>&gt; XRANGE somestream 1526985054069 1526985055069\n</code></pre>\n<p>In this case, <a href=\"/commands/xrange\">XRANGE</a> will auto-complete the start interval with <code>-0</code>\n              and end interval with <code>-18446744073709551615</code>, in order to return all the\n              entries that were generated between a given millisecond and the end of\n              the other specified millisecond. This also means that repeating the same\n              millisecond two times, we get all the entries within such millisecond,\n              because the sequence number range will be from zero to the maximum.</p>\n<p>Used in this way <a href=\"/commands/xrange\">XRANGE</a> works as a range query command to obtain entries\n              in a specified time. This is very handy in order to access the history\n              of past events in a stream.</p>\n<span class=\"anchor\" id=\"returning-a-maximum-number-of-entries\"></span><h2><a class=\"anchor-link\" href=\"#returning-a-maximum-number-of-entries\">*</a>Returning a maximum number of entries</h2>\n<p>Using the <strong>COUNT</strong> option it is possible to reduce the number of entries\n              reported. This is a very important feature even if it may look marginal,\n              because it allows, for instance, to model operations such as <em>give me\n              the entry greater or equal to the following</em>:</p>\n<pre><code>&gt; XRANGE somestream 1526985054069-0 + COUNT 1\n1) 1) 1526985054069-0\n   2) 1) \"duration\"\n      2) \"72\"\n      3) \"event-id\"\n      4) \"9\"\n      5) \"user-id\"\n      6) \"839248\"\n</code></pre>\n<p>In the above case the entry <code>1526985054069-0</code> exists, otherwise the server\n              would have sent us the next one. Using <code>COUNT</code> is also the base in order to\n              use <a href=\"/commands/xrange\">XRANGE</a> as an iterator.</p>\n<span class=\"anchor\" id=\"iterating-a-stream\"></span><h2><a class=\"anchor-link\" href=\"#iterating-a-stream\">*</a>Iterating a stream</h2>\n<p>In order to iterate a stream, we can proceed as follows. Let's assume that\n              we want two elements per iteration. We start fetching the first two\n              elements, which is trivial:</p>\n<pre><code>&gt; XRANGE writers - + COUNT 2\n1) 1) 1526985676425-0\n   2) 1) \"name\"\n      2) \"Virginia\"\n      3) \"surname\"\n      4) \"Woolf\"\n2) 1) 1526985685298-0\n   2) 1) \"name\"\n      2) \"Jane\"\n      3) \"surname\"\n      4) \"Austen\"\n</code></pre>\n<p>Then instead of starting the iteration again from <code>-</code>, as the start\n              of the range we use the entry ID of the <em>last</em> entry returned by the\n              previous <a href=\"/commands/xrange\">XRANGE</a> call, adding the sequence part of the ID by one.</p>\n<p>The ID of the last entry is <code>1526985685298-0</code>, so we just add 1 to the\n              sequence to obtain <code>1526985685298-1</code>, and continue our iteration:</p>\n<pre><code>&gt; XRANGE writers 1526985685298-1 + COUNT 2\n1) 1) 1526985691746-0\n   2) 1) \"name\"\n      2) \"Toni\"\n      3) \"surname\"\n      4) \"Morris\"\n2) 1) 1526985712947-0\n   2) 1) \"name\"\n      2) \"Agatha\"\n      3) \"surname\"\n      4) \"Christie\"\n</code></pre>\n<p>And so forth. Eventually this will allow to visit all the entries in the\n              stream. Obviously, we can start the iteration from any ID, or even from\n              a specific time, by providing a given incomplete start ID. Moreover, we\n              can limit the iteration to a given ID or time, by providing an end\n              ID or incomplete ID instead of <code>+</code>.</p>\n<p>The command <a href=\"/commands/xread\">XREAD</a> is also able to iterate the stream.\n              The command <a href=\"/commands/xrevrange\">XREVRANGE</a> can iterate the stream reverse, from higher IDs\n              (or times) to lower IDs (or times).</p>\n<span class=\"anchor\" id=\"fetching-single-items\"></span><h2><a class=\"anchor-link\" href=\"#fetching-single-items\">*</a>Fetching single items</h2>\n<p>If you look for an <code>XGET</code> command you'll be disappointed because <a href=\"/commands/xrange\">XRANGE</a>\n              is effectively the way to go in order to fetch a single entry from a\n              stream. All you have to do is to specify the ID two times in the arguments\n              of XRANGE:</p>\n<pre><code>&gt; XRANGE mystream 1526984818136-0 1526984818136-0\n1) 1) 1526984818136-0\n   2) 1) \"duration\"\n      2) \"1532\"\n      3) \"event-id\"\n      4) \"5\"\n      5) \"user-id\"\n      6) \"7782813\"\n</code></pre>\n<span class=\"anchor\" id=\"additional-information-about-streams\"></span><h2><a class=\"anchor-link\" href=\"#additional-information-about-streams\">*</a>Additional information about streams</h2>\n<p>For further information about Redis streams please check our\n              <a href=\"/topics/streams-intro\">introduction to Redis Streams document</a>.</p>\n<span class=\"anchor\" id=\"return-value\"></span><h2><a class=\"anchor-link\" href=\"#return-value\">*</a>Return value</h2>\n<p><a href=\"/topics/protocol#array-reply\">Array reply</a>, specifically:</p>\n<p>The command returns the entries with IDs matching the specified range.\n              The returned entries are complete, that means that the ID and all the fields\n              they are composed are returned. Moreover, the entries are returned with\n              their fields and values in the exact same order as <a href=\"/commands/xadd\">XADD</a> added them.</p>\n<span class=\"anchor\" id=\"examples\"></span><h2><a class=\"anchor-link\" href=\"#examples\">*</a>Examples</h2>\n<div class=\"example\" data-session=\"beadd4875565a3c0a2c40a656d2856f4\">\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">XADD writers * name Virginia surname Woolf</span>\n<pre>\"1571404086825-0\"</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">XADD writers * name Jane surname Austen</span>\n<pre>\"1571404086825-1\"</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">XADD writers * name Toni surname Morris</span>\n<pre>\"1571404086826-0\"</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">XADD writers * name Agatha surname Christie</span>\n<pre>\"1571404086827-0\"</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">XADD writers * name Ngozi surname Adichie</span>\n<pre>\"1571404086828-0\"</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">XLEN writers</span>\n<pre>(integer) 5</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">XRANGE writers - + COUNT 2</span>\n<pre>1) 1) \"1571404086825-0\"\n   2) 1) \"name\"\n      2) \"Virginia\"\n      3) \"surname\"\n      4) \"Woolf\"\n2) 1) \"1571404086825-1\"\n   2) 1) \"name\"\n      2) \"Jane\"\n      3) \"surname\"\n      4) \"Austen\"</pre><form>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<input autocomplete=\"off\" name=\"command\" spellcheck=\"false\" type=\"text\"/>\n</form></div>\n</div>"}, "XREVRANGE": {"category": "stream", "help_link": "/commands/xrevrange", "args": ["key", "end", "start", "[COUNT count]"], "summary": "Return a range of elements in a stream, with IDs matching the specified IDs interval, in reverse order (from greater to smaller IDs) compared to XRANGE", "name": "XREVRANGE", "help_text": "<div class=\"article-main\">\n<div class=\"metadata\">\n<p><strong>Available since 5.0.0.</strong></p>\n<p><strong>Time complexity:</strong> O(N) with N being the number of elements returned. If N is constant (e.g. always asking for the first 10 elements with COUNT), you can consider it O(1).</p>\n</div>\n<p>This command is exactly like <a href=\"/commands/xrange\">XRANGE</a>, but with the notable difference of\n              returning the entries in reverse order, and also taking the start-end\n              range in reverse order: in <a href=\"/commands/xrevrange\">XREVRANGE</a> you need to state the <em>end</em> ID\n              and later the <em>start</em> ID, and the command will produce all the element\n              between (or exactly like) the two IDs, starting from the <em>end</em> side.</p>\n<p>So for instance, to get all the elements from the higher ID to the lower\n              ID one could use:</p>\n<pre><code>XREVRANGE somestream + -\n</code></pre>\n<p>Similarly to get just the last element added into the stream it is\n              enough to send:</p>\n<pre><code>XREVRANGE somestream + - COUNT 1\n</code></pre>\n<span class=\"anchor\" id=\"iterating-with-xrevrange\"></span><h2><a class=\"anchor-link\" href=\"#iterating-with-xrevrange\">*</a>Iterating with XREVRANGE</h2>\n<p>Like <a href=\"/commands/xrange\">XRANGE</a> this command can be used in order to iterate the whole\n              stream content, however note that in this case, the next command calls\n              should use the ID of the last entry, with the sequence number decremneted\n              by one. However if the sequence number is already 0, the time part of the\n              ID should be decremented by 1, and the sequence part should be set to\n              the maxium possible sequence number, that is, 18446744073709551615, or\n              could be omitted at all, and the command will automatically assume it to\n              be such a number (see <a href=\"/commands/xrange\">XRANGE</a> for more info about incomplete IDs).</p>\n<p>Example:</p>\n<pre><code>&gt; XREVRANGE writers + - COUNT 2\n1) 1) 1526985723355-0\n   2) 1) \"name\"\n      2) \"Ngozi\"\n      3) \"surname\"\n      4) \"Adichie\"\n2) 1) 1526985712947-0\n   2) 1) \"name\"\n      2) \"Agatha\"\n      3) \"surname\"\n      4) \"Christie\"\n</code></pre>\n<p>The last ID returned is <code>1526985712947-0</code>, since the sequence number is\n              already zero, the next ID I'll use instead of the <code>+</code> special ID will\n              be <code>1526985712946-18446744073709551615</code>, or just <code>18446744073709551615</code>:</p>\n<pre><code>&gt; XREVRANGE writers 1526985712946-18446744073709551615 - COUNT 2\n1) 1) 1526985691746-0\n   2) 1) \"name\"\n      2) \"Toni\"\n      3) \"surname\"\n      4) \"Morris\"\n2) 1) 1526985685298-0\n   2) 1) \"name\"\n      2) \"Jane\"\n      3) \"surname\"\n      4) \"Austen\"\n</code></pre>\n<p>And so for until the iteration is complete and no result is returned.\n              See the <a href=\"/commands/xrange\">XRANGE</a> page about iterating for more information.</p>\n<span class=\"anchor\" id=\"return-value\"></span><h2><a class=\"anchor-link\" href=\"#return-value\">*</a>Return value</h2>\n<p><a href=\"/topics/protocol#array-reply\">Array reply</a>, specifically:</p>\n<p>The command returns the entries with IDs matching the specified range,\n              from the higher ID to the lower ID matching.\n              The returned entries are complete, that means that the ID and all the fields\n              they are composed are returned. Moreover the entries are returned with\n              their fields and values in the exact same order as <a href=\"/commands/xadd\">XADD</a> added them.</p>\n<span class=\"anchor\" id=\"examples\"></span><h2><a class=\"anchor-link\" href=\"#examples\">*</a>Examples</h2>\n<div class=\"example\" data-session=\"57959f2fb19778c3b7254bc752f20c28\">\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">XADD writers * name Virginia surname Woolf</span>\n<pre>\"1571404086957-0\"</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">XADD writers * name Jane surname Austen</span>\n<pre>\"1571404086958-0\"</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">XADD writers * name Toni surname Morris</span>\n<pre>\"1571404086959-0\"</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">XADD writers * name Agatha surname Christie</span>\n<pre>\"1571404086960-0\"</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">XADD writers * name Ngozi surname Adichie</span>\n<pre>\"1571404086961-0\"</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">XLEN writers</span>\n<pre>(integer) 5</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">XREVRANGE writers + - COUNT 1</span>\n<pre>1) 1) \"1571404086961-0\"\n   2) 1) \"name\"\n      2) \"Ngozi\"\n      3) \"surname\"\n      4) \"Adichie\"</pre><form>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<input autocomplete=\"off\" name=\"command\" spellcheck=\"false\" type=\"text\"/>\n</form></div>\n</div>"}, "XLEN": {"category": "stream", "help_link": "/commands/xlen", "args": ["key"], "summary": "Return the number of entires in a stream", "name": "XLEN", "help_text": "<div class=\"article-main\">\n<div class=\"metadata\">\n<p><strong>Available since 5.0.0.</strong></p>\n<p><strong>Time complexity:</strong> O(1)</p>\n</div>\n<p>Returns the number of entries inside a stream. If the specified key does not\n              exist the command returns zero, as if the stream was empty.\n              However note that unlike other Redis types, zero-length streams are\n              possible, so you should call <a href=\"/commands/type\">TYPE</a> or <a href=\"/commands/exists\">EXISTS</a> in order to check if\n              a key exists or not.</p>\n<p>Streams are not auto-deleted once they have no entries inside (for instance\n              after an <a href=\"/commands/xdel\">XDEL</a> call), because the stream may have consumer groups\n              associated with it.</p>\n<span class=\"anchor\" id=\"return-value\"></span><h2><a class=\"anchor-link\" href=\"#return-value\">*</a>Return value</h2>\n<p><a href=\"/topics/protocol#integer-reply\">Integer reply</a>: the number of entries of the stream at <code>key</code>.</p>\n<span class=\"anchor\" id=\"examples\"></span><h2><a class=\"anchor-link\" href=\"#examples\">*</a>Examples</h2>\n<div class=\"example\" data-session=\"4d2868392303f32a244893c5ce94bb45\">\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">XADD mystream * item 1</span>\n<pre>\"1571404087100-0\"</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">XADD mystream * item 2</span>\n<pre>\"1571404087101-0\"</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">XADD mystream * item 3</span>\n<pre>\"1571404087102-0\"</pre>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">XLEN mystream</span>\n<pre>(integer) 3</pre><form>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<input autocomplete=\"off\" name=\"command\" spellcheck=\"false\" type=\"text\"/>\n</form></div>\n</div>"}, "XREAD": {"category": "stream", "help_link": "/commands/xread", "args": ["[COUNT count]", "[BLOCK milliseconds]", "STREAMS", "key [key ...]", "id [id ...]"], "summary": "Return never seen elements in multiple streams, with IDs greater than the ones reported by the caller for each stream. Can block.", "name": "XREAD", "help_text": "<div class=\"article-main\">\n<div class=\"metadata\">\n<p><strong>Available since 5.0.0.</strong></p>\n<p><strong>Time complexity:</strong> For each stream mentioned: O(N) with N being the number of elements being returned, it means that XREAD-ing with a fixed COUNT is O(1). Note that when the BLOCK option is used, XADD will pay O(M) time in order to serve the M clients blocked on the stream getting new data.</p>\n</div>\n<p>Read data from one or multiple streams, only returning entries with an\n              ID greater than the last received ID reported by the caller.\n              This command has an option to block if items are not available, in a similar\n              fashion to <a href=\"/commands/brpop\">BRPOP</a> or <a href=\"/commands/bzpopmin\">BZPOPMIN</a> and others.</p>\n<p>Please note that before reading this page, if you are new to streams,\n              we recommend to read <a href=\"/topics/streams-intro\">our introduction to Redis Streams</a>.</p>\n<span class=\"anchor\" id=\"non-blocking-usage\"></span><h2><a class=\"anchor-link\" href=\"#non-blocking-usage\">*</a>Non-blocking usage</h2>\n<p>If the <strong>BLOCK</strong> option is not used, the command is synchronous, and can\n              be considered somewhat related to <a href=\"/commands/xrange\">XRANGE</a>: it will return a range of items\n              inside streams, however it has two fundamental differences compared to <a href=\"/commands/xrange\">XRANGE</a>\n              even if we just consider the synchronous usage:</p>\n<ul>\n<li>This command can be called with multiple streams if we want to read at\n              the same time from a number of keys. This is a key feature of <a href=\"/commands/xread\">XREAD</a> because\n              especially when blocking with <strong>BLOCK</strong>, to be able to listen with a single\n              connection to multiple keys is a vital feature.</li>\n<li>While <a href=\"/commands/xrange\">XRANGE</a> returns items in a range of IDs, <a href=\"/commands/xread\">XREAD</a> is more suited in\n              order to consume the stream starting from the first entry which is greater\n              than any other entry we saw so far. So what we pass to <a href=\"/commands/xread\">XREAD</a> is, for each\n              stream, the ID of the last element that we received from that stream.</li>\n</ul>\n<p>For example, if I have two streams <code>mystream</code> and <code>writers</code>, and I want to\n              read data from both the streams starting from the first element they contain,\n              I could call <a href=\"/commands/xread\">XREAD</a> like in the following example.</p>\n<p>Note: we use the <strong>COUNT</strong> option in the example, so that for each stream\n              the call will return at maximum two elements per stream.</p>\n<pre><code>&gt; XREAD COUNT 2 STREAMS mystream writers 0-0 0-0\n1) 1) \"mystream\"\n   2) 1) 1) 1526984818136-0\n         2) 1) \"duration\"\n            2) \"1532\"\n            3) \"event-id\"\n            4) \"5\"\n            5) \"user-id\"\n            6) \"7782813\"\n      2) 1) 1526999352406-0\n         2) 1) \"duration\"\n            2) \"812\"\n            3) \"event-id\"\n            4) \"9\"\n            5) \"user-id\"\n            6) \"388234\"\n2) 1) \"writers\"\n   2) 1) 1) 1526985676425-0\n         2) 1) \"name\"\n            2) \"Virginia\"\n            3) \"surname\"\n            4) \"Woolf\"\n      2) 1) 1526985685298-0\n         2) 1) \"name\"\n            2) \"Jane\"\n            3) \"surname\"\n            4) \"Austen\"\n</code></pre>\n<p>The <strong>STREAMS</strong> option is mandatory and MUST be the final option because\n              such option gets a variable length of argument in the following format:</p>\n<pre><code>STREAMS key_1 key_2 key_3 ... key_N ID_1 ID_2 ID_3 ... ID_N\n</code></pre>\n<p>So we start with a list of keys, and later continue with all the associated\n              IDs, representing <em>the last ID we received for that stream</em>, so that the\n              call will serve us only greater IDs from the same stream.</p>\n<p>For instance in the above example, the last items that we received\n              for the stream <code>mystream</code> has ID <code>1526999352406-0</code>, while for the\n              stream <code>writers</code> has the ID <code>1526985685298-0</code>.</p>\n<p>To continue iterating the two streams I'll call:</p>\n<pre><code>&gt; XREAD COUNT 2 STREAMS mystream writers 1526999352406-0 1526985685298-0\n1) 1) \"mystream\"\n   2) 1) 1) 1526999626221-0\n         2) 1) \"duration\"\n            2) \"911\"\n            3) \"event-id\"\n            4) \"7\"\n            5) \"user-id\"\n            6) \"9488232\"\n2) 1) \"writers\"\n   2) 1) 1) 1526985691746-0\n         2) 1) \"name\"\n            2) \"Toni\"\n            3) \"surname\"\n            4) \"Morris\"\n      2) 1) 1526985712947-0\n         2) 1) \"name\"\n            2) \"Agatha\"\n            3) \"surname\"\n            4) \"Christie\"\n</code></pre>\n<p>And so forth. Eventually, the call will not return any item, but just an\n              empty array, then we know that there is nothing more to fetch from our\n              stream (and we would have to retry the operation, hence this command\n              also supports a blocking mode).</p>\n<span class=\"anchor\" id=\"incomplete-ids\"></span><h2><a class=\"anchor-link\" href=\"#incomplete-ids\">*</a>Incomplete IDs</h2>\n<p>To use incomplete IDs is valid, like it is valid for <a href=\"/commands/xrange\">XRANGE</a>. However\n              here the sequence part of the ID, if missing, is always interpreted as\n              zero, so the command:</p>\n<pre><code>&gt; XREAD COUNT 2 STREAMS mystream writers 0 0\n</code></pre>\n<p>is exactly equivalent to</p>\n<pre><code>&gt; XREAD COUNT 2 STREAMS mystream writers 0-0 0-0\n</code></pre>\n<span class=\"anchor\" id=\"blocking-for-data\"></span><h2><a class=\"anchor-link\" href=\"#blocking-for-data\">*</a>Blocking for data</h2>\n<p>In its synchronous form, the command can get new data as long as there\n              are more items available. However, at some point, we'll have to wait for\n              producers of data to use <a href=\"/commands/xadd\">XADD</a> to push new entries inside the streams\n              we are consuming. In order to avoid polling at a fixed or adaptive interval\n              the command is able to block if it could not return any data, according\n              to the specified streams and IDs, and automatically unblock once one of\n              the requested keys accept data.</p>\n<p>It is important to understand that this command <em>fans out</em> to all the\n              clients that are waiting for the same range of IDs, so every consumer will\n              get a copy of the data, unlike to what happens when blocking list pop\n              operations are used.</p>\n<p>In order to block, the <strong>BLOCK</strong> option is used, together with the number\n              of milliseconds we want to block before timing out. Normally Redis blocking\n              commands take timeouts in seconds, however this command takes a millisecond\n              timeout, even if normally the server will have a timeout resolution near\n              to 0.1 seconds. This time it is possible to block for a shorter time in\n              certain use cases, and if the server internals will improve over time, it is\n              possible that the resolution of timeouts will improve.</p>\n<p>When the <strong>BLOCK</strong> command is passed, but there is data to return at\n              least in one of the streams passed, the command is executed synchronously\n              <em>exactly like if the BLOCK option would be missing</em>.</p>\n<p>This is an example of blocking invocation, where the command later returns\n              a null reply because the timeout has elapsed without new data arriving:</p>\n<pre><code>&gt; XREAD BLOCK 1000 STREAMS mystream 1526999626221-0\n(nil)\n</code></pre>\n<span class=\"anchor\" id=\"the-special-codecode-id\"></span><h2><a class=\"anchor-link\" href=\"#the-special-codecode-id\">*</a>The special <code>$</code> ID.</h2>\n<p>When blocking sometimes we want to receive just entries that are added\n              to the stream via <a href=\"/commands/xadd\">XADD</a> starting from the moment we block. In such a case\n              we are not interested in the history of already added entries. For\n              this use case, we would have to check the stream top element ID, and use\n              such ID in the <a href=\"/commands/xread\">XREAD</a> command line. This is not clean and requires to\n              call other commands, so instead it is possible to use the special <code>$</code>\n              ID to signal the stream that we want only the new things.</p>\n<p>It is <strong>very important</strong> to understand that you should use the <code>$</code>\n              ID only for the first call to <a href=\"/commands/xread\">XREAD</a>. Later the ID should be the one\n              of the last reported item in the stream, otherwise you could miss all\n              the entries that are added in between.</p>\n<p>This is how a typical <a href=\"/commands/xread\">XREAD</a> call looks like in the first iteration\n              of a consumer willing to consume only new entries:</p>\n<pre><code>&gt; XREAD BLOCK 5000 COUNT 100 STREAMS mystream $\n</code></pre>\n<p>Once we get some replies, the next call will be something like:</p>\n<pre><code>&gt; XREAD BLOCK 5000 COUNT 100 STREAMS mystream 1526999644174-3\n</code></pre>\n<p>And so forth.</p>\n<span class=\"anchor\" id=\"how-multiple-clients-blocked-on-a-single-stream-are-served\"></span><h2><a class=\"anchor-link\" href=\"#how-multiple-clients-blocked-on-a-single-stream-are-served\">*</a>How multiple clients blocked on a single stream are served</h2>\n<p>Blocking list operations on lists or sorted sets have a <em>pop</em> behavior.\n              Basically, the element is removed from the list or sorted set in order\n              to be returned to the client. In this scenario you want the items\n              to be consumed in a fair way, depending on the moment clients blocked\n              on a given key arrived. Normally Redis uses the FIFO semantics in this\n              use cases.</p>\n<p>However note that with streams this is not a problem: stream entries\n              are not removed from the stream when clients are served, so every\n              client waiting will be served as soon as an <a href=\"/commands/xadd\">XADD</a> command provides\n              data to the stream.</p>\n<span class=\"anchor\" id=\"return-value\"></span><h2><a class=\"anchor-link\" href=\"#return-value\">*</a>Return value</h2>\n<p><a href=\"/topics/protocol#array-reply\">Array reply</a>, specifically:</p>\n<p>The command returns an array of results: each element of the returned\n              array is an array composed of a two element containing the key name and\n              the entries reported for that key. The entries reported are full stream\n              entries, having IDs and the list of all the fields and values. Field and\n              values are guaranteed to be reported in the same order they were added\n              by <a href=\"/commands/xadd\">XADD</a>.</p>\n<p>When <strong>BLOCK</strong> is used, on timeout a null reply is returned.</p>\n<p>Reading the <a href=\"/topics/streams-intro\">Redis Streams introduction</a> is highly\n              suggested in order to understand more about the streams overall behavior\n              and semantics.</p>\n</div>"}, "XGROUP": {"category": "stream", "help_link": "/commands/xgroup", "args": ["[CREATE key groupname id-or-$]", "[SETID key groupname id-or-$]", "[DESTROY key groupname]", "[DELCONSUMER key groupname consumername]"], "summary": "Create, destroy, and manage consumer groups.", "name": "XGROUP", "help_text": "<div class=\"article-main\">\n<div class=\"metadata\">\n<p><strong>Available since 5.0.0.</strong></p>\n<p><strong>Time complexity:</strong> O(1) for all the subcommands, with the exception of the DESTROY subcommand which takes an additional O(M) time in order to delete the M entries inside the consumer group pending entries list (PEL).</p>\n</div>\n<p>This command is used in order to manage the consumer groups associated\n              with a stream data structure. Using <a href=\"/commands/xgroup\">XGROUP</a> you can:</p>\n<ul>\n<li>Create a new consumer group associated with a stream.</li>\n<li>Destroy a consumer group.</li>\n<li>Remove a specific consumer from a consumer group.</li>\n<li>Set the consumer group <em>last delivered ID</em> to something else.</li>\n</ul>\n<p>To create a new consumer group, use the following form:</p>\n<pre><code>XGROUP CREATE mystream consumer-group-name $\n</code></pre>\n<p>The last argument is the ID of the last item in the stream to consider already\n              delivered. In the above case we used the special ID '$' (that means: the ID\n              of the last item in the stream). In this case the consumers fetching data\n              from that consumer group will only see new elements arriving in the stream.</p>\n<p>If instead you want consumers to fetch the whole stream history, use\n              zero as the starting ID for the consumer group:</p>\n<pre><code>XGROUP CREATE mystream consumer-group-name 0\n</code></pre>\n<p>Of course it is also possible to use any other valid ID. If the specified\n              consumer group already exists, the command returns a <code>-BUSYGROUP</code> error.\n              Otherwise the operation is performed and OK is returned. There are no hard\n              limits to the number of consumer groups you can associate to a given stream.</p>\n<p>A consumer can be destroyed completely by using the following form:</p>\n<pre><code>XGROUP DESTROY mystream consumer-group-name\n</code></pre>\n<p>The consumer group will be destroyed even if there are active consumers\n              and pending messages, so make sure to call this command only when really\n              needed.</p>\n<p>To just remove a given consumer from a consumer group, the following\n              form is used:</p>\n<pre><code>XGROUP DELCONSUMER mystream consumer-group-name myconsumer123\n</code></pre>\n<p>Consumers in a consumer group are auto-created every time a new consumer\n              name is mentioned by some command. However sometimes it may be useful to\n              remove old consumers since they are no longer used. This form returns\n              the number of pending messages that the consumer had before it was deleted.</p>\n<p>Finally it possible to set the next message to deliver using the\n              <code>SETID</code> subcommand. Normally the next ID is set when the consumer is\n              created, as the last argument of <code>XGROUP CREATE</code>. However using this form\n              the next ID can be modified later without deleting and creating the consumer\n              group again. For instance if you want the consumers in a consumer group\n              to re-process all the messages in a stream, you may want to set its next\n              ID to 0:</p>\n<pre><code>XGROUP SETID mystream consumer-group-name 0\n</code></pre>\n<p>Finally to get some help if you don't remember the syntax, use the\n              HELP subcommand:</p>\n<pre><code>XGROUP HELP\n</code></pre>\n</div>"}, "XREADGROUP": {"category": "stream", "help_link": "/commands/xreadgroup", "args": ["GROUP group consumer", "[COUNT count]", "[BLOCK milliseconds]", "[NOACK]", "STREAMS", "key [key ...]", "ID [ID ...]"], "summary": "Return new entries from a stream using a consumer group, or access the history of the pending entries for a given consumer. Can block.", "name": "XREADGROUP", "help_text": "<div class=\"article-main\">\n<div class=\"metadata\">\n<p><strong>Available since 5.0.0.</strong></p>\n<p><strong>Time complexity:</strong> For each stream mentioned: O(M) with M being the number of elements returned. If M is constant (e.g. always asking for the first 10 elements with COUNT), you can consider it O(1). On the other side when XREADGROUP blocks, XADD will pay the O(N) time in order to serve the N clients blocked on the stream getting new data.</p>\n</div>\n<p>The <a href=\"/commands/xreadgroup\">XREADGROUP</a> command is a special version of the <a href=\"/commands/xread\">XREAD</a> command\n              with support for consumer groups. Probably you will have to understand the\n              <a href=\"/commands/xread\">XREAD</a> command before reading this page will makes sense.</p>\n<p>Moreover, if you are new to streams, we recommend to read our\n              <a href=\"/topics/streams-intro\">introduction to Redis Streams</a>.\n              Make sure to understand the concept of consumer group in the introduction\n              so that following how this command works will be simpler.</p>\n<span class=\"anchor\" id=\"consumer-groups-in-30-seconds\"></span><h2><a class=\"anchor-link\" href=\"#consumer-groups-in-30-seconds\">*</a>Consumer groups in 30 seconds</h2>\n<p>The difference between this command and the vanilla <a href=\"/commands/xread\">XREAD</a> is that this\n              one supports consumer groups.</p>\n<p>Without consumer groups, just using <a href=\"/commands/xread\">XREAD</a>, all the clients are served with all the entries arriving in a stream. Instead using consumer groups with <a href=\"/commands/xreadgroup\">XREADGROUP</a>, it is possible to create groups of clients that consume different parts of the messages arriving in a given stream. If, for instance, the stream gets the new entries A, B, and C and there are two consumers reading via a consumer group, one client will get, for instance, the messages A and C, and the other the message B, and so forth.</p>\n<p>Within a consumer group, a given consumer (that is, just a client consuming messages from the stream), has to identify with an unique <em>consumer name</em>. Which is just a string.</p>\n<p>One of the guarantees of consumer groups is that a given consumer can only see the history of messages that were delivered to it, so a message has just a single owner. However there is a special feature called <em>message claiming</em> that allows other consumers to claim messages in case there is a non recoverable failure of some consumer. In order to implement such semantics, consumer groups require explicit acknowledgement of the messages successfully processed by the consumer, via the <a href=\"/commands/xack\">XACK</a> command. This is needed because the stream will track, for each consumer group, who is processing what message.</p>\n<p>This is how to understand if you want to use a consumer group or not:</p>\n<ol>\n<li>If you have a stream and multiple clients, and you want all the clients to get all the messages, you do not need a consumer group.</li>\n<li>If you have a stream and multiple clients, and you want the stream to be <em>partitioned</em> or <em>sharded</em> across your clients, so that each client will get a sub set of the messages arriving in a stream, you need a consumer group.</li>\n</ol>\n<span class=\"anchor\" id=\"differences-between-xread-and-xreadgroup\"></span><h2><a class=\"anchor-link\" href=\"#differences-between-xread-and-xreadgroup\">*</a>Differences between XREAD and XREADGROUP</h2>\n<p>From the point of view of the syntax, the commands are almost the same,\n              however <a href=\"/commands/xreadgroup\">XREADGROUP</a> <em>requires</em> a special and mandatory option:</p>\n<pre><code>GROUP &lt;group-name&gt; &lt;consumer-name&gt;\n</code></pre>\n<p>The group name is just the name of a consumer group associated to the stream.\n              The group is created using the <a href=\"/commands/xgroup\">XGROUP</a> command. The consumer name is the\n              string that is used by the client to identify itself inside the group.\n              The consumer is auto created inside the consumer group the first time it\n              is saw. Different clients should select a different consumer name.</p>\n<p>When you read with <a href=\"/commands/xreadgroup\">XREADGROUP</a>, the server will <em>remember</em> that a given\n              message was delivered to you: the message will be stored inside the\n              consumer group in what is called a Pending Entries List (PEL), that is\n              a list of message IDs delivered but not yet acknowledged.</p>\n<p>The client will have to acknowledge the message processing using <a href=\"/commands/xack\">XACK</a>\n              in order for the pending entry to be removed from the PEL. The PEL\n              can be inspected using the <a href=\"/commands/xpending\">XPENDING</a> command.</p>\n<p>The <code>NOACK</code> subcommand can be used to avoid adding the message to the PEL in\n              cases where reliability is not a requirement and the occasional message loss\n              is acceptable. This is equivalent to acknowledging the message when it is read.</p>\n<p>The ID to specify in the <strong>STREAMS</strong> option when using <a href=\"/commands/xreadgroup\">XREADGROUP</a> can\n              be one of the following two:</p>\n<ul>\n<li>The special <code>&gt;</code> ID, which means that the consumer want to receive only messages that were <em>never delivered to any other consumer</em>. It just means, give me new messages.</li>\n<li>Any other ID, that is, 0 or any other valid ID or incomplete ID (just the millisecond time part), will have the effect of returning entries that are pending for the consumer sending the command with IDs equal or greater to the one provided. So basically if the ID is not <code>&gt;</code>, then the command will just let the client access its pending entries: messages delivered to it, but not yet acknowledged. Note that in this case, both <code>BLOCK</code> and <code>NOACK</code> are ignored.</li>\n</ul>\n<p>Like <a href=\"/commands/xread\">XREAD</a> the <a href=\"/commands/xreadgroup\">XREADGROUP</a> command can be used in a blocking way. There\n              are no differences in this regard.</p>\n<span class=\"anchor\" id=\"what-happens-when-a-message-is-delivered-to-a-consumer\"></span><h2><a class=\"anchor-link\" href=\"#what-happens-when-a-message-is-delivered-to-a-consumer\">*</a>What happens when a message is delivered to a consumer?</h2>\n<p>Two things:</p>\n<ol>\n<li>If the message was never delivered to anyone, that is, if we are talking about a new message, then a PEL (Pending Entry List) is created.</li>\n<li>If instead the message was already delivered to this consumer, and it is just re-fetching the same message again, then the <em>last delivery counter</em> is updated to the current time, and the <em>number of deliveries</em> is incremented by one. You can access those message properties using the <a href=\"/commands/xpending\">XPENDING</a> command.</li>\n</ol>\n<span class=\"anchor\" id=\"usage-example\"></span><h2><a class=\"anchor-link\" href=\"#usage-example\">*</a>Usage example</h2>\n<p>Normally you use the command like that in order to get new messages and\n              process them. In pseudo-code:</p>\n<pre><code>WHILE true\n    entries = XREADGROUP GROUP $GroupName $ConsumerName BLOCK 2000 COUNT 10 STREAMS mystream &gt;\n    if entries == nil\n        puts \"Timeout... try again\"\n        CONTINUE\n    end\n\n    FOREACH entries AS stream_entries\n        FOREACH stream_entries as message\n            process_message(message.id,message.fields)\n\n            # ACK the message as processed\n            XACK mystream $GroupName message.id\n        END\n    END\nEND\n</code></pre>\n<p>In this way the example consumer code will fetch only new messages, process\n              them, and acknowledge them via <a href=\"/commands/xack\">XACK</a>. However the example code above is\n              not complete, because it does not handle recovering after a crash. What\n              will happen if we crash in the middle of processing messages, is that our\n              messages will remain in the pending entries list, so we can access our\n              history by giving <a href=\"/commands/xreadgroup\">XREADGROUP</a> initially an ID of 0, and performing the same\n              loop. Once providing and ID of 0 the reply is an empty set of messages, we\n              know that we processed and acknowledged all the pending messages: we\n              can start to use <code>&gt;</code> as ID, in order to get the new messages and rejoin the\n              consumers that are processing new things.</p>\n<p>To see how the command actually replies, please check the <a href=\"/commands/xread\">XREAD</a> command page.</p>\n</div>"}, "XACK": {"category": "stream", "help_link": "/commands/xack", "args": ["key", "group", "ID [ID ...]"], "summary": "Marks a pending message as correctly processed, effectively removing it from the pending entries list of the consumer group. Return value of the command is the number of messages successfully acknowledged, that is, the IDs we were actually able to resolve in the PEL.", "name": "XACK", "help_text": "<div class=\"article-main\">\n<div class=\"metadata\">\n<p><strong>Available since 5.0.0.</strong></p>\n<p><strong>Time complexity:</strong> O(1) for each message ID processed.</p>\n</div>\n<p>The <a href=\"/commands/xack\">XACK</a> command removes one or multiple messages from the\n              <em>pending entries list</em> (PEL) of a stream consumer group. A message is pending,\n              and as such stored inside the PEL, when it was delivered to some consumer,\n              normally as a side effect of calling <a href=\"/commands/xreadgroup\">XREADGROUP</a>, or when a consumer took\n              ownership of a message calling <a href=\"/commands/xclaim\">XCLAIM</a>. The pending message was delivered to\n              some consumer but the server is yet not sure it was processed at least once.\n              So new calls to <a href=\"/commands/xreadgroup\">XREADGROUP</a> to grab the messages history for a consumer\n              (for instance using an ID of 0), will return such message.\n              Similarly the pending message will be listed by the <a href=\"/commands/xpending\">XPENDING</a> command,\n              that inspects the PEL.</p>\n<p>Once a consumer <em>successfully</em> processes a message, it should call <a href=\"/commands/xack\">XACK</a>\n              so that such message does not get processed again, and as a side effect,\n              the PEL entry about this message is also purged, releasing memory from the\n              Redis server.</p>\n<span class=\"anchor\" id=\"return-value\"></span><h2><a class=\"anchor-link\" href=\"#return-value\">*</a>Return value</h2>\n<p><a href=\"/topics/protocol#integer-reply\">Integer reply</a>, specifically:</p>\n<p>The command returns the number of messages successfully acknowledged.\n              Certain message IDs may no longer be part of the PEL (for example because\n              they have been already acknowledge), and XACK will not count them as\n              successfully acknowledged.</p>\n<div class=\"example\" data-session=\"866139544f66b732fe87ce397f9690ab\">\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<span class=\"monospace command\">XACK mystream mygroup 1526569495631-0</span>\n<pre>ERR Unknown or disabled command 'XACK'</pre><form>\n<span class=\"monospace prompt\">redis&gt;\u00a0</span>\n<input autocomplete=\"off\" name=\"command\" spellcheck=\"false\" type=\"text\"/>\n</form></div>\n</div>"}, "XCLAIM": {"category": "stream", "help_link": "/commands/xclaim", "args": ["key", "group", "consumer", "min-idle-time", "ID [ID ...]", "[IDLE ms]", "[TIME ms-unix-time]", "[RETRYCOUNT count]", "[FORCE]", "[JUSTID]"], "summary": "Changes (or acquires) ownership of a message in a consumer group, as if the message was delivered to the specified consumer.", "name": "XCLAIM", "help_text": "<div class=\"article-main\">\n<div class=\"metadata\">\n<p><strong>Available since 5.0.0.</strong></p>\n<p><strong>Time complexity:</strong> O(log N) with N being the number of messages in the PEL of the consumer group.</p>\n</div>\n<p>In the context of a stream consumer group, this command changes the ownership\n              of a pending message, so that the new owner is the consumer specified as the\n              command argument. Normally this is what happens:</p>\n<ol>\n<li>There is a stream with an associated consumer group.</li>\n<li>Some consumer A reads a message via <a href=\"/commands/xreadgroup\">XREADGROUP</a> from a stream, in the context of that consumer group.</li>\n<li>As a side effect a pending message entry is created in the pending entries list (PEL) of the consumer group: it means the message was delivered to a given consumer, but it was not yet acknowledged via <a href=\"/commands/xack\">XACK</a>.</li>\n<li>Then suddenly that consumer fails forever.</li>\n<li>Other consumers may inspect the list of pending messages, that are stale for quite some time, using the <a href=\"/commands/xpending\">XPENDING</a> command. In order to continue processing such messages, they use <a href=\"/commands/xclaim\">XCLAIM</a> to acquire the ownership of the message and continue.</li>\n</ol>\n<p>This dynamic is clearly explained in the <a href=\"/topics/streams-intro\">Stream intro documentation</a>.</p>\n<p>Note that the message is claimed only if its idle time is greater the minimum idle time we specify when calling <a href=\"/commands/xclaim\">XCLAIM</a>. Because as a side effect <a href=\"/commands/xclaim\">XCLAIM</a> will also reset the idle time (since this is a new attempt at processing the message), two consumers trying to claim a message at the same time will never both succeed: only one will successfully claim the message. This avoids that we process a given message multiple times in a trivial way (yet multiple processing is possible and unavoidable in the general case).</p>\n<p>Moreover, as a side effect, <a href=\"/commands/xclaim\">XCLAIM</a> will increment the count of attempted deliveries of the message unless the <code>JUSTID</code> option has been specified (which only delivers the message ID, not the message itself). In this way messages that cannot be processed for some reason, for instance because the consumers crash attempting to process them, will start to have a larger counter and can be detected inside the system.</p>\n<span class=\"anchor\" id=\"command-options\"></span><h2><a class=\"anchor-link\" href=\"#command-options\">*</a>Command options</h2>\n<p>The command has multiple options, however most are mainly for internal use in\n              order to transfer the effects of <a href=\"/commands/xclaim\">XCLAIM</a> or other commands to the AOF file\n              and to propagate the same effects to the slaves, and are unlikely to be\n              useful to normal users:</p>\n<ol>\n<li><code>IDLE &lt;ms&gt;</code>: Set the idle time (last time it was delivered) of the message. If IDLE is not specified, an IDLE of 0 is assumed, that is, the time count is reset because the message has now a new owner trying to process it.</li>\n<li><code>TIME &lt;ms-unix-time&gt;</code>: This is the same as IDLE but instead of a relative amount of milliseconds, it sets the idle time to a specific Unix time (in milliseconds). This is useful in order to rewrite the AOF file generating <a href=\"/commands/xclaim\">XCLAIM</a> commands.</li>\n<li><code>RETRYCOUNT &lt;count&gt;</code>: Set the retry counter to the specified value. This counter is incremented every time a message is delivered again. Normally <a href=\"/commands/xclaim\">XCLAIM</a> does not alter this counter, which is just served to clients when the XPENDING command is called: this way clients can detect anomalies, like messages that are never processed for some reason after a big number of delivery attempts.</li>\n<li><code>FORCE</code>: Creates the pending message entry in the PEL even if certain specified IDs are not already in the PEL assigned to a different client. However the message must be exist in the stream, otherwise the IDs of non existing messages are ignored.</li>\n<li><code>JUSTID</code>: Return just an array of IDs of messages successfully claimed, without returning the actual message. Using this option means the retry counter is not incremented.</li>\n</ol>\n<span class=\"anchor\" id=\"return-value\"></span><h2><a class=\"anchor-link\" href=\"#return-value\">*</a>Return value</h2>\n<p><a href=\"/topics/protocol#array-reply\">Array reply</a>, specifically:</p>\n<p>The command returns all the messages successfully claimed, in the same format\n              as <a href=\"/commands/xrange\">XRANGE</a>. However if the <code>JUSTID</code> option was specified, only the message\n              IDs are reported, without including the actual message.</p>\n<p>Example:</p>\n<pre><code>&gt; XCLAIM mystream mygroup Alice 3600000 1526569498055-0\n1) 1) 1526569498055-0\n   2) 1) \"message\"\n      2) \"orange\"\n</code></pre>\n<p>In the above example we claim the message with ID <code>1526569498055-0</code>, only if the message is idle for at least one hour without the original consumer or some other consumer making progresses (acknowledging or claiming it), and assigns the ownership to the consumer <code>Alice</code>.</p>\n</div>"}, "XPENDING": {"category": "stream", "help_link": "/commands/xpending", "args": ["key", "group", "[start end count]", "[consumer]"], "summary": "Return information and entries from a stream consumer group pending entries list, that are messages fetched but never acknowledged.", "name": "XPENDING", "help_text": "<div class=\"article-main\">\n<div class=\"metadata\">\n<p><strong>Available since 5.0.0.</strong></p>\n<p><strong>Time complexity:</strong> O(N) with N being the number of elements returned, so asking for a small fixed number of entries per call is O(1). When the command returns just the summary it runs in O(1) time assuming the list of consumers is small, otherwise there is additional O(N) time needed to iterate every consumer.</p>\n</div>\n<p>Fetching data from a stream via a consumer group, and not acknowledging\n              such data, has the effect of creating <em>pending entries</em>. This is\n              well explained in the <a href=\"/commands/xreadgroup\">XREADGROUP</a> command, and even better in our\n              <a href=\"/topics/streams-intro\">introduction to Redis Streams</a>. The <a href=\"/commands/xack\">XACK</a> command\n              will immediately remove the pending entry from the Pending Entry List (PEL)\n              since once a message is successfully processed, there is no longer need\n              for the consumer group to track it and to remember the current owner\n              of the message.</p>\n<p>The <a href=\"/commands/xpending\">XPENDING</a> command is the interface to inspect the list of pending\n              messages, and is as thus a very important command in order to observe\n              and understand what is happening with a streams consumer groups: what\n              clients are active, what messages are pending to be consumed, or to see\n              if there are idle messages. Moreover this command, together with <a href=\"/commands/xclaim\">XCLAIM</a>\n              is used in order to implement recovering of consumers that are failing\n              for a long time, and as a result certain messages are not processed: a\n              different consumer can claim the message and continue. This is better\n              explained in the <a href=\"/topics/streams-intro\">streams intro</a> and in the\n              <a href=\"/commands/xclaim\">XCLAIM</a> command page, and is not covered here.</p>\n<span class=\"anchor\" id=\"summary-form-of-xpending\"></span><h2><a class=\"anchor-link\" href=\"#summary-form-of-xpending\">*</a>Summary form of XPENDING</h2>\n<p>When <a href=\"/commands/xpending\">XPENDING</a> is called with just a key name and a consumer group\n              name, it just outputs a summary about the pending messages in a given\n              consumer group. In the following example, we create a consumed group and\n              immediately create a pending message by reading from the group with\n              <a href=\"/commands/xreadgroup\">XREADGROUP</a>.</p>\n<pre><code>&gt; XGROUP CREATE mystream group55 0-0\nOK\n\n&gt; XREADGROUP GROUP group55 consumer-123 COUNT 1 STREAMS mystream &gt;\n1) 1) \"mystream\"\n   2) 1) 1) 1526984818136-0\n         2) 1) \"duration\"\n            2) \"1532\"\n            3) \"event-id\"\n            4) \"5\"\n            5) \"user-id\"\n            6) \"7782813\"\n</code></pre>\n<p>We expect the pending entries list for the consumer group <code>group55</code> to\n              have a message right now: consumer named <code>consumer-123</code> fetched the\n              message without acknowledging its processing. The simples <a href=\"/commands/xpending\">XPENDING</a>\n              form will give us this information:</p>\n<pre><code>&gt; XPENDING mystream group55\n1) (integer) 1\n2) 1526984818136-0\n3) 1526984818136-0\n4) 1) 1) \"consumer-123\"\n      2) \"1\"\n</code></pre>\n<p>In this form, the command outputs the total number of pending messages for this\n              consumer group, which is one, followed by the smallest and greatest ID among the\n              pending messages, and then list every consumer in the consumer group with\n              at least one pending message, and the number of pending messages it has.</p>\n<p>This is a good overview, but sometimes we are interested in the details.\n              In order to see all the pending messages with more associated information\n              we need to also pass a range of IDs, in a similar way we do it with\n              <a href=\"/commands/xrange\">XRANGE</a>, and a non optional <em>count</em> argument, to limit the number\n              of messages returned per call:</p>\n<pre><code>&gt; XPENDING mystream group55 - + 10\n1) 1) 1526984818136-0\n   2) \"consumer-123\"\n   3) (integer) 196415\n   4) (integer) 1\n</code></pre>\n<p>In the extended form we no longer see the summary information, instead there\n              are detailed information for each message in the pending entries list. For\n              each message four attributes are returned:</p>\n<ol>\n<li>The ID of the message.</li>\n<li>The name of the consumer that fetched the message and has still to acknowledge it. We call it the current <em>owner</em> of the message.</li>\n<li>The number of milliseconds that elapsed since the last time this message was delivered to this consumer.</li>\n<li>The number of times this message was delivered.</li>\n</ol>\n<p>The deliveries counter, that is the fourth element in the array, is incremented\n              when some other consumer <em>claims</em> the message with <a href=\"/commands/xclaim\">XCLAIM</a>, or when the\n              message is delivered again via <a href=\"/commands/xreadgroup\">XREADGROUP</a>, when accessing the history\n              of a consumer in a consumer group (see the <a href=\"/commands/xreadgroup\">XREADGROUP</a> page for more info).</p>\n<p>Finally it is possible to pass an additional argument to the command, in order\n              to see the messages having a specific owner:</p>\n<pre><code>&gt; XPENDING mystream group55 - + 10 consumer-123\n</code></pre>\n<p>But in the above case the output would be the same, since we have pending\n              messages only for a single consumer. However what is important to keep in\n              mind is that this operation, filtering by a specific consumer, is not\n              inefficient even when there are many pending messages from many consumers:\n              we have a pending entries list data structure both globally, and for\n              every consumer, so we can very efficiently show just messages pending for\n              a single consumer.</p>\n<span class=\"anchor\" id=\"return-value\"></span><h2><a class=\"anchor-link\" href=\"#return-value\">*</a>Return value</h2>\n<p><a href=\"/topics/protocol#array-reply\">Array reply</a>, specifically:</p>\n<p>The command returns data in different format depending on the way it is\n              called, as previously explained in this page. However the reply is always\n              an array of items.</p>\n</div>"}}
